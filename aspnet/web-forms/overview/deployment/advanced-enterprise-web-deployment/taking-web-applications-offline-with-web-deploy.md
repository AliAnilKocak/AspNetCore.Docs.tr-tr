---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/taking-web-applications-offline-with-web-deploy
title: Alma Web çevrimdışı ile Web uygulamalarını dağıtma | Microsoft Docs
author: jrjlee
description: Bu konu, Internet Information Services (IIS) Web Dağı kullanarak bir otomatik dağıtım süre için çevrimdışı web uygulaması yapılacak açıklar...
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 3e9f6e7d-8967-4586-94d5-d3a122f12529
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/taking-web-applications-offline-with-web-deploy
msc.type: authoredcontent
ms.openlocfilehash: 511201dc5646340b21023430fa319417f2b53ae2
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/06/2018
---
<a name="taking-web-applications-offline-with-web-deploy"></a><span data-ttu-id="3afd5-103">Alma Web çevrimdışı ile Web uygulamalarını dağıtma</span><span class="sxs-lookup"><span data-stu-id="3afd5-103">Taking Web Applications Offline with Web Deploy</span></span>
====================
<span data-ttu-id="3afd5-104">tarafından [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="3afd5-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="3afd5-105">PDF indirin</span><span class="sxs-lookup"><span data-stu-id="3afd5-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="3afd5-106">Bu konuda, bir web uygulaması çevrimdışı için Internet Information Services (IIS) Web Dağıtım Aracı (Web dağıtımı) kullanarak bir otomatik dağıtım süresini yapılacak açıklar.</span><span class="sxs-lookup"><span data-stu-id="3afd5-106">This topic describes how to take a web application offline for the duration of an automated deployment using the Internet Information Services (IIS) Web Deployment Tool (Web Deploy).</span></span> <span data-ttu-id="3afd5-107">Web uygulaması'na göz kullanıcılar için yönlendirilir bir *uygulama\_offline.htm* dağıtım işlemi tamamlanana kadar dosya.</span><span class="sxs-lookup"><span data-stu-id="3afd5-107">Users who browse to the web application are redirected to an *App\_offline.htm* file until the deployment is complete.</span></span>


<span data-ttu-id="3afd5-108">Bu konuda eğitim serileri Fabrikam Ltd. adlı kurgusal bir şirket kurumsal dağıtım gereksinimleri dayalı parçası formlar Bu öğretici seri kullanan örnek bir çözüm&#x2014; [Contact Manager çözüm](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;bir ASP.NET MVC 3 uygulama, bir Windows Communication dahil olmak üzere karmaşıklıkta gerçekçi düzeyine sahip bir web uygulaması temsil etmek için Foundation (WCF) hizmetini ve veritabanı projesi.</span><span class="sxs-lookup"><span data-stu-id="3afd5-108">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="3afd5-109">Bu öğreticileri merkezinde dağıtım yöntemi, açıklanan bölünmüş proje dosyası yaklaşım dayalı [proje dosyası anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md), hangi derleme süreci tarafından denetlenen içinde iki dosyaları proje&#x2014;bir içeren Her hedef ortam ve ortama özgü derleme ve dağıtım ayarları içeren bir için geçerli olan yönergeleri oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3afd5-109">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="3afd5-110">Derleme zamanında ortama özgü proje dosyası oluşturma yönergeleri eksiksiz bir kümesini oluşturmak için ortam belirsiz proje dosyasına birleştirilir.</span><span class="sxs-lookup"><span data-stu-id="3afd5-110">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="3afd5-111">Görev genel bakış</span><span class="sxs-lookup"><span data-stu-id="3afd5-111">Task Overview</span></span>

<span data-ttu-id="3afd5-112">İçinde çok sayıda senaryoları, veritabanları veya web Hizmetleri gibi ilgili bileşenler için değişiklikler yaparken bir web uygulaması çevrimdışına istersiniz.</span><span class="sxs-lookup"><span data-stu-id="3afd5-112">In a lot of scenarios, you'll want to take a web application offline while you make changes to related components, like databases or web services.</span></span> <span data-ttu-id="3afd5-113">Genellikle, IIS ve ASP.NET, bunu adlı bir dosya koyarak gerçekleştirirsiniz *uygulama\_offline.htm* IIS Web sitesi veya web uygulamasının kök klasöründe.</span><span class="sxs-lookup"><span data-stu-id="3afd5-113">Typically, in IIS and ASP.NET, you accomplish this by placing a file named *App\_offline.htm* in the root folder of the IIS website or web application.</span></span> <span data-ttu-id="3afd5-114">*Uygulama\_offline.htm* dosya standart bir HTML dosyası ve genellikle kullanıcı site bakım nedeniyle geçici olarak devre dışı olduğunu bildiren basit bir ileti içerir.</span><span class="sxs-lookup"><span data-stu-id="3afd5-114">The *App\_offline.htm* file is a standard HTML file and will usually contain a simple message advising the user that the site is temporarily unavailable due to maintenance.</span></span> <span data-ttu-id="3afd5-115">Sırada *uygulama\_offline.htm* dosya var Web sitesinin kök klasöründe, IIS otomatik olarak yeniden yönlendirme tüm istekler için dosya.</span><span class="sxs-lookup"><span data-stu-id="3afd5-115">While the *App\_offline.htm* file exists in the root folder of the website, IIS will automatically redirect any requests to the file.</span></span> <span data-ttu-id="3afd5-116">Güncelleştirmeleri yapma tamamladığınızda kaldırdığınız *uygulama\_offline.htm* dosyası ve Web sitesini devam ettirir istekleri her zamanki gibi hizmet veren.</span><span class="sxs-lookup"><span data-stu-id="3afd5-116">When you've finished making updates, you remove the *App\_offline.htm* file and the website resumes serving requests as usual.</span></span>

<span data-ttu-id="3afd5-117">Hedef ortam için otomatik olarak veya tek adımlı dağıtımları gerçekleştirmek için Web dağıtımı kullandığınızda, ekleme ve kaldırma dahil isteyebilirsiniz *uygulama\_offline.htm* dağıtım işleminiz dosyasına.</span><span class="sxs-lookup"><span data-stu-id="3afd5-117">When you use Web Deploy to perform automated or single-step deployments to a target environment, you may want to incorporate adding and removing the *App\_offline.htm* file into your deployment process.</span></span> <span data-ttu-id="3afd5-118">Bunu yapmak için bu üst düzey görevleri tamamlamanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="3afd5-118">To do this, you'll need to complete these high-level tasks:</span></span>

- <span data-ttu-id="3afd5-119">Microsoft Build Engine (MSBuild) proje dosyasında dağıtım işlemini denetleyen bir MSBuild hedef oluşturmak için kullanmanız kopyalar bir *uygulama\_offline.htm* dosyasını hedef sunucuya önce tüm dağıtım görevleri başlayın.</span><span class="sxs-lookup"><span data-stu-id="3afd5-119">In the Microsoft Build Engine (MSBuild) project file that you use to control the deployment process, create an MSBuild target that copies an *App\_offline.htm* file to the destination server before any deployment tasks begin.</span></span>
- <span data-ttu-id="3afd5-120">Kaldırır başka bir MSBuild hedef ekleme *uygulama\_offline.htm* tüm dağıtım görevler tamamlandığında hedef sunucudan dosya.</span><span class="sxs-lookup"><span data-stu-id="3afd5-120">Add another MSBuild target that removes the *App\_offline.htm* file from the destination server when all deployment tasks are complete.</span></span>
- <span data-ttu-id="3afd5-121">Web uygulaması projesi oluşturduğunuzda bir *. wpp.targets* sağlar dosya bir *uygulama\_offline.htm* Web dağıtımı çağrıldığında dosya Dağıtım paketine eklenir.</span><span class="sxs-lookup"><span data-stu-id="3afd5-121">In the web application project, create a *.wpp.targets* file that ensures that an *App\_offline.htm* file is added to the deployment package when Web Deploy is invoked.</span></span>

<span data-ttu-id="3afd5-122">Bu konuda bu yordamları gerçekleştirmek nasıl yapacağınızı gösterir.</span><span class="sxs-lookup"><span data-stu-id="3afd5-122">This topic will show you how to perform these procedures.</span></span> <span data-ttu-id="3afd5-123">Görevleri ve bu konudaki yönergeler en az bir web uygulaması projesi içeren bir çözüm önceden oluşturduğunuz ve dağıtım işlemini açıklandığı gibi denetlemek için özel proje dosyasını kullanmanız varsayılır [Web dağıtımı Kurumsal](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md).</span><span class="sxs-lookup"><span data-stu-id="3afd5-123">The tasks and walkthroughs in this topic assume that you've already created a solution that contains at least one web application project, and that you use a custom project file to control the deployment process as described in [Web Deployment in the Enterprise](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md).</span></span> <span data-ttu-id="3afd5-124">Alternatif olarak, kullanabileceğiniz [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) örnek çözümü konudaki örnekler izleyin.</span><span class="sxs-lookup"><span data-stu-id="3afd5-124">Alternatively, you can use the [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) sample solution to follow the examples in the topic.</span></span>

## <a name="adding-an-appoffline-file-to-a-web-application-project"></a><span data-ttu-id="3afd5-125">Bir uygulama ekleme\_bir Web uygulaması projesi için çevrimdışı dosya</span><span class="sxs-lookup"><span data-stu-id="3afd5-125">Adding an App\_Offline File to a Web Application Project</span></span>

<span data-ttu-id="3afd5-126">Tamamlamanız gereken ilk görev eklemek için bir *uygulama\_çevrimdışı* web uygulaması projenize dosyası:</span><span class="sxs-lookup"><span data-stu-id="3afd5-126">The first task you need to complete is to add an *App\_offline* file to your web application project:</span></span>

- <span data-ttu-id="3afd5-127">Dosya geliştirme işlemine engellemesini önlemek amacıyla (uygulamanızın kalıcı olarak çevrimdışı olmasını istemiyorsanız), onu bir şey dışında çağırmalısınız *uygulama\_offline.htm*.</span><span class="sxs-lookup"><span data-stu-id="3afd5-127">To prevent the file from interfering with the development process (you don't want your application to be permanently offline), you should call it something other than *App\_offline.htm*.</span></span> <span data-ttu-id="3afd5-128">Örneğin, dosyayı adlandırabilirsiniz *uygulama\_template.htm çevrimdışı*.</span><span class="sxs-lookup"><span data-stu-id="3afd5-128">For example, you could name the file *App\_offline-template.htm*.</span></span>
- <span data-ttu-id="3afd5-129">Dosya olarak dağıtılan önlemek için-olduğu yapı eylemi ayarlamalıdır **hiçbiri**.</span><span class="sxs-lookup"><span data-stu-id="3afd5-129">To prevent the file from being deployed as-is, you should set the build action to **None**.</span></span>

<span data-ttu-id="3afd5-130">**Bir uygulama eklemek için\_bir web uygulaması projesi için çevrimdışı dosya**</span><span class="sxs-lookup"><span data-stu-id="3afd5-130">**To add an App\_offline file to a web application project**</span></span>

1. <span data-ttu-id="3afd5-131">Çözümünüzü Visual Studio 2010'da açın.</span><span class="sxs-lookup"><span data-stu-id="3afd5-131">Open your solution in Visual Studio 2010.</span></span>
2. <span data-ttu-id="3afd5-132">İçinde **Çözüm Gezgini** penceresinde, web uygulaması projenize sağ tıklayın, fareyle **Ekle**ve ardından **yeni öğe**.</span><span class="sxs-lookup"><span data-stu-id="3afd5-132">In the **Solution Explorer** window, right-click your web application project, point to **Add**, and then click **New Item**.</span></span>
3. <span data-ttu-id="3afd5-133">İçinde **Yeni Öğe Ekle** iletişim kutusunda **HTML sayfası**.</span><span class="sxs-lookup"><span data-stu-id="3afd5-133">In the **Add New Item** dialog box, select **HTML Page**.</span></span>
4. <span data-ttu-id="3afd5-134">İçinde **adı** kutusuna **uygulama\_template.htm çevrimdışı**ve ardından **Ekle**.</span><span class="sxs-lookup"><span data-stu-id="3afd5-134">In the **Name** box, type **App\_offline-template.htm**, and then click **Add**.</span></span>

    ![](taking-web-applications-offline-with-web-deploy/_static/image1.png)
5. <span data-ttu-id="3afd5-135">Kullanıcıların uygulama kullanılamaz olduğunu bildirmek üzere bazı basit HTML ekleyin ve ardından dosyayı kaydedin.</span><span class="sxs-lookup"><span data-stu-id="3afd5-135">Add some simple HTML to inform users that the application is unavailable, and then save the file.</span></span> <span data-ttu-id="3afd5-136">Herhangi bir sunucu tarafı etiket içermez (örneğin, ile önek tüm etiketleri "asp:").</span><span class="sxs-lookup"><span data-stu-id="3afd5-136">Do not include any server-side tags (for example, any tags that are prefixed with "asp:").</span></span> 

    ![](taking-web-applications-offline-with-web-deploy/_static/image2.png)
6. <span data-ttu-id="3afd5-137">İçinde **Çözüm Gezgini** penceresinde, yeni dosyaya sağ tıklayın ve ardından **özellikleri**.</span><span class="sxs-lookup"><span data-stu-id="3afd5-137">In the **Solution Explorer** window, right-click the new file, and then click **Properties**.</span></span>
7. <span data-ttu-id="3afd5-138">İçinde **özellikleri** penceresi, **yapı eylemi** satır, select **hiçbiri**.</span><span class="sxs-lookup"><span data-stu-id="3afd5-138">In the **Properties** window, in the **Build Action** row, select **None**.</span></span>

    ![](taking-web-applications-offline-with-web-deploy/_static/image3.png)

## <a name="deploying-and-deleting-an-appoffline-file"></a><span data-ttu-id="3afd5-139">Dağıtma ve uygulama silme\_çevrimdışı dosya</span><span class="sxs-lookup"><span data-stu-id="3afd5-139">Deploying and Deleting an App\_Offline File</span></span>

<span data-ttu-id="3afd5-140">Sonraki adım, dosyayı dağıtım işlemi başlangıcında hedef sunucuya kopyalayın ve sonunda kaldırmak için dağıtım mantığınızı değiştirmektir.</span><span class="sxs-lookup"><span data-stu-id="3afd5-140">The next step is to modify your deployment logic to copy the file to the destination server at the start of the deployment process and remove it at the end.</span></span>

> [!NOTE]
> <span data-ttu-id="3afd5-141">Sonraki yordam özel MSBuild proje dosyası, dağıtım işleminiz denetlemek için açıklandığı gibi kullandığınız olduğunu varsayar [proje dosyası anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span><span class="sxs-lookup"><span data-stu-id="3afd5-141">The next procedure assumes that you're using a custom MSBuild project file to control your deployment process, as described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span> <span data-ttu-id="3afd5-142">Visual Studio'dan doğrudan dağıtıyorsanız, farklı bir yaklaşım kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="3afd5-142">If you're deploying direct from Visual Studio, you'll need to use a different approach.</span></span> <span data-ttu-id="3afd5-143">Bu tür bir yaklaşım sayed Ibrahim Hashimi açıklar [nasıl ele bilgisayarınızı Web uygulaması çevrimdışı sırasında yayımlama](http://sedodream.com/2012/01/08/HowToTakeYourWebAppOfflineDuringPublishing.aspx).</span><span class="sxs-lookup"><span data-stu-id="3afd5-143">Sayed Ibrahim Hashimi describes one such approach in [How to Take Your Web App Offline During Publishing](http://sedodream.com/2012/01/08/HowToTakeYourWebAppOfflineDuringPublishing.aspx).</span></span>


<span data-ttu-id="3afd5-144">Dağıtmak için bir *uygulama\_çevrimdışı* dosya MSDeploy.exe kullanarak çağırmak gereken bir hedef IIS Web sitesini [Web dağıtımı **contentPath** sağlayıcı](https://technet.microsoft.com/library/dd569034(WS.10).aspx).</span><span class="sxs-lookup"><span data-stu-id="3afd5-144">To deploy an *App\_offline* file to a destination IIS website, you need to invoke MSDeploy.exe using the [Web Deploy **contentPath** provider](https://technet.microsoft.com/library/dd569034(WS.10).aspx).</span></span> <span data-ttu-id="3afd5-145">**ContentPath** sağlayıcının desteklediği fiziksel dizin yolu ve IIS Web sitesi veya uygulama yolu, Visual Studio Proje klasörünü ve bir IIS web uygulaması arasında bir dosya eşitleme için ideal seçim kolaylaşır.</span><span class="sxs-lookup"><span data-stu-id="3afd5-145">The **contentPath** provider supports both physical directory paths and IIS website or application paths, which makes it the ideal choice for synchronizing a file between a Visual Studio project folder and an IIS web application.</span></span> <span data-ttu-id="3afd5-146">Dosyayı dağıtmak için MSDeploy komutunuzu şuna benzemelidir:</span><span class="sxs-lookup"><span data-stu-id="3afd5-146">To deploy the file, your MSDeploy command should resemble this:</span></span>


[!code-console[Main](taking-web-applications-offline-with-web-deploy/samples/sample1.cmd)]


<span data-ttu-id="3afd5-147">Dağıtım işlemi sonunda hedef sitesinden dosyayı kaldırmak için MSDeploy komutunuzu şuna benzemelidir:</span><span class="sxs-lookup"><span data-stu-id="3afd5-147">To remove the file from the destination site at the end of the deployment process, your MSDeploy command should resemble this:</span></span>


[!code-console[Main](taking-web-applications-offline-with-web-deploy/samples/sample2.cmd)]


<span data-ttu-id="3afd5-148">Derleme ve dağıtım işleminin bir parçası bu komutları otomatikleştirmek için özel MSBuild proje dosyanıza tümleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="3afd5-148">To automate these commands as part of a build and deployment process, you need to integrate them into your custom MSBuild project file.</span></span> <span data-ttu-id="3afd5-149">Sonraki yordam bunun nasıl yapılacağını açıklar.</span><span class="sxs-lookup"><span data-stu-id="3afd5-149">The next procedure describes how to do this.</span></span>

<span data-ttu-id="3afd5-150">**Dağıtma ve bir uygulamayı silmek için\_çevrimdışı dosya**</span><span class="sxs-lookup"><span data-stu-id="3afd5-150">**To deploy and delete an App\_offline file**</span></span>

1. <span data-ttu-id="3afd5-151">Visual Studio 2010'da, dağıtım işleminiz denetimleri MSBuild proje dosyasını açın.</span><span class="sxs-lookup"><span data-stu-id="3afd5-151">In Visual Studio 2010, open the MSBuild project file that controls your deployment process.</span></span> <span data-ttu-id="3afd5-152">İçinde [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) örnek çözümü budur *Publish.proj* dosya.</span><span class="sxs-lookup"><span data-stu-id="3afd5-152">In the [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) sample solution, this is the *Publish.proj* file.</span></span>
2. <span data-ttu-id="3afd5-153">Kök **proje** öğesi, yeni bir **PropertyGroup** değişkenleri depolamak için öğesi *uygulama\_çevrimdışı* dağıtım:</span><span class="sxs-lookup"><span data-stu-id="3afd5-153">In the root **Project** element, create a new **PropertyGroup** element to store variables for the *App\_offline* deployment:</span></span>

    [!code-xml[Main](taking-web-applications-offline-with-web-deploy/samples/sample3.xml)]
3. <span data-ttu-id="3afd5-154">**SourceRoot** özelliği tanımlanmış başka bir yerde *Publish.proj* dosya.</span><span class="sxs-lookup"><span data-stu-id="3afd5-154">The **SourceRoot** property is defined elsewhere in the *Publish.proj* file.</span></span> <span data-ttu-id="3afd5-155">Göreli geçerli kaynak içerik için kök klasör konumunu belirten&#x2014;diğer bir deyişle, göreli konumunu *Publish.proj* dosya.</span><span class="sxs-lookup"><span data-stu-id="3afd5-155">It indicates the location of the root folder for the source content relative to the current path&#x2014;in other words, relative to the location of the *Publish.proj* file.</span></span>
4. <span data-ttu-id="3afd5-156">**ContentPath** sağlayıcısı değil kabul edeceği göreli dosya yolları dağıtabilmeniz için önce bir mutlak yol kaynak dosyanıza almanız gereken şekilde.</span><span class="sxs-lookup"><span data-stu-id="3afd5-156">The **contentPath** provider will not accept relative file paths, so you need to get an absolute path to your source file before you can deploy it.</span></span> <span data-ttu-id="3afd5-157">Kullanabileceğiniz [ConvertToAbsolutePath](https://msdn.microsoft.com/library/bb882668.aspx) Bunu yapmak için görev.</span><span class="sxs-lookup"><span data-stu-id="3afd5-157">You can use the [ConvertToAbsolutePath](https://msdn.microsoft.com/library/bb882668.aspx) task to do this.</span></span>
5. <span data-ttu-id="3afd5-158">Yeni bir ekleme **hedef** adlı öğe **GetAppOfflineAbsolutePath**.</span><span class="sxs-lookup"><span data-stu-id="3afd5-158">Add a new **Target** element named **GetAppOfflineAbsolutePath**.</span></span> <span data-ttu-id="3afd5-159">Bu hedef içinde kullanmak **ConvertToAbsolutePath** mutlak bir yol almak için görev *uygulama\_şablonu çevrimdışı* proje klasörünüzdeki dosya.</span><span class="sxs-lookup"><span data-stu-id="3afd5-159">Within this target, use the **ConvertToAbsolutePath** task to get an absolute path to the *App\_offline-template* file in your project folder.</span></span>

    [!code-xml[Main](taking-web-applications-offline-with-web-deploy/samples/sample4.xml)]
6. <span data-ttu-id="3afd5-160">Bu hedef için göreli yol alır *uygulama\_şablonu çevrimdışı* proje klasörünüzdeki dosya ve yeni bir özellik mutlak bir dosya yolu olarak kaydeder.</span><span class="sxs-lookup"><span data-stu-id="3afd5-160">This target takes the relative path to the *App\_offline-template* file in your project folder and saves it to a new property as an absolute file path.</span></span> <span data-ttu-id="3afd5-161">**BeforeTargets** özniteliği belirtir. Bu hedef önce yürütülecek istediğiniz **DeployAppOffline** sonraki adımda oluşturacağınız hedef.</span><span class="sxs-lookup"><span data-stu-id="3afd5-161">The **BeforeTargets** attribute specifies that you want this target to execute before the **DeployAppOffline** target, which you'll create in the next step.</span></span>
7. <span data-ttu-id="3afd5-162">Adlı yeni bir hedef ekleme **DeployAppOffline**.</span><span class="sxs-lookup"><span data-stu-id="3afd5-162">Add a new target named **DeployAppOffline**.</span></span> <span data-ttu-id="3afd5-163">Bu hedef içinde dağıtır MSDeploy.exe komut çağırma, *uygulama\_çevrimdışı* hedef web sunucusuna dosya.</span><span class="sxs-lookup"><span data-stu-id="3afd5-163">Within this target, invoke the MSDeploy.exe command that deploys your *App\_offline* file to the destination web server.</span></span>

    [!code-xml[Main](taking-web-applications-offline-with-web-deploy/samples/sample5.xml)]
8. <span data-ttu-id="3afd5-164">Bu örnekte, **ContactManagerIisPath** özelliği başka bir yerde proje dosyasında tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="3afd5-164">In this example, the **ContactManagerIisPath** property is defined elsewhere in the project file.</span></span> <span data-ttu-id="3afd5-165">Bu yalnızca bir IIS uygulama yolu, biçiminde olduğunu *[IIS Web sitesi adı] / [uygulama adı]*.</span><span class="sxs-lookup"><span data-stu-id="3afd5-165">This is simply an IIS application path, in the form *[IIS Website Name]/[Application Name]*.</span></span> <span data-ttu-id="3afd5-166">Hedef bir koşul da dahil olmak üzere, geçiş yapmak kullanıcıların sağlar *uygulama\_çevrimdışı* bir özellik değerini değiştirme veya komut satırı parametresi sağlanarak dağıtım açıp kapatma.</span><span class="sxs-lookup"><span data-stu-id="3afd5-166">Including a condition in the target enables users to switch the *App\_offline* deployment on or off by changing a property value or providing a command-line parameter.</span></span>
9. <span data-ttu-id="3afd5-167">Adlı yeni bir hedef ekleme **DeleteAppOffline**.</span><span class="sxs-lookup"><span data-stu-id="3afd5-167">Add a new target named **DeleteAppOffline**.</span></span> <span data-ttu-id="3afd5-168">Bu hedef içinde kaldırır MSDeploy.exe komut çağırma, *uygulama\_çevrimdışı* hedef web sunucusundan dosya.</span><span class="sxs-lookup"><span data-stu-id="3afd5-168">Within this target, invoke the MSDeploy.exe command that removes your *App\_offline* file from the destination web server.</span></span>

    [!code-xml[Main](taking-web-applications-offline-with-web-deploy/samples/sample6.xml)]
10. <span data-ttu-id="3afd5-169">Son Proje dosyanızı yürütme sırasında bu yeni hedeflere uygun noktalarda çağrılacak bir görevdir.</span><span class="sxs-lookup"><span data-stu-id="3afd5-169">The final task is to invoke these new targets at appropriate points during the execution of your project file.</span></span> <span data-ttu-id="3afd5-170">Çeşitli yollarla bunu yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3afd5-170">You can do this in various ways.</span></span> <span data-ttu-id="3afd5-171">Örneğin, *Publish.proj* dosyası **FullPublishDependsOn** özelliği yürütülmelidir hedefleri listesini belirtir, sipariş ne zaman **FullPublish** varsayılan Hedef çağrılır.</span><span class="sxs-lookup"><span data-stu-id="3afd5-171">For example, in the *Publish.proj* file, the **FullPublishDependsOn** property specifies a list of targets that must be executed in order when the **FullPublish** default target is invoked.</span></span>
11. <span data-ttu-id="3afd5-172">Çağrılacak MSBuild proje dosyanızı değiştirmek **DeployAppOffline** ve **DeleteAppOffline** yayımlama işlemi uygun noktalarında hedefler.</span><span class="sxs-lookup"><span data-stu-id="3afd5-172">Modify your MSBuild project file to invoke the **DeployAppOffline** and **DeleteAppOffline** targets at appropriate points in the publishing process.</span></span>

    [!code-xml[Main](taking-web-applications-offline-with-web-deploy/samples/sample7.xml)]

<span data-ttu-id="3afd5-173">Özel, MSBuild proje dosyası çalıştırdığınızda *uygulama\_çevrimdışı* dosya dağıtılacak sunucuya hemen başarılı derleme sonrası.</span><span class="sxs-lookup"><span data-stu-id="3afd5-173">When you run your custom MSBuild project file, the *App\_offline* file will be deployed to the server immediately after a successful build.</span></span> <span data-ttu-id="3afd5-174">Tüm dağıtım görevleri tamamlandıktan sonra sunucudan sonra silinir.</span><span class="sxs-lookup"><span data-stu-id="3afd5-174">It will then be deleted from the server once all the deployment tasks are complete.</span></span>

## <a name="adding-an-appoffline-file-to-deployment-packages"></a><span data-ttu-id="3afd5-175">Bir uygulama ekleme\_dağıtım paketleri için çevrimdışı dosya</span><span class="sxs-lookup"><span data-stu-id="3afd5-175">Adding an App\_Offline File to Deployment Packages</span></span>

<span data-ttu-id="3afd5-176">Dağıtımınızı nasıl yapılandırdığınıza bağlı olarak herhangi bir IIS hedefte içerik varolan web uygulaması&#x2014;gibi *uygulama\_offline.htm* dosya&#x2014;bir web dağıtımı otomatik olarak silinebilir paketi hedef.</span><span class="sxs-lookup"><span data-stu-id="3afd5-176">Depending on how you configure your deployment, any existing content at the destination IIS web application&#x2014;like the *App\_offline.htm* file&#x2014;may be deleted automatically when you deploy a web package to the destination.</span></span> <span data-ttu-id="3afd5-177">Emin olmak için *uygulama\_offline.htm* dosyası için dağıtım süresini yerde kalır, dosyanın doğrudan başlangıcında dağıtmak için web dağıtım paketi kendisini dosyasında ayrıca eklemeniz gerekir dağıtım işlemi.</span><span class="sxs-lookup"><span data-stu-id="3afd5-177">To ensure that the *App\_offline.htm* file remains in place for the duration of the deployment, you need to include the file within the web deployment package itself in addition to deploying the file directly at the start of the deployment process.</span></span>

- <span data-ttu-id="3afd5-178">Bu konuda önceki görevleri varsa uyguladıysanız, eklediğiniz *uygulama\_offline.htm* dosyasını farklı bir dosya adı altında web uygulaması projenize (kullandık *uygulama\_ template.htm çevrimdışı*) ve yapı eylemi ayarladığınız **hiçbiri**.</span><span class="sxs-lookup"><span data-stu-id="3afd5-178">If you've followed the previous tasks in this topic, you'll have added the *App\_offline.htm* file to your web application project under a different filename (we used *App\_offline-template.htm*) and you'll have set the build action to **None**.</span></span> <span data-ttu-id="3afd5-179">Bu değişiklikler ile geliştirme çakışarak ve hata ayıklama dosyadan önlemek gereklidir.</span><span class="sxs-lookup"><span data-stu-id="3afd5-179">These changes are necessary to prevent the file from interfering with development and debugging.</span></span> <span data-ttu-id="3afd5-180">Sonuç olarak, emin olmak için paketleme işlemi özelleştirmek ihtiyacınız *uygulama\_offline.htm* dosyası web dağıtım paketinde yer almaktadır.</span><span class="sxs-lookup"><span data-stu-id="3afd5-180">As a result, you need to customize the packaging process to ensure that the *App\_offline.htm* file is included in the web deployment package.</span></span>

<span data-ttu-id="3afd5-181">Web yayımlama ardışık düzen (WPP) adlı bir öğe listesi kullanan **FilesForPackagingFromProject** web dağıtım paketi eklenmesi gereken dosyaların bir listesini oluşturmak için.</span><span class="sxs-lookup"><span data-stu-id="3afd5-181">The Web Publishing Pipeline (WPP) uses an item list named **FilesForPackagingFromProject** to build a list of files that should be included in the web deployment package.</span></span> <span data-ttu-id="3afd5-182">Bu listeye kendi öğeleri ekleyerek web paketlerinizi içeriğini özelleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3afd5-182">You can customize the contents of your web packages by adding your own items to this list.</span></span> <span data-ttu-id="3afd5-183">Bunu yapmak için üst düzey adımları tamamlamanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="3afd5-183">To do this, you need to complete these high-level steps:</span></span>

1. <span data-ttu-id="3afd5-184">Adlı bir özel proje dosyası oluşturma *[Proje adı].wpp.targets* proje dosyası ile aynı klasörde.</span><span class="sxs-lookup"><span data-stu-id="3afd5-184">Create a custom project file named *[project name].wpp.targets* in the same folder as your project file.</span></span>

    > [!NOTE]
    > <span data-ttu-id="3afd5-185">*. Wpp.targets* dosyasının gerekir, web uygulaması proje dosyası ile aynı klasörde gitmek&#x2014;Örneğin, *ContactManager.Mvc.csproj*&#x2014;yerine herhangi bir özel ile aynı klasörde Proje dosyalarını derleme ve dağıtım işlemini kontrol eden kullanın.</span><span class="sxs-lookup"><span data-stu-id="3afd5-185">The *.wpp.targets* file needs to go in the same folder as your web application project file&#x2014;for example, *ContactManager.Mvc.csproj*&#x2014;rather than in the same folder as any custom project files you use to control the build and deployment process.</span></span>
2. <span data-ttu-id="3afd5-186">İçinde *. wpp.targets* dosya, yürütür yeni bir MSBuild hedef oluşturmak *önce* **CopyAllFilesToSingleFolderForPackage** hedef.</span><span class="sxs-lookup"><span data-stu-id="3afd5-186">In the *.wpp.targets* file, create a new MSBuild target that executes *before* the **CopyAllFilesToSingleFolderForPackage** target.</span></span> <span data-ttu-id="3afd5-187">Bu pakete dahil edilecek noktalar listesini oluşturan WPP hedefidir.</span><span class="sxs-lookup"><span data-stu-id="3afd5-187">This is the WPP target that builds a list of things to include in the package.</span></span>
3. <span data-ttu-id="3afd5-188">Yeni hedef oluşturma bir **ItemGroup** öğesi.</span><span class="sxs-lookup"><span data-stu-id="3afd5-188">In the new target, create an **ItemGroup** element.</span></span>
4. <span data-ttu-id="3afd5-189">İçinde **ItemGroup** öğesi ekleme bir **FilesForPackagingFromProject** öğesi ve belirtin *uygulama\_offline.htm* dosya.</span><span class="sxs-lookup"><span data-stu-id="3afd5-189">In the **ItemGroup** element, add a **FilesForPackagingFromProject** item and specify the *App\_offline.htm* file.</span></span>

<span data-ttu-id="3afd5-190">*. Wpp.targets* dosyası bu benzer:</span><span class="sxs-lookup"><span data-stu-id="3afd5-190">The *.wpp.targets* file should resemble this:</span></span>


[!code-xml[Main](taking-web-applications-offline-with-web-deploy/samples/sample8.xml)]


<span data-ttu-id="3afd5-191">Bunlar, bu örnekte Not, önemli noktalar şunlardır:</span><span class="sxs-lookup"><span data-stu-id="3afd5-191">These are the key points of note in this example:</span></span>

- <span data-ttu-id="3afd5-192">**BeforeTargets** öznitelik ekler hemen önce yapılmalıdır belirterek WPP bu hedefe **CopyAllFilesToSingleFolderForPackage** hedef.</span><span class="sxs-lookup"><span data-stu-id="3afd5-192">The **BeforeTargets** attribute inserts this target into the WPP by specifying that it should be executed immediately before the **CopyAllFilesToSingleFolderForPackage** target.</span></span>
- <span data-ttu-id="3afd5-193">**FilesForPackagingFromProject** öğesi kullanır **DestinationRelativePath** dosyayı yeniden adlandırmak için meta veri değeri *uygulama\_template.htm çevrimdışı* için *uygulama\_offline.htm* gibi listesine eklenir.</span><span class="sxs-lookup"><span data-stu-id="3afd5-193">The **FilesForPackagingFromProject** item uses the **DestinationRelativePath** metadata value to rename the file from *App\_offline-template.htm* to *App\_offline.htm* as it's added to the list.</span></span>

<span data-ttu-id="3afd5-194">Sonraki yordamda bu eklemek gösterilmiştir *. wpp.targets* bir web uygulaması projesi dosyasına.</span><span class="sxs-lookup"><span data-stu-id="3afd5-194">The next procedure shows you how to add this *.wpp.targets* file to a web application project.</span></span>

<span data-ttu-id="3afd5-195">**Eklemek için bir. web dağıtım paketi wpp.targets dosyasına**</span><span class="sxs-lookup"><span data-stu-id="3afd5-195">**To add a .wpp.targets file to a web deployment package**</span></span>

1. <span data-ttu-id="3afd5-196">Çözümünüzü Visual Studio 2010'da açın.</span><span class="sxs-lookup"><span data-stu-id="3afd5-196">Open your solution in Visual Studio 2010.</span></span>
2. <span data-ttu-id="3afd5-197">İçinde **Çözüm Gezgini** penceresinde, web uygulama projesi düğümüne sağ tıklayın (örneğin, **ContactManager.Mvc**), işaret **Ekle**ve ardından **Yeni öğe**.</span><span class="sxs-lookup"><span data-stu-id="3afd5-197">In the **Solution Explorer** window, right-click your web application project node (for example, **ContactManager.Mvc**), point to **Add**, and then click **New Item**.</span></span>
3. <span data-ttu-id="3afd5-198">İçinde **Yeni Öğe Ekle** iletişim kutusunda **XML dosyası** şablonu.</span><span class="sxs-lookup"><span data-stu-id="3afd5-198">In the **Add New Item** dialog box, select the **XML File** template.</span></span>
4. <span data-ttu-id="3afd5-199">İçinde **adı** kutusuna *[Proje adı] ***.wpp.targets** (örneğin, **ContactManager.Mvc.wpp.targets**) ve ardından **Ekle**.</span><span class="sxs-lookup"><span data-stu-id="3afd5-199">In the **Name** box, type *[project name]***.wpp.targets** (for example, **ContactManager.Mvc.wpp.targets**), and then click **Add**.</span></span>

    ![](taking-web-applications-offline-with-web-deploy/_static/image4.png)

    > [!NOTE]
    > <span data-ttu-id="3afd5-200">Yeni bir öğe bir proje kök düğüme eklerseniz, dosya proje dosyası ile aynı klasörde oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="3afd5-200">If you add a new item to the root node of a project, the file is created in the same folder as the project file.</span></span> <span data-ttu-id="3afd5-201">Bu klasörü Windows Gezgini'nde açarak doğrulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3afd5-201">You can verify this by opening the folder in Windows Explorer.</span></span>
5. <span data-ttu-id="3afd5-202">Dosyasında daha önce açıklanan MSBuild biçimlendirme ekleyin.</span><span class="sxs-lookup"><span data-stu-id="3afd5-202">In the file, add the MSBuild markup described previously.</span></span>

    [!code-xml[Main](taking-web-applications-offline-with-web-deploy/samples/sample9.xml)]
6. <span data-ttu-id="3afd5-203">Kaydet ve Kapat *[Proje adı].wpp.targets* dosya.</span><span class="sxs-lookup"><span data-stu-id="3afd5-203">Save and close the *[project name].wpp.targets* file.</span></span>

<span data-ttu-id="3afd5-204">Sonraki başlatışınızda yapı ve paket, web uygulama projesi, WPP otomatik olarak algılar *. wpp.targets* dosya.</span><span class="sxs-lookup"><span data-stu-id="3afd5-204">The next time you build and package your web application project, the WPP will automatically detect the *.wpp.targets* file.</span></span> <span data-ttu-id="3afd5-205">*Uygulama\_template.htm çevrimdışı* dosya dahil edilir elde edilen web dağıtım paketi *uygulama\_offline.htm*.</span><span class="sxs-lookup"><span data-stu-id="3afd5-205">The *App\_offline-template.htm* file will be included in the resulting web deployment package as *App\_offline.htm*.</span></span>

> [!NOTE]
> <span data-ttu-id="3afd5-206">Dağıtımınızı başarısız olursa, *uygulama\_offline.htm* dosya yerde kalır ve uygulamanızı çevrimdışı olarak kalır.</span><span class="sxs-lookup"><span data-stu-id="3afd5-206">If your deployment fails, the *App\_offline.htm* file will remain in place and your application will remain offline.</span></span> <span data-ttu-id="3afd5-207">Genellikle istenen davranış budur.</span><span class="sxs-lookup"><span data-stu-id="3afd5-207">This is typically the desired behavior.</span></span> <span data-ttu-id="3afd5-208">Uygulamanızı getirmek için yeniden çevrimiçi silebilirsiniz *uygulama\_offline.htm* web sunucusundan dosya.</span><span class="sxs-lookup"><span data-stu-id="3afd5-208">To bring your application back online, you can delete the *App\_offline.htm* file from your web server.</span></span> <span data-ttu-id="3afd5-209">Alternatif olarak, hataları düzeltin ve başarılı bir dağıtım çalıştırırsanız *uygulama\_offline.htm* dosyası kaldırılacak.</span><span class="sxs-lookup"><span data-stu-id="3afd5-209">Alternatively, if you correct any errors and run a successful deployment, the *App\_offline.htm* file will be removed.</span></span>


## <a name="conclusion"></a><span data-ttu-id="3afd5-210">Sonuç</span><span class="sxs-lookup"><span data-stu-id="3afd5-210">Conclusion</span></span>

<span data-ttu-id="3afd5-211">Bu konuda açıklanan yayımlayarak bir dağıtım süre için çevrimdışı web uygulamasını nasıl bir *uygulama\_offline.htm* dosya dağıtım işleminin başında hedef sunucuya yükleyip adresindeki kaldırma Son.</span><span class="sxs-lookup"><span data-stu-id="3afd5-211">This topic described how to take a web application offline for the duration of a deployment, by publishing an *App\_offline.htm* file to the destination server at the start of the deployment process and removing it at the end.</span></span> <span data-ttu-id="3afd5-212">Ayrıca nasıl dahil edileceği kapsanan bir *uygulama\_offline.htm* web dağıtım paketi dosyasında.</span><span class="sxs-lookup"><span data-stu-id="3afd5-212">It also covered how to include an *App\_offline.htm* file in a web deployment package.</span></span>

## <a name="further-reading"></a><span data-ttu-id="3afd5-213">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="3afd5-213">Further Reading</span></span>

<span data-ttu-id="3afd5-214">Paketleme ve dağıtım işlemi hakkında daha fazla bilgi için bkz: [bina ve paketleme Web Uygulama projeleri](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md), [Web paketi dağıtımı için yapılandırma parametreleri](../web-deployment-in-the-enterprise/configuring-parameters-for-web-package-deployment.md), ve [ Web paketleri dağıtma](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span><span class="sxs-lookup"><span data-stu-id="3afd5-214">For more information on the packaging and deployment process, see [Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md), [Configuring Parameters for Web Package Deployment](../web-deployment-in-the-enterprise/configuring-parameters-for-web-package-deployment.md), and [Deploying Web Packages](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span></span>

<span data-ttu-id="3afd5-215">Yerine web uygulamalarınızın doğrudan Visual Studio'dan yayımlamak varsa bu öğreticileri açıklanan özel MSBuild proje dosyası yaklaşımı kullanarak, uygulamanızı çevrimdışı yayımlama sırasında olması için biraz farklı bir yaklaşım kullanmanız gerekecektir işlem.</span><span class="sxs-lookup"><span data-stu-id="3afd5-215">If you publish your web applications directly from Visual Studio, rather than using the custom MSBuild project file approach described in these tutorials, you'll need to use a slightly different approach to take your application offline during the publishing process.</span></span> <span data-ttu-id="3afd5-216">Daha fazla bilgi için bkz: [yayımlama sırasında çevrimdışı web uygulamanızı nasıl](https://go.microsoft.com/?linkid=9805135) (blog yayını).</span><span class="sxs-lookup"><span data-stu-id="3afd5-216">For more information, see [How to take your web app offline during publishing](https://go.microsoft.com/?linkid=9805135) (blog post).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="3afd5-217">[Önceki](excluding-files-and-folders-from-deployment.md)
> [sonraki](running-windows-powershell-scripts-from-msbuild-project-files.md)</span><span class="sxs-lookup"><span data-stu-id="3afd5-217">[Previous](excluding-files-and-folders-from-deployment.md)
[Next](running-windows-powershell-scripts-from-msbuild-project-files.md)</span></span>
