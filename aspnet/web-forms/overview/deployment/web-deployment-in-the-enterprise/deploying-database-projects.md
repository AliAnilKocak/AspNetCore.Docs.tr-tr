---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
title: Veritabanı projeleri dağıtma | Microsoft Docs
author: jrjlee
description: 'Not: kurumsal dağıtım senaryoları çok sayıda içinde dağıtılmış bir veritabanı için artımlı güncelleştirmeler yayımlamak özelliği gerekir. Yeniden oluşturmak için kullanılan alternatiftir...'
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 832f226a-1aa3-4093-8c29-ce4196793259
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
msc.type: authoredcontent
ms.openlocfilehash: a0b3871ea098b549271bce2b9d5f0c24f9ca8a9c
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/06/2018
ms.locfileid: "30882507"
---
<a name="deploying-database-projects"></a><span data-ttu-id="2646d-104">Veritabanı projeleri dağıtma</span><span class="sxs-lookup"><span data-stu-id="2646d-104">Deploying Database Projects</span></span>
====================
<span data-ttu-id="2646d-105">tarafından [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="2646d-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="2646d-106">PDF indirin</span><span class="sxs-lookup"><span data-stu-id="2646d-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> [!NOTE]
> <span data-ttu-id="2646d-107">Kurumsal dağıtım senaryoları çok sayıda içinde dağıtılmış bir veritabanı için artımlı güncelleştirmeler yayımlamak özelliği gerekir.</span><span class="sxs-lookup"><span data-stu-id="2646d-107">In lots of enterprise deployment scenarios, you need the ability to publish incremental updates to a deployed database.</span></span> <span data-ttu-id="2646d-108">Var olan veritabanındaki tüm verileri kaybedersiniz anlamına gelir her dağıtım veritabanını yeniden oluşturmak için kullanılan alternatiftir.</span><span class="sxs-lookup"><span data-stu-id="2646d-108">The alternative is to recreate the database on every deployment, which means you lose any data in the existing database.</span></span> <span data-ttu-id="2646d-109">Visual Studio 2010 ile çalışırken, VSDBCMD artımlı veritabanı yayımlama için önerilen yaklaşım kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="2646d-109">When you work with Visual Studio 2010, using VSDBCMD is the recommended approach to incremental database publishing.</span></span> <span data-ttu-id="2646d-110">Ancak, Visual Studio Web yayımlama ardışık düzen (WPP) ve sonraki sürüm artımlı doğrudan yayımlama destekleyen araçları dahil edilir.</span><span class="sxs-lookup"><span data-stu-id="2646d-110">However, the next version of Visual Studio and the Web Publishing Pipeline (WPP) will include tooling that supports incremental publishing directly.</span></span>


<span data-ttu-id="2646d-111">Visual Studio 2010'da Contact Manager örnek çözümü açarsanız, veritabanı projesi dört dosyaları içeren bir özellikler klasörünü içeren görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="2646d-111">If you open the Contact Manager sample solution in Visual Studio 2010, you'll see that the database project includes a Properties folder that contains four files.</span></span>

![](deploying-database-projects/_static/image1.png)

<span data-ttu-id="2646d-112">Proje dosyası ile birlikte (*ContactManager.Database.dbproj* bu durumda), bu dosyaları derleme ve dağıtım işleminin çeşitli yönlerini denetleme:</span><span class="sxs-lookup"><span data-stu-id="2646d-112">Together with the project file (*ContactManager.Database.dbproj* in this case), these files control various aspects of the build and deployment process:</span></span>

- <span data-ttu-id="2646d-113">*Database.sqlcmdvars* dosyası, projenin dağıtırken kullandığınız herhangi bir SQLCMD değişkeni değerleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="2646d-113">The *Database.sqlcmdvars* file provides values for any SQLCMD variables you use when you deploy the project.</span></span> <span data-ttu-id="2646d-114">Her çözüm yapılandırması (örneğin, hata ayıklama ve yayın) farklı .sqlcmdvars dosyasını belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2646d-114">Each solution configuration (for example, debug and release) can specify a different .sqlcmdvars file.</span></span>
- <span data-ttu-id="2646d-115">*Database.sqldeployment* dosyayı projenize veya hedef sunucu harmanlama tanımlı harmanlama kullanıp kullanmayacağınızı gibi dağıtım özgü ayarları sağlar mı hedef veritabanı yeniden oluşturmak her saat veya yalnızca güncel duruma getirmek ve benzeri için varolan bir veritabanını düzeltmek.</span><span class="sxs-lookup"><span data-stu-id="2646d-115">The *Database.sqldeployment* file provides deployment-specific settings, like whether to use the collation defined in your project or the collation of the destination server, whether to recreate the destination database every time or simply amend the existing database to bring it up to date, and so on.</span></span> <span data-ttu-id="2646d-116">Her çözüm yapılandırması farklı .sqldeployment dosyasını belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2646d-116">Each solution configuration can specify a different .sqldeployment file.</span></span>
- <span data-ttu-id="2646d-117">*Database.sqlpermissions* hedef veritabanına eklemek istediğiniz tüm izinleri tanımlamak için kullanabileceğiniz bir XML belgesi bir dosyadır.</span><span class="sxs-lookup"><span data-stu-id="2646d-117">The *Database.sqlpermissions* file is an XML document that you can use to define any permissions you want to add to the target database.</span></span> <span data-ttu-id="2646d-118">Tüm çözüm yapılandırmaları aynı .sqlpermissions dosya paylaşımı.</span><span class="sxs-lookup"><span data-stu-id="2646d-118">All solution configurations share the same .sqlpermissions file.</span></span>
- <span data-ttu-id="2646d-119">*Database.sqlsettings* dosyasını, Karşılaştırma işleçleri davranışını kullanın ve benzeri için harmanlama gibi veritabanı oluşturulurken kullanılacak veritabanı düzeyi özellikleri belirtir.</span><span class="sxs-lookup"><span data-stu-id="2646d-119">The *Database.sqlsettings* file specifies the database-level properties to use when creating the database, like the collation to use, the behavior of comparison operators, and so on.</span></span> <span data-ttu-id="2646d-120">Tüm çözüm yapılandırmaları aynı .sqlsettings dosya paylaşımı.</span><span class="sxs-lookup"><span data-stu-id="2646d-120">All solution configurations share the same .sqlsettings file.</span></span>

<span data-ttu-id="2646d-121">Bu, bu dosyalar Visual Studio'da açın ve içeriği ile tanımak için bir dakikanızı değecek olur.</span><span class="sxs-lookup"><span data-stu-id="2646d-121">It's worth taking a moment to open these files in Visual Studio and familiarize yourself with the contents.</span></span>

<span data-ttu-id="2646d-122">Veritabanı projesi derlerken, derleme işlemi iki dosyaları oluşturur:</span><span class="sxs-lookup"><span data-stu-id="2646d-122">When you build a database project, the build process creates two files:</span></span>

- <span data-ttu-id="2646d-123">A *veritabanı şeması* (.dbschema dosyası).</span><span class="sxs-lookup"><span data-stu-id="2646d-123">A *database schema* (.dbschema file).</span></span> <span data-ttu-id="2646d-124">Bu, şemanın XML biçiminde oluşturmak istediğiniz veritabanının açıklar.</span><span class="sxs-lookup"><span data-stu-id="2646d-124">This describes the schema of the database you want to create in XML format.</span></span>
- <span data-ttu-id="2646d-125">A *dağıtım bildirimi* (.deploymanifest dosyası).</span><span class="sxs-lookup"><span data-stu-id="2646d-125">A *deployment manifest* (.deploymanifest file).</span></span> <span data-ttu-id="2646d-126">Bu oluşturmak ve veritabanınızı dağıtmak için gerekli tüm bilgileri içerir.</span><span class="sxs-lookup"><span data-stu-id="2646d-126">This contains all the information required to create and deploy your database.</span></span> <span data-ttu-id="2646d-127">Dağıtım yönergeleri (.sqldeployment dosyası) ve tüm dağıtım öncesi veya dağıtım sonrası SQL komut dosyaları gibi diğer kaynaklar birlikte .dbschema dosya başvurur.</span><span class="sxs-lookup"><span data-stu-id="2646d-127">It references the .dbschema file along with other resources, like the deployment instructions (the .sqldeployment file) and any pre-deployment or post-deployment SQL scripts.</span></span>

<span data-ttu-id="2646d-128">Bu, bu kaynakları arasındaki ilişkiyi gösterir:</span><span class="sxs-lookup"><span data-stu-id="2646d-128">This shows the relationship between these resources:</span></span>

![](deploying-database-projects/_static/image2.png)

<span data-ttu-id="2646d-129">Gördüğünüz gibi .sqlsettings dosyasını ve .sqlpermissions dosyasını oluşturma işlemi için girdileridir.</span><span class="sxs-lookup"><span data-stu-id="2646d-129">As you can see, the .sqlsettings file and the .sqlpermissions file are inputs to the build process.</span></span> <span data-ttu-id="2646d-130">Veritabanı Proje dosyası ile birlikte, bu dosyalar, veritabanı şema dosyası oluşturmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="2646d-130">Along with the database project file, these files are used to create the database schema file.</span></span> <span data-ttu-id="2646d-131">.Sqldeployment dosyasını ve .sqlcmdvars dosyasını değişmeden derleme sürecinde geçirin.</span><span class="sxs-lookup"><span data-stu-id="2646d-131">The .sqldeployment file and the .sqlcmdvars file pass through the build process unchanged.</span></span> <span data-ttu-id="2646d-132">Dağıtım bildirimi veritabanı şeması, .sqldeployment dosya, .sqlcmdvars dosya ve tüm dağıtım öncesi veya dağıtım sonrası SQL komut dosyası konumunu belirtir.</span><span class="sxs-lookup"><span data-stu-id="2646d-132">The deployment manifest indicates the location of the database schema, the .sqldeployment file, the .sqlcmdvars file, and any pre-deployment or post-deployment SQL scripts.</span></span>

## <a name="why-use-vsdbcmd-to-deploy-a-database-project"></a><span data-ttu-id="2646d-133">Veritabanı projesi dağıtmak için neden VSDBCMD kullanacak?</span><span class="sxs-lookup"><span data-stu-id="2646d-133">Why Use VSDBCMD to Deploy a Database Project?</span></span>

<span data-ttu-id="2646d-134">Veritabanı projeleri dağıtmak için çeşitli farklı yaklaşım vardır.</span><span class="sxs-lookup"><span data-stu-id="2646d-134">There are various different approaches to deploying database projects.</span></span> <span data-ttu-id="2646d-135">Ancak, bunların hepsi bir kuruluş ortamında uzak sunuculara veritabanı projesi dağıtmak için uygun değildir.</span><span class="sxs-lookup"><span data-stu-id="2646d-135">However, not all of them are suitable for deploying a database project to remote servers in an enterprise environment.</span></span> <span data-ttu-id="2646d-136">Bir veritabanı proje dağıtımından istediğinize karar verin.</span><span class="sxs-lookup"><span data-stu-id="2646d-136">Consider what you want from a database project deployment.</span></span> <span data-ttu-id="2646d-137">Kurumsal dağıtım senaryolarında büyük bir olasılıkla istiyor:</span><span class="sxs-lookup"><span data-stu-id="2646d-137">In enterprise deployment scenarios, you're likely to want:</span></span>

- <span data-ttu-id="2646d-138">Uzak bir konumdan veritabanı projesi dağıtma yeteneği.</span><span class="sxs-lookup"><span data-stu-id="2646d-138">The ability to deploy the database project from a remote location.</span></span>
- <span data-ttu-id="2646d-139">Varolan bir veritabanına artımlı güncelleştirmeler yapma yeteneği.</span><span class="sxs-lookup"><span data-stu-id="2646d-139">The ability to make incremental updates to an existing database.</span></span>
- <span data-ttu-id="2646d-140">Dağıtım öncesi komut dosyaları veya dağıtım sonrası komut dosyaları dahil etme yeteneği.</span><span class="sxs-lookup"><span data-stu-id="2646d-140">The ability to include pre-deployment scripts or post-deployment scripts.</span></span>
- <span data-ttu-id="2646d-141">Birden çok hedef ortamı dağıtımına uyarlama yeteneği.</span><span class="sxs-lookup"><span data-stu-id="2646d-141">The ability to tailor the deployment to multiple destination environments.</span></span>
- <span data-ttu-id="2646d-142">Büyük, parçası olarak veritabanı projesi dağıtma yeteneği genellikle komut dosyası, tek adımlı Çözüm dağıtımı.</span><span class="sxs-lookup"><span data-stu-id="2646d-142">The ability to deploy the database project as part of a larger, typically scripted, single-step solution deployment.</span></span>

<span data-ttu-id="2646d-143">Veritabanı projesi dağıtmak için kullanabileceğiniz üç ana yaklaşım vardır:</span><span class="sxs-lookup"><span data-stu-id="2646d-143">There are three main approaches you can use to deploy a database project:</span></span>

- <span data-ttu-id="2646d-144">Visual Studio 2010 veritabanı proje türü ile dağıtım işlevini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2646d-144">You can use the deployment functionality with the database project type in Visual Studio 2010.</span></span> <span data-ttu-id="2646d-145">Derleme ve Visual Studio 2010 veritabanı projesi dağıtma, dağıtım işlemi dağıtım bildirimi derleme yapılandırmasını belirli bir SQL tabanlı bir dağıtım dosyası oluşturmak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="2646d-145">When you build and deploy a database project in Visual Studio 2010, the deployment process uses the deployment manifest to generate a SQL-based deployment file specific to the build configuration.</span></span> <span data-ttu-id="2646d-146">Zaten mevcut değil veya zaten mevcut değilse veritabanına gerekli değişiklikleri yapın, bu veritabanı oluşturur.</span><span class="sxs-lookup"><span data-stu-id="2646d-146">This will create the database if it doesn't already exist or make any necessary changes to the database if it does already exist.</span></span> <span data-ttu-id="2646d-147">Bu dosya, hedef sunucuda çalıştırmak için SQLCMD.exe kullanabilirsiniz veya oluşturmak ve dosyayı çalıştırmak için Visual Studio ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2646d-147">You can use SQLCMD.exe to run this file on your destination server, or you can set Visual Studio to create and run the file.</span></span> <span data-ttu-id="2646d-148">Bu yaklaşımın bir dezavantajı, dağıtım ayarlarını denetime yalnızca sınırlı sahip olur.</span><span class="sxs-lookup"><span data-stu-id="2646d-148">The disadvantage of this approach is that you have only limited control over the deployment settings.</span></span> <span data-ttu-id="2646d-149">Genellikle de ortama özgü değişken değerlerini sağlamak için SQL dağıtım dosyasını değiştirmeniz gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="2646d-149">You may often also need to modify the SQL deployment file to provide environment-specific variable values.</span></span> <span data-ttu-id="2646d-150">Visual Studio 2010 yüklü bir bilgisayardan bu yaklaşım yalnızca kullanabilirsiniz ve geliştirici bilmeniz ve tüm hedef ortamlar için bağlantı dizelerini ve kimlik bilgilerini sağlayın gerekir.</span><span class="sxs-lookup"><span data-stu-id="2646d-150">You can only use this approach from a computer with Visual Studio 2010 installed, and the developer would need to know and provide connection strings and credentials for all destination environments.</span></span>
- <span data-ttu-id="2646d-151">(Web dağıtımı) Internet Information Services (IIS) Web dağıtım aracı için kullanabileceğiniz [bir veritabanı, web uygulaması projesinin bir parçası dağıtma](https://msdn.microsoft.com/library/dd465343.aspx).</span><span class="sxs-lookup"><span data-stu-id="2646d-151">You can use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to [deploy a database as part of a web application project](https://msdn.microsoft.com/library/dd465343.aspx).</span></span> <span data-ttu-id="2646d-152">Ancak, bu yaklaşım, veritabanı projesi dağıtmak yerine yalnızca bir hedef sunucuda var olan bir yerel veritabanı çoğaltmak istiyorsanız çok daha karmaşıktır.</span><span class="sxs-lookup"><span data-stu-id="2646d-152">However, this approach is a lot more complex if you want to deploy a database project rather than simply replicate an existing local database on a destination server.</span></span> <span data-ttu-id="2646d-153">Web dağıtımı veritabanı projesi oluşturur SQL dağıtım komut dosyasını çalıştırmak için ancak bunu yapmak için yapılandırabilirsiniz, web uygulaması projeniz için özel bir WPP hedefleri dosyası oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="2646d-153">You can configure Web Deploy to run the SQL deployment script that the database project generates, but in order to do this, you need to create a custom WPP targets file for your web application project.</span></span> <span data-ttu-id="2646d-154">Bu dağıtım işlemiyle karmaşıklığını önemli miktarda ekler.</span><span class="sxs-lookup"><span data-stu-id="2646d-154">This adds a substantial amount of complexity to the deployment process.</span></span> <span data-ttu-id="2646d-155">Ayrıca, Web dağıtımı doğrudan varolan veritabanları artımlı güncelleştirmeleri desteklemiyor.</span><span class="sxs-lookup"><span data-stu-id="2646d-155">In addition, Web Deploy does not directly support incremental updates to existing databases.</span></span> <span data-ttu-id="2646d-156">Bu yaklaşımı hakkında daha fazla bilgi için bkz: [dağıtılan SQL dosya Web yayımlama ardışık paket veritabanı projesi genişletme](https://go.microsoft.com/?linkid=9805121).</span><span class="sxs-lookup"><span data-stu-id="2646d-156">For more information on this approach, see [Extending the Web Publishing Pipeline to package database project deployed SQL file](https://go.microsoft.com/?linkid=9805121).</span></span>
- <span data-ttu-id="2646d-157">Veritabanı, veritabanı şeması ya da dağıtım bildirimi kullanarak dağıtmak için VSDBCMD yardımcı programını kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2646d-157">You can use the VSDBCMD utility to deploy the database, using either the database schema or the deployment manifest.</span></span> <span data-ttu-id="2646d-158">Daha büyük ve komut dosyalı dağıtım işleminin bir parçası veritabanlarını yayımlama olanak sağlayan bir MSBuild hedefin VSDBCMD.exe çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2646d-158">You can call VSDBCMD.exe from an MSBuild target, which lets you publish databases as part of a larger, scripted deployment process.</span></span> <span data-ttu-id="2646d-159">.Sqlcmdvars dosya ve diğer veritabanı özelliklerini komutundan dağıtımınız farklı ortamlar için birden çok derleme yapılandırmaları oluşturmadan özelleştirmenize olanak sağlayan bir VSDBCMD, çok sayıda değişkenler geçersiz kılabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2646d-159">You can override the variables in your .sqlcmdvars file and lots of other database properties from a VSDBCMD command, which allows you to customize your deployment for different environments without creating multiple build configurations.</span></span> <span data-ttu-id="2646d-160">VSDBCMD yalnızca veritabanı şemanızı hedef veritabanıyla hizalamak için gerekli değişiklikleri yapar anlamına gelir ayrım işlevselliği sağlar.</span><span class="sxs-lookup"><span data-stu-id="2646d-160">VSDBCMD provides differentiation functionality, which means it will make only the necessary changes to align a destination database with your database schema.</span></span> <span data-ttu-id="2646d-161">VSDBCMD çok çeşitli dağıtım işlemi üzerinde hassas denetime komut satırı seçenekleri de sunar.</span><span class="sxs-lookup"><span data-stu-id="2646d-161">VSDBCMD also offers a wide range of command-line options, which give you fine-grained control over the deployment process.</span></span>

<span data-ttu-id="2646d-162">Bu genel bakış'tan, VSDBCMD MSBuild ile kullanarak en iyi tipik kurumsal dağıtım senaryosu için uygun bir yaklaşım olduğunu görebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="2646d-162">From this overview, you can see that using VSDBCMD with MSBuild is the approach best suited to a typical enterprise deployment scenario:</span></span>

|  | <span data-ttu-id="2646d-163">Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="2646d-163">Visual Studio 2010</span></span> | <span data-ttu-id="2646d-164">Web Deploy 2.0</span><span class="sxs-lookup"><span data-stu-id="2646d-164">Web Deploy 2.0</span></span> | <span data-ttu-id="2646d-165">VSDBCMD.exe</span><span class="sxs-lookup"><span data-stu-id="2646d-165">VSDBCMD.exe</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="2646d-166">Uzaktan dağıtımı destekler?</span><span class="sxs-lookup"><span data-stu-id="2646d-166">Supports remote deployment?</span></span> | <span data-ttu-id="2646d-167">Evet</span><span class="sxs-lookup"><span data-stu-id="2646d-167">Yes</span></span> | <span data-ttu-id="2646d-168">Evet</span><span class="sxs-lookup"><span data-stu-id="2646d-168">Yes</span></span> | <span data-ttu-id="2646d-169">Evet</span><span class="sxs-lookup"><span data-stu-id="2646d-169">Yes</span></span> |
| <span data-ttu-id="2646d-170">Artımlı güncelleştirmeler destekler?</span><span class="sxs-lookup"><span data-stu-id="2646d-170">Supports incremental updates?</span></span> | <span data-ttu-id="2646d-171">Evet</span><span class="sxs-lookup"><span data-stu-id="2646d-171">Yes</span></span> | <span data-ttu-id="2646d-172">Hayır</span><span class="sxs-lookup"><span data-stu-id="2646d-172">No</span></span> | <span data-ttu-id="2646d-173">Evet</span><span class="sxs-lookup"><span data-stu-id="2646d-173">Yes</span></span> |
| <span data-ttu-id="2646d-174">Öncesi/sonrası-deployment komut dosyalarını destekler?</span><span class="sxs-lookup"><span data-stu-id="2646d-174">Supports pre/post-deployment scripts?</span></span> | <span data-ttu-id="2646d-175">Evet</span><span class="sxs-lookup"><span data-stu-id="2646d-175">Yes</span></span> | <span data-ttu-id="2646d-176">Evet</span><span class="sxs-lookup"><span data-stu-id="2646d-176">Yes</span></span> | <span data-ttu-id="2646d-177">Evet</span><span class="sxs-lookup"><span data-stu-id="2646d-177">Yes</span></span> |
| <span data-ttu-id="2646d-178">Çoklu ortam dağıtımını destekler?</span><span class="sxs-lookup"><span data-stu-id="2646d-178">Supports multi-environment deployment?</span></span> | <span data-ttu-id="2646d-179">Sınırlı</span><span class="sxs-lookup"><span data-stu-id="2646d-179">Limited</span></span> | <span data-ttu-id="2646d-180">Sınırlı</span><span class="sxs-lookup"><span data-stu-id="2646d-180">Limited</span></span> | <span data-ttu-id="2646d-181">Evet</span><span class="sxs-lookup"><span data-stu-id="2646d-181">Yes</span></span> |
| <span data-ttu-id="2646d-182">Komut dosyalı dağıtım destekler?</span><span class="sxs-lookup"><span data-stu-id="2646d-182">Supports scripted deployment?</span></span> | <span data-ttu-id="2646d-183">Sınırlı</span><span class="sxs-lookup"><span data-stu-id="2646d-183">Limited</span></span> | <span data-ttu-id="2646d-184">Evet</span><span class="sxs-lookup"><span data-stu-id="2646d-184">Yes</span></span> | <span data-ttu-id="2646d-185">Evet</span><span class="sxs-lookup"><span data-stu-id="2646d-185">Yes</span></span> |

<span data-ttu-id="2646d-186">Bu konunun geri kalanında VSDBCMD veritabanı projeleri dağıtmak için MSBuild ile kullanımını açıklar.</span><span class="sxs-lookup"><span data-stu-id="2646d-186">The remainder of this topic describes the use of VSDBCMD with MSBuild to deploy database projects.</span></span>

## <a name="understanding-the-deployment-process"></a><span data-ttu-id="2646d-187">Dağıtım sürecini anlama</span><span class="sxs-lookup"><span data-stu-id="2646d-187">Understanding the Deployment Process</span></span>

<span data-ttu-id="2646d-188">VSDBCMD yardımcı programı veritabanı şeması (.dbschema dosyası) veya dağıtım bildirimi (.deploymanifest dosyası) kullanarak bir veritabanı dağıtmanıza olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="2646d-188">The VSDBCMD utility lets you deploy a database using either the database schema (the .dbschema file) or the deployment manifest (the .deploymanifest file).</span></span> <span data-ttu-id="2646d-189">Uygulamada, dağıtım bildirimi çeşitli dağıtım özellikleri için varsayılan değerler sağlayın ve çalıştırmak istediğiniz tüm dağıtım öncesi veya dağıtım sonrası SQL betikleri belirlemenize olanak tanır gibi dağıtım bildirimi neredeyse her zaman kullanacaksınız.</span><span class="sxs-lookup"><span data-stu-id="2646d-189">In practice, you'll almost always use the deployment manifest, as the deployment manifest lets you provide default values for various deployment properties and identify any pre-deployment or post-deployment SQL scripts you want to run.</span></span> <span data-ttu-id="2646d-190">Örneğin, bu VSDBCMD komut dağıtmak için kullanılan **ContactManager** bir sınama ortamında bir veritabanı sunucusu veritabanına:</span><span class="sxs-lookup"><span data-stu-id="2646d-190">For example, this VSDBCMD command is used to deploy the **ContactManager** database to a database server in a test environment:</span></span>


[!code-console[Main](deploying-database-projects/samples/sample1.cmd)]


<span data-ttu-id="2646d-191">Bu durumda:</span><span class="sxs-lookup"><span data-stu-id="2646d-191">In this case:</span></span>

- <span data-ttu-id="2646d-192">**/A** (veya **/eylem**) anahtarı belirtir yapmak için VSDBCMD istiyor.</span><span class="sxs-lookup"><span data-stu-id="2646d-192">The **/a** (or **/Action**) switch specifies what you want VSDBCMD to do.</span></span> <span data-ttu-id="2646d-193">Bu ayar **alma** veya **dağıtma**.</span><span class="sxs-lookup"><span data-stu-id="2646d-193">You can set this to **Import** or **Deploy**.</span></span> <span data-ttu-id="2646d-194">**Alma** seçeneği, var olan bir veritabanından .dbschema dosyası oluşturmak için kullanılır ve **dağıtma** seçeneği .dbschema dosya hedef veritabanına dağıtmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="2646d-194">The **Import** option is used to generate a .dbschema file from an existing database, and the **Deploy** option is used to deploy a .dbschema file to a target database.</span></span>
- <span data-ttu-id="2646d-195">**/Bildirimi** (veya **/ManifestFile**) anahtar dağıtmak istediğiniz .deploymanifest dosya tanımlar.</span><span class="sxs-lookup"><span data-stu-id="2646d-195">The **/manifest** (or **/ManifestFile**) switch identifies the .deploymanifest file you want to deploy.</span></span> <span data-ttu-id="2646d-196">.Dbschema dosyası kullanmayı istediyseniz, kullanacağınız **/model** (veya **/ModelFile**) geçin.</span><span class="sxs-lookup"><span data-stu-id="2646d-196">If you wanted to use the .dbschema file instead, you'd use the **/model** (or **/ModelFile**) switch.</span></span>
- <span data-ttu-id="2646d-197">**/Cs** (veya **/ConnectionString**) anahtarı, hedef veritabanı sunucusu için bağlantı dizesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="2646d-197">The **/cs** (or **/ConnectionString**) switch provides the connection string for the target database server.</span></span> <span data-ttu-id="2646d-198">Bu veritabanının adı içermeyen Not&#x2014;VSDBCMD; veritabanı oluşturmak için sunucuya bağlanmanız gerekiyor tek bir veritabanına bağlanmak gerekmez.</span><span class="sxs-lookup"><span data-stu-id="2646d-198">Note that this doesn't include the name of the database&#x2014;VSDBCMD needs to connect to the server to create the database; it doesn't need to connect to an individual database.</span></span> <span data-ttu-id="2646d-199">Bir bağlantı dizesi .deploymanifest dosyanızı içeriyorsa, bu anahtarı atlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2646d-199">If your .deploymanifest file includes a connection string, you can omit this switch.</span></span> <span data-ttu-id="2646d-200">Anahtarı yine de kullanırsanız, anahtar değer .deploymanifest değerini geçersiz kılar.</span><span class="sxs-lookup"><span data-stu-id="2646d-200">If you use the switch anyway, the switch value will override the .deploymanifest value.</span></span>
- <span data-ttu-id="2646d-201"><strong>/P:TargetDatabase</strong> özelliği, oluşturma sırasında hedef veritabanına atamak istediğiniz adı sağlar.</span><span class="sxs-lookup"><span data-stu-id="2646d-201">The <strong>/p:TargetDatabase</strong> property provides the name you want to assign to the target database on creation.</span></span> <span data-ttu-id="2646d-202">Bu değerini geçersiz kılar <strong>TargetDatabase</strong> .deploymanifest dosyasında özellik.</span><span class="sxs-lookup"><span data-stu-id="2646d-202">This overrides the value of the <strong>TargetDatabase</strong> property in the .deploymanifest file.</span></span> <span data-ttu-id="2646d-203">Kullanabileceğiniz <strong>p:</strong> <em>[özellik adı]</em>sözdizimi çok çeşitli dağıtım özelliklerini ayarlamak ve herhangi bir SQLCMD değişkeni geçersiz kılmak için .sqlcmdvars dosyasında bildirildi.</span><span class="sxs-lookup"><span data-stu-id="2646d-203">You can use the <strong>/p:</strong> <em>[property name]</em>syntax to set a wide variety of deployment properties and to override any SQLCMD variables declared in your .sqlcmdvars file.</span></span>
- <span data-ttu-id="2646d-204">**/Dd+** (veya **/DeployToDatabase+**) anahtar gösteren bir dağıtımını oluşturun ve hedef ortam dağıtmak istediğiniz.</span><span class="sxs-lookup"><span data-stu-id="2646d-204">The **/dd+** (or **/DeployToDatabase+**) switch indicates that you want to create a deployment and deploy it to the target environment.</span></span> <span data-ttu-id="2646d-205">Belirtirseniz **/dd-**, veya anahtarını atlarsanız, VSDBCMD bir dağıtım komut dosyası oluşturur, ancak hedef ortam dağıtmaz.</span><span class="sxs-lookup"><span data-stu-id="2646d-205">If you specify **/dd-**, or omit the switch, VSDBCMD will generate a deployment script but will not deploy it to the target environment.</span></span> <span data-ttu-id="2646d-206">Bu anahtar, Karışıklığı önlemek için kaynak görülür ve sonraki bölümde daha ayrıntılı açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="2646d-206">This switch is often the source of confusion and is explained in more detail in the next section.</span></span>
- <span data-ttu-id="2646d-207">**/Script** (veya **/DeploymentScriptFile**) anahtar dağıtım betiği oluşturmak istediğiniz belirtir.</span><span class="sxs-lookup"><span data-stu-id="2646d-207">The **/script** (or **/DeploymentScriptFile**) switch specifies where you want to generate the deployment script.</span></span> <span data-ttu-id="2646d-208">Bu değer, dağıtım işlemi etkilemez.</span><span class="sxs-lookup"><span data-stu-id="2646d-208">This value does not affect the deployment process.</span></span>

<span data-ttu-id="2646d-209">VSDBCMD hakkında daha fazla bilgi için bkz: [VSDBCMD için komut satırı başvurusu. EXE (dağıtım ve şema Al)](https://msdn.microsoft.com/library/dd193283.aspx) ve [nasıl yapılır: bir veritabanı VSDBCMD kullanarak dağıtım için bir komut isteminden hazırlayın. EXE](https://msdn.microsoft.com/library/dd193258.aspx).</span><span class="sxs-lookup"><span data-stu-id="2646d-209">For more information on VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) and [How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE](https://msdn.microsoft.com/library/dd193258.aspx).</span></span>

<span data-ttu-id="2646d-210">VSDBCMD bir MSBuild proje dosyasından nasıl kullanabileceğinize bir örnek için bkz: [oluşturma işlemini anlama](understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="2646d-210">For an example of how you can use VSDBCMD from an MSBuild project file, see [Understanding the Build Process](understanding-the-build-process.md).</span></span> <span data-ttu-id="2646d-211">Birden çok ortamlar için veritabanı dağıtım ayarlarını yapılandırmak nasıl örnekleri için bkz: [veritabanı dağıtımlarını özelleştirme birden çok ortamları](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="2646d-211">For examples of how to configure database deployment settings for multiple environments, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="understanding-the-deploytodatabase-switch"></a><span data-ttu-id="2646d-212">DeployToDatabase anahtar anlama</span><span class="sxs-lookup"><span data-stu-id="2646d-212">Understanding the DeployToDatabase Switch</span></span>

<span data-ttu-id="2646d-213">Davranışını **/dd** veya **/DeployToDatabase** anahtar bağlı olup olmadığını VSDBCMD bir .dbschema veya .deploymanifest dosyası ile kullanmakta olduğunuz üzerinde.</span><span class="sxs-lookup"><span data-stu-id="2646d-213">The behavior of the **/dd** or **/DeployToDatabase** switch depends on whether you're using VSDBCMD with a .dbschema file or a .deploymanifest file.</span></span> <span data-ttu-id="2646d-214">Bir .dbschema dosyası kullanıyorsanız, davranışı oldukça basittir:</span><span class="sxs-lookup"><span data-stu-id="2646d-214">If you're using a .dbschema file, the behavior is fairly straightforward:</span></span>

- <span data-ttu-id="2646d-215">Belirtirseniz **/dd+** veya **/dd**, VSDBCMD bir dağıtım komut dosyası oluşturmanız ve veritabanı dağıtın.</span><span class="sxs-lookup"><span data-stu-id="2646d-215">If you specify **/dd+** or **/dd**, VSDBCMD will generate a deployment script and deploy the database.</span></span>
- <span data-ttu-id="2646d-216">Belirtirseniz **/dd-** veya anahtarını atlarsanız, VSDBCMD, yalnızca bir dağıtım komut dosyası üretir.</span><span class="sxs-lookup"><span data-stu-id="2646d-216">If you specify **/dd-** or omit the switch, VSDBCMD will generate a deployment script only.</span></span>

<span data-ttu-id="2646d-217">Bir .deploymanifest dosyası kullanıyorsanız, çok daha karmaşık bir davranıştır.</span><span class="sxs-lookup"><span data-stu-id="2646d-217">If you're using a .deploymanifest file, the behavior is a lot more complicated.</span></span> <span data-ttu-id="2646d-218">.Deploymanifest dosyası bir özellik adı içerdiğinden budur **DeployToDatabase** de belirleyen veritabanı dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="2646d-218">This is because the .deploymanifest file contains a property name **DeployToDatabase** that also determines whether the database is deployed.</span></span>


[!code-xml[Main](deploying-database-projects/samples/sample2.xml)]


<span data-ttu-id="2646d-219">Bu özelliğin değeri, veritabanı projesi özellikleri göre ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="2646d-219">The value of this property is set according to the properties of the database project.</span></span> <span data-ttu-id="2646d-220">Ayarlarsanız **eylem dağıtmak** için **bir dağıtım komut dosyası (.sql) oluşturma**, değer olacaktır **False**.</span><span class="sxs-lookup"><span data-stu-id="2646d-220">If you set the **Deploy action** to **Create a deployment script (.sql)**, the value will be **False**.</span></span> <span data-ttu-id="2646d-221">Ayarlarsanız **eylem dağıtmak** için **dağıtım komut dosyası (.sql) oluşturabilir ve veritabanına dağıtım**, değer olacaktır **doğru**.</span><span class="sxs-lookup"><span data-stu-id="2646d-221">If you set the **Deploy action** to **Create a deployment script (.sql) and deploy to the database**, the value will be **True**.</span></span>

> [!NOTE]
> <span data-ttu-id="2646d-222">Bu ayarlar, belirli yapı yapılandırması ve platformu ile ilişkilendirilir.</span><span class="sxs-lookup"><span data-stu-id="2646d-222">These settings are associated with a specific build configuration and platform.</span></span> <span data-ttu-id="2646d-223">Ayarlarını yapılandırırsanız, örneğin, **hata ayıklama** yapılandırma ve kullanma yayımlama **sürüm** yapılandırma, ayarlarınızı kullanılmayacak.</span><span class="sxs-lookup"><span data-stu-id="2646d-223">For example, if you configure settings for the **Debug** configuration and then publish using the **Release** configuration, your settings will not be used.</span></span>


![](deploying-database-projects/_static/image3.png)

> [!NOTE]
> <span data-ttu-id="2646d-224">Bu senaryoda, **eylem dağıtmak** her zaman ayarlanması gerektiğini **bir dağıtım komut dosyası (.sql) oluşturmak**, veritabanınızı dağıtmak için Visual Studio 2010 istemediğiniz.</span><span class="sxs-lookup"><span data-stu-id="2646d-224">In this scenario, the **Deploy action** should always be set to **Create a deployment script (.sql)**, because you don't want Visual Studio 2010 to deploy your database.</span></span> <span data-ttu-id="2646d-225">Diğer bir deyişle, **DeployToDatabase** özelliği uymanız gereken **False**.</span><span class="sxs-lookup"><span data-stu-id="2646d-225">In other words, the **DeployToDatabase** property should always be **False**.</span></span>


<span data-ttu-id="2646d-226">Zaman bir **DeployToDatabase** özellik belirtilmemişse, **/dd** anahtar yalnızca kılar özelliği özellik değeri ise **false**:</span><span class="sxs-lookup"><span data-stu-id="2646d-226">When a **DeployToDatabase** property is specified, the **/dd** switch will only override the property if the property value is **false**:</span></span>

- <span data-ttu-id="2646d-227">Varsa **DeployToDatabase** özelliği **False**, ve belirttiğiniz **/dd+** veya **/dd**, VSDBCMD geçersiz kılar  **DeployToDatabase** özelliği ve veritabanı dağıtın.</span><span class="sxs-lookup"><span data-stu-id="2646d-227">If the **DeployToDatabase** property is **False**, and you specify **/dd+** or **/dd**, VSDBCMD will override the **DeployToDatabase** property and deploy the database.</span></span>
- <span data-ttu-id="2646d-228">Varsa **DeployToDatabase** özelliği **False**, ve belirttiğiniz **/dd-** veya anahtarını atlarsanız, VSDBCMD olmayan veritabanı dağıtın.</span><span class="sxs-lookup"><span data-stu-id="2646d-228">If the **DeployToDatabase** property is **False**, and you specify **/dd-** or omit the switch, VSDBCMD will not deploy the database.</span></span>
- <span data-ttu-id="2646d-229">Varsa **DeployToDatabase** özelliği **doğru**, VSDBCMD anahtar yoksay ve veritabanı dağıtın.</span><span class="sxs-lookup"><span data-stu-id="2646d-229">If the **DeployToDatabase** property is **True**, VSDBCMD will ignore the switch and deploy the database.</span></span>
- <span data-ttu-id="2646d-230">Veritabanı da dağıtmakta bağımsız olarak her durumda, bir dağıtım komut dosyası oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="2646d-230">A deployment script is generated in each case, regardless of whether you're deploying the database as well.</span></span>

## <a name="conclusion"></a><span data-ttu-id="2646d-231">Sonuç</span><span class="sxs-lookup"><span data-stu-id="2646d-231">Conclusion</span></span>

<span data-ttu-id="2646d-232">Bu konu, Visual Studio 2010 veritabanı projeleri için derleme ve dağıtım işlemine genel bakış sağlanan.</span><span class="sxs-lookup"><span data-stu-id="2646d-232">This topic provided an overview of the build and deployment process for database projects in Visual Studio 2010.</span></span> <span data-ttu-id="2646d-233">Ayrıca, VSDBCMD.exe MSBuild ile Kurumsal ölçekte veritabanı dağıtımını desteklemek için nasıl kullanabileceğinizi açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="2646d-233">It also described how you can use VSDBCMD.exe with MSBuild to support enterprise-scale database deployment.</span></span>

<span data-ttu-id="2646d-234">Bu uygulamada nasıl çalıştığı hakkında daha fazla bilgi için bkz: [veritabanı dağıtımlarını özelleştirme birden çok ortamları](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="2646d-234">For more information on how this works in practice, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="further-reading"></a><span data-ttu-id="2646d-235">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="2646d-235">Further Reading</span></span>

<span data-ttu-id="2646d-236">Her ortam için ayrı bir dağıtım yapılandırma dosyası oluşturarak veritabanı dağıtımlarını özelleştirme hakkında daha fazla bilgi için bkz: [veritabanı dağıtımlarını özelleştirme birden çok ortamları](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="2646d-236">For information on how to customize database deployments by creating a separate deployment configuration file for each environment, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="2646d-237">Bir dağıtım sonrası komut dosyası çalıştırarak veritabanı rol üyeliklerini yapılandırma hakkında yönergeler için bkz [Test ortamları için veritabanı rol üyeliklerini dağıtma](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span><span class="sxs-lookup"><span data-stu-id="2646d-237">For guidance on how to configure database role memberships by running a post-deployment script, see [Deploying Database Role Memberships to Test Environments](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span></span> <span data-ttu-id="2646d-238">Benzersiz zorluklarından bazıları, üyelik yönetme konusunda yönergeler için veritabanları zorunlu tuttukları'ı, bkz: [üyelik veritabanına dağıtma kurumsal ortamlarda](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span><span class="sxs-lookup"><span data-stu-id="2646d-238">For guidance on managing some of the unique challenges that membership databases impose, see [Deploying Membership Databases to Enterprise Environments](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span></span>

<span data-ttu-id="2646d-239">Bu konular MSDN'de daha geniş yönerge ve Visual Studio veritabanı projelerini hakkında arka plan bilgileri ve veritabanı dağıtım işlemi sağlar:</span><span class="sxs-lookup"><span data-stu-id="2646d-239">These topics on MSDN provide broader guidance and background information on Visual Studio database projects and the database deployment process:</span></span>

- [<span data-ttu-id="2646d-240">Visual Studio 2010 SQL Server veritabanı projeleri</span><span class="sxs-lookup"><span data-stu-id="2646d-240">Visual Studio 2010 SQL Server Database Projects</span></span>](https://msdn.microsoft.com/library/ff678491.aspx)
- [<span data-ttu-id="2646d-241">Veritabanı değişikliği yönetme</span><span class="sxs-lookup"><span data-stu-id="2646d-241">Managing Database Change</span></span>](https://msdn.microsoft.com/library/aa833404.aspx)
- [<span data-ttu-id="2646d-242">Nasıl yapılır: bir veritabanı VSDBCMD kullanarak dağıtım için bir komut isteminden hazırlayın. EXE</span><span class="sxs-lookup"><span data-stu-id="2646d-242">How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE</span></span>](https://msdn.microsoft.com/library/dd193258.aspx)
- [<span data-ttu-id="2646d-243">Veritabanı derleme ve dağıtım genel bakış</span><span class="sxs-lookup"><span data-stu-id="2646d-243">An Overview of Database Build and Deployment</span></span>](https://msdn.microsoft.com/library/aa833165.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="2646d-244">[Önceki](deploying-web-packages.md)
> [sonraki](creating-and-running-a-deployment-command-file.md)</span><span class="sxs-lookup"><span data-stu-id="2646d-244">[Previous](deploying-web-packages.md)
[Next](creating-and-running-a-deployment-command-file.md)</span></span>
