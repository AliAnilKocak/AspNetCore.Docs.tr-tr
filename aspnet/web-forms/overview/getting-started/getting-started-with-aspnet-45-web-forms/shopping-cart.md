---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
title: "Alışveriş sepeti | Microsoft Docs"
author: Erikre
description: "Bu öğretici seri ASP.NET 4.5 ve Microsoft Visual Studio Express 2013 biz için kullanarak bir ASP.NET Web Forms uygulaması oluşturma temellerini öğretmek..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 09/08/2014
ms.topic: article
ms.assetid: 6898c601-6c31-432f-8388-e6843f8a17cb
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
msc.type: authoredcontent
ms.openlocfilehash: 9fe6f28685d6a423b03f9c7abe753283b89344e1
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/24/2018
---
<a name="shopping-cart"></a><span data-ttu-id="8115d-103">Alışveriş sepeti</span><span class="sxs-lookup"><span data-stu-id="8115d-103">Shopping Cart</span></span>
====================
<span data-ttu-id="8115d-104">Tarafından [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="8115d-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="8115d-105">[Wingtip Toys örnek proje (C#) karşıdan](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) veya [karşıdan E-kitap (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="8115d-105">[Download Wingtip Toys Sample Project (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="8115d-106">Bu öğretici seri ASP.NET 4.5 ve Microsoft Visual Studio Express 2013 için Web kullanarak bir ASP.NET Web Forms uygulaması oluşturma temellerini öğretmek.</span><span class="sxs-lookup"><span data-stu-id="8115d-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="8115d-107">Visual Studio 2013 [C# kaynak kodu projeyle](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) Bu öğretici seri eşlik etmek üzere hazırdır.</span><span class="sxs-lookup"><span data-stu-id="8115d-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>


<span data-ttu-id="8115d-108">Bu öğretici alışveriş sepeti Wingtip Toys örnek ASP.NET Web Forms uygulamasına eklemek için gerekli iş mantığı açıklar.</span><span class="sxs-lookup"><span data-stu-id="8115d-108">This tutorial describes the business logic required to add a shopping cart to the Wingtip Toys sample ASP.NET Web Forms application.</span></span> <span data-ttu-id="8115d-109">Bu öğretici önceki öğreticiyi "Görünen veri öğeleri ve Ayrıntıları" oluşturur ve Wingtip Oyuncak deposu öğretici serinin bir parçasıdır.</span><span class="sxs-lookup"><span data-stu-id="8115d-109">This tutorial builds on the previous tutorial "Display Data Items and Details" and is part of the Wingtip Toy Store tutorial series.</span></span> <span data-ttu-id="8115d-110">Bu öğreticiyi tamamladıktan sonra kullanıcılar örnek uygulamanızın eklemek, kaldırmak ve bunların alışveriş sepeti ürünlerinde değiştirmek mümkün olacaktır.</span><span class="sxs-lookup"><span data-stu-id="8115d-110">When you've completed this tutorial, the users of your sample app will be able to add, remove, and modify the products in their shopping cart.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="8115d-111">Öğrenecekleriniz:</span><span class="sxs-lookup"><span data-stu-id="8115d-111">What you'll learn:</span></span>

1. <span data-ttu-id="8115d-112">Web uygulaması için alışveriş sepeti oluşturma</span><span class="sxs-lookup"><span data-stu-id="8115d-112">How to create a shopping cart for the web application.</span></span>
2. <span data-ttu-id="8115d-113">Alışveriş sepetine öğelerini eklemesine olanak sağlamak nasıl.</span><span class="sxs-lookup"><span data-stu-id="8115d-113">How to enable users to add items to the shopping cart.</span></span>
3. <span data-ttu-id="8115d-114">Nasıl ekleneceği bir [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) alışveriş sepeti ayrıntıları görüntülemek için denetimi.</span><span class="sxs-lookup"><span data-stu-id="8115d-114">How to add a [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) control to display shopping cart details.</span></span>
4. <span data-ttu-id="8115d-115">Nasıl hesaplamak ve sipariş toplama görüntüler.</span><span class="sxs-lookup"><span data-stu-id="8115d-115">How to calculate and display the order total.</span></span>
5. <span data-ttu-id="8115d-116">Nasıl kaldırılacağı ve alışveriş sepeti güncelleştirme öğeler.</span><span class="sxs-lookup"><span data-stu-id="8115d-116">How to remove and update items in the shopping cart.</span></span>
6. <span data-ttu-id="8115d-117">Bir alışveriş sepeti sayaç dahil etme.</span><span class="sxs-lookup"><span data-stu-id="8115d-117">How to include a shopping cart counter.</span></span>

## <a name="code-features-in-this-tutorial"></a><span data-ttu-id="8115d-118">Bu öğreticideki kod özellikleri:</span><span class="sxs-lookup"><span data-stu-id="8115d-118">Code features in this tutorial:</span></span>

1. <span data-ttu-id="8115d-119">Entity Framework Code First</span><span class="sxs-lookup"><span data-stu-id="8115d-119">Entity Framework Code First</span></span>
2. <span data-ttu-id="8115d-120">Veri ek açıklamaları</span><span class="sxs-lookup"><span data-stu-id="8115d-120">Data Annotations</span></span>
3. <span data-ttu-id="8115d-121">Kesin türü belirtilmiş veri denetimleri</span><span class="sxs-lookup"><span data-stu-id="8115d-121">Strongly typed data controls</span></span>
4. <span data-ttu-id="8115d-122">Model bağlama</span><span class="sxs-lookup"><span data-stu-id="8115d-122">Model binding</span></span>

## <a name="creating-a-shopping-cart"></a><span data-ttu-id="8115d-123">Alışveriş sepeti oluşturma</span><span class="sxs-lookup"><span data-stu-id="8115d-123">Creating a Shopping Cart</span></span>

<span data-ttu-id="8115d-124">Öğretici serisinde daha önce bu sayfaları ve veritabanından ürün verilerini görüntülemek için kodu eklemiştir.</span><span class="sxs-lookup"><span data-stu-id="8115d-124">Earlier in this tutorial series, you added pages and code to view product data from a database.</span></span> <span data-ttu-id="8115d-125">Bu öğreticide, ürünleri yönetmek için alışveriş sepeti oluşturacaksınız kullanıcılar satın alma ilginizi çekiyor mu olduğunu.</span><span class="sxs-lookup"><span data-stu-id="8115d-125">In this tutorial, you'll create a shopping cart to manage the products that users are interested in buying.</span></span> <span data-ttu-id="8115d-126">Kullanıcıların göz atın ve bunlar olmayan kaydedilmiş veya oturum açmış olsa bile öğeleri alışveriş sepetine eklemek mümkün olacaktır.</span><span class="sxs-lookup"><span data-stu-id="8115d-126">Users will be able to browse and add items to the shopping cart even if they are not registered or logged in.</span></span> <span data-ttu-id="8115d-127">Alışveriş sepeti erişimi yönetmek için kullanıcıların benzersiz bir atayacaktır `ID` Sepeti ilk kez kullanıcı alışveriş eriştiğinde bir genel benzersiz tanımlayıcı (GUID) kullanarak.</span><span class="sxs-lookup"><span data-stu-id="8115d-127">To manage shopping cart access, you will assign users a unique `ID` using a globally unique identifier (GUID) when the user accesses the shopping cart for the first time.</span></span> <span data-ttu-id="8115d-128">Bu depolayacağınız `ID` ASP.NET oturum durumu kullanma.</span><span class="sxs-lookup"><span data-stu-id="8115d-128">You'll store this `ID` using the ASP.NET Session state.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="8115d-129">ASP.NET oturum durumu, kullanıcı site ayrılmasından sonra sona erecek kullanıcıya özgü bilgileri depolamak için uygun bir yerdir.</span><span class="sxs-lookup"><span data-stu-id="8115d-129">The ASP.NET Session state is a convenient place to store user-specific information which will expire after the user leaves the site.</span></span> <span data-ttu-id="8115d-130">Oturum durumu kötüye kullanılması büyük sitelerinde performans etkileri sahip olsa da, oturum durumu çalışır tanıtım amacıyla iyi kullanımını açık.</span><span class="sxs-lookup"><span data-stu-id="8115d-130">While misuse of session state can have performance implications on larger sites, light use of session state works well for demonstration purposes.</span></span> <span data-ttu-id="8115d-131">Wingtip Toys örnek proje oturum durumunu işlem içinde saklanıyorsa siteyi barındıran web sunucusunda olduğu oturum durumu bir dış sağlayıcı olmadan kullanmayı gösterir.</span><span class="sxs-lookup"><span data-stu-id="8115d-131">The Wingtip Toys sample project shows how to use session state without an external provider, where session state is stored in-process on the web server hosting the site.</span></span> <span data-ttu-id="8115d-132">Bir uygulama birden çok örneğini sağlamak büyük siteleri veya farklı sunucularda bir uygulama birden çok örneğini çalıştıran siteler için kullanmayı **Microsoft Azure önbellek hizmeti**.</span><span class="sxs-lookup"><span data-stu-id="8115d-132">For larger sites that provide multiple instances of an application or for sites that run multiple instances of an application on different servers, consider using **Windows Azure Cache Service**.</span></span> <span data-ttu-id="8115d-133">Bu önbellek hizmeti web sitesine dış ve işlem içi oturum durumu kullanmanın sorununu çözer dağıtılmış bir önbelleğe alma hizmeti sağlar.</span><span class="sxs-lookup"><span data-stu-id="8115d-133">This Cache Service provides a distributed caching service that is external to the web site and solves the problem of using in-process session state.</span></span> <span data-ttu-id="8115d-134">Daha fazla bilgi için [kullanım ASP.NET oturum durumu Windows Azure Web siteleri ile nasıl](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span><span class="sxs-lookup"><span data-stu-id="8115d-134">For more information see, [How to Use ASP.NET Session State with Windows Azure Web Sites](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span></span>


### <a name="add-cartitem-as-a-model-class"></a><span data-ttu-id="8115d-135">CartItem bir Model sınıfı ekleme</span><span class="sxs-lookup"><span data-stu-id="8115d-135">Add CartItem as a Model Class</span></span>

<span data-ttu-id="8115d-136">Daha önce Bu öğretici serisinde, kategori ve ürün verilerini için şemaya oluşturarak tanımlanan `Category` ve `Product` sınıfları *modelleri* klasör.</span><span class="sxs-lookup"><span data-stu-id="8115d-136">Earlier in this tutorial series, you defined the schema for the category and product data by creating the `Category` and `Product` classes in the *Models* folder.</span></span> <span data-ttu-id="8115d-137">Şimdi, alışveriş sepeti şemasını tanımlamak için yeni bir sınıf ekleyin.</span><span class="sxs-lookup"><span data-stu-id="8115d-137">Now, add a new class to define the schema for the shopping cart.</span></span> <span data-ttu-id="8115d-138">Daha sonra Bu öğreticide, veri erişimi işlemek için bir sınıf ekler `CartItem` tablo.</span><span class="sxs-lookup"><span data-stu-id="8115d-138">Later in this tutorial, you will add a class to handle data access to the `CartItem` table.</span></span> <span data-ttu-id="8115d-139">Bu sınıf eklemek, kaldırmak ve alışveriş sepeti öğelerde güncelleştirmek için iş mantığı sağlar.</span><span class="sxs-lookup"><span data-stu-id="8115d-139">This class will provide the business logic to add, remove, and update items in the shopping cart.</span></span>

1. <span data-ttu-id="8115d-140">Sağ *modelleri* klasörü ve select **Ekle**  - &gt; **yeni öğe**.</span><span class="sxs-lookup"><span data-stu-id="8115d-140">Right-click the *Models* folder and select **Add** -&gt; **New Item**.</span></span> 

    ![Alışveriş sepeti - yeni öğe](shopping-cart/_static/image1.png)
2. <span data-ttu-id="8115d-142">**Yeni Öğe Ekle** iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="8115d-142">The **Add New Item** dialog box is displayed.</span></span> <span data-ttu-id="8115d-143">Seçin **kod**ve ardından **sınıfı**.</span><span class="sxs-lookup"><span data-stu-id="8115d-143">Select **Code**, and then select **Class**.</span></span> 

    ![Alışveriş sepeti - yeni öğe iletişim ekleyin](shopping-cart/_static/image2.png)
3. <span data-ttu-id="8115d-145">Bu yeni sınıf adını *CartItem.cs*.</span><span class="sxs-lookup"><span data-stu-id="8115d-145">Name this new class *CartItem.cs*.</span></span>
4. <span data-ttu-id="8115d-146">**Ekle**'yi tıklatın.</span><span class="sxs-lookup"><span data-stu-id="8115d-146">Click **Add**.</span></span>  
 <span data-ttu-id="8115d-147">Yeni sınıf dosyası Düzenleyicisi'nde görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="8115d-147">The new class file is displayed in the editor.</span></span>
5. <span data-ttu-id="8115d-148">Varsayılan kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="8115d-148">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample1.cs)]

<span data-ttu-id="8115d-149">`CartItem` Sınıfı, bir kullanıcı ekler alışveriş sepetine her ürünün tanımlayacaksınız şeması içerir.</span><span class="sxs-lookup"><span data-stu-id="8115d-149">The `CartItem` class contains the schema that will define each product a user adds to the shopping cart.</span></span> <span data-ttu-id="8115d-150">Bu sınıf, Bu öğretici serisinde daha önce oluşturduğunuz diğer şema sınıfları benzerdir.</span><span class="sxs-lookup"><span data-stu-id="8115d-150">This class is similar to the other schema classes you created earlier in this tutorial series.</span></span> <span data-ttu-id="8115d-151">Kurala göre Entity Framework Code First, bekliyor için birincil anahtar `CartItem` tablo ya da olacaktır `CartItemId` veya `ID`.</span><span class="sxs-lookup"><span data-stu-id="8115d-151">By convention, Entity Framework Code First expects that the primary key for the `CartItem` table will be either `CartItemId` or `ID`.</span></span> <span data-ttu-id="8115d-152">Bununla birlikte, kod varsayılan davranışı veri ek açıklamasını kullanarak geçersiz kılar `[Key]` özniteliği.</span><span class="sxs-lookup"><span data-stu-id="8115d-152">However, the code overrides the default behavior by using the data annotation `[Key]` attribute.</span></span> <span data-ttu-id="8115d-153">`Key` ItemId özelliğinin özniteliği belirtir `ItemID` birincil anahtarı bir özelliktir.</span><span class="sxs-lookup"><span data-stu-id="8115d-153">The `Key` attribute of the ItemId property specifies that the `ItemID` property is the primary key.</span></span>

<span data-ttu-id="8115d-154">`CartId` Özellik belirtir `ID` satın almak için bir öğesiyle ilişkilendirilmiş olan kullanıcı.</span><span class="sxs-lookup"><span data-stu-id="8115d-154">The `CartId` property specifies the `ID` of the user that is associated with the item to purchase.</span></span> <span data-ttu-id="8115d-155">Bu kullanıcı oluşturmak için kod ekleyeceksiniz `ID` kullanıcının alışveriş sepeti eriştiği.</span><span class="sxs-lookup"><span data-stu-id="8115d-155">You'll add code to create this user `ID` when the user accesses the shopping cart.</span></span> <span data-ttu-id="8115d-156">Bu `ID` de bir ASP.NET oturum değişkeni depolanır.</span><span class="sxs-lookup"><span data-stu-id="8115d-156">This `ID` will also be stored as an ASP.NET Session variable.</span></span>

### <a name="update-the-product-context"></a><span data-ttu-id="8115d-157">Ürün içeriği güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="8115d-157">Update the Product Context</span></span>

<span data-ttu-id="8115d-158">Ekleme yanı sıra `CartItem` sınıfı, varlık sınıflarını yönetir ve veritabanına veri erişimi sağlayan veritabanı bağlamı sınıfının güncellemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="8115d-158">In addition to adding the `CartItem` class, you will need to update the database context class that manages the entity classes and that provides data access to the database.</span></span> <span data-ttu-id="8115d-159">Bunu yapmak için yeni oluşturulan ekleyecek `CartItem` model sınıfı için `ProductContext` sınıfı.</span><span class="sxs-lookup"><span data-stu-id="8115d-159">To do this, you will add the newly created `CartItem` model class to the `ProductContext` class.</span></span>

1. <span data-ttu-id="8115d-160">İçinde **Çözüm Gezgini**, bulma ve açma *ProductContext.cs* dosyasını *modelleri* klasör.</span><span class="sxs-lookup"><span data-stu-id="8115d-160">In **Solution Explorer**, find and open the *ProductContext.cs* file in the *Models* folder.</span></span>
2. <span data-ttu-id="8115d-161">Vurgulanmış kodu ekleyin *ProductContext.cs* gibi dosya:</span><span class="sxs-lookup"><span data-stu-id="8115d-161">Add the highlighted code to the *ProductContext.cs* file as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample2.cs?highlight=14)]

<span data-ttu-id="8115d-162">Bu öğretici serisinde kodu daha önce belirtildiği gibi *ProductContext.cs* dosyayı ekler `System.Data.Entity` ad alanı Entity Framework'ün tüm çekirdek işlevlerin erişimi böylece.</span><span class="sxs-lookup"><span data-stu-id="8115d-162">As mentioned previously in this tutorial series, the code in the *ProductContext.cs* file adds the `System.Data.Entity` namespace so that you have access to all the core functionality of the Entity Framework.</span></span> <span data-ttu-id="8115d-163">Bu işlevsellik, sorgu, Ekle, Güncelleştir ve güçlü şekilde yazılan nesnelerin çalışarak verilerini silmek için özelliği içerir.</span><span class="sxs-lookup"><span data-stu-id="8115d-163">This functionality includes the capability to query, insert, update, and delete data by working with strongly typed objects.</span></span> <span data-ttu-id="8115d-164">`ProductContext` Sınıfı erişim için yeni eklenen ekler `CartItem` model sınıfı.</span><span class="sxs-lookup"><span data-stu-id="8115d-164">The `ProductContext` class adds access to the newly added `CartItem` model class.</span></span>

### <a name="managing-the-shopping-cart-business-logic"></a><span data-ttu-id="8115d-165">Alışveriş sepeti iş mantığı yönetme</span><span class="sxs-lookup"><span data-stu-id="8115d-165">Managing the Shopping Cart Business Logic</span></span>

<span data-ttu-id="8115d-166">Ardından, oluşturacağınız `ShoppingCart` sınıfının yeni bir *mantığı* klasör.</span><span class="sxs-lookup"><span data-stu-id="8115d-166">Next, you'll create the `ShoppingCart` class in a new *Logic* folder.</span></span> <span data-ttu-id="8115d-167">`ShoppingCart` Sınıfı işler veri erişimi `CartItem` tablo.</span><span class="sxs-lookup"><span data-stu-id="8115d-167">The `ShoppingCart` class handles data access to the `CartItem` table.</span></span> <span data-ttu-id="8115d-168">Sınıf eklemek, kaldırmak ve alışveriş sepeti öğelerde güncelleştirmek için iş mantığı da içerir.</span><span class="sxs-lookup"><span data-stu-id="8115d-168">The class will also include the business logic to add, remove, and update items in the shopping cart.</span></span>

<span data-ttu-id="8115d-169">Aşağıdaki eylemleri yönetmek için işlevselliği ekleyeceksiniz alışveriş sepeti mantığı içerir:</span><span class="sxs-lookup"><span data-stu-id="8115d-169">The shopping cart logic that you will add will contain the functionality to manage the following actions:</span></span>

1. <span data-ttu-id="8115d-170">Alışveriş sepetine öğeler ekleme</span><span class="sxs-lookup"><span data-stu-id="8115d-170">Adding items to the shopping cart</span></span>
2. <span data-ttu-id="8115d-171">Alışveriş sepetinden öğeleri kaldırma</span><span class="sxs-lookup"><span data-stu-id="8115d-171">Removing items from the shopping cart</span></span>
3. <span data-ttu-id="8115d-172">Alışveriş sepeti kimliği alma</span><span class="sxs-lookup"><span data-stu-id="8115d-172">Getting the shopping cart ID</span></span>
4. <span data-ttu-id="8115d-173">Alışveriş sepetinden öğeleri alınıyor</span><span class="sxs-lookup"><span data-stu-id="8115d-173">Retrieving items from the shopping cart</span></span>
5. <span data-ttu-id="8115d-174">Tüm öğelerin alışveriş sepeti tutar toplamda</span><span class="sxs-lookup"><span data-stu-id="8115d-174">Totaling the amount of all the shopping cart items</span></span>
6. <span data-ttu-id="8115d-175">Alışveriş sepeti verileri güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="8115d-175">Updating the shopping cart data</span></span>

<span data-ttu-id="8115d-176">Bir alışveriş sepeti sayfası (*ShoppingCart.aspx*) ve alışveriş sepeti sınıfı birlikte alışveriş sepeti verilere erişmek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8115d-176">A shopping cart page (*ShoppingCart.aspx*) and the shopping cart class will be used together to access shopping cart data.</span></span> <span data-ttu-id="8115d-177">Alışveriş sepeti sayfası kullanıcı alışveriş sepetine ekler tüm öğeleri görüntüler.</span><span class="sxs-lookup"><span data-stu-id="8115d-177">The shopping cart page will display all the items the user adds to the shopping cart.</span></span> <span data-ttu-id="8115d-178">Alışveriş sepeti yanında, sayfa ve sınıf, bir sayfa oluşturacaksınız (*AddToCart.aspx*) ürünleri alışveriş sepetine eklemek için.</span><span class="sxs-lookup"><span data-stu-id="8115d-178">Besides the shopping cart page and class, you'll create a page (*AddToCart.aspx*) to add products to the shopping cart.</span></span> <span data-ttu-id="8115d-179">Ayrıca kod ekleyeceksiniz *ProductList.aspx* sayfa ve *ProductDetails.aspx* bağlantısını sağlayacak sayfa *AddToCart.aspx* sayfasında, böylece kullanıcı ekleyebilirsiniz Ürünler alışveriş sepetine.</span><span class="sxs-lookup"><span data-stu-id="8115d-179">You will also add code to the *ProductList.aspx* page and the *ProductDetails.aspx* page that will provide a link to the *AddToCart.aspx* page, so that the user can add products to the shopping cart.</span></span>

<span data-ttu-id="8115d-180">Aşağıdaki diyagramda, kullanıcı bir ürün alışveriş sepetine eklediğinde oluşan temel işlemi gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="8115d-180">The following diagram shows the basic process that occurs when the user adds a product to the shopping cart.</span></span>

![Alışveriş sepeti - alışveriş sepetine ekleme](shopping-cart/_static/image3.png)

<span data-ttu-id="8115d-182">Kullanıcı tıkladığında **Sepete Ekle** ya da bağlantıyı *ProductList.aspx* sayfa veya *ProductDetails.aspx* , uygulama sayfadan *AddToCart.aspx* sayfa ve ardından otomatik olarak *ShoppingCart.aspx* sayfası.</span><span class="sxs-lookup"><span data-stu-id="8115d-182">When the user clicks the **Add To Cart** link on either the *ProductList.aspx* page or the *ProductDetails.aspx* page, the application will navigate to the *AddToCart.aspx* page and then automatically to the *ShoppingCart.aspx* page.</span></span> <span data-ttu-id="8115d-183">*AddToCart.aspx* sayfa ekleyecek select ürün alışveriş sepetine ShoppingCart sınıfında bir yöntem çağırarak.</span><span class="sxs-lookup"><span data-stu-id="8115d-183">The *AddToCart.aspx* page will add the select product to the shopping cart by calling a method in the ShoppingCart class.</span></span> <span data-ttu-id="8115d-184">*ShoppingCart.aspx* sayfası alışveriş sepetine eklenen ürünleri görüntüler.</span><span class="sxs-lookup"><span data-stu-id="8115d-184">The *ShoppingCart.aspx* page will display the products that have been added to the shopping cart.</span></span>

#### <a name="creating-the-shopping-cart-class"></a><span data-ttu-id="8115d-185">Alışveriş sepeti sınıfı oluşturma</span><span class="sxs-lookup"><span data-stu-id="8115d-185">Creating the Shopping Cart Class</span></span>

<span data-ttu-id="8115d-186">`ShoppingCart` Sınıfı eklenir uygulamayı ayrı bir klasörde model (model klasör), sayfa (kök klasöründe) ve (mantığı klasör) mantığı arasında NET bir ayrıma böylece olacaktır.</span><span class="sxs-lookup"><span data-stu-id="8115d-186">The `ShoppingCart` class will be added to a separate folder in the application so that there will be a clear distinction between the model (Models folder), the pages (root folder) and the logic (Logic folder).</span></span>

1. <span data-ttu-id="8115d-187">İçinde **Çözüm Gezgini**, sağ **WingtipToys**proje ve seçin **Ekle**-&gt;**yeni klasör**.</span><span class="sxs-lookup"><span data-stu-id="8115d-187">In **Solution Explorer**, right-click the **WingtipToys**project and select **Add**-&gt;**New Folder**.</span></span> <span data-ttu-id="8115d-188">Yeni bir klasör adı *mantığı*.</span><span class="sxs-lookup"><span data-stu-id="8115d-188">Name the new folder *Logic*.</span></span>
2. <span data-ttu-id="8115d-189">Sağ *mantığı* klasörünü ve ardından **Ekle**  - &gt; **yeni öğe**.</span><span class="sxs-lookup"><span data-stu-id="8115d-189">Right-click the *Logic* folder and then select **Add** -&gt; **New Item**.</span></span>
3. <span data-ttu-id="8115d-190">Adlı yeni bir sınıf dosyası ekleyin *ShoppingCartActions.cs*.</span><span class="sxs-lookup"><span data-stu-id="8115d-190">Add a new class file named *ShoppingCartActions.cs*.</span></span>
4. <span data-ttu-id="8115d-191">Varsayılan kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="8115d-191">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample3.cs)]

<span data-ttu-id="8115d-192">`AddToCart` Yöntemi etkinleştirir ürüne bağlı alışveriş sepeti dahil edilecek tek tek ürünlerin `ID`.</span><span class="sxs-lookup"><span data-stu-id="8115d-192">The `AddToCart` method enables individual products to be included in the shopping cart based on the product `ID`.</span></span> <span data-ttu-id="8115d-193">Sepete ürün eklenir veya Sepeti bu ürün için bir öğe içeriyorsa, miktarı artırılır.</span><span class="sxs-lookup"><span data-stu-id="8115d-193">The product is added to the cart, or if the cart already contains an item for that product, the quantity is incremented.</span></span>

<span data-ttu-id="8115d-194">`GetCartId` Yöntemi döndürür Sepeti `ID` kullanıcı için.</span><span class="sxs-lookup"><span data-stu-id="8115d-194">The `GetCartId` method returns the cart `ID` for the user.</span></span> <span data-ttu-id="8115d-195">Sepeti `ID` bir kullanıcı, kendi alışveriş sepeti sahip öğelerini izlemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8115d-195">The cart `ID` is used to track the items that a user has in their shopping cart.</span></span> <span data-ttu-id="8115d-196">Kullanıcı varolan Sepeti yoksa `ID`, yeni Sepeti `ID` kendileri için oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="8115d-196">If the user does not have an existing cart `ID`, a new cart `ID` is created for them.</span></span> <span data-ttu-id="8115d-197">Kullanıcı, Sepeti gibi kayıtlı bir kullanıcı olarak oturum varsa `ID` kendi kullanıcı adına ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="8115d-197">If the user is signed in as a registered user, the cart `ID` is set to their user name.</span></span> <span data-ttu-id="8115d-198">Ancak, kullanıcı sepetinizde, imzalı değilse `ID` benzersiz bir değere (GUID) ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="8115d-198">However, if the user is not signed in, the cart `ID` is set to a unique value (a GUID).</span></span> <span data-ttu-id="8115d-199">Bu yalnızca bir Sepeti oturum göre her kullanıcı için oluşturulmuş bir GUID sağlar.</span><span class="sxs-lookup"><span data-stu-id="8115d-199">A GUID ensures that only one cart is created for each user, based on session.</span></span>

<span data-ttu-id="8115d-200">`GetCartItems` Yöntemi alışveriş sepeti öğeleri kullanıcı için bir listesini döndürür.</span><span class="sxs-lookup"><span data-stu-id="8115d-200">The `GetCartItems` method returns a list of shopping cart items for the user.</span></span> <span data-ttu-id="8115d-201">Daha sonra Bu öğreticide, model bağlama alışveriş sepeti kullanımında Sepeti öğeleri görüntülemek için kullanıldığını görürsünüz `GetCartItems` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="8115d-201">Later in this tutorial, you will see that model binding is used to display the cart items in the shopping cart using the `GetCartItems` method.</span></span>

### <a name="creating-the-add-to-cart-functionality"></a><span data-ttu-id="8115d-202">Sepeti ile ekleme işlevselliği oluşturma</span><span class="sxs-lookup"><span data-stu-id="8115d-202">Creating the Add-To-Cart Functionality</span></span>

<span data-ttu-id="8115d-203">Daha önce belirtildiği gibi adlandırılmış bir işleme sayfa oluşturacak *AddToCart.aspx* yeni ürünler kullanıcı alışveriş sepetine eklemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8115d-203">As mentioned earlier, you will create a processing page named *AddToCart.aspx* that will be used to add new products to the shopping cart of the user.</span></span> <span data-ttu-id="8115d-204">Bu sayfayı çağıracak `AddToCart` yönteminde `ShoppingCart` oluşturduğunuz sınıfı.</span><span class="sxs-lookup"><span data-stu-id="8115d-204">This page will call the `AddToCart` method in the `ShoppingCart` class that you just created.</span></span> <span data-ttu-id="8115d-205">*AddToCart.aspx* sayfası, beklediğiniz bir ürün `ID` kendisine geçirilen.</span><span class="sxs-lookup"><span data-stu-id="8115d-205">The *AddToCart.aspx* page will expect that a product `ID` is passed to it.</span></span> <span data-ttu-id="8115d-206">Bu ürün `ID` çağrılırken kullanılacak `AddToCart` yönteminde `ShoppingCart` sınıfı.</span><span class="sxs-lookup"><span data-stu-id="8115d-206">This product `ID` will be used when calling the `AddToCart` method in the `ShoppingCart` class.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="8115d-207">Arka plan kodu değiştirme (*AddToCart.aspx.cs*) UI sayfada değil Bu sayfa için (*AddToCart.aspx*).</span><span class="sxs-lookup"><span data-stu-id="8115d-207">You will be modifying the code-behind (*AddToCart.aspx.cs*) for this page, not the page UI (*AddToCart.aspx*).</span></span>


#### <a name="to-create-the-add-to-cart-functionality"></a><span data-ttu-id="8115d-208">Ekle Sepeti oluşturmak için işlevselliği:</span><span class="sxs-lookup"><span data-stu-id="8115d-208">To create the Add-To-Cart functionality:</span></span>

1. <span data-ttu-id="8115d-209">İçinde **Çözüm Gezgini**, sağ **WingtipToys**proje, tıklatın **Ekle**  - &gt; **yeni öğe**.</span><span class="sxs-lookup"><span data-stu-id="8115d-209">In **Solution Explorer**, right-click the **WingtipToys**project, click **Add** -&gt; **New Item**.</span></span>  
 <span data-ttu-id="8115d-210">**Yeni Öğe Ekle** iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="8115d-210">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="8115d-211">Standart yeni bir sayfa (Web formu) adlı uygulamaya eklemek *AddToCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="8115d-211">Add a standard new page (Web Form) to the application named *AddToCart.aspx*.</span></span> 

    ![Alışveriş sepeti - Web formu ekleyin](shopping-cart/_static/image4.png)
3. <span data-ttu-id="8115d-213">İçinde **Çözüm Gezgini**, sağ *AddToCart.aspx* sayfasında ve ardından **görünümü kodu**.</span><span class="sxs-lookup"><span data-stu-id="8115d-213">In **Solution Explorer**, right-click the *AddToCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="8115d-214">*AddToCart.aspx.cs* arka plan kodu dosya Düzenleyicisi'nde açılır.</span><span class="sxs-lookup"><span data-stu-id="8115d-214">The *AddToCart.aspx.cs* code-behind file is opened in the editor.</span></span>
4. <span data-ttu-id="8115d-215">Varolan kodla *AddToCart.aspx.cs* arka plan kodu aşağıdaki ile:</span><span class="sxs-lookup"><span data-stu-id="8115d-215">Replace the existing code in the *AddToCart.aspx.cs* code-behind with the following:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample4.cs)]

<span data-ttu-id="8115d-216">Zaman *AddToCart.aspx* sayfa yüklenir, ürün `ID` Sorgu dizesinden alınır.</span><span class="sxs-lookup"><span data-stu-id="8115d-216">When the *AddToCart.aspx* page is loaded, the product `ID` is retrieved from the query string.</span></span> <span data-ttu-id="8115d-217">Ardından, alışveriş sepeti sınıfının bir örneği oluşturulur ve çağırmak için kullanılan `AddToCart` Bu öğreticide daha önce eklediğiniz yöntemi.</span><span class="sxs-lookup"><span data-stu-id="8115d-217">Next, an instance of the shopping cart class is created and used to call the `AddToCart` method that you added earlier in this tutorial.</span></span> <span data-ttu-id="8115d-218">`AddToCart` Yöntemi, bulunan *ShoppingCartActions.cs* dosya, seçilen ürün alışveriş sepetine eklemek veya seçili ürünün ürün miktarını artırmak için mantığı içerir.</span><span class="sxs-lookup"><span data-stu-id="8115d-218">The `AddToCart` method, contained in the *ShoppingCartActions.cs* file, includes the logic to add the selected product to the shopping cart or increment the product quantity of the selected product.</span></span> <span data-ttu-id="8115d-219">Ürün alışveriş sepetine eklenmemişse ürün eklenen `CartItem` veritabanı tablosu.</span><span class="sxs-lookup"><span data-stu-id="8115d-219">If the product hasn't been added to the shopping cart, the product is added to the `CartItem` table of the database.</span></span> <span data-ttu-id="8115d-220">Ürün alışveriş sepetine eklendi ve kullanıcı aynı ürünün ek bir öğe ekler, ürün miktarını içinde artırılır `CartItem` tablo.</span><span class="sxs-lookup"><span data-stu-id="8115d-220">If the product has already been added to the shopping cart and the user adds an additional item of the same product, the product quantity is incremented in the `CartItem` table.</span></span> <span data-ttu-id="8115d-221">Son olarak, geri sayfasına yönlendiren *ShoppingCart.aspx* burada kullanıcının gördüğü sepetinizdeki öğeler güncelleştirilmiş bir listesini sonraki adımda ekleyeceksiniz sayfası.</span><span class="sxs-lookup"><span data-stu-id="8115d-221">Finally, the page redirects back to the *ShoppingCart.aspx* page that you'll add in the next step, where the user sees an updated list of items in the cart.</span></span>

<span data-ttu-id="8115d-222">Daha önce belirtildiği gibi bir kullanıcı `ID` belirli bir kullanıcı ile ilişkili ürün tanımlamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8115d-222">As previously mentioned, a user `ID` is used to identify the products that are associated with a specific user.</span></span> <span data-ttu-id="8115d-223">Bu `ID` bir satır eklenir `CartItem` tablo her zaman kullanıcı alışveriş sepetine ürün ekler.</span><span class="sxs-lookup"><span data-stu-id="8115d-223">This `ID` is added to a row in the `CartItem` table each time the user adds a product to the shopping cart.</span></span>

### <a name="creating-the-shopping-cart-ui"></a><span data-ttu-id="8115d-224">Alışveriş sepeti kullanıcı Arabirimi oluşturma</span><span class="sxs-lookup"><span data-stu-id="8115d-224">Creating the Shopping Cart UI</span></span>

<span data-ttu-id="8115d-225">*ShoppingCart.aspx* sayfası kullanıcı kendi alışveriş sepetine eklenen ürünleri görüntüler.</span><span class="sxs-lookup"><span data-stu-id="8115d-225">The *ShoppingCart.aspx* page will display the products that the user has added to their shopping cart.</span></span> <span data-ttu-id="8115d-226">De eklemek, kaldırmak ve alışveriş sepeti öğelerde güncelleştirme olanağı sağlanır.</span><span class="sxs-lookup"><span data-stu-id="8115d-226">It will also provide the ability to add, remove and update items in the shopping cart.</span></span>

1. <span data-ttu-id="8115d-227">İçinde **Çözüm Gezgini**, sağ **WingtipToys**, tıklatın **Ekle**  - &gt; **yeni öğe**.</span><span class="sxs-lookup"><span data-stu-id="8115d-227">In **Solution Explorer**, right-click **WingtipToys**, click **Add** -&gt; **New Item**.</span></span>  
 <span data-ttu-id="8115d-228">**Yeni Öğe Ekle** iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="8115d-228">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="8115d-229">Ana sayfayı seçerek içeren yeni bir sayfa (Web formu) ekleyin **Web ana sayfa kullanarak Form**.</span><span class="sxs-lookup"><span data-stu-id="8115d-229">Add a new page (Web Form) that includes a master page by selecting **Web Form using Master Page**.</span></span> <span data-ttu-id="8115d-230">Yeni sayfa adı *ShoppingCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="8115d-230">Name the new page *ShoppingCart.aspx*.</span></span>
3. <span data-ttu-id="8115d-231">Seçin **Site.Master** ana sayfa yeni oluşturulan eklemek için *.aspx* sayfası.</span><span class="sxs-lookup"><span data-stu-id="8115d-231">Select **Site.Master** to attach the master page to the newly created *.aspx* page.</span></span>
4. <span data-ttu-id="8115d-232">İçinde *ShoppingCart.aspx* sayfasında, varolan biçimlendirme aşağıdaki biçimlendirme ile değiştirin:</span><span class="sxs-lookup"><span data-stu-id="8115d-232">In the *ShoppingCart.aspx* page, replace the existing markup with the following markup:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample5.aspx)]

<span data-ttu-id="8115d-233">*ShoppingCart.aspx* sayfa içeren bir **GridView** adlı Denetim `CartList`.</span><span class="sxs-lookup"><span data-stu-id="8115d-233">The *ShoppingCart.aspx* page includes a **GridView** control named `CartList`.</span></span> <span data-ttu-id="8115d-234">Bu denetimi model bağlama veritabanından alışveriş sepeti veri bağlamak için kullanır. **GridView** denetim.</span><span class="sxs-lookup"><span data-stu-id="8115d-234">This control uses model binding to bind the shopping cart data from the database to the **GridView** control.</span></span> <span data-ttu-id="8115d-235">Ayarladığınızda `ItemType` özelliği **GridView** denetlemek, veri bağlama ifadesi `Item` bulunur ve denetimi biçimlerini kesin türü belirtilmiş haline gelir.</span><span class="sxs-lookup"><span data-stu-id="8115d-235">When you set the `ItemType` property of the **GridView** control, the data-binding expression `Item` is available in the markup of the control and the control becomes strongly typed.</span></span> <span data-ttu-id="8115d-236">Bu öğretici serisinde daha önce belirtildiği gibi ayrıntılarını seçebilirsiniz `Item` IntelliSense kullanarak nesne.</span><span class="sxs-lookup"><span data-stu-id="8115d-236">As mentioned earlier in this tutorial series, you can select details of the `Item` object using IntelliSense.</span></span> <span data-ttu-id="8115d-237">Model bağlama verileri seçmek için kullanılacak bir veri denetimini yapılandırmak için ayarladığınız `SelectMethod` denetiminin özelliği.</span><span class="sxs-lookup"><span data-stu-id="8115d-237">To configure a data control to use model binding to select data, you set the `SelectMethod` property of the control.</span></span> <span data-ttu-id="8115d-238">Yukarıdaki biçimlendirme ayarladığınız `SelectMethod` listesi döndüren GetShoppingCartItems yöntemi kullanmak üzere `CartItem` nesneleri.</span><span class="sxs-lookup"><span data-stu-id="8115d-238">In the markup above, you set the `SelectMethod` to use the GetShoppingCartItems method which returns a list of `CartItem` objects.</span></span> <span data-ttu-id="8115d-239">**GridView** veri denetimi sayfa yaşam döngüsündeki uygun zamanda yöntemini çağırır ve döndürülen verileri otomatik olarak bağlar.</span><span class="sxs-lookup"><span data-stu-id="8115d-239">The **GridView** data control calls the method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="8115d-240">`GetShoppingCartItems` Yöntemi hala eklenmelidir.</span><span class="sxs-lookup"><span data-stu-id="8115d-240">The `GetShoppingCartItems` method must still be added.</span></span>

#### <a name="retrieving-the-shopping-cart-items"></a><span data-ttu-id="8115d-241">Alışveriş sepeti öğeleri alınıyor</span><span class="sxs-lookup"><span data-stu-id="8115d-241">Retrieving the Shopping Cart Items</span></span>

<span data-ttu-id="8115d-242">Ardından, kod ekleyin *ShoppingCart.aspx.cs* almak ve alışveriş sepeti UI doldurmak için arka plan kod.</span><span class="sxs-lookup"><span data-stu-id="8115d-242">Next, you add code to the *ShoppingCart.aspx.cs* code-behind to retrieve and populate the Shopping Cart UI.</span></span>

1. <span data-ttu-id="8115d-243">İçinde **Çözüm Gezgini**, sağ *ShoppingCart.aspx* sayfasında ve ardından **görünümü kodu**.</span><span class="sxs-lookup"><span data-stu-id="8115d-243">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="8115d-244">*ShoppingCart.aspx.cs* arka plan kodu dosya Düzenleyicisi'nde açılır.</span><span class="sxs-lookup"><span data-stu-id="8115d-244">The *ShoppingCart.aspx.cs* code-behind file is opened in the editor.</span></span>
2. <span data-ttu-id="8115d-245">Var olan kodu aşağıdakilerle değiştirin:</span><span class="sxs-lookup"><span data-stu-id="8115d-245">Replace the existing code with the following:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample6.cs)]

<span data-ttu-id="8115d-246">Yukarıda belirtildiği gibi `GridView` veri denetimi çağrıları `GetShoppingCartItems` yöntemi sayfası yaşamında uygun zamanda döngüsü ve döndürülen verileri otomatik olarak bağlar.</span><span class="sxs-lookup"><span data-stu-id="8115d-246">As mentioned above, the `GridView` data control calls the `GetShoppingCartItems` method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="8115d-247">`GetShoppingCartItems` Yöntemi bir örneğini oluşturur `ShoppingCartActions` nesnesi.</span><span class="sxs-lookup"><span data-stu-id="8115d-247">The `GetShoppingCartItems` method creates an instance of the `ShoppingCartActions` object.</span></span> <span data-ttu-id="8115d-248">Daha sonra çağrılarak sepetinizde öğeleri döndürmek için bu örnek kodu kullanan `GetCartItems` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="8115d-248">Then, the code uses that instance to return the items in the cart by calling the `GetCartItems` method.</span></span>

### <a name="adding-products-to-the-shopping-cart"></a><span data-ttu-id="8115d-249">Alışveriş sepetine ürün ekleme</span><span class="sxs-lookup"><span data-stu-id="8115d-249">Adding Products to the Shopping Cart</span></span>

<span data-ttu-id="8115d-250">Zaman ya da *ProductList.aspx* veya *ProductDetails.aspx* sayfası görüntülenirse, kullanıcı bir bağlantıyı kullanarak alışveriş sepetine ürün eklemek mümkün olacaktır.</span><span class="sxs-lookup"><span data-stu-id="8115d-250">When either the *ProductList.aspx* or the *ProductDetails.aspx* page is displayed, the user will be able to add the product to the shopping cart using a link.</span></span> <span data-ttu-id="8115d-251">Bunlar bağlantısını tıklattığınızda uygulama adlı işleme sayfasına gider *AddToCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="8115d-251">When they click the link, the application navigates to the processing page named *AddToCart.aspx*.</span></span> <span data-ttu-id="8115d-252">*AddToCart.aspx* sayfa çağıracaktır `AddToCart` yönteminde `ShoppingCart` Bu öğreticide daha önce eklediğiniz sınıfı.</span><span class="sxs-lookup"><span data-stu-id="8115d-252">The *AddToCart.aspx* page will call the `AddToCart` method in the `ShoppingCart` class that you added earlier in this tutorial.</span></span>

<span data-ttu-id="8115d-253">Şimdi, ekleyeceksiniz bir **Sepete Ekle** hem de bağlantı *ProductList.aspx* sayfa ve *ProductDetails.aspx* sayfası.</span><span class="sxs-lookup"><span data-stu-id="8115d-253">Now, you'll add an **Add to Cart** link to both the *ProductList.aspx* page and the *ProductDetails.aspx* page.</span></span> <span data-ttu-id="8115d-254">Bu bağlantıyı ürün içerecektir `ID` veritabanından alınır.</span><span class="sxs-lookup"><span data-stu-id="8115d-254">This link will include the product `ID` that is retrieved from the database.</span></span>

1. <span data-ttu-id="8115d-255">İçinde **Çözüm Gezgini**, bulma ve adlı sayfası açmak *ProductList.aspx*.</span><span class="sxs-lookup"><span data-stu-id="8115d-255">In **Solution Explorer**, find and open the page named *ProductList.aspx*.</span></span>
2. <span data-ttu-id="8115d-256">Sarı vurgulanan biçimlendirmeleri eklemek *ProductList.aspx* tüm sayfayı şu şekilde görünmesi sayfasında:</span><span class="sxs-lookup"><span data-stu-id="8115d-256">Add the markup highlighted in yellow to the *ProductList.aspx* page so that the entire page appears as follows:</span></span>  

    [!code-aspx[Main](shopping-cart/samples/sample7.aspx?highlight=50-54)]

### <a name="testing-the-shopping-cart"></a><span data-ttu-id="8115d-257">Alışveriş sepeti test etme</span><span class="sxs-lookup"><span data-stu-id="8115d-257">Testing the Shopping Cart</span></span>

<span data-ttu-id="8115d-258">Alışveriş sepetine ürünleri eklemek ne görmek için uygulamayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="8115d-258">Run the application to see how you add products to the shopping cart.</span></span>

1. <span data-ttu-id="8115d-259">Tuşuna **F5** uygulamayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="8115d-259">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="8115d-260">Proje veritabanını yeniden oluşturur sonra tarayıcı Göster açıp *Default.aspx* sayfası.</span><span class="sxs-lookup"><span data-stu-id="8115d-260">After the project recreates the database, the browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="8115d-261">Seçin **araba** kategori Gezinti menüsünde.</span><span class="sxs-lookup"><span data-stu-id="8115d-261">Select **Cars** from the category navigation menu.</span></span>  
 <span data-ttu-id="8115d-262">*ProductList.aspx* sayfası, yalnızca "Araba" kategorisindeki ürünleri gösteren görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="8115d-262">The *ProductList.aspx* page is displayed showing only products included in the "Cars" category.</span></span> 

    ![Alışveriş sepeti - araba](shopping-cart/_static/image5.png)
3. <span data-ttu-id="8115d-264">Tıklatın **Sepete Ekle** ilk ürün yanındaki bağlantı listelenen (dönüştürülebilir car).</span><span class="sxs-lookup"><span data-stu-id="8115d-264">Click the **Add to Cart** link next to the first product listed (the convertible car).</span></span>   
 <span data-ttu-id="8115d-265">*ShoppingCart.aspx* sayfası görüntülenirse, alışveriş Sepetiniz seçimi gösterme.</span><span class="sxs-lookup"><span data-stu-id="8115d-265">The *ShoppingCart.aspx* page is displayed, showing the selection in your shopping cart.</span></span> 

    ![Alışveriş sepeti - Sepeti](shopping-cart/_static/image6.png)
4. <span data-ttu-id="8115d-267">Ek ürünler seçerek görüntülemek **düzlemleri** kategori Gezinti menüsünde.</span><span class="sxs-lookup"><span data-stu-id="8115d-267">View additional products by selecting **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="8115d-268">Tıklatın **Sepete Ekle** listelenen ilk ürün yanındaki bağlantı.</span><span class="sxs-lookup"><span data-stu-id="8115d-268">Click the **Add to Cart** link next to the first product listed.</span></span>  
 <span data-ttu-id="8115d-269">*ShoppingCart.aspx* ek öğesiyle sayfası görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="8115d-269">The *ShoppingCart.aspx* page is displayed with the additional item.</span></span>
6. <span data-ttu-id="8115d-270">Tarayıcıyı kapatın.</span><span class="sxs-lookup"><span data-stu-id="8115d-270">Close the browser.</span></span>

### <a name="calculating-and-displaying-the-order-total"></a><span data-ttu-id="8115d-271">Hesaplama ve sipariş toplam görüntüleme</span><span class="sxs-lookup"><span data-stu-id="8115d-271">Calculating and Displaying the Order Total</span></span>

<span data-ttu-id="8115d-272">Alışveriş sepetine ürün ekleme yanı sıra ekleyeceksiniz bir `GetTotal` yönteme `ShoppingCart` sınıfı ve alışveriş sepeti sayfasında toplam sipariş miktarını görüntüler.</span><span class="sxs-lookup"><span data-stu-id="8115d-272">In addition to adding products to the shopping cart, you will add a `GetTotal` method to the `ShoppingCart` class and display the total order amount in the shopping cart page.</span></span>

1. <span data-ttu-id="8115d-273">İçinde **Çözüm Gezgini**, açık *ShoppingCartActions.cs* dosyasını *mantığı* klasör.</span><span class="sxs-lookup"><span data-stu-id="8115d-273">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="8115d-274">Aşağıdakileri ekleyin `GetTotal` sarıya vurgulanan yöntemi `ShoppingCart` sınıf böylece sınıfı şu şekilde görünür:</span><span class="sxs-lookup"><span data-stu-id="8115d-274">Add the following `GetTotal` method highlighted in yellow to the `ShoppingCart` class, so that the class appears as follows:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample8.cs?highlight=85-97)]

<span data-ttu-id="8115d-275">İlk olarak, `GetTotal` yöntemi, kullanıcı için alışveriş sepeti Kimliğini alır.</span><span class="sxs-lookup"><span data-stu-id="8115d-275">First, the `GetTotal` method gets the ID of the shopping cart for the user.</span></span> <span data-ttu-id="8115d-276">Ardından yöntemi alışveriş sepeti listelenen her ürün için ürün miktarı Ürün Fiyat çarparak toplam alır.</span><span class="sxs-lookup"><span data-stu-id="8115d-276">Then the method gets the cart total by multiplying the product price by the product quantity for each product listed in the cart.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="8115d-277">Yukarıdaki kod boş değer atanabilir tür kullanır "`int?`".</span><span class="sxs-lookup"><span data-stu-id="8115d-277">The above code uses the nullable type "`int?`".</span></span> <span data-ttu-id="8115d-278">Boş değer atanabilir türler tüm değerlerin temel alınan türü ve boş bir değer olarak gösterebilir.</span><span class="sxs-lookup"><span data-stu-id="8115d-278">Nullable types can represent all the values of an underlying type, and also as a null value.</span></span> <span data-ttu-id="8115d-279">Daha fazla bilgi için [kullanarak boş değer atanabilir türler](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span><span class="sxs-lookup"><span data-stu-id="8115d-279">For more information see, [Using Nullable Types](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span></span>


### <a name="modify-the-shopping-cart-display"></a><span data-ttu-id="8115d-280">Alışveriş sepeti görüntüsünü değiştirme</span><span class="sxs-lookup"><span data-stu-id="8115d-280">Modify the Shopping Cart Display</span></span>

<span data-ttu-id="8115d-281">Sonraki kodunu değiştireceksiniz *ShoppingCart.aspx* çağırmak için sayfa `GetTotal` yöntemi ve toplam görüntü *ShoppingCart.aspx* sayfasında sayfa yüklendiğinde.</span><span class="sxs-lookup"><span data-stu-id="8115d-281">Next you'll modify the code for the *ShoppingCart.aspx* page to call the `GetTotal` method and display that total on the *ShoppingCart.aspx* page when the page loads.</span></span>

1. <span data-ttu-id="8115d-282">İçinde **Çözüm Gezgini**, sağ *ShoppingCart.aspx* sayfasından seçim yapıp **görünümü kodu**.</span><span class="sxs-lookup"><span data-stu-id="8115d-282">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and select **View Code**.</span></span>
2. <span data-ttu-id="8115d-283">İçinde *ShoppingCart.aspx.cs* dosya, güncelleştirme `Page_Load` sarı ile vurgulanmış aşağıdaki kodu ekleyerek işleyici:</span><span class="sxs-lookup"><span data-stu-id="8115d-283">In the *ShoppingCart.aspx.cs* file, update the `Page_Load` handler by adding the following code highlighted in yellow:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample9.cs?highlight=16-31)]

<span data-ttu-id="8115d-284">Zaman *ShoppingCart.aspx* sayfayı yükler, alışveriş sepeti nesnesi yükler ve ardından çağırarak alışveriş sepeti toplam alır `GetTotal` yöntemi `ShoppingCart` sınıfı.</span><span class="sxs-lookup"><span data-stu-id="8115d-284">When the *ShoppingCart.aspx* page loads, it loads the shopping cart object and then retrieves the shopping cart total by calling the `GetTotal` method of the `ShoppingCart` class.</span></span> <span data-ttu-id="8115d-285">Bir ileti alışveriş sepeti boşsa, bunu belirten görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="8115d-285">If the shopping cart is empty, a message to that effect is displayed.</span></span>

### <a name="testing-the-shopping-cart-total"></a><span data-ttu-id="8115d-286">Alışveriş sepeti toplam test etme</span><span class="sxs-lookup"><span data-stu-id="8115d-286">Testing the Shopping Cart Total</span></span>

<span data-ttu-id="8115d-287">Nasıl yalnızca bir ürün alışveriş sepetine ekleyebileceğiniz değil görmek için uygulamayı şimdi çalıştırın, ancak alışveriş sepeti toplam görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8115d-287">Run the application now to see how you can not only add a product to the shopping cart, but you can see the shopping cart total.</span></span>

1. <span data-ttu-id="8115d-288">Tuşuna **F5** uygulamayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="8115d-288">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="8115d-289">Tarayıcıyı açın ve göstermek *Default.aspx* sayfası.</span><span class="sxs-lookup"><span data-stu-id="8115d-289">The browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="8115d-290">Seçin **araba** kategori Gezinti menüsünde.</span><span class="sxs-lookup"><span data-stu-id="8115d-290">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="8115d-291">Tıklatın **Sepete Ekle** ilk ürün yanındaki bağlantı.</span><span class="sxs-lookup"><span data-stu-id="8115d-291">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="8115d-292">*ShoppingCart.aspx* sayfası, sipariş toplamı ile gösterilir.</span><span class="sxs-lookup"><span data-stu-id="8115d-292">The *ShoppingCart.aspx* page is displayed with the order total.</span></span> 

    ![Sepeti - alışveriş sepeti toplamı](shopping-cart/_static/image7.png)
4. <span data-ttu-id="8115d-294">Bazı diğer ürünleri (örneğin, uçak) Sepete ekleyin.</span><span class="sxs-lookup"><span data-stu-id="8115d-294">Add some other products (for example, a plane) to the cart.</span></span>
5. <span data-ttu-id="8115d-295">*ShoppingCart.aspx* eklediğiniz tüm ürünleri güncelleştirilmiş bir toplamı ile sayfası görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="8115d-295">The *ShoppingCart.aspx* page is displayed with an updated total for all the products you've added.</span></span> 

    ![Alışveriş sepeti - birden çok ürün](shopping-cart/_static/image8.png)
6. <span data-ttu-id="8115d-297">Tarayıcı penceresini kapatarak çalışan uygulamayı durdurun.</span><span class="sxs-lookup"><span data-stu-id="8115d-297">Stop the running app by closing the browser window.</span></span>

### <a name="adding-update-and-checkout-buttons-to-the-shopping-cart"></a><span data-ttu-id="8115d-298">Alışveriş sepetine ekleme, güncelleştirme ve Checkout düğmeleri</span><span class="sxs-lookup"><span data-stu-id="8115d-298">Adding Update and Checkout Buttons to the Shopping Cart</span></span>

<span data-ttu-id="8115d-299">Kullanıcıların alışveriş sepeti değiştirmesine izin vermek için ekleyeceksiniz bir **güncelleştirme** düğmesi ve **Checkout** alışveriş sepeti sayfasının düğmesini.</span><span class="sxs-lookup"><span data-stu-id="8115d-299">To allow the users to modify the shopping cart, you'll add an **Update** button and a **Checkout** button to the shopping cart page.</span></span> <span data-ttu-id="8115d-300">**Checkout** daha sonra bu serideki öğretici kadar düğmesi kullanılamıyor.</span><span class="sxs-lookup"><span data-stu-id="8115d-300">The **Checkout** button is not used until later in this tutorial series.</span></span>

1. <span data-ttu-id="8115d-301">İçinde **Çözüm Gezgini**, açık *ShoppingCart.aspx* web uygulaması projesi kökündeki sayfası.</span><span class="sxs-lookup"><span data-stu-id="8115d-301">In **Solution Explorer**, open the *ShoppingCart.aspx* page in the root of the web application project.</span></span>
2. <span data-ttu-id="8115d-302">Eklemek için **güncelleştirme** düğmesi ve **Checkout** düğmesine *ShoppingCart.aspx* sayfasında, varolan biçimlendirme sarıya vurgulanan biçimlendirmeyi gösterildiği gibi ekleyin Aşağıdaki kod:</span><span class="sxs-lookup"><span data-stu-id="8115d-302">To add the **Update** button and the **Checkout** button to the *ShoppingCart.aspx* page, add the markup highlighted in yellow to the existing markup, as shown in the following code:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample10.aspx?highlight=36-45)]

<span data-ttu-id="8115d-303">Kullanıcı tıkladığında **güncelleştirme** düğmesini `UpdateBtn_Click` olay işleyicisi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="8115d-303">When the user clicks the **Update** button, the `UpdateBtn_Click` event handler will be called.</span></span> <span data-ttu-id="8115d-304">Bu olay işleyicisi sonraki adımda ekleyeceksiniz kodu çağırır.</span><span class="sxs-lookup"><span data-stu-id="8115d-304">This event handler will call the code that you'll add in the next step.</span></span>

<span data-ttu-id="8115d-305">Ardından, içinde yer alan kodu güncelleştirebilirsiniz *ShoppingCart.aspx.cs* Sepeti öğeleri ve çağrı döngü dosyaya `RemoveItem` ve `UpdateItem` yöntemleri.</span><span class="sxs-lookup"><span data-stu-id="8115d-305">Next, you can update the code contained in the *ShoppingCart.aspx.cs* file to loop through the cart items and call the `RemoveItem` and `UpdateItem` methods.</span></span>

1. <span data-ttu-id="8115d-306">İçinde **Çözüm Gezgini**, açık *ShoppingCart.aspx.cs* web uygulaması projesi kökündeki dosyasında.</span><span class="sxs-lookup"><span data-stu-id="8115d-306">In **Solution Explorer**, open the *ShoppingCart.aspx.cs* file in the root of the web application project.</span></span>
2. <span data-ttu-id="8115d-307">Sarı vurgulanan aşağıdaki kod bölümleri eklemek *ShoppingCart.aspx.cs* dosyası:</span><span class="sxs-lookup"><span data-stu-id="8115d-307">Add the following code sections highlighted in yellow to the *ShoppingCart.aspx.cs* file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample11.cs?highlight=9-11,33,44-89)]

<span data-ttu-id="8115d-308">Kullanıcı tıkladığında **güncelleştirme** düğmesini *ShoppingCart.aspx* sayfasında, UpdateCartItems yöntemi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="8115d-308">When the user clicks the **Update** button on the *ShoppingCart.aspx* page, the UpdateCartItems method is called.</span></span> <span data-ttu-id="8115d-309">UpdateCartItems yöntemi alışveriş sepeti her öğe için güncelleştirilmiş değerlerini alır.</span><span class="sxs-lookup"><span data-stu-id="8115d-309">The UpdateCartItems method gets the updated values for each item in the shopping cart.</span></span> <span data-ttu-id="8115d-310">Ardından, UpdateCartItems yöntemini çağırır `UpdateShoppingCartDatabase` (eklenir ve sonraki adımda açıklanan) bir yöntem eklemek veya Alışveriş sepetinden öğeleri kaldırmak için.</span><span class="sxs-lookup"><span data-stu-id="8115d-310">Then, the UpdateCartItems method calls the `UpdateShoppingCartDatabase` method (added and explained in the next step) to either add or remove items from the shopping cart.</span></span> <span data-ttu-id="8115d-311">Veritabanı alışveriş sepeti güncelleştirmeler yansıtacak şekilde güncelleştirildi sonra **GridView** denetim çağırarak alışveriş sepeti sayfasında güncelleştirilir `DataBind` yöntemi **GridView**.</span><span class="sxs-lookup"><span data-stu-id="8115d-311">Once the database has been updated to reflect the updates to the shopping cart, the **GridView** control is updated on the shopping cart page by calling the `DataBind` method for the **GridView**.</span></span> <span data-ttu-id="8115d-312">Ayrıca, alışveriş sepeti sayfasında toplam sipariş tutarı öğeleri güncelleştirilmiş listesini yansıtacak şekilde güncelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="8115d-312">Also, the total order amount on the shopping cart page is updated to reflect the updated list of items.</span></span>

### <a name="updating-and-removing-shopping-cart-items"></a><span data-ttu-id="8115d-313">Güncelleştirme ve alışveriş sepeti öğeleri kaldırma</span><span class="sxs-lookup"><span data-stu-id="8115d-313">Updating and Removing Shopping Cart Items</span></span>

<span data-ttu-id="8115d-314">Üzerinde *ShoppingCart.aspx* sayfasında, bir öğe miktarını güncelleştirme ve bir öğeyi kaldırmak için denetimleri eklenmiş görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8115d-314">On the *ShoppingCart.aspx* page, you can see controls have been added for updating the quantity of an item and removing an item.</span></span> <span data-ttu-id="8115d-315">Şimdi, iş bu denetimleri yapacak kodu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="8115d-315">Now, add the code that will make these controls work.</span></span>

1. <span data-ttu-id="8115d-316">İçinde **Çözüm Gezgini**, açık *ShoppingCartActions.cs* dosyasını *mantığı* klasör.</span><span class="sxs-lookup"><span data-stu-id="8115d-316">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="8115d-317">Sarı vurgulanan aşağıdaki kodu ekleyin *ShoppingCartActions.cs* sınıf dosyası:</span><span class="sxs-lookup"><span data-stu-id="8115d-317">Add the following code highlighted in yellow to the *ShoppingCartActions.cs* class file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample12.cs?highlight=99-213)]

<span data-ttu-id="8115d-318">`UpdateShoppingCartDatabase` Yöntemi çağrılır, `UpdateCartItems` yöntemi *ShoppingCart.aspx.cs* sayfasında, güncelleştirmek veya Alışveriş sepetinden öğeleri kaldırmak için mantığını içerir.</span><span class="sxs-lookup"><span data-stu-id="8115d-318">The `UpdateShoppingCartDatabase` method, called from the `UpdateCartItems` method on the *ShoppingCart.aspx.cs* page, contains the logic to either update or remove items from the shopping cart.</span></span> <span data-ttu-id="8115d-319">`UpdateShoppingCartDatabase` Yöntemi tekrarlanan alışveriş sepeti listesindeki tüm satırların üzerinden.</span><span class="sxs-lookup"><span data-stu-id="8115d-319">The `UpdateShoppingCartDatabase` method iterates through all the rows within the shopping cart list.</span></span> <span data-ttu-id="8115d-320">Bir alışveriş sepeti öğesi kaldırılması için işaretlenmiş veya miktarı değerinden bir `RemoveItem` yöntemi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="8115d-320">If a shopping cart item has been marked to be removed, or the quantity is less than one, the `RemoveItem` method is called.</span></span> <span data-ttu-id="8115d-321">Aksi takdirde, alışveriş sepeti öğesi için denetlenir ne zaman güncelleştirmeleri `UpdateItem` yöntemi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="8115d-321">Otherwise, the shopping cart item is checked for updates when the `UpdateItem` method is called.</span></span> <span data-ttu-id="8115d-322">Alışveriş sepeti öğesi kaldırılmış ya da güncelleştirilmiş sonra veritabanı değişiklikler kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="8115d-322">After the shopping cart item has been removed or updated, the database changes are saved.</span></span>

<span data-ttu-id="8115d-323">`ShoppingCartUpdates` Yapısı tüm alışveriş sepeti öğeleri yerleştirmek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8115d-323">The `ShoppingCartUpdates` structure is used to hold all the shopping cart items.</span></span> <span data-ttu-id="8115d-324">`UpdateShoppingCartDatabase` Yöntemi kullanan `ShoppingCartUpdates` öğelerden herhangi birini güncelleştirilmiş veya kaldırılması gerekip gerekmediğini belirlemek için yapısı.</span><span class="sxs-lookup"><span data-stu-id="8115d-324">The `UpdateShoppingCartDatabase` method uses the `ShoppingCartUpdates` structure to determine if any of the items need to be updated or removed.</span></span>

<span data-ttu-id="8115d-325">Sonraki öğreticide kullanacağınız `EmptyCart` alışveriş temizlemek için yöntemi Sepeti ürünleri satın aldıktan sonra.</span><span class="sxs-lookup"><span data-stu-id="8115d-325">In the next tutorial, you will use the `EmptyCart` method to clear the shopping cart after purchasing products.</span></span> <span data-ttu-id="8115d-326">Ancak şu an için kullanacağınız `GetCount` için eklediğiniz yöntemi *ShoppingCartActions.cs* alışveriş sepeti öğe sayısını belirlemek için dosya.</span><span class="sxs-lookup"><span data-stu-id="8115d-326">But for now, you will use the `GetCount` method that you just added to the *ShoppingCartActions.cs* file to determine how many items are in the shopping cart.</span></span>

### <a name="adding-a-shopping-cart-counter"></a><span data-ttu-id="8115d-327">Bir alışveriş sepeti sayaç ekleme</span><span class="sxs-lookup"><span data-stu-id="8115d-327">Adding a Shopping Cart Counter</span></span>

<span data-ttu-id="8115d-328">Alışveriş sepeti içinde toplam öğe sayısını görüntülemek izin vermek için bir sayaç ekleyecek *Site.Master* sayfası.</span><span class="sxs-lookup"><span data-stu-id="8115d-328">To allow the user to view the total number of items in the shopping cart, you will add a counter to the *Site.Master* page.</span></span> <span data-ttu-id="8115d-329">Bu sayaç, alışveriş sepeti bağlantı olarak da hareket eder.</span><span class="sxs-lookup"><span data-stu-id="8115d-329">This counter will also act as a link to the shopping cart.</span></span>

1. <span data-ttu-id="8115d-330">İçinde **Çözüm Gezgini**, açık *Site.Master* sayfası.</span><span class="sxs-lookup"><span data-stu-id="8115d-330">In **Solution Explorer**, open the *Site.Master* page.</span></span>
2. <span data-ttu-id="8115d-331">İşaretleme sarı gezinti bölümüne aşağıdaki gibi göründüğü şekilde gösterildiği gibi alışveriş sepeti sayaç bağlantı ekleyerek değiştirin:</span><span class="sxs-lookup"><span data-stu-id="8115d-331">Modify the markup by adding the shopping cart counter link as shown in yellow to the navigation section so it appears as follows:</span></span>  

    [!code-html[Main](shopping-cart/samples/sample13.html?highlight=6)]
3. <span data-ttu-id="8115d-332">Ardından, arka plan kodu, güncelleştirme *Site.Master.cs* dosyasını sarı ile aşağıdaki gibi vurgulanmış kodu ekleyerek düzenleyin:</span><span class="sxs-lookup"><span data-stu-id="8115d-332">Next, update the code-behind of the *Site.Master.cs* file by adding the code highlighted in yellow as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample14.cs?highlight=11,77-84)]

<span data-ttu-id="8115d-333">Sayfanın HTML olarak işlenmeden önce `Page_PreRender` olayı oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="8115d-333">Before the page is rendered as HTML, the `Page_PreRender` event is raised.</span></span> <span data-ttu-id="8115d-334">İçinde `Page_PreRender` işleyici, alışveriş sepeti toplam sayısı, çağıran belirlenir `GetCount` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="8115d-334">In the `Page_PreRender` handler, the total count of the shopping cart is determined by calling the `GetCount` method.</span></span> <span data-ttu-id="8115d-335">Döndürülen değer eklenen `cartCount` biçimlendirmede dahil yayılma *Site.Master* sayfası.</span><span class="sxs-lookup"><span data-stu-id="8115d-335">The returned value is added to the `cartCount` span included in the markup of the *Site.Master* page.</span></span> <span data-ttu-id="8115d-336">`<span>` Etiketleri düzgün işlenecek iç öğeleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="8115d-336">The `<span>` tags enables the inner elements to be properly rendered.</span></span> <span data-ttu-id="8115d-337">Sitenin herhangi bir sayfayı görüntülendiğinde, alışveriş sepeti toplam görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="8115d-337">When any page of the site is displayed, the shopping cart total will be displayed.</span></span> <span data-ttu-id="8115d-338">Kullanıcı, alışveriş sepeti görüntülenecek alışveriş sepeti toplam tıklatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8115d-338">The user can also click the shopping cart total to display the shopping cart.</span></span>

## <a name="testing-the-completed-shopping-cart"></a><span data-ttu-id="8115d-339">Tamamlanan alışveriş sepeti test etme</span><span class="sxs-lookup"><span data-stu-id="8115d-339">Testing the Completed Shopping Cart</span></span>

<span data-ttu-id="8115d-340">Alışveriş sepeti içinde nasıl ekleyebileceğiniz görmek için uygulamayı şimdi, silme ve güncelleştirme öğeleri çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8115d-340">You can run the application now to see how you can add, delete, and update items in the shopping cart.</span></span> <span data-ttu-id="8115d-341">Alışveriş sepeti toplam alışveriş sepeti tüm öğelerde toplam maliyeti yansıtır.</span><span class="sxs-lookup"><span data-stu-id="8115d-341">The shopping cart total will reflect the total cost of all items in the shopping cart.</span></span>

1. <span data-ttu-id="8115d-342">Tuşuna **F5** uygulamayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="8115d-342">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="8115d-343">Tarayıcı açılır ve gösterir *Default.aspx* sayfası.</span><span class="sxs-lookup"><span data-stu-id="8115d-343">The browser opens and shows the *Default.aspx* page.</span></span>
2. <span data-ttu-id="8115d-344">Seçin **araba** kategori Gezinti menüsünde.</span><span class="sxs-lookup"><span data-stu-id="8115d-344">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="8115d-345">Tıklatın **Sepete Ekle** ilk ürün yanındaki bağlantı.</span><span class="sxs-lookup"><span data-stu-id="8115d-345">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="8115d-346">*ShoppingCart.aspx* sayfası, sipariş toplamı ile gösterilir.</span><span class="sxs-lookup"><span data-stu-id="8115d-346">The *ShoppingCart.aspx* page is displayed with the order total.</span></span>
4. <span data-ttu-id="8115d-347">Seçin **düzlemleri** kategori Gezinti menüsünde.</span><span class="sxs-lookup"><span data-stu-id="8115d-347">Select **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="8115d-348">Tıklatın **Sepete Ekle** ilk ürün yanındaki bağlantı.</span><span class="sxs-lookup"><span data-stu-id="8115d-348">Click the **Add To Cart** link next to the first product.</span></span>
6. <span data-ttu-id="8115d-349">3 alışveriş sepetine ilk öğe miktarını kümesindeki ve seçin **öğeyi Kaldır** ikinci öğenin onay kutusunu.<a id="a"></a></span><span class="sxs-lookup"><span data-stu-id="8115d-349">Set the quantity of the first item in the shopping cart to 3 and select the **Remove Item** check box of the second item.<a id="a"></a></span></span>
7. <span data-ttu-id="8115d-350">' I tıklatın **güncelleştirme** düğmesine alışveriş sepeti sayfasını güncelleştirmek ve yeni sipariş toplama görüntüler.</span><span class="sxs-lookup"><span data-stu-id="8115d-350">Click the **Update** button to update the shopping cart page and display the new order total.</span></span> 

    ![Alışveriş sepeti - Sepeti güncelleştirme](shopping-cart/_static/image9.png)

## <a name="summary"></a><span data-ttu-id="8115d-352">Özet</span><span class="sxs-lookup"><span data-stu-id="8115d-352">Summary</span></span>

<span data-ttu-id="8115d-353">Bu öğreticide, alışveriş sepeti Wingtip Toys Web Forms örnek uygulama için oluşturdunuz.</span><span class="sxs-lookup"><span data-stu-id="8115d-353">In this tutorial, you have created a shopping cart for the Wingtip Toys Web Forms sample application.</span></span> <span data-ttu-id="8115d-354">Entity Framework Code First, veri ek açıklamaları, kesin türü belirtilmiş veri denetimleri ve model bağlama sırasında Bu öğreticide kullandığınız.</span><span class="sxs-lookup"><span data-stu-id="8115d-354">During this tutorial you have used Entity Framework Code First, data annotations, strongly typed data controls, and model binding.</span></span>

<span data-ttu-id="8115d-355">Alışveriş sepeti ekleme, silme ve kullanıcı için satın seçilmiş öğeler güncelleştiriliyor destekler.</span><span class="sxs-lookup"><span data-stu-id="8115d-355">The shopping cart supports adding, deleting, and updating items that the user has selected for purchase.</span></span> <span data-ttu-id="8115d-356">Alışveriş sepeti işlevselliği uygulamadan yanı sıra, alışveriş sepeti öğeleri görüntülemek nasıl öğrendiniz bir **GridView** denetlemek ve sipariş toplamı hesaplayın.</span><span class="sxs-lookup"><span data-stu-id="8115d-356">In addition to implementing the shopping cart functionality, you have learned how to display shopping cart items in a **GridView** control and calculate the order total.</span></span>

## <a name="addition-information"></a><span data-ttu-id="8115d-357">Ek bilgi</span><span class="sxs-lookup"><span data-stu-id="8115d-357">Addition Information</span></span>

[<span data-ttu-id="8115d-358">ASP.NET oturum durumuna genel bakış</span><span class="sxs-lookup"><span data-stu-id="8115d-358">ASP.NET Session State Overview</span></span>](https://msdn.microsoft.com/library/ms178581.aspx)

>[!div class="step-by-step"]
<span data-ttu-id="8115d-359">[Önceki](display_data_items_and_details.md)
[sonraki](checkout-and-payment-with-paypal.md)</span><span class="sxs-lookup"><span data-stu-id="8115d-359">[Previous](display_data_items_and_details.md)
[Next](checkout-and-payment-with-paypal.md)</span></span>
