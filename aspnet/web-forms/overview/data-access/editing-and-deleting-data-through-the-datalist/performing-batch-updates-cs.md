---
uid: web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs
title: Toplu güncelleştirmeleri (C#) gerçekleştirme | Microsoft Docs
author: rick-anderson
description: Bir tam olarak düzenlenebilir oluşturmayı öğrenin burada öğelerinden tümü de DataList düzenleme modu ve değerleri 'Tümünü Güncelleştir' düğmesini tıklatarak kaydedilebilmesi için...
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/30/2006
ms.topic: article
ms.assetid: 57743ca7-5695-4e07-aed1-44b297f245a9
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs
msc.type: authoredcontent
ms.openlocfilehash: af19104edb1849272773193befe1f5b2c7347683
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/06/2018
---
<a name="performing-batch-updates-c"></a><span data-ttu-id="657f1-103">Toplu güncellemelerini (C#)</span><span class="sxs-lookup"><span data-stu-id="657f1-103">Performing Batch Updates (C#)</span></span>
====================
<span data-ttu-id="657f1-104">tarafından [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="657f1-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="657f1-105">[Örnek uygulamayı indirin](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_37_CS.exe) veya [PDF indirin](performing-batch-updates-cs/_static/datatutorial37cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="657f1-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_37_CS.exe) or [Download PDF](performing-batch-updates-cs/_static/datatutorial37cs1.pdf)</span></span>

> <span data-ttu-id="657f1-106">Bir tam olarak düzenlenebilir oluşturmayı öğrenin burada öğelerinden tümü de DataList düzenleme modu ve değerleri sayfasında bir "Tümünü Güncelleştir" düğmesini tıklatarak kaydedilebilir.</span><span class="sxs-lookup"><span data-stu-id="657f1-106">Learn how to create a fully-editable DataList where all of its items are in edit mode and whose values can be saved by clicking an "Update All" button on the page.</span></span>


## <a name="introduction"></a><span data-ttu-id="657f1-107">Giriş</span><span class="sxs-lookup"><span data-stu-id="657f1-107">Introduction</span></span>

<span data-ttu-id="657f1-108">İçinde [önceki öğretici](an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md) biz bir öğe düzeyinde DataList oluşturma inceledi.</span><span class="sxs-lookup"><span data-stu-id="657f1-108">In the [preceding tutorial](an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md) we examined how to create an item-level DataList.</span></span> <span data-ttu-id="657f1-109">Standart düzenlenebilir GridView DataList her öğe dahil gibi bir Düzenle düğmesini, tıklandığında, öğesi düzenlenebilir hale getirir.</span><span class="sxs-lookup"><span data-stu-id="657f1-109">Like the standard editable GridView, each item in the DataList included an Edit button that, when clicked, would make the item editable.</span></span> <span data-ttu-id="657f1-110">Bu öğe düzeyinde de yalnızca zaman zaman güncelleştirilir veri için düzenleme çalışır, ancak belirli kullanım örneği senaryosu birçok kaydını düzenlemek kullanıcının gerektirir.</span><span class="sxs-lookup"><span data-stu-id="657f1-110">While this item-level editing works well for data that is only updated occasionally, certain use case scenarios require the user to edit many records.</span></span> <span data-ttu-id="657f1-111">Kullanıcı kayıtları düzinelerce düzenlemek gereken ve Düzenle'yi tıklatın, kendi değişiklikleri yapın ve her biri için Güncelleştir'i zorlanır, tıklatarak miktarını kendi üretkenlik engel olabilir.</span><span class="sxs-lookup"><span data-stu-id="657f1-111">If a user needs to edit dozens of records and is forced to click Edit, make their changes, and click Update for each one, the amount of clicking can hamper her productivity.</span></span> <span data-ttu-id="657f1-112">Böyle durumlarda, daha iyi bir seçenek tam olarak düzenlenebilir bir DataList sağlamaktır bir *tüm* öğelerinden olan düzenleme modunda ve değerleri sayfasında bir Tümünü Güncelleştir düğmesini tıklatarak düzenlenebilir (bkz: Şekil 1).</span><span class="sxs-lookup"><span data-stu-id="657f1-112">In such situations, a better option is to provide a fully-editable DataList, one where *all* of its items are in edit mode and whose values can be edited by clicking an Update All button on the page (see Figure 1).</span></span>


<span data-ttu-id="657f1-113">[![Her öğe bir tam olarak düzenlenebilir DataList değiştirilebilir](performing-batch-updates-cs/_static/image2.png)](performing-batch-updates-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="657f1-113">[![Each Item in a Fully Editable DataList can be Modified](performing-batch-updates-cs/_static/image2.png)](performing-batch-updates-cs/_static/image1.png)</span></span>

<span data-ttu-id="657f1-114">**Şekil 1**: tam olarak düzenlenebilir DataList her öğesinde değiştirilebilir ([tam boyutlu görüntüyü görüntülemek için tıklatın](performing-batch-updates-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="657f1-114">**Figure 1**: Each Item in a Fully Editable DataList can be Modified ([Click to view full-size image](performing-batch-updates-cs/_static/image3.png))</span></span>


<span data-ttu-id="657f1-115">Bu öğreticide biz kullanıcıların tam olarak düzenlenebilir DataList kullanarak Üreticiler adres bilgilerini güncelleştirmek nasıl inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="657f1-115">In this tutorial we'll examine how to enable users to update suppliers address information using a fully editable DataList.</span></span>

## <a name="step-1-create-the-editable-user-interface-in-the-datalist-s-itemtemplate"></a><span data-ttu-id="657f1-116">1. adım: DataList s ItemTemplate düzenlenebilir kullanıcı arabirimi oluşturma</span><span class="sxs-lookup"><span data-stu-id="657f1-116">Step 1: Create the Editable User Interface in the DataList s ItemTemplate</span></span>

<span data-ttu-id="657f1-117">Burada standart, öğe düzeyinde düzenlenebilir DataList oluşturma, şu iki şablonları kullandık önceki öğreticide:</span><span class="sxs-lookup"><span data-stu-id="657f1-117">In the preceding tutorial, where we creating a standard, item-level editable DataList, we used two templates:</span></span>

- <span data-ttu-id="657f1-118">`ItemTemplate` salt okunur kullanıcı arabirimi (her bir ürün adı ve fiyat görüntüleme için etiket Web denetimleri) içeriyor.</span><span class="sxs-lookup"><span data-stu-id="657f1-118">`ItemTemplate` contained the read-only user interface (the Label Web controls for displaying each product s name and price).</span></span>
- <span data-ttu-id="657f1-119">`EditItemTemplate` düzenleme modu kullanıcı arabirimi (iki metin kutusuna Web denetimleri) içeriyor.</span><span class="sxs-lookup"><span data-stu-id="657f1-119">`EditItemTemplate` contained the edit mode user interface (the two TextBox Web controls).</span></span>

<span data-ttu-id="657f1-120">S DataList `EditItemIndex` özelliği belirleyen ne `DataListItem` (varsa) kullanılarak oluşturulması `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="657f1-120">The DataList s `EditItemIndex` property dictates what `DataListItem` (if any) is rendered using the `EditItemTemplate`.</span></span> <span data-ttu-id="657f1-121">Özellikle, `DataListItem` , `ItemIndex` değerle s DataList `EditItemIndex` özelliği kullanılarak işlenir `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="657f1-121">In particular, the `DataListItem` whose `ItemIndex` value matches the DataList s `EditItemIndex` property is rendered using the `EditItemTemplate`.</span></span> <span data-ttu-id="657f1-122">Bu model, iyi yalnızca bir öğe bir zaman alır, ancak parçalayın düştüğünde tam olarak düzenlenebilir DataList oluştururken düzenlenebilir olduğunda çalışır.</span><span class="sxs-lookup"><span data-stu-id="657f1-122">This model works well when only one item can be edited at a time, but falls apart when creating a fully-editable DataList.</span></span>

<span data-ttu-id="657f1-123">Tam olarak düzenlenebilir bir DataList için istiyoruz *tüm* , `DataListItem` düzenlenebilir arabirimini kullanarak işlemek için s.</span><span class="sxs-lookup"><span data-stu-id="657f1-123">For a fully editable DataList, we want *all* of the `DataListItem` s to render using the editable interface.</span></span> <span data-ttu-id="657f1-124">Bunu yapmanın en kolay yolu düzenlenebilir arabiriminde tanımlamaktır `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="657f1-124">The simplest way to accomplish this is to define the editable interface in the `ItemTemplate`.</span></span> <span data-ttu-id="657f1-125">Üreticiler adres bilgilerini değiştirmek için düzenlenebilir arabirimi adres, şehir ve ülke değerleri için metin ve metin kutuları olarak sağlayıcı adı içeriyor.</span><span class="sxs-lookup"><span data-stu-id="657f1-125">For modifying the suppliers address information, the editable interface contains the supplier name as text and then TextBoxes for the address, city, and country values.</span></span>

<span data-ttu-id="657f1-126">Başlangıç açarak `BatchUpdate.aspx` sayfasında DataList denetimi ekleyin ve ayarlama kendi `ID` özelliğine `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="657f1-126">Start by opening the `BatchUpdate.aspx` page, add a DataList control, and set its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="657f1-127">Adlı yeni bir ObjectDataSource denetimi eklemek için DataList s akıllı etiketten kabul `SuppliersDataSource`.</span><span class="sxs-lookup"><span data-stu-id="657f1-127">From the DataList s smart tag, opt to add a new ObjectDataSource control named `SuppliersDataSource`.</span></span>


<span data-ttu-id="657f1-128">[![SuppliersDataSource adlı yeni bir ObjectDataSource oluşturma](performing-batch-updates-cs/_static/image5.png)](performing-batch-updates-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="657f1-128">[![Create a New ObjectDataSource Named SuppliersDataSource](performing-batch-updates-cs/_static/image5.png)](performing-batch-updates-cs/_static/image4.png)</span></span>

<span data-ttu-id="657f1-129">**Şekil 2**: yeni ObjectDataSource adlandırılmış oluşturma `SuppliersDataSource` ([tam boyutlu görüntüyü görüntülemek için tıklatın](performing-batch-updates-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="657f1-129">**Figure 2**: Create a New ObjectDataSource Named `SuppliersDataSource` ([Click to view full-size image](performing-batch-updates-cs/_static/image6.png))</span></span>


<span data-ttu-id="657f1-130">ObjectDataSource kullanarak veri almak için yapılandırma `SuppliersBLL` s sınıfı `GetSuppliers()` yöntemi (bkz: Şekil 3).</span><span class="sxs-lookup"><span data-stu-id="657f1-130">Configure the ObjectDataSource to retrieve data using the `SuppliersBLL` class s `GetSuppliers()` method (see Figure 3).</span></span> <span data-ttu-id="657f1-131">Önceki öğretici yerine gibi ObjectDataSource üzerinden Tedarikçi bilgilerini güncelleştirme ile doğrudan iş mantığı katmanı ile çalışırsınız.</span><span class="sxs-lookup"><span data-stu-id="657f1-131">As with the preceding tutorial, rather than updating the supplier information through the ObjectDataSource, we'll work directly with the Business Logic Layer.</span></span> <span data-ttu-id="657f1-132">Bu nedenle, aşağı açılan liste (hiçbiri) güncelleştirme sekmesindeki ayarlayın (Şekil 4'e bakın).</span><span class="sxs-lookup"><span data-stu-id="657f1-132">Therefore, set the drop-down list to (None) in the UPDATE tab (see Figure 4).</span></span>


<span data-ttu-id="657f1-133">[![GetSuppliers() yöntemini kullanmayı deneyin Tedarikçi bilgilerini alma](performing-batch-updates-cs/_static/image8.png)](performing-batch-updates-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="657f1-133">[![Retrieve Supplier Information Using the GetSuppliers() Method](performing-batch-updates-cs/_static/image8.png)](performing-batch-updates-cs/_static/image7.png)</span></span>

<span data-ttu-id="657f1-134">**Şekil 3**: tedarikçi bilgileri kullanarak almak `GetSuppliers()` yöntemi ([tam boyutlu görüntüyü görüntülemek için tıklatın](performing-batch-updates-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="657f1-134">**Figure 3**: Retrieve Supplier Information Using the `GetSuppliers()` Method ([Click to view full-size image](performing-batch-updates-cs/_static/image9.png))</span></span>


<span data-ttu-id="657f1-135">[![Güncelleştirme sekmesinde aşağı açılan listesine (hiçbiri) ayarlayın](performing-batch-updates-cs/_static/image11.png)](performing-batch-updates-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="657f1-135">[![Set the Drop-Down List to (None) in the UPDATE Tab](performing-batch-updates-cs/_static/image11.png)](performing-batch-updates-cs/_static/image10.png)</span></span>

<span data-ttu-id="657f1-136">**Şekil 4**: güncelleştirme sekmesinde aşağı açılan listesine (hiçbiri) ayarlayın ([tam boyutlu görüntüyü görüntülemek için tıklatın](performing-batch-updates-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="657f1-136">**Figure 4**: Set the Drop-Down List to (None) in the UPDATE Tab ([Click to view full-size image](performing-batch-updates-cs/_static/image12.png))</span></span>


<span data-ttu-id="657f1-137">Sihirbazı tamamladıktan sonra Visual Studio otomatik olarak s DataList oluşturur `ItemTemplate` etiket Web denetiminde veri kaynağı tarafından döndürülen her veri alanı görüntülemek için.</span><span class="sxs-lookup"><span data-stu-id="657f1-137">After completing the wizard, Visual Studio automatically generates the DataList s `ItemTemplate` to display each data field returned by the data source in a Label Web control.</span></span> <span data-ttu-id="657f1-138">Böylece yerine düzenleme arabirimi sağlar, bu şablonu değiştirmek gerekir.</span><span class="sxs-lookup"><span data-stu-id="657f1-138">We need to modify this template so that it provides the editing interface instead.</span></span> <span data-ttu-id="657f1-139">`ItemTemplate` Tasarımcısı DataList s akıllı etiket Şablonları Düzenle seçeneğini kullanarak veya doğrudan bildirim temelli söz dizimi aracılığıyla özelleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="657f1-139">The `ItemTemplate` can be customized through the Designer using the Edit Templates option from the DataList s smart tag or directly through the declarative syntax.</span></span>

<span data-ttu-id="657f1-140">Üretici s adı metin olarak görüntüler, ancak metin kutuları tedarikçi s adresi, şehir ve ülke değerleri içeren bir düzenleme arabirim oluşturmak için bir dakikanızı ayırın.</span><span class="sxs-lookup"><span data-stu-id="657f1-140">Take a moment to create an editing interface that displays the supplier s name as text, but includes TextBoxes for the supplier s address, city, and country values.</span></span> <span data-ttu-id="657f1-141">Bu değişiklikleri yaptıktan sonra sayfa s Tanımlayıcı Sözdizimi aşağıdakine benzer görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="657f1-141">After making these changes, your page s declarative syntax should look similar to the following:</span></span>


[!code-aspx[Main](performing-batch-updates-cs/samples/sample1.aspx)]

> [!NOTE]
> <span data-ttu-id="657f1-142">Olarak önceki eğitici etkin görünüm durumunu bu öğreticideki DataList olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="657f1-142">As with the preceding tutorial, the DataList in this tutorial must have its view state enabled.</span></span>


<span data-ttu-id="657f1-143">İçinde `ItemTemplate` ı iki yeni CSS sınıfları, kullanarak m `SupplierPropertyLabel` ve `SupplierPropertyValue`, hangi eklenmiştir `Styles.css` sınıfı ve aynı stili ayarları kullanmak üzere yapılandırılmış `ProductPropertyLabel` ve `ProductPropertyValue` CSS sınıfları.</span><span class="sxs-lookup"><span data-stu-id="657f1-143">In the `ItemTemplate` I m using two new CSS classes, `SupplierPropertyLabel` and `SupplierPropertyValue`, which have been added to the `Styles.css` class and configured to use the same style settings as the `ProductPropertyLabel` and `ProductPropertyValue` CSS classes.</span></span>


[!code-css[Main](performing-batch-updates-cs/samples/sample2.css)]

<span data-ttu-id="657f1-144">Bu değişiklikleri yaptıktan sonra bir tarayıcı aracılığıyla bu sayfasını ziyaret edin.</span><span class="sxs-lookup"><span data-stu-id="657f1-144">After making these changes, visit this page through a browser.</span></span> <span data-ttu-id="657f1-145">Şekil 5 gösterildiği gibi her bir DataList öğesi üretici adı metin olarak görüntüler ve metin kutuları adres, şehir ve ülke görüntülemek için kullanır.</span><span class="sxs-lookup"><span data-stu-id="657f1-145">As Figure 5 shows, each DataList item displays the supplier name as text and uses TextBoxes to display the address, city, and country.</span></span>


<span data-ttu-id="657f1-146">[![DataList her tedarikçi düzenlenebilir değil](performing-batch-updates-cs/_static/image14.png)](performing-batch-updates-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="657f1-146">[![Each Supplier in the DataList is Editable](performing-batch-updates-cs/_static/image14.png)](performing-batch-updates-cs/_static/image13.png)</span></span>

<span data-ttu-id="657f1-147">**Şekil 5**: DataList her tedarikçi düzenlenebilir değil ([tam boyutlu görüntüyü görüntülemek için tıklatın](performing-batch-updates-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="657f1-147">**Figure 5**: Each Supplier in the DataList is Editable ([Click to view full-size image](performing-batch-updates-cs/_static/image15.png))</span></span>


## <a name="step-2-adding-an-update-all-button"></a><span data-ttu-id="657f1-148">2. adım: bir güncelleştirme tüm düğme ekleme</span><span class="sxs-lookup"><span data-stu-id="657f1-148">Step 2: Adding an Update All Button</span></span>

<span data-ttu-id="657f1-149">Şekil 5'te her sağlayıcı adresi, şehir ve bir metin kutusunda görüntülenen ülke alanları sahipken, şu anda hiçbir güncelleştirme düğmesi mevcut değil.</span><span class="sxs-lookup"><span data-stu-id="657f1-149">While each supplier in Figure 5 has its address, city, and country fields displayed in a TextBox, there currently is no Update button available.</span></span> <span data-ttu-id="657f1-150">Öğe başına bir güncelleştirme düğmesi sahip olmak yerine ile tam olarak düzenlenebilir belirleyebilen yoktur genellikle tek bir güncelleştirme tüm düğme sayfada, tıklatıldığında, güncelleştirmeleri *tüm* DataList kayıtlarında.</span><span class="sxs-lookup"><span data-stu-id="657f1-150">Rather than having an Update button per item, with fully editable DataLists there is typically a single Update All button on the page that, when clicked, updates *all* of the records in the DataList.</span></span> <span data-ttu-id="657f1-151">Bu öğretici için (ya da düğmesini tıklatarak aynı etkiye sahip olacaktır rağmen) iki Tümünü Güncelleştir düğmesi - sayfanın üst kısmındaki diğeri altındaki eklemek s olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="657f1-151">For this tutorial, let s add two Update All buttons - one at the top of the page and one at the bottom (although clicking either button will have the same effect).</span></span>

<span data-ttu-id="657f1-152">Başlat düğmesi Web denetimi kümesi ve DataList yukarıda ekleyerek kendi `ID` özelliğine `UpdateAll1`.</span><span class="sxs-lookup"><span data-stu-id="657f1-152">Start by adding a Button Web control above the DataList and set its `ID` property to `UpdateAll1`.</span></span> <span data-ttu-id="657f1-153">Ardından, ikinci düğme Web denetimi DataList altına ekleyin ayarı kendi `ID` için `UpdateAll2`.</span><span class="sxs-lookup"><span data-stu-id="657f1-153">Next, add the second Button Web control beneath the DataList, setting its `ID` to `UpdateAll2`.</span></span> <span data-ttu-id="657f1-154">Ayarlama `Text` iki düğmelere güncelleştirme tüm özellikleri.</span><span class="sxs-lookup"><span data-stu-id="657f1-154">Set the `Text` properties for the two Buttons to Update All.</span></span> <span data-ttu-id="657f1-155">Son olarak, her iki düğmeleri için olay işleyicileri oluşturma `Click` olaylar.</span><span class="sxs-lookup"><span data-stu-id="657f1-155">Lastly, create event handlers for both Buttons `Click` events.</span></span> <span data-ttu-id="657f1-156">Let s yeniden düzenlemeniz her olay işleyicileri güncelleştirme mantığı çoğaltmak yerine üçüncü bir yöntem bu mantığı `UpdateAllSupplierAddresses`, yalnızca bu üçüncü yöntemi çağırma olay işleyicileri sahip.</span><span class="sxs-lookup"><span data-stu-id="657f1-156">Rather than duplicating the update logic in each of the event handlers, let s refactor that logic to a third method, `UpdateAllSupplierAddresses`, having the event handlers simply invoking this third method.</span></span>


[!code-csharp[Main](performing-batch-updates-cs/samples/sample3.cs)]

<span data-ttu-id="657f1-157">Güncelleştirme tüm düğmeleri eklendikten sonra Şekil 6 sayfası gösterilir.</span><span class="sxs-lookup"><span data-stu-id="657f1-157">Figure 6 shows the page after the Update All buttons have been added.</span></span>


<span data-ttu-id="657f1-158">[![Sayfaya iki güncelleştirme tüm düğmeler eklendi](performing-batch-updates-cs/_static/image17.png)](performing-batch-updates-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="657f1-158">[![Two Update All Buttons have been Added to the Page](performing-batch-updates-cs/_static/image17.png)](performing-batch-updates-cs/_static/image16.png)</span></span>

<span data-ttu-id="657f1-159">**Şekil 6**: iki güncelleştirme tüm düğmeler sayfasına eklenmiştir ([tam boyutlu görüntüyü görüntülemek için tıklatın](performing-batch-updates-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="657f1-159">**Figure 6**: Two Update All Buttons have been Added to the Page ([Click to view full-size image](performing-batch-updates-cs/_static/image18.png))</span></span>


## <a name="step-3-updating-all-of-the-suppliers-address-information"></a><span data-ttu-id="657f1-160">3. adım: Tüm Üreticiler adres bilgilerini güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="657f1-160">Step 3: Updating All of the Suppliers Address Information</span></span>

<span data-ttu-id="657f1-161">Düzenleme arabirimi görüntüleme DataList s öğelerin tümünü ile Tümünü Güncelleştir düğmeleri eklenmesi, tüm bu kalır yazılırken toplu güncelleştirmesi gerçekleştirmek için kod.</span><span class="sxs-lookup"><span data-stu-id="657f1-161">With all of the DataList s items displaying the editing interface and with the addition of the Update All buttons, all that remains is writing the code to perform the batch update.</span></span> <span data-ttu-id="657f1-162">Özellikle, DataList s öğeleri ve çağrı döngü ihtiyacımız `SuppliersBLL` s sınıfı `UpdateSupplierAddress` yöntemi her biri için.</span><span class="sxs-lookup"><span data-stu-id="657f1-162">Specifically, we need to loop through the DataList s items and call the `SuppliersBLL` class s `UpdateSupplierAddress` method for each one.</span></span>

<span data-ttu-id="657f1-163">Koleksiyonu `DataListItem` DataList s DataList erişilebilir bu oluşma şekli örnekleri [ `Items` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.items.aspx).</span><span class="sxs-lookup"><span data-stu-id="657f1-163">The collection of `DataListItem` instances that makeup the DataList can be accessed via the DataList s [`Items` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.items.aspx).</span></span> <span data-ttu-id="657f1-164">Bir başvurusu olan bir `DataListItem`, biz buna karşılık gelen yakalayın `SupplierID` gelen `DataKeys` koleksiyonu ve program aracılığıyla metin kutusuna Web denetimleri içinde başvurusu `ItemTemplate` aşağıdaki kodda gösterildiği gibi:</span><span class="sxs-lookup"><span data-stu-id="657f1-164">With a reference to a `DataListItem`, we can grab the corresponding `SupplierID` from the `DataKeys` collection and programmatically reference the TextBox Web controls within the `ItemTemplate` as the following code illustrates:</span></span>


[!code-csharp[Main](performing-batch-updates-cs/samples/sample4.cs)]

<span data-ttu-id="657f1-165">Kullanıcı Tümünü Güncelleştir düğmelerden birini tıklattığında `UpdateAllSupplierAddresses` yöntemi her tekrarlanan `DataListItem` içinde `Suppliers` DataList ve çağrıları `SuppliersBLL` s sınıfı `UpdateSupplierAddress` yöntemi, karşılık gelen değerleri geçirme.</span><span class="sxs-lookup"><span data-stu-id="657f1-165">When the user clicks one of the Update All buttons, the `UpdateAllSupplierAddresses` method iterates through each `DataListItem` in the `Suppliers` DataList and calls the `SuppliersBLL` class s `UpdateSupplierAddress` method, passing in the corresponding values.</span></span> <span data-ttu-id="657f1-166">Bir adresi, şehir veya ülke geçişleri için girilen olmayan bir değer değeridir `Nothing` için `UpdateSupplierAddress` (boş bir dize yerine), hangi sonuçları bir veritabanında `NULL` temel alınan kayıt s alanlar için.</span><span class="sxs-lookup"><span data-stu-id="657f1-166">A non-entered value for address, city, or country passes is a value of `Nothing` to `UpdateSupplierAddress` (rather than a blank string), which results in a database `NULL` for the underlying record s fields.</span></span>

> [!NOTE]
> <span data-ttu-id="657f1-167">Bir geliştirme olarak toplu güncelleştirme işlemi yapıldıktan sonra bazı onay iletisi sayfası için durum etiket Web denetimi eklemek isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="657f1-167">As an enhancement, you may want to add a status Label Web control to the page that provides some confirmation message after the batch update is performed.</span></span>


## <a name="updating-only-those-addresses-that-have-been-modified"></a><span data-ttu-id="657f1-168">Değiştirilmiş adresleri güncelleştiriliyor</span><span class="sxs-lookup"><span data-stu-id="657f1-168">Updating Only Those Addresses That Have Been Modified</span></span>

<span data-ttu-id="657f1-169">Bu öğretici çağrıları için toplu güncelleştirme algoritması `UpdateSupplierAddress` yöntemi *her* adres bilgilerini değiştirilip bağımsız olarak DataList tedarikçi.</span><span class="sxs-lookup"><span data-stu-id="657f1-169">The batch update algorithm used for this tutorial calls the `UpdateSupplierAddress` method for *every* supplier in the DataList, regardless of whether their address information has been changed.</span></span> <span data-ttu-id="657f1-170">Bu tür blind geçekleştirilen t genellikle bir performans sorunu güncelleştirirken, Denetim yapıldığı veritabanı tablosuna değişirse bunlar gereksiz kayıtları yol açabilir.</span><span class="sxs-lookup"><span data-stu-id="657f1-170">While such blind updates aren t usually a performance issue, they can lead to superfluous records if you re auditing changes to the database table.</span></span> <span data-ttu-id="657f1-171">Örneğin, tüm kaydetmek için Tetikleyiciler kullanırsanız `UPDATE` s `Suppliers` tabloyu denetim tabloya bir kullanıcı yeni bir denetim kaydı olup kullanıcı herhangi yapılan bağımsız olarak bu sistemdeki her sağlayıcı için oluşturulacak Tümünü Güncelleştir düğmesini tıklattığında her zaman değiştirir.</span><span class="sxs-lookup"><span data-stu-id="657f1-171">For example, if you use triggers to record all `UPDATE` s to the `Suppliers` table to an auditing table, every time a user clicks the Update All button a new audit record will be created for each supplier in the system, regardless of whether the user made any changes.</span></span>

<span data-ttu-id="657f1-172">ADO.NET DataTable ve DataAdapter sınıfları, burada yalnızca değiştirilen, silinen ve yeni kayıtları sonuçları tüm veritabanı iletişiminde toplu güncelleştirmeleri destekleyecek şekilde tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="657f1-172">The ADO.NET DataTable and DataAdapter classes are designed to support batch updates where only modified, deleted, and new records results in any database communication.</span></span> <span data-ttu-id="657f1-173">DataTable her satıra sahip bir [ `RowState` özelliği](https://msdn.microsoft.com/library/system.data.datarow.rowstate.aspx) satır, değişiklik, silinecek DataTable eklendi veya değişmeden kalır olup olmadığını gösterir.</span><span class="sxs-lookup"><span data-stu-id="657f1-173">Each row in the DataTable has a [`RowState` property](https://msdn.microsoft.com/library/system.data.datarow.rowstate.aspx) that indicates whether the row has been added to the DataTable, deleted from it, modified, or remains unchanged.</span></span> <span data-ttu-id="657f1-174">DataTable başlangıçta doldurulduğunda tüm satırları değişmeden işaretlenir.</span><span class="sxs-lookup"><span data-stu-id="657f1-174">When a DataTable is initially populated, all rows are marked unchanged.</span></span> <span data-ttu-id="657f1-175">Satır s sütunlara değerinin değiştirilmesi satır değiştirilmiş olarak işaretler.</span><span class="sxs-lookup"><span data-stu-id="657f1-175">Changing the value of any of the row s columns marks the row as modified.</span></span>

<span data-ttu-id="657f1-176">İçinde `SuppliersBLL` tek tedarikçi kayıtta ilk okumada tarafından belirtilen tedarikçi s adres bilgilerini güncelleştiriyoruz sınıfı bir `SuppliersDataTable` ve ardından `Address`, `City`, ve `Country` sütun değerleri aşağıdaki kodu kullanarak:</span><span class="sxs-lookup"><span data-stu-id="657f1-176">In the `SuppliersBLL` class we update the specified supplier s address information by first reading in the single supplier record into a `SuppliersDataTable` and then set the `Address`, `City`, and `Country` column values using the following code:</span></span>


[!code-csharp[Main](performing-batch-updates-cs/samples/sample5.cs)]

<span data-ttu-id="657f1-177">Bu kod naively geçirilen adresi, şehir ve ülke değerlere atar `SuppliersRow` içinde `SuppliersDataTable` değerleri değişmez bağımsız olarak.</span><span class="sxs-lookup"><span data-stu-id="657f1-177">This code naively assigns the passed-in address, city, and country values to the `SuppliersRow` in the `SuppliersDataTable` regardless of whether or not the values have changed.</span></span> <span data-ttu-id="657f1-178">Bu değişiklikleri neden `SuppliersRow` s `RowState` özelliği değiştirilmiş olarak işaretlenecek.</span><span class="sxs-lookup"><span data-stu-id="657f1-178">These modifications cause the `SuppliersRow` s `RowState` property to be marked as modified.</span></span> <span data-ttu-id="657f1-179">Veri erişim katmanı s `Update` yöntemi çağrıldığında, görür `SupplierRow` değiştirilmiş ve bu nedenle gönderir bir `UPDATE` veritabanına komutu.</span><span class="sxs-lookup"><span data-stu-id="657f1-179">When the Data Access Layer s `Update` method is called, it sees that the `SupplierRow` has been modified and therefore sends an `UPDATE` command to the database.</span></span>

<span data-ttu-id="657f1-180">Ancak, biz yalnızca gelen farklıysa geçirilen adresi, şehir ve ülke değerleri atamak için bu yöntem için kod eklenen düşünün `SuppliersRow` s varolan değerleri.</span><span class="sxs-lookup"><span data-stu-id="657f1-180">Imagine, however, that we added code to this method to only assign the passed-in address, city, and country values if they differ from the `SuppliersRow` s existing values.</span></span> <span data-ttu-id="657f1-181">Adres, şehir ve ülke nerede var olan verileri ile aynı durumda hiçbir değişiklik yapılmaz ve `SupplierRow` s `RowState` olarak işaretlenmiş sol değişmez.</span><span class="sxs-lookup"><span data-stu-id="657f1-181">In the case where the address, city, and country are the same as the existing data, no changes will be made and the `SupplierRow` s `RowState` will be left marked as unchanged.</span></span> <span data-ttu-id="657f1-182">Net sonuç olduğunda DAL s `Update` yöntemi çağrıldığında, hiçbir veritabanı çağrı yapılacak `SuppliersRow` değiştirilmedi.</span><span class="sxs-lookup"><span data-stu-id="657f1-182">The net result is that when the DAL s `Update` method is called, no database call will be made because the `SuppliersRow` has not been modified.</span></span>

<span data-ttu-id="657f1-183">Bu değişikliğini kabul etmek için doğrudan geçirilen adresi, şehir ve ülke değerleri aşağıdaki kodla atama deyimleri değiştirin:</span><span class="sxs-lookup"><span data-stu-id="657f1-183">To enact this change, replace the statements that blindly assign the passed-in address, city, and country values with the following code:</span></span>


[!code-csharp[Main](performing-batch-updates-cs/samples/sample6.cs)]

<span data-ttu-id="657f1-184">Bu kod, DAL s eklenen `Update` yöntemi gönderir bir `UPDATE` deyimi yalnızca adresi ilgili değerleri değişti kayıtları için veritabanı.</span><span class="sxs-lookup"><span data-stu-id="657f1-184">With this added code, the DAL s `Update` method sends an `UPDATE` statement to the database for only those records whose address-related values have changed.</span></span>

<span data-ttu-id="657f1-185">Alternatif olarak, biz geçilen adres alanlarını ve veritabanı verileri arasındaki farklılıkları olup izlemek ve, varsa none, DAL s çağrısı yalnızca atlama `Update` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="657f1-185">Alternatively, we could keep track of whether there are any differences between the passed-in address fields and the database data and, if there are none, simply bypass the call to the DAL s `Update` method.</span></span> <span data-ttu-id="657f1-186">İyi DB kullanarak yapıldığı dolaysız yöntem, DB doğrudan yöntemi olmayan t geçirilen beri bu yaklaşım çalışır bir `SuppliersRow` özelliği örneği `RowState` bir veritabanı çağrısı gerçekten gerekli olup olmadığını belirlemek için denetlenebilir.</span><span class="sxs-lookup"><span data-stu-id="657f1-186">This approach works well if you re using the DB direct method, since the DB direct method isn t passed a `SuppliersRow` instance whose `RowState` can be checked to determine whether a database call is actually needed.</span></span>

> [!NOTE]
> <span data-ttu-id="657f1-187">Her zaman `UpdateSupplierAddress` yöntemi çağrıldığında, güncelleştirilmiş kaydı hakkında bilgi almak için veritabanına bir çağrı yapılır.</span><span class="sxs-lookup"><span data-stu-id="657f1-187">Each time the `UpdateSupplierAddress` method is invoked, a call is made to the database to retrieve information about the updated record.</span></span> <span data-ttu-id="657f1-188">Sonra verileri herhangi bir değişiklik olursa, tablo satırı güncelleştirmek için veritabanı başka bir çağrı yapılır.</span><span class="sxs-lookup"><span data-stu-id="657f1-188">Then, if there are any changes in data, another call to the database is made to update the table row.</span></span> <span data-ttu-id="657f1-189">Bu iş akışı oluşturarak iyileştirilmiş bir `UpdateSupplierAddress` kabul yöntemi aşırı yüklemesini bir `EmployeesDataTable` sahip örnek *tüm* değişikliklerden birini `BatchUpdate.aspx` sayfa.</span><span class="sxs-lookup"><span data-stu-id="657f1-189">This workflow could be optimized by creating an `UpdateSupplierAddress` method overload that accepts an `EmployeesDataTable` instance that has *all* of the changes from the `BatchUpdate.aspx` page.</span></span> <span data-ttu-id="657f1-190">Ardından, tüm kayıtları almak için yapılan bir çağrı veritabanına hale getirebilecek `Suppliers` tablo.</span><span class="sxs-lookup"><span data-stu-id="657f1-190">Then, it could make one call to the database to get all of the records from the `Suppliers` table.</span></span> <span data-ttu-id="657f1-191">İki Sonuçkümelerini sonra numaralandırılan ve burada değişiklikler kayıtları güncelleştirilemedi.</span><span class="sxs-lookup"><span data-stu-id="657f1-191">The two resultsets could then be enumerated and only those records where changes have occurred could be updated.</span></span>


## <a name="summary"></a><span data-ttu-id="657f1-192">Özet</span><span class="sxs-lookup"><span data-stu-id="657f1-192">Summary</span></span>

<span data-ttu-id="657f1-193">Bu öğreticide hızlı bir şekilde birden çok Üreticiler adres bilgilerini değiştirmek bir kullanıcının tam olarak düzenlenebilir bir DataList oluşturma gördük.</span><span class="sxs-lookup"><span data-stu-id="657f1-193">In this tutorial we saw how to create a fully editable DataList, allowing a user to quickly modify the address information for multiple suppliers.</span></span> <span data-ttu-id="657f1-194">DataList s düzenleme arabirimi tedarikçi s adresi, şehir ve ülke değerleri için bir metin kutusu Web denetimi tanımlayarak başlatılan `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="657f1-194">We started by defining the editing interface a TextBox Web control for the supplier s address, city, and country values in the DataList s `ItemTemplate`.</span></span> <span data-ttu-id="657f1-195">Ardından, üstteki ve alttaki DataList Tümünü Güncelleştir düğmeler eklendi.</span><span class="sxs-lookup"><span data-stu-id="657f1-195">Next, we added Update All buttons above and below the DataList.</span></span> <span data-ttu-id="657f1-196">Bir kullanıcı kendi değişiklikler ve güncelleştirme tüm düğmeleri birini tıklattınız sonra `DataListItem` s numaralandırılan ve yapılan bir çağrı `SuppliersBLL` s sınıfı `UpdateSupplierAddress` yöntemi yapılır.</span><span class="sxs-lookup"><span data-stu-id="657f1-196">After a user has made his changes and clicked one of the Update All buttons, the `DataListItem` s are enumerated and a call to the `SuppliersBLL` class s `UpdateSupplierAddress` method is made.</span></span>

<span data-ttu-id="657f1-197">Mutluluk programlama!</span><span class="sxs-lookup"><span data-stu-id="657f1-197">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="657f1-198">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="657f1-198">About the Author</span></span>

<span data-ttu-id="657f1-199">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), yazar ve yedi ASP/ASP.NET books kurucusu, [4GuysFromRolla.com](http://www.4guysfromrolla.com), Microsoft Web teknolojileri ile bu yana 1998 çalışma.</span><span class="sxs-lookup"><span data-stu-id="657f1-199">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="657f1-200">Tan bağımsız Danışman, eğitmen ve yazıcı çalışır.</span><span class="sxs-lookup"><span data-stu-id="657f1-200">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="657f1-201">En son kendi defteri [ *kendi öğretmek kendiniz ASP.NET 2.0 24 saat içindeki*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="657f1-201">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="657f1-202">Kendisi üzerinde erişilebilir [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) veya kendi blog hangi adresinde bulunabilir [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="657f1-202">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="657f1-203">Özel teşekkürler</span><span class="sxs-lookup"><span data-stu-id="657f1-203">Special Thanks To</span></span>

<span data-ttu-id="657f1-204">Bu öğretici seri pek çok yararlı gözden geçirenler tarafından gözden geçirildi.</span><span class="sxs-lookup"><span data-stu-id="657f1-204">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="657f1-205">Bu öğretici için sağlama gözden geçirenler Zack Can ve Ken Pespisa yoktu.</span><span class="sxs-lookup"><span data-stu-id="657f1-205">Lead reviewers for this tutorial were Zack Jones and Ken Pespisa.</span></span> <span data-ttu-id="657f1-206">My yaklaşan MSDN makaleleri gözden geçirme ilginizi çekiyor mu?</span><span class="sxs-lookup"><span data-stu-id="657f1-206">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="657f1-207">Öyleyse, bana bir satırında bırakma [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="657f1-207">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="657f1-208">[Önceki](an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md)
> [sonraki](handling-bll-and-dal-level-exceptions-cs.md)</span><span class="sxs-lookup"><span data-stu-id="657f1-208">[Previous](an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md)
[Next](handling-bll-and-dal-level-exceptions-cs.md)</span></span>
