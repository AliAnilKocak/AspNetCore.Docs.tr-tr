---
uid: web-forms/overview/older-versions-security/admin/recovering-and-changing-passwords-cs
title: Kurtarma ve parolaları (C#) değiştirme | Microsoft Docs
author: rick-anderson
description: ASP.NET kurtarma ve parolaları değiştirme yardımcı için iki Web denetimleri içerir. PasswordRecovery denetimi kendi kayıp pa kurtarmak bir ziyaretçi sağlar...
ms.author: aspnetcontent
manager: wpickett
ms.date: 04/01/2008
ms.topic: article
ms.assetid: 19c4d042-4e34-4b44-9f1d-6bf2253ba366
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-security/admin/recovering-and-changing-passwords-cs
msc.type: authoredcontent
ms.openlocfilehash: 7f8b019631eff4840bf1759f8e2752946abcaf80
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/06/2018
ms.locfileid: "30891009"
---
<a name="recovering-and-changing-passwords-c"></a><span data-ttu-id="7daac-104">Kurtarma ve parolaları (C#) değiştirme</span><span class="sxs-lookup"><span data-stu-id="7daac-104">Recovering and Changing Passwords (C#)</span></span>
====================
<span data-ttu-id="7daac-105">tarafından [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="7daac-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="7daac-106">[Kodu indirme](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/CS.13.zip) veya [PDF indirin](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/aspnet_tutorial13_ChangingPasswords_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="7daac-106">[Download Code](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/CS.13.zip) or [Download PDF](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/aspnet_tutorial13_ChangingPasswords_cs.pdf)</span></span>

> <span data-ttu-id="7daac-107">ASP.NET kurtarma ve parolaları değiştirme yardımcı için iki Web denetimleri içerir.</span><span class="sxs-lookup"><span data-stu-id="7daac-107">ASP.NET includes two Web controls for assisting with recovering and changing passwords.</span></span> <span data-ttu-id="7daac-108">Kayıp parolasını kurtarmak bir ziyaretçi PasswordRecovery denetimi sağlar.</span><span class="sxs-lookup"><span data-stu-id="7daac-108">The PasswordRecovery control enables a visitor to recover his lost password.</span></span> <span data-ttu-id="7daac-109">Kullanıcının parolasını güncelleştirmek bu denetim sağlar.</span><span class="sxs-lookup"><span data-stu-id="7daac-109">The ChangePassword control allows the user to update his password.</span></span> <span data-ttu-id="7daac-110">Bu öğretici serinin PasswordRecovery anlatıldığı gibi diğer oturum açma ile ilgili Web denetimleri ve parola değiştirme arka planda sıfırlama veya kullanıcıların parolalarını değiştirmek için üyelik framework ile çalışma denetler.</span><span class="sxs-lookup"><span data-stu-id="7daac-110">Like the other Login-related Web controls we've seen throughout this tutorial series, the PasswordRecovery and ChangePassword controls work with the Membership framework behind the scenes to reset or modify users' passwords.</span></span>


## <a name="introduction"></a><span data-ttu-id="7daac-111">Giriş</span><span class="sxs-lookup"><span data-stu-id="7daac-111">Introduction</span></span>

<span data-ttu-id="7daac-112">Web siteleri arasında için my banka, yardımcı şirket, telefon şirketi, e-posta hesaplarına ve kişiselleştirilmiş web portalı, çoğu kişi gibi anımsaması farklı parolalar düzinelerce sahibim.</span><span class="sxs-lookup"><span data-stu-id="7daac-112">Between the websites for my bank, utility company, phone company, email accounts, and personalized web portals, I, like most people, have dozens of different passwords to remember.</span></span> <span data-ttu-id="7daac-113">Bugünlerde ezberleme için çok fazla sayıda kimlik bilgileriyle kendi Parolanızı unutmanız kişiler için seyrek değil.</span><span class="sxs-lookup"><span data-stu-id="7daac-113">With so many credentials to memorize these days, it's not uncommon for people to forget their password.</span></span> <span data-ttu-id="7daac-114">Bu hesap için kullanıcı hesapları sunan Web siteleri bir kullanıcının parolasını kurtarmak bir yol eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="7daac-114">To account for this, websites that offer user accounts need to include a way for a user to recover his password.</span></span> <span data-ttu-id="7daac-115">Bu işlem genellikle yeni, rastgele bir parola oluşturma ve dosyayı kullanıcının e-posta adresine eposta içerir.</span><span class="sxs-lookup"><span data-stu-id="7daac-115">This process typically involves generating a new, random password and emailing it to the user's email address on file.</span></span> <span data-ttu-id="7daac-116">Yeni parolalarını aldıktan sonra kullanıcıların çoğunun siteye geri dönün ve rastgele oluşturulmuş bir daha etkileyici bir parolasını değiştirin.</span><span class="sxs-lookup"><span data-stu-id="7daac-116">After receiving their new password most users return to the site and change their password from the randomly generated one to a more memorable one.</span></span>

<span data-ttu-id="7daac-117">ASP.NET kurtarma ve parolaları değiştirme yardımcı için iki Web denetimleri içerir.</span><span class="sxs-lookup"><span data-stu-id="7daac-117">ASP.NET includes two Web controls for assisting with recovering and changing passwords.</span></span> <span data-ttu-id="7daac-118">Kayıp parolasını kurtarmak bir ziyaretçi PasswordRecovery denetimi sağlar.</span><span class="sxs-lookup"><span data-stu-id="7daac-118">The PasswordRecovery control enables a visitor to recover his lost password.</span></span> <span data-ttu-id="7daac-119">Kullanıcının parolasını güncelleştirmek bu denetim sağlar.</span><span class="sxs-lookup"><span data-stu-id="7daac-119">The ChangePassword control allows the user to update his password.</span></span> <span data-ttu-id="7daac-120">Bu öğretici serinin PasswordRecovery anlatıldığı gibi diğer oturum açma ile ilgili Web denetimleri ve parola değiştirme arka planda sıfırlama veya kullanıcıların parolalarını değiştirmek için üyelik framework ile çalışma denetler.</span><span class="sxs-lookup"><span data-stu-id="7daac-120">Like the other Login-related Web controls we've seen throughout this tutorial series, the PasswordRecovery and ChangePassword controls work with the Membership framework behind the scenes to reset or modify users' passwords.</span></span>

<span data-ttu-id="7daac-121">Bu iki denetimlerini kullanarak bu öğreticide inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="7daac-121">In this tutorial we will examine using these two controls.</span></span> <span data-ttu-id="7daac-122">Programlı olarak değiştirin ve aracılığıyla bir kullanıcının parolasını sıfırlamak nasıl de göreceğiz `MembershipUser` sınıfının `ChangePassword` ve `ResetPassword` yöntemleri.</span><span class="sxs-lookup"><span data-stu-id="7daac-122">We will also see how to programmatically change and reset a user's password via the `MembershipUser` class's `ChangePassword` and `ResetPassword` methods.</span></span>

## <a name="step-1-helping-users-recover-lost-passwords"></a><span data-ttu-id="7daac-123">1. adım: Parolaları kayıp yardımcı kullanıcılar Kurtar</span><span class="sxs-lookup"><span data-stu-id="7daac-123">Step 1: Helping Users Recover Lost Passwords</span></span>

<span data-ttu-id="7daac-124">Kullanıcı hesaplarını destekleyen tüm Web siteleri kullanıcılara parolalarını kurtarmak için bazı mekanizma sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="7daac-124">All websites that support user accounts need to provide users with some mechanism for recovering their forgotten passwords.</span></span> <span data-ttu-id="7daac-125">İyi haber bu tür işlevselliği ASP.NET uygulama PasswordRecovery Web denetimi sayesinde çok kolay olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="7daac-125">The good news is that implementing such functionality in ASP.NET is a breeze thanks to the PasswordRecovery Web control.</span></span> <span data-ttu-id="7daac-126">Kullanıcıdan kullanıcı adı için bir arabirim PasswordRecovery denetimini işler ve gerekirse, kendi güvenlik sorusuna verilen yanıt.</span><span class="sxs-lookup"><span data-stu-id="7daac-126">The PasswordRecovery control renders an interface that prompts the user for their username and, if needed, the answer to their security question.</span></span> <span data-ttu-id="7daac-127">Ardından kullanıcı parolalarını e.</span><span class="sxs-lookup"><span data-stu-id="7daac-127">It then emails the user their password.</span></span>

> [!NOTE]
> <span data-ttu-id="7daac-128">E-posta iletilerini düz metin kablo üzerinden iletilir çünkü güvenlik riskleri e-posta yoluyla bir kullanıcının parolasını göndermeyle ilgili vardır.</span><span class="sxs-lookup"><span data-stu-id="7daac-128">Because email messages are transmitted over the wire in plain-text there are security risks involved with sending a user's password via email.</span></span>


<span data-ttu-id="7daac-129">PasswordRecovery denetimi üç görünüm içerir:</span><span class="sxs-lookup"><span data-stu-id="7daac-129">The PasswordRecovery control consists of three views:</span></span>

- <span data-ttu-id="7daac-130">**Kullanıcı adı** -ziyaretçi için kullanıcı adı ister.</span><span class="sxs-lookup"><span data-stu-id="7daac-130">**UserName** - prompts the visitor for their username.</span></span> <span data-ttu-id="7daac-131">Bu ilk görünümdür.</span><span class="sxs-lookup"><span data-stu-id="7daac-131">This is the initial view.</span></span>
- <span data-ttu-id="7daac-132">**Soru**-kullanıcının kullanıcı adı ve güvenlik sorusunu kullanıcının kendi güvenlik sorusunun yanıtını girmek metin kutusu birlikte metin olarak görüntüler.</span><span class="sxs-lookup"><span data-stu-id="7daac-132">**Question**- displays the user's username and security question as text, along with a TextBox for the user to enter the answer to his security question.</span></span>
- <span data-ttu-id="7daac-133">**Başarı**-parolasını postayla kullanıcı bildiren bir ileti görüntüler.</span><span class="sxs-lookup"><span data-stu-id="7daac-133">**Success**- displays a message informing the user that his password has been emailed.</span></span>

<span data-ttu-id="7daac-134">Görünümler görüntülenir ve aşağıdaki üyelik yapılandırma ayarlarına bağlıdır PasswordRecovery denetimi tarafından gerçekleştirilen eylemler bağlıdır:</span><span class="sxs-lookup"><span data-stu-id="7daac-134">The views displayed and actions performed by the PasswordRecovery control depend upon the following Membership configuration settings:</span></span>

- `RequiresQuestionAndAnswer`
- `EnablePasswordRetrieval`
- `EnablePasswordReset`

<span data-ttu-id="7daac-135">Üyelik framework'ün `RequiresQuestionAndAnswer` ayarı, kullanıcıların bir güvenlik sorusu ve yanıtı bir hesabı için kaydolurken belirtmelisiniz olup olmadığını belirtir.</span><span class="sxs-lookup"><span data-stu-id="7daac-135">The Membership framework's `RequiresQuestionAndAnswer` setting indicates whether users must specify a security question and answer when registering for an account.</span></span> <span data-ttu-id="7daac-136">Biz anlatıldığı gibi <a id="_msoanchor_1"> </a> [ *kullanıcı hesapları oluşturma* ](../membership/creating-user-accounts-cs.md) Öğreticisi, eğer `RequiresQuestionAndAnswer` TextBox CreateUserWizard'ın arabirimi içerir (varsayılan) True olduğundan Yeni kullanıcının güvenlik sorusu ve yanıtı için denetimleri; varsa `RequiresQuestionAndAnswer` false, bu tür hiçbir bilgi toplanmaz.</span><span class="sxs-lookup"><span data-stu-id="7daac-136">As we discussed in the <a id="_msoanchor_1"></a>[*Creating User Accounts*](../membership/creating-user-accounts-cs.md) tutorial, if `RequiresQuestionAndAnswer` is True (the default) then the CreateUserWizard's interface includes TextBox controls for the new user's security question and answer; if `RequiresQuestionAndAnswer` is False, no such information is collected.</span></span> <span data-ttu-id="7daac-137">Benzer şekilde, varsa `RequiresQuestionAndAnswer` True, ardından kullanıcının kullanıcı adlarını girdikten sonra sorunun görüntüleyin PasswordRecovery denetimi görüntüler; yalnızca kullanıcı doğru güvenlik yanıtı girerse parola kurtarılır.</span><span class="sxs-lookup"><span data-stu-id="7daac-137">Similarly, if `RequiresQuestionAndAnswer` is True, then the PasswordRecovery control displays the Question view after the user has entered their username; the password is recovered only if the user enters the correct security answer.</span></span> <span data-ttu-id="7daac-138">Varsa `RequiresQuestionAndAnswer` PasswordRecovery denetimi düz kullanıcıadı görünümünden başarı görünümüne taşır. ancak, False ' tır.</span><span class="sxs-lookup"><span data-stu-id="7daac-138">If `RequiresQuestionAndAnswer` is False, however, the PasswordRecovery control moves straight from the UserName view to the Success view.</span></span>

<span data-ttu-id="7daac-139">Kullanıcı kendi kullanıcı adı - ya da kendi kullanıcı adı ve güvenlik yanıt, sağladığınız sonra `RequiresQuestionAndAnswer` true'dur - PasswordRecovery parolasını kullanıcı e-postalar.</span><span class="sxs-lookup"><span data-stu-id="7daac-139">After the user has provided his username - or his username and security answer, if `RequiresQuestionAndAnswer` is True - the PasswordRecovery emails the user his password.</span></span> <span data-ttu-id="7daac-140">Varsa `EnablePasswordRetrieval` seçeneği True olarak ayarlayın, sonra kullanıcı, geçerli parolaları e-posta.</span><span class="sxs-lookup"><span data-stu-id="7daac-140">If the `EnablePasswordRetrieval` option is set to True, then the user is emailed their current password.</span></span> <span data-ttu-id="7daac-141">False olarak ayarlarsanız ve `EnablePasswordReset` PasswordRecovery denetimi kullanıcı için yeni, rastgele bir parola oluşturur ve bu yeni parola onlara e-postalar True değerine ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="7daac-141">If it is set to False and `EnablePasswordReset` is set to True, then the PasswordRecovery control generates a new, random password for the user, and emails this new password to them.</span></span> <span data-ttu-id="7daac-142">Her iki `EnablePasswordRetrieval` ve `EnablePasswordReset` False olduğunda, PasswordRecovery denetimi bir özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="7daac-142">If both `EnablePasswordRetrieval` and `EnablePasswordReset` are False, the PasswordRecovery control throws an exception.</span></span>

> [!NOTE]
> <span data-ttu-id="7daac-143">Sözcüğünün `SqlMembershipProvider` kullanıcıların parolalarını üç biçimlerinden birinde depolar: temizleyin, Hashed (varsayılan) veya şifreli.</span><span class="sxs-lookup"><span data-stu-id="7daac-143">Recall that the `SqlMembershipProvider` stores users' passwords in one of three formats: Clear, Hashed (the default), or Encrypted.</span></span> <span data-ttu-id="7daac-144">Kullanılan depolama mekanizmasını üyelik yapılandırma ayarlarına bağlıdır; Tanıtım uygulama Hashed parola biçimini kullanır.</span><span class="sxs-lookup"><span data-stu-id="7daac-144">The storage mechanism used depends on the Membership configuration settings; the demo application uses the Hashed password format.</span></span> <span data-ttu-id="7daac-145">Hashed parolası biçimi kullanılırken `EnablePasswordRetrieval` seçeneği sistem gerçek kullanıcının parolasını veritabanında depolanan karma sürümünden belirleyemediğinden False olarak ayarlanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="7daac-145">When using the Hashed password format the `EnablePasswordRetrieval` option must be set to False because the system cannot determine the user's actual password from the hashed version stored in the database.</span></span>


<span data-ttu-id="7daac-146">Şekil 1 nasıl PasswordRecovery'nın arabirimi ve davranış Etkileyenler tarafından üyeliği yapılandırması gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="7daac-146">Figure 1 illustrates how the PasswordRecovery's interface and behavior is influenced by the Membership configuration.</span></span>


<span data-ttu-id="7daac-147">[![RequiresQuestionAndAnswer, EnablePasswordRetrieval ve EnablePasswordReset PasswordRecovery denetimin görünümünü ve davranışını etkilemek](recovering-and-changing-passwords-cs/_static/image2.png)](recovering-and-changing-passwords-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="7daac-147">[![The RequiresQuestionAndAnswer, EnablePasswordRetrieval, and EnablePasswordReset Influence the PasswordRecovery control's Appearance and Behavior](recovering-and-changing-passwords-cs/_static/image2.png)](recovering-and-changing-passwords-cs/_static/image1.png)</span></span>

<span data-ttu-id="7daac-148">**Şekil 1**: `RequiresQuestionAndAnswer`, `EnablePasswordRetrieval`, ve `EnablePasswordReset` PasswordRecovery denetimin görünümünü ve davranışını etkilemek ([tam boyutlu görüntüyü görüntülemek için tıklatın](recovering-and-changing-passwords-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="7daac-148">**Figure 1**: The `RequiresQuestionAndAnswer`, `EnablePasswordRetrieval`, and `EnablePasswordReset` Influence the PasswordRecovery control's Appearance and Behavior  ([Click to view full-size image](recovering-and-changing-passwords-cs/_static/image3.png))</span></span>


> [!NOTE]
> <span data-ttu-id="7daac-149">İçinde <a id="_msoanchor_2"> </a> [ *SQL Server üyelik şema oluşturma* ](../membership/creating-the-membership-schema-in-sql-server-cs.md) biz yapılandırılmış üyelik sağlayıcısının ayarlayarak öğretici `RequiresQuestionAndAnswer` true olarak `EnablePasswordRetrieval` için False ve `EnablePasswordReset` true.</span><span class="sxs-lookup"><span data-stu-id="7daac-149">In the <a id="_msoanchor_2"></a>[*Creating the Membership Schema in SQL Server*](../membership/creating-the-membership-schema-in-sql-server-cs.md) tutorial we configured the Membership provider by setting `RequiresQuestionAndAnswer` to True, `EnablePasswordRetrieval` to False, and `EnablePasswordReset` to True.</span></span>


### <a name="using-the-passwordrecovery-control"></a><span data-ttu-id="7daac-150">PasswordRecovery denetimi kullanma</span><span class="sxs-lookup"><span data-stu-id="7daac-150">Using the PasswordRecovery Control</span></span>

<span data-ttu-id="7daac-151">Bir ASP.NET sayfası PasswordRecovery denetimi kullanarak bakalım.</span><span class="sxs-lookup"><span data-stu-id="7daac-151">Let's look at using the PasswordRecovery control in an ASP.NET page.</span></span> <span data-ttu-id="7daac-152">Açık `RecoverPassword.aspx` ve sürükleyin ve araç tasarımcıya PasswordRecovery denetimi bırakma; ayarlamak kendi `ID` için `RecoverPwd`.</span><span class="sxs-lookup"><span data-stu-id="7daac-152">Open `RecoverPassword.aspx` and drag and drop a PasswordRecovery control from the Toolbox onto the Designer; set its `ID` to `RecoverPwd`.</span></span> <span data-ttu-id="7daac-153">Oturum açma ve CreateUserWizard Web denetimleri gibi etiketleri, metin kutuları, düğmeler ve doğrulama denetimleri içeren zengin bir bileşik arabirimini PasswordRecovery denetimin görünümleri oluşturmak.</span><span class="sxs-lookup"><span data-stu-id="7daac-153">Like the Login and CreateUserWizard Web controls, the PasswordRecovery control's views render a rich composite interface that includes Labels, TextBoxes, Buttons, and validation controls.</span></span> <span data-ttu-id="7daac-154">Denetimin stil özellikleri aracılığıyla ya da şablonlara görünümleri dönüştürerek görünümleri görünümünü özelleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7daac-154">You can customize the appearance of the views through the control's style properties or by converting the views into templates.</span></span> <span data-ttu-id="7daac-155">I bunu bir alıştırma olarak ilgi Okuyucu için bırakın.</span><span class="sxs-lookup"><span data-stu-id="7daac-155">I leave this as an exercise for the interested reader.</span></span>

<span data-ttu-id="7daac-156">Bir kullanıcı bu sayfayı ziyaret ettiğinde kendisinin kendi kullanıcı adı girin ve Gönder düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="7daac-156">When a user visits this page she will enter her username and click the Submit button.</span></span> <span data-ttu-id="7daac-157">Biz ayarladığınızdan `RequiresQuestionAndAnswer` özelliğini True bizim üyelik yapılandırma ayarlarında PasswordRecovery kontrol edecek sonra soru görünüm.</span><span class="sxs-lookup"><span data-stu-id="7daac-157">Because we have set the `RequiresQuestionAndAnswer` property to True in our Membership configuration settings, the PasswordRecovery control will then display the Question view.</span></span> <span data-ttu-id="7daac-158">Kullanıcı kendi doğru güvenlik yanıtı girip gönderme tıklattığında sonra PasswordRecovery denetimi rastgele oluşturulan bir kullanıcının parolasını güncelleştirin ve bu parolayı dosya e-posta adresine e-posta.</span><span class="sxs-lookup"><span data-stu-id="7daac-158">After the user enters her correct security answer and clicks Submit, the PasswordRecovery control will update the user's password to a randomly-generated one, and email this password to the email address on file.</span></span> <span data-ttu-id="7daac-159">Tüm olası bize tek satırlık bir kod yazmak zorunda!</span><span class="sxs-lookup"><span data-stu-id="7daac-159">All of this was possible without us having to write a single line of code!</span></span>

<span data-ttu-id="7daac-160">Bu sayfayı test etmeden önce bir son parçası eğilimindedir yapılandırmasının yoktur: posta teslim ayarları belirtmek ihtiyacımız `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="7daac-160">Before you test this page, there's one final piece of configuration to tend to: we need to specify the mail delivery settings in `Web.config`.</span></span> <span data-ttu-id="7daac-161">PasswordRecovery denetimi, e-posta göndermek için bu ayarları kullanır.</span><span class="sxs-lookup"><span data-stu-id="7daac-161">The PasswordRecovery control relies on these settings for sending the email.</span></span>

<span data-ttu-id="7daac-162">Posta teslim yapılandırması aracılığıyla belirtilen [ `<system.net>` öğesi](https://msdn.microsoft.com/library/6484zdc1.aspx)'s [ `<mailSettings>` öğesi](https://msdn.microsoft.com/library/w355a94k.aspx).</span><span class="sxs-lookup"><span data-stu-id="7daac-162">The mail delivery configuration is specified through the [`<system.net>` element](https://msdn.microsoft.com/library/6484zdc1.aspx)'s [`<mailSettings>` element](https://msdn.microsoft.com/library/w355a94k.aspx).</span></span> <span data-ttu-id="7daac-163">Kullanım [ `<smtp>` öğesi](https://msdn.microsoft.com/library/ms164240.aspx) teslimat yöntemini ve varsayılan adresinden belirtmek için.</span><span class="sxs-lookup"><span data-stu-id="7daac-163">Use the [`<smtp>` element](https://msdn.microsoft.com/library/ms164240.aspx) to indicate the delivery method and the default From address.</span></span> <span data-ttu-id="7daac-164">Aşağıdaki biçimlendirmede adlı bir ağ SMTP sunucusunu kullanmak için posta ayarlarını yapılandırır `smtp.example.com` bağlantı noktası 25 ve kullanıcı adı/parola kimlik bilgileri kullanıcı adı ve parola.</span><span class="sxs-lookup"><span data-stu-id="7daac-164">The following markup configures mail settings to use a network SMTP server named `smtp.example.com` on port 25 and with username/password credentials of username and password.</span></span>

> [!NOTE]
> <span data-ttu-id="7daac-165">`<system.net>` bir alt öğe kökün `<configuration>` öğesi ve bir eşdüzeyi `<system.web>`.</span><span class="sxs-lookup"><span data-stu-id="7daac-165">`<system.net>` is a child element of the root `<configuration>` element and a sibling of `<system.web>`.</span></span> <span data-ttu-id="7daac-166">Bu nedenle, değil put `<system.net>` öğesi içinde `<system.web>` öğesi; bunun yerine, aynı düzeyde yerleştirin.</span><span class="sxs-lookup"><span data-stu-id="7daac-166">Therefore, do not put the `<system.net>` element within the `<system.web>` element; instead, put it at the same level.</span></span>


[!code-xml[Main](recovering-and-changing-passwords-cs/samples/sample1.xml)]

<span data-ttu-id="7daac-167">Ağ üzerinde bir SMTP sunucusu kullanarak ek olarak gönderilecek e-posta iletilerini borç burada bir toplama dizini alternatif olarak belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7daac-167">In addition to using an SMTP server on the network, you can alternatively specify a pickup directory where email messages to be sent should be deposited.</span></span>

<span data-ttu-id="7daac-168">SMTP ayarlarını yapılandırdıktan sonra ziyaret `RecoverPassword.aspx` bir tarayıcı aracılığıyla sayfası.</span><span class="sxs-lookup"><span data-stu-id="7daac-168">Once you have configured the SMTP settings, visit the `RecoverPassword.aspx` page through a browser.</span></span> <span data-ttu-id="7daac-169">İlk kullanıcı deposunda mevcut olmayan bir kullanıcı adı girmeyi deneyin.</span><span class="sxs-lookup"><span data-stu-id="7daac-169">First try entering a username that doesn't exist in the user store.</span></span> <span data-ttu-id="7daac-170">Şekil 2'de görüldüğü gibi PasswordRecovery denetimi kullanıcı bilgilerini erişilemiyor belirten bir ileti görüntüler.</span><span class="sxs-lookup"><span data-stu-id="7daac-170">As Figure 2 shows, the PasswordRecovery control displays a message indicating that the user information could not be accessed.</span></span> <span data-ttu-id="7daac-171">İleti metnini denetimin özelleştirilebilir [ `UserNameFailureText` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.passwordrecovery.usernamefailuretext.aspx).</span><span class="sxs-lookup"><span data-stu-id="7daac-171">The text of the message can be customized through the control's [`UserNameFailureText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.passwordrecovery.usernamefailuretext.aspx).</span></span>


<span data-ttu-id="7daac-172">[![Geçersiz kullanıcı adı girildiğinde bir hata iletisi görüntülenir](recovering-and-changing-passwords-cs/_static/image5.png)](recovering-and-changing-passwords-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="7daac-172">[![An Error Message is Displayed if an Invalid Username is Entered](recovering-and-changing-passwords-cs/_static/image5.png)](recovering-and-changing-passwords-cs/_static/image4.png)</span></span>

<span data-ttu-id="7daac-173">**Şekil 2**: geçersiz kullanıcı adı girildiğinde bir hata iletisi görüntülenir ([tam boyutlu görüntüyü görüntülemek için tıklatın](recovering-and-changing-passwords-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="7daac-173">**Figure 2**: An Error Message is Displayed if an Invalid Username is Entered  ([Click to view full-size image](recovering-and-changing-passwords-cs/_static/image6.png))</span></span>


<span data-ttu-id="7daac-174">Şimdi bir kullanıcı adı girin.</span><span class="sxs-lookup"><span data-stu-id="7daac-174">Now enter a username.</span></span> <span data-ttu-id="7daac-175">Sistemdeki erişebilirsiniz ve, güvenlik yanıt e-posta adresi olan bir hesabın kullanıcı adı bilmeniz kullanın.</span><span class="sxs-lookup"><span data-stu-id="7daac-175">Use the username of an account in the system with an email address that you can access and whose security answer you know.</span></span> <span data-ttu-id="7daac-176">Kullanıcı adı girerek ve Gönder'i tıklatmak sonra PasswordRecovery denetimi soru görünümünü görüntüler.</span><span class="sxs-lookup"><span data-stu-id="7daac-176">After entering the username and clicking Submit, the PasswordRecovery control displays its Question view.</span></span> <span data-ttu-id="7daac-177">Olarak kullanıcıadı görünümüyle girerseniz, yanlış bir yanıt bir hata iletisi (bkz: Şekil 3) PasswordRecovery denetimi görüntüler.</span><span class="sxs-lookup"><span data-stu-id="7daac-177">As with the UserName view, if you enter an incorrect answer the PasswordRecovery control displays an error message (see Figure 3).</span></span> <span data-ttu-id="7daac-178">Kullanım [ `QuestionFailureText` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.passwordrecovery.questionfailuretext.aspx) bu hata iletisini özelleştirmek için.</span><span class="sxs-lookup"><span data-stu-id="7daac-178">Use the [`QuestionFailureText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.passwordrecovery.questionfailuretext.aspx) to customize this error message.</span></span>


<span data-ttu-id="7daac-179">[![Kullanıcı geçersiz güvenlik yanıt girerse bir hata iletisi görüntülenir](recovering-and-changing-passwords-cs/_static/image8.png)](recovering-and-changing-passwords-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="7daac-179">[![An Error Message is Displayed if the User Enters an Invalid Security Answer](recovering-and-changing-passwords-cs/_static/image8.png)](recovering-and-changing-passwords-cs/_static/image7.png)</span></span>

<span data-ttu-id="7daac-180">**Şekil 3**: geçersiz bir güvenlik yanıtı kullanıcının girdiği durumlarda bir hata iletisi görüntülenir ([tam boyutlu görüntüyü görüntülemek için tıklatın](recovering-and-changing-passwords-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="7daac-180">**Figure 3**: An Error Message is Displayed if the User Enters an Invalid Security Answer  ([Click to view full-size image](recovering-and-changing-passwords-cs/_static/image9.png))</span></span>


<span data-ttu-id="7daac-181">Son olarak, doğru güvenlik yanıtı girin ve Gönder'i tıklatın.</span><span class="sxs-lookup"><span data-stu-id="7daac-181">Finally, enter the correct security answer and click Submit.</span></span> <span data-ttu-id="7daac-182">Arka planda PasswordRecovery denetimi rastgele bir parola oluşturur, kullanıcı hesabına atar, yeni parolalarını kullanıcı bildiren bir e-posta gönderir (bkz. Şekil 4) ve Başarı görünümünün görüntüler.</span><span class="sxs-lookup"><span data-stu-id="7daac-182">Behind the scenes, the PasswordRecovery control generates a random password, assigns it to the user account, sends an email informing the user of their new password (see Figure 4), and then displays the Success view.</span></span>


<span data-ttu-id="7daac-183">[![Kullanıcı bir e-posta HIS yeni parolayla gönderilir](recovering-and-changing-passwords-cs/_static/image11.png)](recovering-and-changing-passwords-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="7daac-183">[![The User is Sent an Email with His New Password](recovering-and-changing-passwords-cs/_static/image11.png)](recovering-and-changing-passwords-cs/_static/image10.png)</span></span>

<span data-ttu-id="7daac-184">**Şekil 4**: kullanıcı bir e-posta HIS yeni parolayla gönderilen ([tam boyutlu görüntüyü görüntülemek için tıklatın](recovering-and-changing-passwords-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="7daac-184">**Figure 4**: The User is Sent an Email with His New Password  ([Click to view full-size image](recovering-and-changing-passwords-cs/_static/image12.png))</span></span>


### <a name="customizing-the-email"></a><span data-ttu-id="7daac-185">E-posta özelleştirme</span><span class="sxs-lookup"><span data-stu-id="7daac-185">Customizing the Email</span></span>

<span data-ttu-id="7daac-186">PasswordRecovery denetimi tarafından gönderilen e-posta varsayılan yerine donuk (bkz: Şekil 4) ' dir.</span><span class="sxs-lookup"><span data-stu-id="7daac-186">The default email sent by the PasswordRecovery control is rather dull (see Figure 4).</span></span> <span data-ttu-id="7daac-187">Belirtilen hesap iletinin gönderildiği `<smtp>` öğenin `from` parola konu özniteliğiyle ve düz metin gövdesi:</span><span class="sxs-lookup"><span data-stu-id="7daac-187">The message is sent from the account specified in the `<smtp>` element's `from` attribute with the subject Password and the plain-text body:</span></span>

<span data-ttu-id="7daac-188">Lütfen siteye geri dönün ve aşağıdaki bilgileri kullanarak oturum açın.</span><span class="sxs-lookup"><span data-stu-id="7daac-188">Please return to the site and log in using the following information.</span></span>

<span data-ttu-id="7daac-189">Kullanıcı adı: *kullanıcı adı*</span><span class="sxs-lookup"><span data-stu-id="7daac-189">User Name: *username*</span></span>

<span data-ttu-id="7daac-190">Parola: *parola*</span><span class="sxs-lookup"><span data-stu-id="7daac-190">Password: *password*</span></span>

<span data-ttu-id="7daac-191">Bu ileti PasswordRecovery denetim için bir olay işleyicisi aracılığıyla programlı olarak özelleştirilebilir [ `SendingMail` olay](https://msdn.microsoft.com/library/system.web.ui.webcontrols.passwordrecovery.sendingmail.aspx), bildirimli olarak aracılığıyla veya [ `MailDefinition` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.passwordrecovery.maildefinition.aspx).</span><span class="sxs-lookup"><span data-stu-id="7daac-191">This message can be customized programmatically through an event handler for the PasswordRecovery control's [`SendingMail` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.passwordrecovery.sendingmail.aspx), or declaratively through the [`MailDefinition` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.passwordrecovery.maildefinition.aspx).</span></span> <span data-ttu-id="7daac-192">Bu seçeneklerin ikisi de inceleyelim.</span><span class="sxs-lookup"><span data-stu-id="7daac-192">Let's explore both of these options.</span></span>

<span data-ttu-id="7daac-193">`SendingMail` Sağ e-posta iletisi gönderilir ve program aracılığıyla e-posta iletisi ayarlamak için bizim son şansınızdır önce olay tetiklenir.</span><span class="sxs-lookup"><span data-stu-id="7daac-193">The `SendingMail` event is fired right before the email message is sent and is our last chance to programmatically adjust the email message.</span></span> <span data-ttu-id="7daac-194">Bu olay oluştuğunda, olay işleyicisi türünde bir nesneye iletilir [ `MailMessageEventArgs` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.mailmessageeventargs.aspx), `Message` özelliği gönderilmek üzere e-posta için bir başvuru içeriyor.</span><span class="sxs-lookup"><span data-stu-id="7daac-194">When this event is raised, the event handler is passed an object of type [`MailMessageEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.mailmessageeventargs.aspx), whose `Message` property contains a reference to the email about to be sent.</span></span>

<span data-ttu-id="7daac-195">İçin bir olay işleyicisi oluşturun `SendingMail` olay ve program aracılığıyla ekler aşağıdaki kodu ekleyin `webmaster@example.com` bilgi listesi.</span><span class="sxs-lookup"><span data-stu-id="7daac-195">Create an event handler for the `SendingMail` event and add the following code, which programmatically adds `webmaster@example.com` to the CC list.</span></span>

[!code-csharp[Main](recovering-and-changing-passwords-cs/samples/sample2.cs)]

<span data-ttu-id="7daac-196">E-posta iletisi bildirime de yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="7daac-196">The email message can also be configured through declarative means.</span></span> <span data-ttu-id="7daac-197">PasswordRecovery's `MailDefinition` özelliği olan bir nesne türü [ `MailDefinition` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.maildefinition.aspx).</span><span class="sxs-lookup"><span data-stu-id="7daac-197">The PasswordRecovery's `MailDefinition` property is an object of type [`MailDefinition`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.maildefinition.aspx).</span></span> <span data-ttu-id="7daac-198">`MailDefinition` Sınıfı sunar dahil olmak üzere, e-posta ile ilgili özelliklerin bir konak `From`, `CC`, `Priority`, `Subject`, `IsBodyHtml`, `BodyFileName`ve diğerleri.</span><span class="sxs-lookup"><span data-stu-id="7daac-198">The `MailDefinition` class offers a host of email-related properties, including `From`, `CC`, `Priority`, `Subject`, `IsBodyHtml`, `BodyFileName`, and others.</span></span> <span data-ttu-id="7daac-199">Yeni başlayanlar ayarlamak [ `Subject` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.maildefinition.subject.aspx) birden parola sıfırlama gibi (parola), varsayılan olarak kullanılan daha açıklayıcı bir şey...</span><span class="sxs-lookup"><span data-stu-id="7daac-199">For starters, set the [`Subject` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.maildefinition.subject.aspx) to something more descriptive than the one used by default ( Password ), such as Your password has been reset...</span></span>

<span data-ttu-id="7daac-200">Ayrı bir e-posta şablonu dosyası oluşturmak için ihtiyacımız e-posta iletisinin gövdesi özelleştirmek için gövdesine ait içeriği içerir.</span><span class="sxs-lookup"><span data-stu-id="7daac-200">To customize the body of the email message we need to create a separate email template file that contains the body's contents.</span></span> <span data-ttu-id="7daac-201">Başlangıç adlı Web sitesini yeni bir klasör oluşturarak `EmailTemplates`.</span><span class="sxs-lookup"><span data-stu-id="7daac-201">Start by creating a new folder in the website named `EmailTemplates`.</span></span> <span data-ttu-id="7daac-202">Ardından, yeni bir metin dosyası adlı bu klasöre eklemek `PasswordRecovery.txt` ve aşağıdaki içeriği ekleyin:</span><span class="sxs-lookup"><span data-stu-id="7daac-202">Next, add a new text file to this folder named `PasswordRecovery.txt` and add the following content:</span></span>

[!code-aspx[Main](recovering-and-changing-passwords-cs/samples/sample3.aspx)]

<span data-ttu-id="7daac-203">Yer tutucuları kullanımına dikkat edin `<%UserName%>` ve `<%Password%>`.</span><span class="sxs-lookup"><span data-stu-id="7daac-203">Note the use of the placeholders `<%UserName%>` and `<%Password%>`.</span></span> <span data-ttu-id="7daac-204">PasswordRecovery denetimi iki bu yer tutucuları kullanıcının kullanıcı adı ve e-postayı göndermeden önce kurtarılan parola ile otomatik olarak değiştirir.</span><span class="sxs-lookup"><span data-stu-id="7daac-204">The PasswordRecovery control automatically replaces these two placeholders with the user's username and recovered password prior to sending the email.</span></span>

<span data-ttu-id="7daac-205">Son olarak, noktası `MailDefinition`'s [ `BodyFileName` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.maildefinition.bodyfilename.aspx) yeni oluşturduğumuz e-posta şablonu için (`~/EmailTemplates/PasswordRecovery.txt`).</span><span class="sxs-lookup"><span data-stu-id="7daac-205">Lastly, point the `MailDefinition`'s [`BodyFileName` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.maildefinition.bodyfilename.aspx) to the email template we just created (`~/EmailTemplates/PasswordRecovery.txt`).</span></span>

<span data-ttu-id="7daac-206">Tekrar ziyaret etmiş değişiklikler bu yaptıktan sonra `RecoverPassword.aspx` sayfa ve kullanıcı adı ve güvenlik yanıtınız girin.</span><span class="sxs-lookup"><span data-stu-id="7daac-206">After making these changes revisit the `RecoverPassword.aspx` page and enter your username and security answer.</span></span> <span data-ttu-id="7daac-207">Aldığınız bir Şekil 5'te benzer bir e-posta gerekir.</span><span class="sxs-lookup"><span data-stu-id="7daac-207">You receive should an email that looks like the one in Figure 5.</span></span> <span data-ttu-id="7daac-208">Unutmayın `webmaster@example.com` CC olur ve konu ve gövde güncelleştirilen olmuştur.</span><span class="sxs-lookup"><span data-stu-id="7daac-208">Note that `webmaster@example.com` has been CC'd and that the subject and body have been updated.</span></span>


<span data-ttu-id="7daac-209">[![Konu, gövde ve bilgi listesi güncelleştirildi](recovering-and-changing-passwords-cs/_static/image14.png)](recovering-and-changing-passwords-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="7daac-209">[![The Subject, Body, and CC List Have Been Updated](recovering-and-changing-passwords-cs/_static/image14.png)](recovering-and-changing-passwords-cs/_static/image13.png)</span></span>

<span data-ttu-id="7daac-210">**Şekil 5**: konu, gövde ve bilgi listesi güncelleştirildi ([tam boyutlu görüntüyü görüntülemek için tıklatın](recovering-and-changing-passwords-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="7daac-210">**Figure 5**: The Subject, Body, and CC List Have Been Updated  ([Click to view full-size image](recovering-and-changing-passwords-cs/_static/image15.png))</span></span>


<span data-ttu-id="7daac-211">Bir HTML biçimli e-posta göndermek için [ `IsBodyHtml` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.maildefinition.isbodyhtml.aspx) True (varsayılan değeri: False) ve güncelleştirme e-posta şablonu HTML eklenecek.</span><span class="sxs-lookup"><span data-stu-id="7daac-211">To send an HTML-formatted email set [`IsBodyHtml`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.maildefinition.isbodyhtml.aspx) to True (the default is False) and update the email template to include HTML.</span></span>

<span data-ttu-id="7daac-212">`MailDefinition` Özelliği PasswordRecovery sınıfı için benzersiz değil.</span><span class="sxs-lookup"><span data-stu-id="7daac-212">The `MailDefinition` property is not unique to the PasswordRecovery class.</span></span> <span data-ttu-id="7daac-213">Adım 2'de göreceğiz gibi bu denetim sunduğu bir `MailDefinition` özelliği.</span><span class="sxs-lookup"><span data-stu-id="7daac-213">As we will see in Step 2, the ChangePassword control also offers a `MailDefinition` property.</span></span> <span data-ttu-id="7daac-214">Ayrıca, böyle bir özellik CreateUserWizard denetimi içerir, otomatik olarak yeni kullanıcılara Hoş Geldiniz e-posta iletisi göndermek için yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7daac-214">Moreover, the CreateUserWizard control includes such a property that you can configure to automatically send a welcome email message to new users.</span></span>

> [!NOTE]
> <span data-ttu-id="7daac-215">Şu anda hiç bağlantı yok ulaşmak için sol gezinti içinde `RecoverPassword.aspx` sayfası.</span><span class="sxs-lookup"><span data-stu-id="7daac-215">Currently there are no links in the left-hand navigation for reaching the `RecoverPassword.aspx` page.</span></span> <span data-ttu-id="7daac-216">Bir kullanıcı yalnızca aynen başarıyla sitesinde oturum açmak için işleyemezse, bu sayfayı ziyaret ilgileniyor.</span><span class="sxs-lookup"><span data-stu-id="7daac-216">A user would only be interested in visiting this page if she was unable to successfully log on to the site.</span></span> <span data-ttu-id="7daac-217">Bu nedenle, güncelleştirme `Login.aspx` bir bağlantı eklemek için sayfa `RecoverPassword.aspx` sayfası.</span><span class="sxs-lookup"><span data-stu-id="7daac-217">Therefore, update the `Login.aspx` page to include a link to the `RecoverPassword.aspx` page.</span></span>


### <a name="programmatically-resetting-a-users-password"></a><span data-ttu-id="7daac-218">Program aracılığıyla bir kullanıcının parolasını sıfırlama</span><span class="sxs-lookup"><span data-stu-id="7daac-218">Programmatically Resetting a User's Password</span></span>

<span data-ttu-id="7daac-219">Çağrıları PasswordRecovery bir kullanıcının parolasını sıfırlama denetlemek `MembershipUser` nesnenin [ `ResetPassword` yöntemi](https://msdn.microsoft.com/library/system.web.security.membershipuser.resetpassword.aspx).</span><span class="sxs-lookup"><span data-stu-id="7daac-219">When resetting a user's password the PasswordRecovery control calls the `MembershipUser` object's [`ResetPassword` method](https://msdn.microsoft.com/library/system.web.security.membershipuser.resetpassword.aspx).</span></span> <span data-ttu-id="7daac-220">Bu yöntem iki aşırı yüklemeye sahip:</span><span class="sxs-lookup"><span data-stu-id="7daac-220">This method has two overloads:</span></span>

- <span data-ttu-id="7daac-221">**[`ResetPassword`](https://msdn.microsoft.com/library/d94bdzz2.aspx)** -bir kullanıcının parolasını sıfırlar.</span><span class="sxs-lookup"><span data-stu-id="7daac-221">**[`ResetPassword`](https://msdn.microsoft.com/library/d94bdzz2.aspx)** - resets a user's password.</span></span> <span data-ttu-id="7daac-222">Bu aşırı kullanırsanız `RequiresQuestionAndAnswer` yanlış.</span><span class="sxs-lookup"><span data-stu-id="7daac-222">Use this overload if `RequiresQuestionAndAnswer` is False.</span></span>
- <span data-ttu-id="7daac-223">**[`ResetPassword(securityAnswer)`](https://msdn.microsoft.com/library/d90zte4w.aspx)** -bir kullanıcının parola eksikse sağlanan sıfırlar *securityAnswer* doğrudur.</span><span class="sxs-lookup"><span data-stu-id="7daac-223">**[`ResetPassword(securityAnswer)`](https://msdn.microsoft.com/library/d90zte4w.aspx)** - resets a user's password only if the supplied *securityAnswer* is correct.</span></span> <span data-ttu-id="7daac-224">Bu aşırı kullanırsanız `RequiresQuestionAndAnswer` true'dur.</span><span class="sxs-lookup"><span data-stu-id="7daac-224">Use this overload if `RequiresQuestionAndAnswer` is True.</span></span>

<span data-ttu-id="7daac-225">Her iki aşırı yeni, rastgele oluşturulan parola döndür.</span><span class="sxs-lookup"><span data-stu-id="7daac-225">Both overloads return the new, randomly-generated password.</span></span>

<span data-ttu-id="7daac-226">Üyelik Framework'teki diğer yöntemleriyle gibi `ResetPassword` yapılandırılmış sağlayıcı yöntemi temsil eder.</span><span class="sxs-lookup"><span data-stu-id="7daac-226">Like with the other methods in the Membership framework, the `ResetPassword` method delegates to the configured provider.</span></span> <span data-ttu-id="7daac-227">`SqlMembershipProvider` Çağırır `aspnet_Membership_ResetPassword` kullanıcının kullanıcı adını, yeni parola ve diğer alanlar arasında sağlanan parola yanıtı geçirme saklı yordamı,.</span><span class="sxs-lookup"><span data-stu-id="7daac-227">The `SqlMembershipProvider` invokes the `aspnet_Membership_ResetPassword` stored procedure, passing in the user's username, the new password, and the supplied password answer, among other fields.</span></span> <span data-ttu-id="7daac-228">Saklı yordam parola yanıtı eşleştiğinden ve kullanıcının parolasını güncelleştirmeler sağlar.</span><span class="sxs-lookup"><span data-stu-id="7daac-228">The stored procedure ensures that the password answer matches and then updates the user's password.</span></span>

<span data-ttu-id="7daac-229">Alt düzey uygulama notları birkaç:</span><span class="sxs-lookup"><span data-stu-id="7daac-229">A couple of low-level implementation notes:</span></span>

- <span data-ttu-id="7daac-230">Out kilitli bir kullanıcı kendi parolanızı sıfırlayamazsınız.</span><span class="sxs-lookup"><span data-stu-id="7daac-230">A locked out user cannot reset her password.</span></span> <span data-ttu-id="7daac-231">Ancak, onaylanmamış bir kullanıcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="7daac-231">However, an unapproved user may.</span></span> <span data-ttu-id="7daac-232">Kilitli çıkışı ele alınacaktır ve daha ayrıntılı olarak durumları onaylanan <a id="_msoanchor_3"> </a> [ *Unlocking ve onaylama kullanıcı* ](unlocking-and-approving-user-accounts-cs.md) hesapları öğretici.</span><span class="sxs-lookup"><span data-stu-id="7daac-232">We will discuss the locked out and approved states in more detail in the <a id="_msoanchor_3"></a>[*Unlocking and Approving User*](unlocking-and-approving-user-accounts-cs.md) Accounts tutorial.</span></span>
- <span data-ttu-id="7daac-233">Parola yanıtı doğru değilse, kullanıcının başarısız parola yanıtı girişimi sayısı artar.</span><span class="sxs-lookup"><span data-stu-id="7daac-233">If the password answer is incorrect, the user's failed password answer attempt count is incremented.</span></span> <span data-ttu-id="7daac-234">Geçersiz güvenlik yanıtı denemelerinin belirli bir süre içinde belirtilen zaman penceresi meydana gelirse, kullanıcının kilitli.</span><span class="sxs-lookup"><span data-stu-id="7daac-234">If a specified number of invalid security answer attempts occur within a specified time window, the user is locked out.</span></span>

### <a name="a-word-on-how-the-random-passwords-are-generated"></a><span data-ttu-id="7daac-235">Bir sözcük nasıl rastgele parolaları üzerinde oluşturulur</span><span class="sxs-lookup"><span data-stu-id="7daac-235">A Word on How the Random Passwords are Generated</span></span>

<span data-ttu-id="7daac-236">Şekil 4 ve 5'teki e-posta iletilerini gösterilen rastgele oluşturulan parolalarını üyelik sınıfının tarafından oluşturulan [ `GeneratePassword` yöntemi](https://msdn.microsoft.com/library/system.web.security.membership.generatepassword.aspx).</span><span class="sxs-lookup"><span data-stu-id="7daac-236">The randomly-generated passwords shown in the email messages in Figures 4 and 5 are created by the Membership class's [`GeneratePassword` method](https://msdn.microsoft.com/library/system.web.security.membership.generatepassword.aspx).</span></span> <span data-ttu-id="7daac-237">Bu yöntem iki tamsayı giriş parametre - kabul *uzunluğu* ve *numberOfNonAlphanumericCharacters* - ve en az bir dize döndürür *uzunluğu* en uzun ile karakterleri az *numberOfNonAlphanumericCharacters* alfasayısal olmayan karakter sayısı.</span><span class="sxs-lookup"><span data-stu-id="7daac-237">This method accepts two integer input paramters - *length* and *numberOfNonAlphanumericCharacters* - and returns a string at least *length* characters long with at least *numberOfNonAlphanumericCharacters* number of non-alphanumeric characters.</span></span> <span data-ttu-id="7daac-238">Üyelik sınıfları veya oturum açma ile ilgili Web denetimleri içinde bu yöntem çağrılır, bu iki parametre için değerler üyelik yapılandırmasının tarafından belirlenir `MinRequiredPasswordLength` ve `MinRequiredNonalphanumericCharacters` 7 ve 1, sırasıyla ayarlarız özellikleri.</span><span class="sxs-lookup"><span data-stu-id="7daac-238">When this method is called from within the Membership classes or Login-related Web controls, the values for these two parameters are determined by the Membership configuration's `MinRequiredPasswordLength` and `MinRequiredNonalphanumericCharacters` properties, which we set to 7 and 1, respectively.</span></span>

<span data-ttu-id="7daac-239">`GeneratePassword` Yöntemi olduğunu hiçbir sapması hangi rastgele karakterler seçili olduğundan emin olmak için şifreleme açısından güçlü bir rastgele sayı üreticisinin kullanır.</span><span class="sxs-lookup"><span data-stu-id="7daac-239">The `GeneratePassword` method uses a cryptographically strong random number generator to ensure that there is no bias in what random characters are selected.</span></span> <span data-ttu-id="7daac-240">Ayrıca, `GeneratePassword` olan `public`, rastgele dizeleri veya parolaları oluşturmak ihtiyacınız varsa, bunu doğrudan ASP.NET uygulamanızdan kullanabileceğiniz anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="7daac-240">Furthermore, `GeneratePassword` is `public`, meaning that you can use it directly from your ASP.NET application if you need to generate random strings or passwords.</span></span>

> [!NOTE]
> <span data-ttu-id="7daac-241">`SqlMembershipProvider` Sınıfı oluşturur rastgele bir parola her zaman en az 14 karakter uzunluğunda, dolayısıyla `MinRequiredPasswordLength` değerinden 14 yapılır ve ardından değeri yok sayılır.</span><span class="sxs-lookup"><span data-stu-id="7daac-241">The `SqlMembershipProvider` class always generates a random password at least 14 characters long, so if `MinRequiredPasswordLength` is less than 14 then its value is ignored.</span></span>


## <a name="step-2-changing-passwords"></a><span data-ttu-id="7daac-242">2. adım: Parolaları değiştirme</span><span class="sxs-lookup"><span data-stu-id="7daac-242">Step 2: Changing Passwords</span></span>

<span data-ttu-id="7daac-243">Rastgele oluşturulan parolalarını unutmayın zordur.</span><span class="sxs-lookup"><span data-stu-id="7daac-243">The randomly-generated passwords are difficult to remember.</span></span> <span data-ttu-id="7daac-244">Şekil 4'te gösterilen parola göz önünde bulundurun: `WWGUZv(f2yM:Bd`.</span><span class="sxs-lookup"><span data-stu-id="7daac-244">Consider the password shown in Figure 4: `WWGUZv(f2yM:Bd`.</span></span> <span data-ttu-id="7daac-245">Bellek yürüten deneyin!</span><span class="sxs-lookup"><span data-stu-id="7daac-245">Try committing that to memory!</span></span> <span data-ttu-id="7daac-246">Deyin needless için bir kullanıcı bu tür bir rastgele oluşturulan parola gönderildikten sonra aynen daha etkileyici bir şey için parolayı değiştirmek istersiniz.</span><span class="sxs-lookup"><span data-stu-id="7daac-246">Needless to say, after a user is sent a randomly-generated password of this sort, she'll want to change the password to something more memorable.</span></span>

<span data-ttu-id="7daac-247">Bir kullanıcının kendi parolasını değiştirmek bir arabirim oluşturmak için bu denetim kullanın.</span><span class="sxs-lookup"><span data-stu-id="7daac-247">Use the ChangePassword control to create an interface for a user to change her password.</span></span> <span data-ttu-id="7daac-248">Çok PasswordRecovery denetimi gibi bu denetim iki görünümde oluşur: parola değiştirme ve başarı.</span><span class="sxs-lookup"><span data-stu-id="7daac-248">Much like the PasswordRecovery control, the ChangePassword control consists of two views: Change Password and Success.</span></span> <span data-ttu-id="7daac-249">Parola değiştirme görünüm eski ve yeni parolalarını kullanıcıya sorar.</span><span class="sxs-lookup"><span data-stu-id="7daac-249">The Change Password view prompts the user for their old and new passwords.</span></span> <span data-ttu-id="7daac-250">Doğru eski parolayı ve minimum uzunluğu ve alfasayısal olmayan karakter gereksinimleri karşılayan yeni bir parola sağlayarak sonra bu denetim kullanıcının parolasını güncelleştirir ve başarı görünüm görüntüler.</span><span class="sxs-lookup"><span data-stu-id="7daac-250">Upon supplying the correct old password and a new password that meets the minimum length and non-alphanumeric character requirements, the ChangePassword control updates the user's password and displays the Success view.</span></span>

> [!NOTE]
> <span data-ttu-id="7daac-251">Bu denetim çağırarak kullanıcının parolasını değiştirir `MembershipUser` nesnenin [ `ChangePassword` yöntemi](https://msdn.microsoft.com/library/system.web.security.membershipuser.changepassword.aspx).</span><span class="sxs-lookup"><span data-stu-id="7daac-251">The ChangePassword control modifies the user's password by invoking the `MembershipUser` object's [`ChangePassword` method](https://msdn.microsoft.com/library/system.web.security.membershipuser.changepassword.aspx).</span></span> <span data-ttu-id="7daac-252">Parola değiştirme yöntemi iki kabul `string` giriş parametreleri - *EskiParola* ve *#newpassword*- ve kullanıcı hesabıyla güncelleştirmeleri *#newpassword*, sağlanan varsayılarak *EskiParola* doğrudur.</span><span class="sxs-lookup"><span data-stu-id="7daac-252">The ChangePassword method accepts two `string` input parameters - *oldPassword* and *newPassword*- and updates the user's account with the *newPassword*, assuming the supplied *oldPassword* is correct.</span></span>


<span data-ttu-id="7daac-253">Açık `ChangePassword.aspx` sayfasında ve bu denetim adlandırma sayfasına ekleme `ChangePwd`.</span><span class="sxs-lookup"><span data-stu-id="7daac-253">Open the `ChangePassword.aspx` page and add a ChangePassword control to the page, naming it `ChangePwd`.</span></span> <span data-ttu-id="7daac-254">Bu noktada, Tasarım görünümüne Parolayı Değiştir göstermesi gerekir (bkz. Şekil 6) görüntüleyin.</span><span class="sxs-lookup"><span data-stu-id="7daac-254">At this point, the Design view should show the Change Password view (see Figure 6).</span></span> <span data-ttu-id="7daac-255">Gibi PasswordRecovery denetimi ile denetimin akıllı etiket aracılığıyla görünümleri arasında geçiş yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7daac-255">Like with the PasswordRecovery control, you can toggle between the views via the control's Smart Tag.</span></span> <span data-ttu-id="7daac-256">Ayrıca, bu görünümlere görünümlerini getirilebilir stil özellikleri kullanılarak veya bir şablona dönüştürerek özelleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="7daac-256">Furthermore, these views' appearances are customizable through the assorted style properties or by converting them to a template.</span></span>


<span data-ttu-id="7daac-257">[![Bu denetim için bir sayfa ekleyin](recovering-and-changing-passwords-cs/_static/image17.png)](recovering-and-changing-passwords-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="7daac-257">[![Add a ChangePassword Control to the Page](recovering-and-changing-passwords-cs/_static/image17.png)](recovering-and-changing-passwords-cs/_static/image16.png)</span></span>

<span data-ttu-id="7daac-258">**Şekil 6**: sayfasına bu denetim ekleme ([tam boyutlu görüntüyü görüntülemek için tıklatın](recovering-and-changing-passwords-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="7daac-258">**Figure 6**: Add a ChangePassword Control to the Page  ([Click to view full-size image](recovering-and-changing-passwords-cs/_static/image18.png))</span></span>


<span data-ttu-id="7daac-259">Bu denetim şu anda oturum açmış kullanıcının parolasını güncelleştirebilirsiniz *veya* başka belirtilen kullanıcının parolası.</span><span class="sxs-lookup"><span data-stu-id="7daac-259">The ChangePassword control can update the currently logged in user's password *or* the password of another, specified user.</span></span> <span data-ttu-id="7daac-260">Şekil 6 gösterildiği gibi yalnızca üç TextBox denetimi varsayılan parola değiştirme görünümü oluşturur: biri eski parola ve iki yeni parolası.</span><span class="sxs-lookup"><span data-stu-id="7daac-260">As Figure 6 shows, the default Change Password view renders just three TextBox controls: one for the old password and two for the new password.</span></span> <span data-ttu-id="7daac-261">Bu varsayılan arabirimi, şu anda oturum açmış kullanıcının parolasını güncelleştirmek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="7daac-261">This default interface is used to update the currently logged on user's password.</span></span>

<span data-ttu-id="7daac-262">Başka bir kullanıcının parolasını güncelleştirmek için bu denetim kullanmak için denetimin ayarlamak [ `DisplayUserName` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.changepassword.displayusername.aspx) true.</span><span class="sxs-lookup"><span data-stu-id="7daac-262">To use the ChangePassword control to update another user's password, set the control's [`DisplayUserName` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.changepassword.displayusername.aspx) to True.</span></span> <span data-ttu-id="7daac-263">Bunun yapılması dördüncü bir metin kutusu parolasını değiştirmek için kullanıcının kullanıcı adı için isteyen sayfasına ekler.</span><span class="sxs-lookup"><span data-stu-id="7daac-263">Doing so adds a fourth TextBox to the page, prompting for the username of the user whose password to change.</span></span>

<span data-ttu-id="7daac-264">Ayarı `DisplayUserName` için true'dur oturum açmak zorunda kalmadan kendi parolasını değiştirme çıkışı oturum açmış bir kullanıcı izin vermek istiyorsanız yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="7daac-264">Setting `DisplayUserName` to True is useful if you want to let a logged out user change her password without having to log in.</span></span> <span data-ttu-id="7daac-265">Kişisel olarak, her kullanıcının parolasını değiştirmek izin vermeden önce oturum açmak için bir kullanıcının gerektiren ile yanlış bir şey yok düşünüyorum.</span><span class="sxs-lookup"><span data-stu-id="7daac-265">Personally, I think there's nothing wrong with requiring a user to login before allowing her to change her password.</span></span> <span data-ttu-id="7daac-266">Bu nedenle, bırakın `DisplayUserName` (varsayılan) False olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="7daac-266">Therefore, leave `DisplayUserName` set to False (its default).</span></span> <span data-ttu-id="7daac-267">Bu kararı ancak biz aslında bu sayfayı ulaşmasını anonim kullanıcılar engelleme.</span><span class="sxs-lookup"><span data-stu-id="7daac-267">In making this decision, however, we essentially are barring anonymous users from reaching this page.</span></span> <span data-ttu-id="7daac-268">Anonim kullanıcıların ziyaret engellemek amacıyla sitenin URL yetkilendirme kuralları güncelleştirme `ChangePassword.aspx`.</span><span class="sxs-lookup"><span data-stu-id="7daac-268">Update the site's URL authorization rules so as to deny anonymous users from visiting `ChangePassword.aspx`.</span></span> <span data-ttu-id="7daac-269">URL yetkilendirme kural sözdizimi, bellek yenilemeniz gerekir geri oluştuysa, <a id="_msoanchor_4"> </a> [ *kullanıcı tabanlı bir yetkilendirme* ](../membership/user-based-authorization-cs.md) Öğreticisi.</span><span class="sxs-lookup"><span data-stu-id="7daac-269">If you need to refresh your memory on the URL authorization rule syntax, refer back to the <a id="_msoanchor_4"></a>[*User-Based Authorization*](../membership/user-based-authorization-cs.md) tutorial.</span></span>

> [!NOTE]
> <span data-ttu-id="7daac-270">Görünebilir `DisplayUserName` özelliği diğer kullanıcıların parolalarını değiştirmek Yöneticiler izin vermek için yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="7daac-270">It may seem that the `DisplayUserName` property is useful for allowing administrators to change other users' passwords.</span></span> <span data-ttu-id="7daac-271">Ancak, bile `DisplayUserName` doğru eski parolayı bilinen ve girilen True olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="7daac-271">However, even when `DisplayUserName` is set to True the correct old password must be known and entered.</span></span> <span data-ttu-id="7daac-272">Adım 3'te kullanıcıların parolalarını değiştirmek Yöneticiler izin vermekle teknikleri hakkında konuşur.</span><span class="sxs-lookup"><span data-stu-id="7daac-272">We will talk about techniques for allowing administrators to change users' passwords in Step 3.</span></span>


<span data-ttu-id="7daac-273">Ziyaret `ChangePassword.aspx` sayfasında bir tarayıcıdan ve parolanızı değiştirin.</span><span class="sxs-lookup"><span data-stu-id="7daac-273">Visit the `ChangePassword.aspx` page through a browser and change your password.</span></span> <span data-ttu-id="7daac-274">Parola uzunluğu ve alfasayısal olmayan karakter gereksinimleri üyelik yapılandırmasında belirtilen uymadığı yeni bir parola girerseniz, bir hata iletisi görüntüleniyor unutmayın (bkz. Şekil 7).</span><span class="sxs-lookup"><span data-stu-id="7daac-274">Note that an error message is displayed if you enter a new password that fails to meet the password length and non-alphanumeric character requirements specified in the Membership configuration (see Figure 7).</span></span>


<span data-ttu-id="7daac-275">[![Bu denetim için bir sayfa ekleyin](recovering-and-changing-passwords-cs/_static/image20.png)](recovering-and-changing-passwords-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="7daac-275">[![Add a ChangePassword Control to the Page](recovering-and-changing-passwords-cs/_static/image20.png)](recovering-and-changing-passwords-cs/_static/image19.png)</span></span>

<span data-ttu-id="7daac-276">**Şekil 7**: sayfasına bu denetim ekleme ([tam boyutlu görüntüyü görüntülemek için tıklatın](recovering-and-changing-passwords-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="7daac-276">**Figure 7**: Add a ChangePassword Control to the Page  ([Click to view full-size image](recovering-and-changing-passwords-cs/_static/image21.png))</span></span>


<span data-ttu-id="7daac-277">Doğru eski parolayı ve geçerli yeni bir parola, oturum açan kullanıcının girdikten sonra Parola değiştirildi ve başarı görünümü görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="7daac-277">Upon entering the correct old password and a valid new password, the logged on user's password is changed and the Success view displayed.</span></span>

### <a name="sending-a-confirmation-email"></a><span data-ttu-id="7daac-278">Bir onay e-posta gönderme</span><span class="sxs-lookup"><span data-stu-id="7daac-278">Sending a Confirmation Email</span></span>

<span data-ttu-id="7daac-279">Varsayılan olarak, bu denetim parolasını yalnızca güncelleştirildi kullanıcıya bir e-posta iletisi göndermez.</span><span class="sxs-lookup"><span data-stu-id="7daac-279">By default, the ChangePassword control does not send an email message to the user whose password was just updated.</span></span> <span data-ttu-id="7daac-280">Bir e-posta göndermek istiyorsanız, denetimin yalnızca yapılandırma `MailDefinition` özelliği.</span><span class="sxs-lookup"><span data-stu-id="7daac-280">If you'd like to send an email, simply configure the control's `MailDefinition` property.</span></span> <span data-ttu-id="7daac-281">Kullanıcı yeni parolasını içeren bir HTML biçimli e-posta gönderilir, böylece bu denetim yapılandıralım.</span><span class="sxs-lookup"><span data-stu-id="7daac-281">Let's configure the ChangePassword control so that the user is sent an HTML-formatted email that contains their new password.</span></span>

<span data-ttu-id="7daac-282">Başlangıç yeni bir dosyada oluşturarak `EmailTemplates` adlı klasörü `ChangePassword.htm`.</span><span class="sxs-lookup"><span data-stu-id="7daac-282">Start by creating a new file in the `EmailTemplates` folder named `ChangePassword.htm`.</span></span> <span data-ttu-id="7daac-283">Aşağıdaki biçimlendirmede ekleyin:</span><span class="sxs-lookup"><span data-stu-id="7daac-283">Add the following markup:</span></span>

[!code-html[Main](recovering-and-changing-passwords-cs/samples/sample4.html)]

<span data-ttu-id="7daac-284">Ardından, parola değiştirme denetimin ayarlayın `MailDefinition` özelliğin `BodyFileName`, `IsBodyHtml`, ve `Subject` özelliklerine ~ / EmailTemplates/ChangePassword.htm, True ve parolanızı değişti! sırasıyla.</span><span class="sxs-lookup"><span data-stu-id="7daac-284">Next, set the ChangePassword control's `MailDefinition` property's `BodyFileName`, `IsBodyHtml`, and `Subject` properties to ~/EmailTemplates/ChangePassword.htm, True, and Your password has changed!, respectively.</span></span>

<span data-ttu-id="7daac-285">Bu değişiklikleri yaptıktan sonra sayfa yeniden ziyaret ve parolanızı yeniden değiştirin.</span><span class="sxs-lookup"><span data-stu-id="7daac-285">After making these changes, revisit the page and change your password again.</span></span> <span data-ttu-id="7daac-286">Bu süre, bu denetim dosyası kullanıcının e-posta adresine özelleştirilmiş, HTML biçimli e-posta gönderir (bkz. Şekil 8).</span><span class="sxs-lookup"><span data-stu-id="7daac-286">This time, the ChangePassword control sends a customized, HTML-formatted email to the user's email address on file (see Figure 8).</span></span>


<span data-ttu-id="7daac-287">[![Kullanıcı, Their parolanın değiştirilmesi bildiren bir e-posta iletisi](recovering-and-changing-passwords-cs/_static/image23.png)](recovering-and-changing-passwords-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="7daac-287">[![An Email Message Informs the User That Their Password has Changed](recovering-and-changing-passwords-cs/_static/image23.png)](recovering-and-changing-passwords-cs/_static/image22.png)</span></span>

<span data-ttu-id="7daac-288">**Şekil 8**: bir e-posta iletisi bildirir kullanıcı olduğunu Their parola değişti ([tam boyutlu görüntüyü görüntülemek için tıklatın](recovering-and-changing-passwords-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="7daac-288">**Figure 8**: An Email Message Informs the User That Their Password has Changed  ([Click to view full-size image](recovering-and-changing-passwords-cs/_static/image24.png))</span></span>


## <a name="step-3-allowing-administrators-to-change-users-passwords"></a><span data-ttu-id="7daac-289">3. adım: Yöneticilerin kullanıcıların parolalarını değiştirme izin verme</span><span class="sxs-lookup"><span data-stu-id="7daac-289">Step 3: Allowing Administrators to Change Users' Passwords</span></span>

<span data-ttu-id="7daac-290">Bir ortak kullanıcı hesaplarını destekleyen uygulamalar diğer kullanıcıların parolalarını değiştirmek bir yönetici kullanıcı yeteneği özelliğidir.</span><span class="sxs-lookup"><span data-stu-id="7daac-290">A common feature in applications that support user accounts is the ability for an administrative user to change other users' passwords.</span></span> <span data-ttu-id="7daac-291">Bazen sistem kullanıcıların kendi parolalarını değiştirmek özelliği eksik olduğundan bu işlevselliği gereklidir.</span><span class="sxs-lookup"><span data-stu-id="7daac-291">Sometimes this functionality is required because the system lacks the ability for users to change their own passwords.</span></span> <span data-ttu-id="7daac-292">Böyle bir durumda, tek yolu bir kullanıcının kendi Unutulan parolayı kurtarmak yeni bir parola atamak için yönetici olacaktır.</span><span class="sxs-lookup"><span data-stu-id="7daac-292">In such a case, the only way for a user to recover their forgotten password would be for the administrator to assign them a new password.</span></span> <span data-ttu-id="7daac-293">Kullanıcılar bu kendilerini yapma yeteneği gibi PasswordRecovery ve parola değiştirme denetimleriyle ancak, yönetici kullanıcıların kendilerini kullanıcıların parolalarını değiştirme ile meşgul değil.</span><span class="sxs-lookup"><span data-stu-id="7daac-293">With the PasswordRecovery and ChangePassword controls, however, administrative users need not busy themselves with changing users' passwords, as users are capable of doing this themselves.</span></span>

<span data-ttu-id="7daac-294">Ancak ne istemciniz konusunda ısrar yönetici kullanıcılar diğer kullanıcıların parolalarını değiştirin yapabiliyor olmanız gerekir?</span><span class="sxs-lookup"><span data-stu-id="7daac-294">But what if your client insists that administrative users should be able to change other users' passwords?</span></span> <span data-ttu-id="7daac-295">Ne yazık ki, bu işlevsellik ekleme biraz iş olabilir.</span><span class="sxs-lookup"><span data-stu-id="7daac-295">Unfortunately, adding this functionality can be a bit of work.</span></span> <span data-ttu-id="7daac-296">Bir kullanıcının parolasını değiştirmek için eski ve yeni parola için sağlanması gereken `MembershipUser` nesnesinin `ChangePassword` yöntemi ancak yönetici döndürmemelidir olan bir kullanıcının parolasını değiştirmek için bilmesi.</span><span class="sxs-lookup"><span data-stu-id="7daac-296">To change a user's password, both the old and new password must be supplied to the `MembershipUser` object's `ChangePassword` method, but an administrator shouldn't have to know a user's password in order to modify it.</span></span>

<span data-ttu-id="7daac-297">İlk kullanıcının parolasını sıfırlamak ve aşağıdaki gibi kod kullanarak yeni parolayı değiştirmek için bir geçici çözüm şöyledir:</span><span class="sxs-lookup"><span data-stu-id="7daac-297">One workaround is to first reset the user's password and then change it to the new password using code like the following:</span></span>

[!code-aspx[Main](recovering-and-changing-passwords-cs/samples/sample5.aspx)]

<span data-ttu-id="7daac-298">Bu kod, hakkında bilgi alma başlatır *kullanıcıadı*, parolayı değiştirmek için yönetici isteyen kullanıcı olduğu.</span><span class="sxs-lookup"><span data-stu-id="7daac-298">This code starts by retrieving information about *username*, which is the user whose password the administrator wishes to change.</span></span> <span data-ttu-id="7daac-299">Ardından, `ResetPassword` yöntemi çağrıldığında, hangi atar ve kullanıcı yeni, rastgele bir parola.</span><span class="sxs-lookup"><span data-stu-id="7daac-299">Next, the `ResetPassword` method is invoked, which assigns and the user a new, random password.</span></span> <span data-ttu-id="7daac-300">Bu rastgele oluşturulan parola yöntemi tarafından döndürülen ve değişkeninde depolanan `resetPwd`.</span><span class="sxs-lookup"><span data-stu-id="7daac-300">This randomly-generated password is returned by the method and stored in the variable `resetPwd`.</span></span> <span data-ttu-id="7daac-301">Kullanıcının parolasını biliyoruz, biz çağrısıyla değiştirebilirsiniz `ChangePassword`.</span><span class="sxs-lookup"><span data-stu-id="7daac-301">Now that we know the user's password, we can change it via a call to `ChangePassword`.</span></span>

<span data-ttu-id="7daac-302">Sorun üyeliği sistem yapılandırması ayarlarsanız bu kod yalnızca çalışmasıdır şekilde `RequiresQuestionAndAnswer` yanlış.</span><span class="sxs-lookup"><span data-stu-id="7daac-302">The problem is that this code only works if the Membership system configuration is set such that `RequiresQuestionAndAnswer` is False.</span></span> <span data-ttu-id="7daac-303">Varsa `RequiresQuestionAndAnswer` uygulamamız ile olduğu gibi doğru ise, sonra `ResetPassword` yöntemi ilişkin güvenlik sorusuyla geçirilmesi gerekir, aksi takdirde bir özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="7daac-303">If `RequiresQuestionAndAnswer` is True, as it is with our application, then the `ResetPassword` method needs to be passed the security answer, otherwise it will throw an exception.</span></span>

<span data-ttu-id="7daac-304">Üyelik framework Güvenlik sorusu ve yanıtı gerektirecek şekilde yapılandırılmışsa ve henüz istemciniz, yöneticilerin kullanıcıların parolalarını değiştirmesi mümkün konusunda ısrar, üç seçeneğiniz vardır:</span><span class="sxs-lookup"><span data-stu-id="7daac-304">If the Membership framework is configured to require a security question and answer, and yet your client insists that administrators be able to change users' passwords, you have three options:</span></span>

- <span data-ttu-id="7daac-305">Elinizde throw hava ve istemci bu yapılamaz tek şey olduğunu söyleyin.</span><span class="sxs-lookup"><span data-stu-id="7daac-305">Throw your hands in the air and tell your client that this is just one thing that cannot be done.</span></span>
- <span data-ttu-id="7daac-306">Ayarlama `RequiresQuestionAndAnswer` False.</span><span class="sxs-lookup"><span data-stu-id="7daac-306">Set `RequiresQuestionAndAnswer` to False.</span></span> <span data-ttu-id="7daac-307">Bu daha az güvenli bir uygulamada sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="7daac-307">This results in a less secure application.</span></span> <span data-ttu-id="7daac-308">Alınan bir kullanıcı başka bir kullanıcının e-posta gelen kutusuna erişim elde edilen düşünün.</span><span class="sxs-lookup"><span data-stu-id="7daac-308">Imagine that a nefarious user has gained access to another user's email inbox.</span></span> <span data-ttu-id="7daac-309">Belki de gizliliği ihlal edilmiş kullanıcı yemeği için Git masa ayrıldı ve iş istasyonunda kilitlemek alamadık veya belki de e-posta ortak terminal durumundan erişilen ve oturumu alamadık. Alınan kullanıcı her iki durumda da ziyaret edebilirsiniz `RecoverPassword.aspx` sayfasında ve kullanıcının kullanıcı adını girin.</span><span class="sxs-lookup"><span data-stu-id="7daac-309">Perhaps the compromised user has left their desk to go to lunch and didn't lock their workstation, or maybe they accessed their email from a public terminal and didn't sign out. In either case, the nefarious user can visit the `RecoverPassword.aspx` page and enter the user's username.</span></span> <span data-ttu-id="7daac-310">Sistem ardından kurtarılan parola ilişkin güvenlik sorusuyla sormadan e-posta gönderir.</span><span class="sxs-lookup"><span data-stu-id="7daac-310">The system will then email the recovered password without prompting for the security answer.</span></span>
- <span data-ttu-id="7daac-311">Üyelik framework ve SQL Server veritabanı ile doğrudan iş tarafından oluşturulan Soyutlama Katmanı atlama.</span><span class="sxs-lookup"><span data-stu-id="7daac-311">Bypass the abstraction layer created by the Membership framework and work directly with the SQL Server database.</span></span> <span data-ttu-id="7daac-312">Adlı bir saklı yordam üyelik şeması içerir `aspnet_Membership_SetPassword` , bir kullanıcının parolasını ayarlar ve güvenlik yanıtı veya eski parola, görevi gerçekleştirmek için gerektirmez.</span><span class="sxs-lookup"><span data-stu-id="7daac-312">The Membership schema includes a stored procedure named `aspnet_Membership_SetPassword` that sets a user's password and does not require the security answer or old password in order to accomplish its task.</span></span>

<span data-ttu-id="7daac-313">Bu seçeneklerin hiçbirini özellikle çekici, ancak nasıl bir geliştirici ömrünü bazen gider.</span><span class="sxs-lookup"><span data-stu-id="7daac-313">None of these options are particularly appealing, but that's how the life of a developer goes sometimes.</span></span>

<span data-ttu-id="7daac-314">Şimdi oluştu ve üçüncü bir yaklaşım atlar kod yazma uygulanan `Membership` ve `MembershipUser` sınıfları ve doğrudan karşı çalışır `SecurityTutorials` veritabanı.</span><span class="sxs-lookup"><span data-stu-id="7daac-314">I went ahead and implemented the third approach, writing code that bypasses the `Membership` and `MembershipUser` classes and operates directly against the `SecurityTutorials` database.</span></span>

> [!NOTE]
> <span data-ttu-id="7daac-315">Veritabanıyla doğrudan çalışarak üyelik framework tarafından sağlanan kapsülleme shattered.</span><span class="sxs-lookup"><span data-stu-id="7daac-315">By working directly with the database, the encapsulation provided by the Membership framework is shattered.</span></span> <span data-ttu-id="7daac-316">Bu karara bize bağlar, `SqlMembershipProvider`, kodumuza taşınabilir daha az yapma.</span><span class="sxs-lookup"><span data-stu-id="7daac-316">This decision ties us to the `SqlMembershipProvider`, making our code less portable.</span></span> <span data-ttu-id="7daac-317">Ayrıca, bu kod üyelik şema değişirse ASP.NET sürümlerini gelecekte beklendiği gibi çalışmayabilir.</span><span class="sxs-lookup"><span data-stu-id="7daac-317">Furthermore, this code may not work as expected in future versions of ASP.NET if the Membership schema changes.</span></span> <span data-ttu-id="7daac-318">Bu yaklaşımın bir geçici bir çözüm değildir ve çoğu geçici çözümler gibi en iyi yöntemler örneği değil.</span><span class="sxs-lookup"><span data-stu-id="7daac-318">This approach is a workaround and, like most workarounds, is not an example of best practices.</span></span>


<span data-ttu-id="7daac-319">Kod bazı paragrafta BITS içeriyor ve oldukça uzun.</span><span class="sxs-lookup"><span data-stu-id="7daac-319">The code has some unattractive bits and is quite lengthy.</span></span> <span data-ttu-id="7daac-320">Bu nedenle, kapsamlı bir incelendiğinde bu öğreticiyle dağıtmayı istemiyorsanız.</span><span class="sxs-lookup"><span data-stu-id="7daac-320">Therefore, I don't want to clutter this tutorial with an in-depth examination of it.</span></span> <span data-ttu-id="7daac-321">Daha fazla bilgi ilgileniyorsanız, Bu öğretici ve ziyaret için kodu indirme `~/Administration/ManageUsers.aspx` sayfası.</span><span class="sxs-lookup"><span data-stu-id="7daac-321">If you are interested in learning more, download the code for this tutorial and visit the `~/Administration/ManageUsers.aspx` page.</span></span> <span data-ttu-id="7daac-322">İçinde oluşturduğumuz bu sayfayı <a id="_msoanchor_5"> </a> [önceki öğretici](building-an-interface-to-select-one-user-account-from-many-cs.md), her kullanıcı listeler.</span><span class="sxs-lookup"><span data-stu-id="7daac-322">This page, which we created in the <a id="_msoanchor_5"></a>[preceding tutorial](building-an-interface-to-select-one-user-account-from-many-cs.md), lists each user.</span></span> <span data-ttu-id="7daac-323">Bir bağlantı eklemek için GridView güncelleştirilmiş `UserInformation.aspx` sayfası, seçilen kullanıcının kullanıcı adı querystring aracılığıyla geçirme.</span><span class="sxs-lookup"><span data-stu-id="7daac-323">I've updated the GridView to include a link to the `UserInformation.aspx` page, passing the selected user's username through the querystring.</span></span> <span data-ttu-id="7daac-324">`UserInformation.aspx` Sayfasında, parolasını değiştirmek için seçilen kullanıcı ve metin kutuları hakkında bilgileri görüntüler (bkz. Şekil 9).</span><span class="sxs-lookup"><span data-stu-id="7daac-324">The `UserInformation.aspx` page displays information about the selected user and TextBoxes for changing their password (see Figure 9).</span></span>

<span data-ttu-id="7daac-325">Yeni parola girme, ikinci metin kutusuna onaylama ve güncelleştirme kullanıcı düğmesini tıklatarak sonra geri gönderimin ensues ve `aspnet_Membership_SetPassword` saklı yordam çağrıldığında, kullanıcının parolasını güncelleştiriliyor.</span><span class="sxs-lookup"><span data-stu-id="7daac-325">After entering the new password, confirming it in the second TextBox, and clicking the Update User Button, a postback ensues and the `aspnet_Membership_SetPassword` stored procedure is invoked, updating the user's password.</span></span> <span data-ttu-id="7daac-326">I koduyla daha aşina işlevselliği parolasını değiştirildi kullanıcıya bir e-posta göndererek içerecek şekilde genişletmeyi deneyin bu okuyucuların ve bu işlevselliği ilgilenen teşvik edin.</span><span class="sxs-lookup"><span data-stu-id="7daac-326">I encourage those readers interested in this functionality to become more familiar with the code and try extending the functionality to include sending an email to the user whose password was changed.</span></span>


<span data-ttu-id="7daac-327">[![Bir yönetici bir kullanıcının parolasını değiştirebilir](recovering-and-changing-passwords-cs/_static/image26.png)](recovering-and-changing-passwords-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="7daac-327">[![An Administrator May Change a User's Password](recovering-and-changing-passwords-cs/_static/image26.png)](recovering-and-changing-passwords-cs/_static/image25.png)</span></span>

<span data-ttu-id="7daac-328">**Şekil 9**: bir yönetici bir kullanıcının parolasını değiştirebilir ([tam boyutlu görüntüyü görüntülemek için tıklatın](recovering-and-changing-passwords-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="7daac-328">**Figure 9**: An Administrator May Change a User's Password  ([Click to view full-size image](recovering-and-changing-passwords-cs/_static/image27.png))</span></span>


> [!NOTE]
> <span data-ttu-id="7daac-329">`UserInformation.aspx` Üyelik framework parolalar düz veya Hashed biçiminde depolamak için yapılandırılmışsa, şu anda yalnızca sayfa.</span><span class="sxs-lookup"><span data-stu-id="7daac-329">The `UserInformation.aspx` page currently only works if the Membership framework is configured to store passwords in Clear or Hashed format.</span></span> <span data-ttu-id="7daac-330">Bu işlevsellik eklemek için davet karşın yeni parolayı şifrelemek için kodu eksik.</span><span class="sxs-lookup"><span data-stu-id="7daac-330">It lacks the code to encrypt the new password, although you are invited to add this functionality.</span></span> <span data-ttu-id="7daac-331">Öneririz gerekli kod ekleme yolu gibi decompiler kullanmaktır [Reflector](http://www.aisto.com/roeder/dotnet/) .NET Framework; yöntemleri için kaynak kodunu incelemek için inceleyerek Başlat `SqlMembershipProvider` sınıfının `ChangePassword` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="7daac-331">The way I recommend adding the necessary code is to use a decompiler like [Reflector](http://www.aisto.com/roeder/dotnet/) to examine the source code for methods in the .NET Framework; start by examining the `SqlMembershipProvider` class's `ChangePassword` method.</span></span> <span data-ttu-id="7daac-332">Bu parola karmasını oluşturmak için kod yazma kullanılacak tekniğidir.</span><span class="sxs-lookup"><span data-stu-id="7daac-332">This is the technique I used to write the code for creating a hash of the password.</span></span>


## <a name="summary"></a><span data-ttu-id="7daac-333">Özet</span><span class="sxs-lookup"><span data-stu-id="7daac-333">Summary</span></span>

<span data-ttu-id="7daac-334">ASP.NET kullanıcıların parolalarını yönetmenize yardımcı olmak için iki denetim sunar.</span><span class="sxs-lookup"><span data-stu-id="7daac-334">ASP.NET offers two controls to help users manage their password.</span></span> <span data-ttu-id="7daac-335">PasswordRecovery denetimi parolalarını unutmuş olanlar için yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="7daac-335">The PasswordRecovery control is useful for those who have forgotten their passwords.</span></span> <span data-ttu-id="7daac-336">Üyelik framework'ün yapılandırmasına bağlı olarak, kullanıcı ya da varolan parolasını ya da yeni, rastgele oluşturulan parola e-posta ile.</span><span class="sxs-lookup"><span data-stu-id="7daac-336">Depending on the Membership framework's configuration, the user is either emailed their existing password or a new, randomly-generated password.</span></span> <span data-ttu-id="7daac-337">Bu denetim bir kullanıcının parolasını güncelleştirmesi olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="7daac-337">The ChangePassword control enables a user to update their password.</span></span>

<span data-ttu-id="7daac-338">Oturum açma ve CreateUserWizard denetimleri gibi bildirim temelli biçimlendirme lick veya kod yazmak zorunda kalmadan, zengin kullanıcı arabirimi PasswordRecovery ve parola değiştirme denetimlerini işlemeye.</span><span class="sxs-lookup"><span data-stu-id="7daac-338">Like the Login and CreateUserWizard controls, the PasswordRecovery and ChangePassword controls render a rich user interface without having to write a lick of declarative markup or line of code.</span></span> <span data-ttu-id="7daac-339">Varsayılan kullanıcı arabirimi, ihtiyaçlarınızı karşılamıyorsa, stil özellikleri çeşitli üzerinden özelleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7daac-339">If the default user interface doesn't meet your needs, you can customize it through a variety of style properties.</span></span> <span data-ttu-id="7daac-340">Alternatif olarak, denetimleri arabirimleri bile daha hassas bir denetim derecesini için şablonlar dönüştürülür.</span><span class="sxs-lookup"><span data-stu-id="7daac-340">Alternatively, the controls' interfaces may be converted into templates, for an even finer degree of control.</span></span> <span data-ttu-id="7daac-341">Arka planda bu denetimler üyelik API kullanan çağırma `MembershipUser` nesnenin `ResetPassword` ve `ChangePassword` yöntemleri.</span><span class="sxs-lookup"><span data-stu-id="7daac-341">Behind the scenes these controls use the Membership API, invoking the `MembershipUser` object's `ResetPassword` and `ChangePassword` methods.</span></span>

<span data-ttu-id="7daac-342">Mutluluk programlama!</span><span class="sxs-lookup"><span data-stu-id="7daac-342">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="7daac-343">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="7daac-343">Further Reading</span></span>

<span data-ttu-id="7daac-344">Bu öğreticide konular hakkında daha fazla bilgi için aşağıdaki kaynaklara bakın:</span><span class="sxs-lookup"><span data-stu-id="7daac-344">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="7daac-345">Bu denetim QuickStarts</span><span class="sxs-lookup"><span data-stu-id="7daac-345">ChangePassword Control QuickStarts</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/login/changepassword.aspx)
- [<span data-ttu-id="7daac-346">PasswordRecovery denetimi QuickStarts</span><span class="sxs-lookup"><span data-stu-id="7daac-346">PasswordRecovery Control QuickStarts</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/login/passwordrecovery.aspx)
- [<span data-ttu-id="7daac-347">ASP.NET e-posta gönderme</span><span class="sxs-lookup"><span data-stu-id="7daac-347">Sending Email in ASP.NET</span></span>](http://aspnet.4guysfromrolla.com/articles/072606-1.aspx)
- [<span data-ttu-id="7daac-348">`System.Net.Mail` Sık sorulan sorular</span><span class="sxs-lookup"><span data-stu-id="7daac-348">`System.Net.Mail` FAQs</span></span>](http://www.systemnetmail.com/)

### <a name="about-the-author"></a><span data-ttu-id="7daac-349">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="7daac-349">About the Author</span></span>

<span data-ttu-id="7daac-350">Scott Mitchell, birden çok ASP/ASP.NET books yazar ve 4GuysFromRolla.com, kurucusu 1998 itibaren Microsoft Web teknolojileri ile çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="7daac-350">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="7daac-351">Tan bağımsız Danışman, eğitmen ve yazıcı çalışır.</span><span class="sxs-lookup"><span data-stu-id="7daac-351">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="7daac-352">En son kendi defteri  *[kendi öğretmek kendiniz ASP.NET 2.0 24 saat içindeki](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="7daac-352">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="7daac-353">Tan adresindeki ulaşılabilir [ mitchell@4guysfromrolla.com ](mailto:mitchell@4guysfromrolla.com) veya kendi blog aracılığıyla [ http://ScottOnWriting.NET ](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="7daac-353">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="7daac-354">Özel teşekkürler</span><span class="sxs-lookup"><span data-stu-id="7daac-354">Special Thanks To</span></span>

<span data-ttu-id="7daac-355">Bu öğretici seri pek çok yararlı gözden geçirenler tarafından gözden geçirildi.</span><span class="sxs-lookup"><span data-stu-id="7daac-355">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="7daac-356">Bu öğretici için sağlama gözden geçirenler Michael Emmings ve Suchi Banerjee içerir.</span><span class="sxs-lookup"><span data-stu-id="7daac-356">Lead reviewers for this tutorial include Michael Emmings and Suchi Banerjee.</span></span> <span data-ttu-id="7daac-357">My yaklaşan MSDN makaleleri gözden geçirme ilginizi çekiyor mu?</span><span class="sxs-lookup"><span data-stu-id="7daac-357">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="7daac-358">Öyleyse, bir satırında bana bırak [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="7daac-358">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="7daac-359">[Önceki](building-an-interface-to-select-one-user-account-from-many-cs.md)
> [sonraki](unlocking-and-approving-user-accounts-cs.md)</span><span class="sxs-lookup"><span data-stu-id="7daac-359">[Previous](building-an-interface-to-select-one-user-account-from-many-cs.md)
[Next](unlocking-and-approving-user-accounts-cs.md)</span></span>
