---
uid: web-forms/overview/older-versions-security/membership/validating-user-credentials-against-the-membership-user-store-vb
title: Üyelik kullanıcı deposu (VB) karşı kullanıcı kimlik bilgileri doğrulanıyor | Microsoft Docs
author: rick-anderson
description: Bu öğreticide programlı anlamına gelir ve oturum açma denetimi kullanarak üyelik kullanıcı deposunda karşı bir kullanıcının kimlik bilgilerini doğrulamak nasıl inceleyeceğiz...
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/18/2008
ms.topic: article
ms.assetid: 17772912-b47b-4557-9ce9-80f22df642f7
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-security/membership/validating-user-credentials-against-the-membership-user-store-vb
msc.type: authoredcontent
ms.openlocfilehash: f8d3de9736d901e02096d20345650b47c47897ae
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/06/2018
---
<a name="validating-user-credentials-against-the-membership-user-store-vb"></a><span data-ttu-id="b6d1b-103">Üyelik kullanıcı deposu (VB) karşı kullanıcı kimlik bilgileri doğrulanıyor</span><span class="sxs-lookup"><span data-stu-id="b6d1b-103">Validating User Credentials Against the Membership User Store (VB)</span></span>
====================
<span data-ttu-id="b6d1b-104">tarafından [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="b6d1b-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="b6d1b-105">[Kodu indirme](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_06_VB.zip) veya [PDF indirin](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial06_LoggingIn_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="b6d1b-105">[Download Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_06_VB.zip) or [Download PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial06_LoggingIn_vb.pdf)</span></span>

> <span data-ttu-id="b6d1b-106">Bu öğreticide programlı anlamına gelir ve oturum açma denetimi kullanarak üyelik kullanıcı deposunda karşı bir kullanıcının kimlik bilgilerini doğrulamak nasıl inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-106">In this tutorial we will examine how to validate a user's credentials against the Membership user store using both programmatic means and the Login control.</span></span> <span data-ttu-id="b6d1b-107">Ayrıca oturum açma denetimin görünümünü ve davranışını özelleştirmek nasıl tümleştirildiği incelenmektedir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-107">We will also look at how to customize the login control's appearance and behavior.</span></span>


## <a name="introduction"></a><span data-ttu-id="b6d1b-108">Giriş</span><span class="sxs-lookup"><span data-stu-id="b6d1b-108">Introduction</span></span>

<span data-ttu-id="b6d1b-109">İçinde <a id="Tutorial05"> </a> [önceki öğretici](creating-user-accounts-vb.md) üyelik Framework'te yeni bir kullanıcı hesabı oluşturmak nasıl inceledik.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-109">In the <a id="Tutorial05"></a>[preceding tutorial](creating-user-accounts-vb.md) we looked at how to create a new user account in the Membership framework.</span></span> <span data-ttu-id="b6d1b-110">Biz öncelikle programlı olarak aracılığıyla kullanıcı hesapları oluşturma Aranan `Membership` sınıfının `CreateUser` yöntemi ve ardından CreateUserWizard Web denetimi kullanma.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-110">We first looked at programmatically creating user accounts via the `Membership` class's `CreateUser` method, and then examined using the CreateUserWizard Web control.</span></span> <span data-ttu-id="b6d1b-111">Ancak, oturum açma sayfasına şu anda sağlanan kimlik bilgilerinin sabit kodlanmış kullanıcı adı ve parola çiftlerinin listesini karşı doğrular.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-111">However, the login page currently validates the supplied credentials against a hard-coded list of username and password pairs.</span></span> <span data-ttu-id="b6d1b-112">Üyelik framework'ün kullanıcı deposu karşı kimlik doğrulama için oturum açma sayfasının mantığı güncelleştirmeye gerekir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-112">We need to update the login page's logic so that it validates credentials against the Membership framework's user store.</span></span>

<span data-ttu-id="b6d1b-113">Çok gibi kullanıcı hesapları oluşturma ile kimlik bilgileri programlı olarak veya bildirimli olarak doğrulanabilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-113">Much like with creating user accounts, credentials can be validated programmatically or declaratively.</span></span> <span data-ttu-id="b6d1b-114">Üyelik API'si program aracılığıyla kullanıcı deposunda karşı bir kullanıcının kimlik bilgilerini doğrulamak için bir yöntem içerir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-114">The Membership API includes a method for programmatically validating a user's credentials against the user store.</span></span> <span data-ttu-id="b6d1b-115">Ve ASP.NET kutularındaki kullanıcı adı ve parolasını ve oturum açmak için bir düğmeye sahip bir kullanıcı arabirimi işler oturum açma Web denetimi ile birlikte gelir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-115">And ASP.NET ships with the Login Web control, which renders a user interface with textboxes for the username and password and a button to log in.</span></span>

<span data-ttu-id="b6d1b-116">Bu öğreticide programlı anlamına gelir ve oturum açma denetimi kullanarak üyelik kullanıcı deposunda karşı bir kullanıcının kimlik bilgilerini doğrulamak nasıl inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-116">In this tutorial we will examine how to validate a user's credentials against the Membership user store using both programmatic means and the Login control.</span></span> <span data-ttu-id="b6d1b-117">Ayrıca oturum açma denetimin görünümünü ve davranışını özelleştirmek nasıl tümleştirildiği incelenmektedir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-117">We will also look at how to customize the login control's appearance and behavior.</span></span> <span data-ttu-id="b6d1b-118">Haydi başlayalım!</span><span class="sxs-lookup"><span data-stu-id="b6d1b-118">Let's get started!</span></span>

## <a name="step-1-validating-credentials-against-the-membership-user-store"></a><span data-ttu-id="b6d1b-119">1. adım: Üyeliği kullanıcı deposunda karşı kimlik bilgileri doğrulanıyor</span><span class="sxs-lookup"><span data-stu-id="b6d1b-119">Step 1: Validating Credentials Against the Membership User Store</span></span>

<span data-ttu-id="b6d1b-120">Forms kimlik doğrulaması kullanan Web siteleri için bir kullanıcı Web sitesine bir oturum açma sayfasını ziyaret edip kimlik bilgilerini girme oturum açar.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-120">For web sites that use forms authentication, a user logs on to the website by visiting a login page and entering their credentials.</span></span> <span data-ttu-id="b6d1b-121">Bu kimlik bilgileri, sonra da kullanıcı deposunda karşı karşılaştırılır.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-121">These credentials are then compared against the user store.</span></span> <span data-ttu-id="b6d1b-122">Geçerliyse, kullanıcı kimliğini ve ziyaretçi güvenilirliğini gösteren bir güvenlik belirteci forms kimlik doğrulaması bileti verilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-122">If they are valid, then the user is granted a forms authentication ticket, which is a security token that indicates the identity and authenticity of the visitor.</span></span>

<span data-ttu-id="b6d1b-123">Bir kullanıcı üyeliği framework karşı doğrulamak için kullanın `Membership` sınıfının [ `ValidateUser` yöntemi](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx).</span><span class="sxs-lookup"><span data-stu-id="b6d1b-123">To validate a user against the Membership framework, use the `Membership` class's [`ValidateUser` method](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx).</span></span> <span data-ttu-id="b6d1b-124">`ValidateUser` Yöntemi alır iki giriş parametrelerinde - `username` ve `password` - ve kimlik bilgilerinin geçerli olup olmadığını gösteren bir Boole değeri döndürür.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-124">The `ValidateUser` method takes in two input parameters - `username` and `password` - and returns a Boolean value indicating whether the credentials were valid.</span></span> <span data-ttu-id="b6d1b-125">İle gibi `CreateUser` biz incelenmesi önceki öğreticide yöntemi `ValidateUser` yöntemi yapılandırılmış üyelik sağlayıcısı gerçek doğrulama atar.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-125">Like with the `CreateUser` method we examined in the previous tutorial, the `ValidateUser` method delegates the actual validation to the configured Membership provider.</span></span>

<span data-ttu-id="b6d1b-126">`SqlMembershipProvider` Belirtilen kullanıcının parolasını aracılığıyla elde ederek sağlanan kimlik bilgilerini doğrular `aspnet_Membership_GetPasswordWithFormat` saklı yordamı.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-126">The `SqlMembershipProvider` validates the supplied credentials by obtaining the specified user's password via the `aspnet_Membership_GetPasswordWithFormat` stored procedure.</span></span> <span data-ttu-id="b6d1b-127">Sözcüğünün `SqlMembershipProvider` üç biçimlerden birini kullanarak kullanıcıların parolalarını depolar: şifreli ya da karma temizleyin.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-127">Recall that the `SqlMembershipProvider` stores users' passwords using one of three formats: clear, encrypted, or hashed.</span></span> <span data-ttu-id="b6d1b-128">`aspnet_Membership_GetPasswordWithFormat` Saklı yordam ham biçimde parolayı döndürür.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-128">The `aspnet_Membership_GetPasswordWithFormat` stored procedure returns the password in its raw format.</span></span> <span data-ttu-id="b6d1b-129">Şifrelenmiş veya karma parolalar için `SqlMembershipProvider` dönüştüren `password` içine geçirilen değeri `ValidateUser` karşılığını yönteme şifrelenmiş veya durumu karma ve veritabanı tarafından döndürülen ile karşılaştırır.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-129">For encrypted or hashed passwords, the `SqlMembershipProvider` transforms the `password` value passed into the `ValidateUser` method into its equivalent encrypted or hashed state and then compares it with what was returned from the database.</span></span> <span data-ttu-id="b6d1b-130">Kullanıcı tarafından girilen biçimlendirilmiş parola veritabanında depolanan parola uyarsa, kimlik bilgileri geçerli değil.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-130">If the password stored in the database matches the formatted password entered by the user, the credentials are valid.</span></span>

<span data-ttu-id="b6d1b-131">Şimdi oturum açma sayfamızı güncelleştirme (~ /`Login.aspx`) böylece sağlanan kimlik bilgilerinin üyelik framework kullanıcı deposunda karşı doğrular.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-131">Let's update our login page (~/`Login.aspx`) so that it validates the supplied credentials against the Membership framework user store.</span></span> <span data-ttu-id="b6d1b-132">Bu oturum açma sayfasına oluşturduğumuz geri <a id="Tutorial02"> </a> [ *form kimlik doğrulaması bir genel bakış* ](../introduction/an-overview-of-forms-authentication-vb.md) kullanıcı adı ve parola, iki metin kutuları ile bir arabirim oluşturma öğretici, bir Beni anımsa onay ve oturum açma düğmesi (bkz: Şekil 1).</span><span class="sxs-lookup"><span data-stu-id="b6d1b-132">We created this login page back in the <a id="Tutorial02"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-vb.md) tutorial, creating an interface with two TextBoxes for the username and password, a Remember Me checkbox, and a Login button (see Figure 1).</span></span> <span data-ttu-id="b6d1b-133">Kod girilen kimlik bilgilerine sabit kodlanmış kullanıcı adı ve parola çiftlerinin listesini (Scott/parola, Jisun/parola ve Sam/parola) karşı doğrular.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-133">The code validates the entered credentials against a hard-coded list of username and password pairs (Scott/password, Jisun/password, and Sam/password).</span></span> <span data-ttu-id="b6d1b-134">İçinde <a id="Tutorial03"> </a> [ *Forms kimlik doğrulaması yapılandırması ve Gelişmiş konular* ](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) biz güncelleştirilmiş formlarında ek bilgileri depolamak için oturum açma sayfasının kod Öğreticisi kimlik doğrulama anahtarı'nın `UserData` özelliği.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-134">In the <a id="Tutorial03"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) tutorial we updated the login page's code to store additional information in the forms authentication ticket's `UserData` property.</span></span>


<span data-ttu-id="b6d1b-135">[![İki metin kutuları, bir CheckBoxList ve bir düğme oturum açma sayfasının arabirimi içerir](validating-user-credentials-against-the-membership-user-store-vb/_static/image2.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="b6d1b-135">[![The Login Page's Interface Includes Two TextBoxes, a CheckBoxList, and a Button](validating-user-credentials-against-the-membership-user-store-vb/_static/image2.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image1.png)</span></span>

<span data-ttu-id="b6d1b-136">**Şekil 1**: oturum açma sayfasının arabirimi içeren iki metin kutuları, bir CheckBoxList ve bir düğme ([tam boyutlu görüntüyü görüntülemek için tıklatın](validating-user-credentials-against-the-membership-user-store-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="b6d1b-136">**Figure 1**: The Login Page's Interface Includes Two TextBoxes, a CheckBoxList, and a Button  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image3.png))</span></span>


<span data-ttu-id="b6d1b-137">Oturum açma sayfasının kullanıcı arabirimi değişmeden kalır, ancak oturum açma düğmenin değiştirmek ihtiyacımız `Click` kullanıcının üyelik framework kullanıcı deposunda karşı doğrulama kodunu içeren olay işleyicisi.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-137">The login page's user interface can remain unchanged, but we need to replace the Login button's `Click` event handler with code that validates the user against the Membership framework user store.</span></span> <span data-ttu-id="b6d1b-138">Olay işleyicisi güncelleştirin, böylece kendi kod aşağıdaki gibidir:</span><span class="sxs-lookup"><span data-stu-id="b6d1b-138">Update the event handler so that its code appears as follows:</span></span>

[!code-vb[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample1.vb)]

<span data-ttu-id="b6d1b-139">Bu kod çok kolaydır.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-139">This code is remarkably simple.</span></span> <span data-ttu-id="b6d1b-140">Arayarak Başlat `Membership.ValidateUser` yöntemi, sağlanan kullanıcı adı ve parola geçirme.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-140">We start by calling the `Membership.ValidateUser` method, passing in the supplied username and password.</span></span> <span data-ttu-id="b6d1b-141">Bu yöntem True değerini döndürür sonra siteye kullanıcı oturumu `FormsAuthentication` sınıfının RedirectFromLoginPage yöntemi.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-141">If that method returns True, then the user is signed into the site via the `FormsAuthentication` class's RedirectFromLoginPage method.</span></span> <span data-ttu-id="b6d1b-142">(Biz anlatıldığı gibi <a id="Tutorial02"> </a> [ *form kimlik doğrulaması bir genel bakış* ](../introduction/an-overview-of-forms-authentication-vb.md) öğretici, `FormsAuthentication.RedirectFromLoginPage` forms kimlik doğrulaması bileti oluşturur ve ardından kullanıcı yönlendirir uygun sayfaya.) Kimlik bilgileri ancak geçersiz olduğunda `InvalidCredentialsMessage` etiketi görüntülenir, kullanıcının kendi kullanıcı adı veya parola yanlış olduğunu bildiren.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-142">(As we discussed in the <a id="Tutorial02"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-vb.md) tutorial, the `FormsAuthentication.RedirectFromLoginPage` creates the forms authentication ticket and then redirects the user to the appropriate page.) If the credentials are invalid, however, the `InvalidCredentialsMessage` Label is displayed, informing the user that their username or password was incorrect.</span></span>

<span data-ttu-id="b6d1b-143">Tüm olan İşte bu kadar!</span><span class="sxs-lookup"><span data-stu-id="b6d1b-143">That's all there is to it!</span></span>

<span data-ttu-id="b6d1b-144">Oturum açma sayfasına beklendiği gibi çalışıp çalışmadığını sınamak için önceki öğreticide oluşturduğunuz kullanıcı hesaplarından birisini ile oturum açma girişimi.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-144">To test that the login page works as expected, attempt to login with one of the user accounts you created in the preceding tutorial.</span></span> <span data-ttu-id="b6d1b-145">Veya, hesabınız henüz oluşturmadıysanız, devam etmek ve birinden oluşturmak `~/Membership/CreatingUserAccounts.aspx` sayfası.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-145">Or, if you have not yet created an account, go ahead and create one from the `~/Membership/CreatingUserAccounts.aspx` page.</span></span>

> [!NOTE]
> <span data-ttu-id="b6d1b-146">Kullanıcı kendi kimlik bilgilerini girer ve oturum açma sayfası formunun gönderir, kendi parola gibi kimlik bilgilerini de web sunucusu için Internet üzerinden iletilirken *düz metin*.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-146">When the user enters her credentials and submits the login page form, the credentials, including her password, are transmitted over the Internet to the web server in *plain text*.</span></span> <span data-ttu-id="b6d1b-147">Ağ trafiği algılaması korsan kullanıcı adı ve parola görebilirsiniz anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-147">That means any hacker sniffing the network traffic can see the username and password.</span></span> <span data-ttu-id="b6d1b-148">Bunu önlemek için bunu kullanarak ağ trafiğini şifrelemek için önemlidir [Güvenli Yuva Katmanı (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span><span class="sxs-lookup"><span data-stu-id="b6d1b-148">To prevent this, it is essential to encrypt the network traffic by using [Secure Socket Layers (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span></span> <span data-ttu-id="b6d1b-149">Bu, kimlik bilgilerini (yanı sıra tüm sayfanın HTML biçimlendirmesi) web sunucusu tarafından alınana kadar kullanıcılar tarayıcı bırakın andan şifrelenmiş güvence altına alır.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-149">This will ensure that the credentials (as well as the entire page's HTML markup) are encrypted from the moment they leave the browser until they are received by the web server.</span></span>


### <a name="how-the-membership-framework-handles-invalid-login-attempts"></a><span data-ttu-id="b6d1b-150">Üyelik Framework geçersiz oturum açma denemesi nasıl işler?</span><span class="sxs-lookup"><span data-stu-id="b6d1b-150">How the Membership Framework Handles Invalid Login Attempts</span></span>

<span data-ttu-id="b6d1b-151">Bir ziyaretçi oturum açma sayfasına ulaşana ve kimlik bilgilerini gönderdiğinde, tarayıcısında oturum açma sayfasına bir HTTP isteği yapar.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-151">When a visitor reaches the login page and submits their credentials, their browser makes an HTTP request to the login page.</span></span> <span data-ttu-id="b6d1b-152">Kimlik bilgilerinin geçerli olduğundan, HTTP yanıtı bir tanımlama bilgisinde kimlik doğrulaması bileti içerir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-152">If the credentials are valid, the HTTP response includes the authentication ticket in a cookie.</span></span> <span data-ttu-id="b6d1b-153">Bu nedenle, sitenize bölün çalışılırken bir korsan ayrıntısına geçerli bir kullanıcı adı ve parola konumundaki tahmin ile oturum açma sayfasına HTTP istekleri gönderen bir program oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-153">Therefore, a hacker attempting to break into your site could create a program that exhaustively sends HTTP requests to the login page with a valid username and a guess at the password.</span></span> <span data-ttu-id="b6d1b-154">Parola tahmin doğru ise, oturum açma sayfasına geçerli bir kullanıcı adı/parola çifti stumbled, bu noktada program bilir kimlik doğrulama bileti tanımlama döndürür.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-154">If the password guess is correct, the login page will return the authentication ticket cookie, at which point the program knows it has stumbled upon a valid username/password pair.</span></span> <span data-ttu-id="b6d1b-155">Özellikle parolası zayıf olduğunda deneme yanılma, böyle bir program bir kullanıcının parolasını stumble olabilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-155">Through brute force, such a program might be able to stumble upon a user's password, especially if the password is weak.</span></span>

<span data-ttu-id="b6d1b-156">Bu tür deneme yanılma saldırıları önlemek için belirli bir sayıda belirli bir süre içinde başarısız oturum açma girişimi varsa bir kullanıcı üyeliği framework kilitler.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-156">To prevent such brute force attacks, the Membership framework locks out a user if there are a certain number of unsuccessful login attempts within a certain period of time.</span></span> <span data-ttu-id="b6d1b-157">Tam parametreleri aşağıdaki iki üyelik sağlayıcısı yapılandırma ayarları yapılandırılabilir:</span><span class="sxs-lookup"><span data-stu-id="b6d1b-157">The exact parameters are configurable through the following two Membership provider configuration settings:</span></span>

- <span data-ttu-id="b6d1b-158">`maxInvalidPasswordAttempts` -kaç geçersiz parola belirtir denemeleri, Hesap kilitlenmeden önce süre içinde kullanıcı için verilir. Varsayılan değer 5'tir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-158">`maxInvalidPasswordAttempts` - specifies how many invalid password attempts are allowed for the user within the time period before the account is locked out. The default value is 5.</span></span>
- <span data-ttu-id="b6d1b-159">`passwordAttemptWindow` -süre sırasında belirtilen sayıda geçersiz oturum açma denemesi neden olacak hesap kilitlenmesi dakika cinsinden belirtir. Varsayılan değer 10'dur.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-159">`passwordAttemptWindow` - indicates the time period in minutes during which the specified number of invalid login attempts will cause the account to be locked out. The default value is 10.</span></span>

<span data-ttu-id="b6d1b-160">Bir kullanıcı kilitlendi, bir yönetici kendi hesabını açana kadar aynen oturum açılamaz.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-160">If a user has been locked out, she cannot login until an administrator unlocks her account.</span></span> <span data-ttu-id="b6d1b-161">Bir kullanıcı, kilitlendiğinde `ValidateUser` yöntemi olacaktır *her zaman* dönmek `False`geçerli kimlik bilgileri sağlanan olsa bile.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-161">When a user is locked out, the `ValidateUser` method will *always* return `False`, even if valid credentials are supplied.</span></span> <span data-ttu-id="b6d1b-162">Bu davranış bir korsan sitenize yanılma yöntemlerle kesintiye uğrar olasılığını azaltır, ancak yalnızca kendi parolasını unutursa veya yanlışlıkla Caps Lock açmıştır ya da hatalı yazarak günde sahip bir geçerli kullanıcı kilitleme sona erdirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-162">While this behavior lessens the likelihood that a hacker will break into your site through brute force methods, it can end up locking out a valid user who has simply forgotten her password or accidentally has the Caps Lock on or is having a bad typing day.</span></span>

<span data-ttu-id="b6d1b-163">Ne yazık ki, bir kullanıcı hesabının kilidini açmak için yerleşik aracı yoktur.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-163">Unfortunately, there is no built-in tool for unlocking a user account.</span></span> <span data-ttu-id="b6d1b-164">Bir hesap kilidini açmak için veritabanı değiştirebilirsiniz doğrudan - değiştirmek `IsLockedOut` alanındaki `aspnet_Membership` tablo için uygun kullanıcı hesabı - ya da kilitlerini seçeneklerle hesapları kilitli listeleyen web tabanlı bir arabirim oluşturun.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-164">In order to unlock an account, you can modify the database directly - change the `IsLockedOut` field in the `aspnet_Membership` table for the appropriate user account - or create a web-based interface that lists locked out accounts with options to unlock them.</span></span> <span data-ttu-id="b6d1b-165">Sonraki öğreticide ortak kullanıcı hesabı ve rol ilgili görevleri gerçekleştirmeye oluşturma yönetim arabirimleri inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-165">We will examine creating administrative interfaces for accomplishing common user account- and role-related tasks in a future tutorial.</span></span>

> [!NOTE]
> <span data-ttu-id="b6d1b-166">Bir dezavantajı `ValidateUser` yöntemdir sağlanan kimlik bilgileri geçersiz olduğunda, bu nedenle konusunda herhangi bir açıklama sağlamaz.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-166">One downside of the `ValidateUser` method is that when the supplied credentials are invalid, it does not provide any explanation as to why.</span></span> <span data-ttu-id="b6d1b-167">Kullanıcı Mağazası'nda, eşleşen bir kullanıcı adı/parola çifti olduğundan veya kullanıcı henüz onaylanmadığı için veya kullanıcı kilitlendi için kimlik bilgileri geçersiz olabilir. 4. adımda kullanıcıların oturum açma girişimi başarısız olduğunda bir ayrıntılı ileti kullanıcıya göstermek nasıl göreceğiz.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-167">The credentials may be invalid because there is no matching username/password pair in the user store, or because the user has not yet been approved, or because the user has been locked out. In Step 4 we will see how to show a more detailed message to the user when their login attempt fails.</span></span>


## <a name="step-2-collecting-credentials-through-the-login-web-control"></a><span data-ttu-id="b6d1b-168">2. adım: Oturum açma Web denetimi ile kimlik bilgileri toplama</span><span class="sxs-lookup"><span data-stu-id="b6d1b-168">Step 2: Collecting Credentials through the Login Web Control</span></span>

<span data-ttu-id="b6d1b-169">[Oturum açma Web denetimi](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) varsayılan kullanıcı arabirimi çok benzeyen oluşturduğumuz geri işler <a id="Tutorial02"> </a> [ *form kimlik doğrulaması bir genel bakış* ](../introduction/an-overview-of-forms-authentication-vb.md) Öğreticisi.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-169">The [Login Web control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) renders a default user interface very similar to the one we created back in the <a id="Tutorial02"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-vb.md) tutorial.</span></span> <span data-ttu-id="b6d1b-170">Oturum açma denetimi kullanarak bize ziyaretçi kimlik bilgileri toplamak için arabirim oluşturmak zorunda işlemlerini kaydeder.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-170">Using the Login control saves us the work of having to create the interface to collect the visitor's credentials.</span></span> <span data-ttu-id="b6d1b-171">Ayrıca, oturum açma denetimi otomatik olarak (gönderilen kimlik bilgilerinin geçerli olduğunu varsayarak), kullanıcı böylece bize herhangi bir kod yazmak zorunda kalmaktan açar.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-171">Moreover, the Login control automatically signs in the user (assuming the submitted credentials are valid), thereby saving us from having to write any code.</span></span>

<span data-ttu-id="b6d1b-172">Şimdi güncelleştirme `Login.aspx`, el ile oluşturulan arabirimi değiştiriliyor ve kod bir oturum açma denetimi.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-172">Let's update `Login.aspx`, replacing the manually created interface and code with a Login control.</span></span> <span data-ttu-id="b6d1b-173">Başlangıç varolan biçimlendirme kaldırarak ve kod `Login.aspx`.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-173">Start by removing the existing markup and code in `Login.aspx`.</span></span> <span data-ttu-id="b6d1b-174">Depolayabileceği silebilir veya yalnızca açıklamadan çıkarın. Bildirim temelli biçimlendirme açıklama eklemek için kendisiyle çevreleyen `<%--` ve `--%>` sınırlayıcısı.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-174">You may delete it outright, or simply comment it out. To comment out declarative markup, surround it with the `<%--` and `--%>` delimiters.</span></span> <span data-ttu-id="b6d1b-175">Bu sınırlayıcılar el ile girebilir veya Şekil 2'de görüldüğü gibi çıkışı açıklama ve açıklama araç çubuğunda seçilen satırlar simgesi çıkışı ardından metne seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-175">You can enter these delimiters manually, or, as Figure 2 shows, you may select the text to comment out and then click the Comment out the selected lines icon in the Toolbar.</span></span> <span data-ttu-id="b6d1b-176">Benzer şekilde, arka plandaki kod sınıfı seçili kod çıkışı açıklama eklemek için seçilen satırlar simgesi çıkışı açıklamayı kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-176">Similarly, you can use the Comment out the selected lines icon to comment out the selected code in the code-behind class.</span></span>


<span data-ttu-id="b6d1b-177">[![Varolan bildirim temelli biçimlendirme ve Login.aspx kaynak kodunda açıklama](validating-user-credentials-against-the-membership-user-store-vb/_static/image5.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="b6d1b-177">[![Comment Out the Existing Declarative Markup and Source Code in Login.aspx](validating-user-credentials-against-the-membership-user-store-vb/_static/image5.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image4.png)</span></span>

<span data-ttu-id="b6d1b-178">**Şekil 2**: açıklama çıkışı varolan bildirim temelli biçimlendirme ve Login.aspx kaynak kodunda ([tam boyutlu görüntüyü görüntülemek için tıklatın](validating-user-credentials-against-the-membership-user-store-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="b6d1b-178">**Figure 2**: Comment Out the Existing Declarative Markup and Source Code in Login.aspx  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image6.png))</span></span>


> [!NOTE]
> <span data-ttu-id="b6d1b-179">Seçili satırları simgesi çıkışı yorum, bildirim temelli biçimlendirme Visual Studio 2005'te görüntülerken kullanılabilir değil.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-179">The Comment out the selected lines icon is not available when viewing the declarative markup in Visual Studio 2005.</span></span> <span data-ttu-id="b6d1b-180">Visual Studio 2008 kullanmıyorsanız el ile eklemeniz gerekir `<%--` ve `--%>` sınırlayıcısı.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-180">If you are not using Visual Studio 2008 you will need to manually add the `<%--` and `--%>` delimiters.</span></span>


<span data-ttu-id="b6d1b-181">Ardından, sayfayı açın araç kutusundan bir oturum açma denetimi sürükleyin ve ayarlayın, `ID` özelliğine `myLogin`.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-181">Next, drag a Login control from the Toolbox on to the page and set its `ID` property to `myLogin`.</span></span> <span data-ttu-id="b6d1b-182">Bu noktada, ekranınızın Şekil 3'e benzer görünmelidir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-182">At this point your screen should look similar to Figure 3.</span></span> <span data-ttu-id="b6d1b-183">Oturum açma denetimin varsayılan arabirimi kullanıcı adı ve parola, bir Beni anımsa sonraki sefer onay kutusunu ve bir günlük düğmesine TextBox denetimleri içerdiğine dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-183">Note that the Login control's default interface includes TextBox controls for the username and password, a Remember me next time CheckBox, and a Log In Button.</span></span> <span data-ttu-id="b6d1b-184">Ayrıca `RequiredFieldValidator` iki metin kutuları için kontrol eder.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-184">There are also `RequiredFieldValidator` controls for the two TextBoxes.</span></span>


<span data-ttu-id="b6d1b-185">[![Bir oturum açma denetimi sayfasına ekleme](validating-user-credentials-against-the-membership-user-store-vb/_static/image8.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="b6d1b-185">[![Add a Login Control to the Page](validating-user-credentials-against-the-membership-user-store-vb/_static/image8.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image7.png)</span></span>

<span data-ttu-id="b6d1b-186">**Şekil 3**: sayfasına bir oturum açma denetim ekleme ([tam boyutlu görüntüyü görüntülemek için tıklatın](validating-user-credentials-against-the-membership-user-store-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="b6d1b-186">**Figure 3**: Add a Login Control to the Page  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image9.png))</span></span>


<span data-ttu-id="b6d1b-187">Ve bitmek!</span><span class="sxs-lookup"><span data-stu-id="b6d1b-187">And we're done!</span></span> <span data-ttu-id="b6d1b-188">Oturum açma denetimin oturum aç düğmesine tıklandığında, geri gönderimin ortaya çıkar ve oturum açma denetimi çağıracak `Membership.ValidateUser` yöntemi, girilen kullanıcı adı ve parola geçirme.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-188">When the Login control's Log In button is clicked, a postback will occur and the Login control will call the `Membership.ValidateUser` method, passing in the entered username and password.</span></span> <span data-ttu-id="b6d1b-189">Kimlik bilgileri geçersiz oturum açma denetimi gibi bildiren bir ileti görüntüler.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-189">If the credentials are invalid, the Login control displays a message stating such.</span></span> <span data-ttu-id="b6d1b-190">Ancak, kimlik bilgilerinin geçerli olduğundan, oturum açma denetimi forms kimlik doğrulaması bileti oluşturur ve kullanıcının uygun sayfasına yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-190">If, however, the credentials are valid, then the Login control creates the forms authentication ticket and redirects the user to the appropriate page.</span></span>

<span data-ttu-id="b6d1b-191">Oturum açma denetimi dört etkene başarılı oturum açma sırasında kullanıcıya yönlendirmek için uygun sayfaya belirlemek için kullanır:</span><span class="sxs-lookup"><span data-stu-id="b6d1b-191">The Login control uses four factors to determine the appropriate page to redirect the user to upon a successful login:</span></span>

- <span data-ttu-id="b6d1b-192">Oturum açma denetimi oturum açma sayfasında tarafından tanımlanan olup `loginUrl` forms kimlik doğrulaması yapılandırması; bu ayarın varsayılan değer: `Login.aspx`</span><span class="sxs-lookup"><span data-stu-id="b6d1b-192">Whether the Login control is on the login page as defined by `loginUrl` setting in the forms authentication configuration; this setting's default value is `Login.aspx`</span></span>
- <span data-ttu-id="b6d1b-193">Varlığını bir `ReturnUrl` sorgu dizesi parametresi</span><span class="sxs-lookup"><span data-stu-id="b6d1b-193">The presence of a `ReturnUrl` querystring parameter</span></span>
- <span data-ttu-id="b6d1b-194">Oturum açma denetimin değerini [ `DestinationUrl` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.destinationpageurl.aspx)</span><span class="sxs-lookup"><span data-stu-id="b6d1b-194">The value of the Login control's [`DestinationUrl` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.destinationpageurl.aspx)</span></span>
- <span data-ttu-id="b6d1b-195">`defaultUrl` Değeri belirtilen forms kimlik doğrulaması yapılandırma ayarları; bu ayarın varsayılan değeri Default.aspx</span><span class="sxs-lookup"><span data-stu-id="b6d1b-195">The `defaultUrl` value specified in the forms authentication configuration settings; this setting's default value is Default.aspx</span></span>

<span data-ttu-id="b6d1b-196">Şekil 4 nasıl gösterilmektedir, uygun sayfaya kararını ulaşması için bu dört parametre oturum açma denetimi kullanır.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-196">Figure 4 depicts the how the Login control uses these four parameters to arrive at its appropriate page decision.</span></span>


<span data-ttu-id="b6d1b-197">[![Bir oturum açma denetimi sayfasına ekleme](validating-user-credentials-against-the-membership-user-store-vb/_static/image11.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="b6d1b-197">[![Add a Login Control to the Page](validating-user-credentials-against-the-membership-user-store-vb/_static/image11.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image10.png)</span></span>

<span data-ttu-id="b6d1b-198">**Şekil 4**: sayfasına bir oturum açma denetim ekleme ([tam boyutlu görüntüyü görüntülemek için tıklatın](validating-user-credentials-against-the-membership-user-store-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="b6d1b-198">**Figure 4**: Add a Login Control to the Page  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image12.png))</span></span>


<span data-ttu-id="b6d1b-199">Bir tarayıcı aracılığıyla sitesini ziyaret edip üyelik Framework'te var olan bir kullanıcı oturum açma tarafından oturum açma denetimi sınamak için bir dakikanızı ayırın.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-199">Take a moment to test out the Login control by visiting the site through a browser and logging in as an existing user in the Membership framework.</span></span>

<span data-ttu-id="b6d1b-200">Oturum açma denetimin işlenmiş yüksek oranda yapılandırılabilir arabirimidir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-200">The Login control's rendered interface is highly configurable.</span></span> <span data-ttu-id="b6d1b-201">Bir dizi görünümünü etkileyen özellikleri vardır; daha, oturum açma denetimi düzenini denetleyebilmeniz için bir şablona kullanıcı arabirimi öğeleri dönüştürülebilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-201">There are a number of properties that influence its appearance; what's more, the Login control can be converted into a template for precise control over the layout the user interface elements.</span></span> <span data-ttu-id="b6d1b-202">Bu adımın geri kalanını düzeni ve görünümünü özelleştirmek nasıl inceler.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-202">The remainder of this step examines how to customize the appearance and layout.</span></span>

### <a name="customizing-the-login-controls-appearance"></a><span data-ttu-id="b6d1b-203">Oturum açma denetiminin görünümünü özelleştirme</span><span class="sxs-lookup"><span data-stu-id="b6d1b-203">Customizing the Login Control's Appearance</span></span>

<span data-ttu-id="b6d1b-204">Oturum açma denetimin varsayılan özellik ayarlarını bir başlık (günlük) sahip bir kullanıcı arabirimi oluşturmak, TextBox ve etiket için kullanıcı adı ve parola girdi, bir Beni anımsa yanındaki onay kutusunu ve oturum aç düğmesine zaman denetler.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-204">The Login control's default property settings render a user interface with a title ( Log In ), TextBox and Label controls for the username and password inputs, a Remember me next time CheckBox, and a Log In button.</span></span> <span data-ttu-id="b6d1b-205">Bu öğeleri görünümlerini çok sayıda oturum açma denetimin özelliklerini tüm yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-205">The appearances of these elements are all configurable through the Login control's numerous properties.</span></span> <span data-ttu-id="b6d1b-206">Ayrıca, ek kullanıcı arabirimi öğeleri - yeni bir kullanıcı hesabı - oluşturmak için bir sayfaya bir bağlantı gibi bir özelliğin ya da iki ayarlayarak eklenebilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-206">Furthermore, additional user interface elements - such as a link to a page to create a new user account - can be added by setting a property or two.</span></span>

<span data-ttu-id="b6d1b-207">Şimdi bizim Login denetiminin görünümünü oluşturan gussy için birkaç dakikanızı ayırın.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-207">Let's spend a few moments to gussy up the appearance of our Login control.</span></span> <span data-ttu-id="b6d1b-208">Bu yana `Login.aspx` sayfasında, sayfanın üst kısmındaki oturum açma bildiren metin zaten vardır, oturum açma denetimin başlık gereksiz.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-208">Since the `Login.aspx` page already has text at the top of the page that says Login, the Login control's title is superfluous.</span></span> <span data-ttu-id="b6d1b-209">Bu nedenle, temizleyin [ `TitleText` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.titletext.aspx) oturum açma denetimin başlığı kaldırmak için değer.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-209">Therefore, clear out the [`TitleText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.titletext.aspx) value in order to remove the Login control's title.</span></span>

<span data-ttu-id="b6d1b-210">Kullanıcı adı: ve parola: iki TextBox solundaki etiketleri aracılığıyla özelleştirilebilir [ `UserNameLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.usernamelabeltext.aspx) ve [ `PasswordLabelText` özellikleri](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordlabeltext.aspx)sırasıyla.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-210">The User Name: and Password: Labels to the left of the two TextBox controls can be customized through the [`UserNameLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.usernamelabeltext.aspx) and [`PasswordLabelText` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordlabeltext.aspx), respectively.</span></span> <span data-ttu-id="b6d1b-211">Kullanıcı adı değiştirelim: kullanıcı adı okunamıyor etiketi:.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-211">Let's change the User Name: Label to read Username:.</span></span> <span data-ttu-id="b6d1b-212">Etiket ve metin kutusu stilleri aracılığıyla yapılandırılabilir [ `LabelStyle` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.labelstyle.aspx) ve [ `TextBoxStyle` özellikleri](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textboxstyle.aspx)sırasıyla.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-212">The Label and TextBox styles are configurable through the [`LabelStyle`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.labelstyle.aspx) and [`TextBoxStyle` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textboxstyle.aspx), respectively.</span></span>

<span data-ttu-id="b6d1b-213">Sonraki zaman CheckBox'ın metin özelliği oturum açma denetimin ayarlanabilir Beni anımsa [ `RememberMeText` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermetext.aspx), ve kendi varsayılan durumu aracılığıyla yapılandırılabilir işaretli [ `RememberMeSet` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermeset.aspx)(hangi varsayılan değeri False).</span><span class="sxs-lookup"><span data-stu-id="b6d1b-213">The Remember me next time CheckBox's Text property can be set through the Login control's [`RememberMeText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermetext.aspx), and its default checked state is configurable through the [`RememberMeSet` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermeset.aspx) (which defaults to False).</span></span> <span data-ttu-id="b6d1b-214">Bir tane ayarlamak `RememberMeSet` Beni anımsa sonraki saat onay kutusunu böylece true özelliği varsayılan olarak denetlenir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-214">Go ahead and set the `RememberMeSet` property to True so that the Remember me next time CheckBox will be checked by default.</span></span>

<span data-ttu-id="b6d1b-215">Oturum açma denetimi kullanıcı arabirimi denetimlerini düzenini ayarlamak için iki özellikleri sunar.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-215">The Login control offers two properties for adjusting the layout of its user interface controls.</span></span> <span data-ttu-id="b6d1b-216">[ `TextLayout` Özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textlayout.aspx) gösterir olup olmadığını Username: ve parola: etiketleri görünür bunların karşılık gelen kutularındaki (varsayılan) ya da bunları üstünde sol.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-216">The [`TextLayout` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textlayout.aspx) indicates whether the Username: and Password: Labels appear to the left of their corresponding TextBoxes (the default), or above them.</span></span> <span data-ttu-id="b6d1b-217">[ `Orientation` Özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.orientation.aspx) kullanıcı adı ve parola girişlerini dikey yer olup olmadığını gösterir (bir üst üste) ya da yatay olarak.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-217">The [`Orientation` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.orientation.aspx) indicates whether the username and password inputs are situated vertically (one above the other) or horizontally.</span></span> <span data-ttu-id="b6d1b-218">Varsayılan değerlerine ayarlayın bu iki özellik bırakın kullanacağım ancak, bu iki özellik elde edilen etkisini görmek için varsayılan olmayan değerlerine ayarlamayı deneyin öneririz.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-218">I am going to leave these two properties set to their defaults, but I encourage you to try setting these two properties to their non-default values to see the resulting effect.</span></span>

> [!NOTE]
> <span data-ttu-id="b6d1b-219">Sonraki bölümde, oturum açma denetimin yerleşimi, yapılandırma biz Düzen denetimin kullanıcı arabirimi öğeleri kesin düzenini tanımlamak için şablonlar kullanarak arar.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-219">In the next section, Configuring the Login Control's Layout, we will look at using templates to define the precise layout of the Layout control's user interface elements.</span></span>


<span data-ttu-id="b6d1b-220">Oturum açma denetimin özellik ayarlarını ayarlayarak kaydırma [ `CreateUserText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createusertext.aspx) ve [ `CreateUserUrl` özellikleri](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createuserurl.aspx) için henüz kayıtlı değil mi?</span><span class="sxs-lookup"><span data-stu-id="b6d1b-220">Wrap up the Login control's property settings by setting the [`CreateUserText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createusertext.aspx) and [`CreateUserUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createuserurl.aspx) to Not registered yet?</span></span> <span data-ttu-id="b6d1b-221">Bir hesap oluşturun!</span><span class="sxs-lookup"><span data-stu-id="b6d1b-221">Create an account!</span></span> <span data-ttu-id="b6d1b-222">ve `~/Membership/CreatingUserAccounts.aspx`sırasıyla.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-222">and `~/Membership/CreatingUserAccounts.aspx`, respectively.</span></span> <span data-ttu-id="b6d1b-223">Bu sayfaya işaret eden oturum açma denetimin arabirimine oluşturduğumuz içinde bir köprü ekler <a id="Tutorial05"> </a> [önceki Öğreticisi](creating-user-accounts-vb.md).</span><span class="sxs-lookup"><span data-stu-id="b6d1b-223">This adds a hyperlink to the Login control's interface pointing to the page we created in the <a id="Tutorial05"></a>[preceding tutorial](creating-user-accounts-vb.md).</span></span> <span data-ttu-id="b6d1b-224">Oturum açma denetimin [ `HelpPageText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppagetext.aspx) ve [ `HelpPageUrl` özellikleri](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppageurl.aspx) ve [ `PasswordRecoveryText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoverytext.aspx) ve [ `PasswordRecoveryUrl` özellikleri](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoveryurl.aspx) bağlantılar Yardım sayfası ve bir parola kurtarma sayfa işleme aynı şekilde çalışır.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-224">The Login control's [`HelpPageText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppagetext.aspx) and [`HelpPageUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppageurl.aspx) and [`PasswordRecoveryText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoverytext.aspx) and [`PasswordRecoveryUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoveryurl.aspx) work in the same manner, rendering links to a help page and a password recovery page.</span></span>

<span data-ttu-id="b6d1b-225">Bu özellik değişiklikleri yaptıktan sonra oturum açma denetiminizin bildirim temelli biçimlendirme ve görünüm, Şekil 5'te gösterilen benzer görünmelidir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-225">After making these property changes, your Login control's declarative markup and appearance should look similar to that shown in Figure 5.</span></span>


<span data-ttu-id="b6d1b-226">[![Oturum açma denetimin özelliklerini değerleri görünümünü dikte](validating-user-credentials-against-the-membership-user-store-vb/_static/image14.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="b6d1b-226">[![The Login Control's Properties' Values Dictate Its Appearance](validating-user-credentials-against-the-membership-user-store-vb/_static/image14.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image13.png)</span></span>

<span data-ttu-id="b6d1b-227">**Şekil 5**: oturum açma denetimin özelliklerini değerleri dikte ait Görünüm ([tam boyutlu görüntüyü görüntülemek için tıklatın](validating-user-credentials-against-the-membership-user-store-vb/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="b6d1b-227">**Figure 5**: The Login Control's Properties' Values Dictate Its Appearance  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image15.png))</span></span>


### <a name="configuring-the-login-controls-layout"></a><span data-ttu-id="b6d1b-228">Oturum açma denetimin düzeni yapılandırma</span><span class="sxs-lookup"><span data-stu-id="b6d1b-228">Configuring the Login Control's Layout</span></span>

<span data-ttu-id="b6d1b-229">Bir HTML arabirimde kullanıma oturum açma Web denetimin varsayılan kullanıcı arabirimi yerleştirir `<table>`.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-229">The Login Web control's default user interface lays out the interface in an HTML `<table>`.</span></span> <span data-ttu-id="b6d1b-230">Ancak ne işlenmiş çıkış üzerinde daha hassas denetim ihtiyacımız var?</span><span class="sxs-lookup"><span data-stu-id="b6d1b-230">But what if we need finer control over the rendered output?</span></span> <span data-ttu-id="b6d1b-231">Biz değiştirmek istediğiniz belki `<table>` bir dizi `<div>` etiketler.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-231">Maybe we want to replace the `<table>` with a series of `<div>` tags.</span></span> <span data-ttu-id="b6d1b-232">Veya ne uygulamamız kimlik doğrulaması için ek kimlik bilgileri gerektiriyor?</span><span class="sxs-lookup"><span data-stu-id="b6d1b-232">Or what if our application requires additional credentials for authentication?</span></span> <span data-ttu-id="b6d1b-233">Birçok finansal Web siteleri, örneğin, yalnızca bir kullanıcı adı ve parola, ancak aynı zamanda kişisel kimlik numarası (PIN) veya diğer tanımlayıcı bilgiler sağlamak kullanıcıların gerektirir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-233">Many financial websites, for instance, require users to supply not only a username and password, but also a Personal Identification Number (PIN), or other identifying information.</span></span> <span data-ttu-id="b6d1b-234">Ne olursa olsun nedenleri olabilir, oturum açma denetimi, biz açıkça arabiriminin bildirim temelli biçimlendirme tanımlayabilirsiniz bir şablona dönüştürmek mümkündür.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-234">Whatever the reasons may be, it is possible to convert the Login control into a template, from which we can explicitly define the interface's declarative markup.</span></span>

<span data-ttu-id="b6d1b-235">Ek kimlik bilgileri toplamak için oturum açma denetimi güncelleştirmek için iki işlem yapmanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="b6d1b-235">We need to do two things in order to update the Login control to collect additional credentials:</span></span>

1. <span data-ttu-id="b6d1b-236">Ek kimlik bilgileri toplamak için Web control(s) dahil etmek için oturum açma denetimin arabirimini güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-236">Update the Login control's interface to include Web control(s) to collect the additional credentials.</span></span>
2. <span data-ttu-id="b6d1b-237">Böylece bir kullanıcı yalnızca kendi kullanıcı adı ve parola geçerli ise ve ek kimlik bilgilerini çok geçerli kimlik doğrulaması oturum açma denetim iç kimlik doğrulaması mantığının geçersiz kılar.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-237">Override the Login control's internal authentication logic so that a user is only authenticated if their username and password is valid and their additional credentials are valid, too.</span></span>

<span data-ttu-id="b6d1b-238">İlk görevi gerçekleştirmek için şu oturum açma denetimi şablona dönüştürün ve gerekli Web denetimleri eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-238">To accomplish the first task, we need to convert the Login control into a template and add the necessary Web controls.</span></span> <span data-ttu-id="b6d1b-239">İkinci görev için olduğu gibi oturum açma denetimin kimlik doğrulaması mantığı ve denetim için bir olay işleyicisi oluşturarak yerini [ `Authenticate` olay](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span><span class="sxs-lookup"><span data-stu-id="b6d1b-239">As for the second task, the Login control's authentication logic can be superseded by creating an event handler for the control's [`Authenticate` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span></span>

<span data-ttu-id="b6d1b-240">Böylece kullanıcılar kendi kullanıcı adı, parola ve e-posta adresi için ister ve yalnızca kendi e-posta adresi dosyada sağlanan e-posta adresi eşleşmesi durumunda kullanıcının kimliğini doğrular şimdi oturum açma denetimi güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-240">Let's update the Login control so that it prompts users for their username, password, and email address and only authenticates the user if the email address supplied matches their email address on file.</span></span> <span data-ttu-id="b6d1b-241">Biz öncelikle bir şablona oturum açma denetimin arabirimi dönüştürmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-241">We first need to convert the Login control's interface to a template.</span></span> <span data-ttu-id="b6d1b-242">Oturum açma denetimin akıllı etiketten dönüştürme şablonu seçeneğini seçin.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-242">From the Login control's Smart Tag, choose the Convert to template option.</span></span>


<span data-ttu-id="b6d1b-243">[![Oturum açma denetimi şablona dönüştürme](validating-user-credentials-against-the-membership-user-store-vb/_static/image17.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="b6d1b-243">[![Convert the Login Control to a Template](validating-user-credentials-against-the-membership-user-store-vb/_static/image17.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image16.png)</span></span>

<span data-ttu-id="b6d1b-244">**Şekil 6**: oturum açma denetimi şablona dönüştürme ([tam boyutlu görüntüyü görüntülemek için tıklatın](validating-user-credentials-against-the-membership-user-store-vb/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="b6d1b-244">**Figure 6**: Convert the Login Control to a Template  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image18.png))</span></span>


> [!NOTE]
> <span data-ttu-id="b6d1b-245">Oturum açma denetimi önceden template sürüme dönmek için denetimin akıllı etiket sıfırlama bağlantısını tıklatın.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-245">To revert the Login control to its pre-template version, click the Reset link from the control's Smart Tag.</span></span>


<span data-ttu-id="b6d1b-246">Oturum açma denetimi için bir şablon dönüştürme ekler bir `LayoutTemplate` denetimin bildirim temelli biçimlendirme HTML öğeleri ve kullanıcı arabirimini tanımlayan Web denetimleri için.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-246">Converting the Login control to a template adds a `LayoutTemplate` to the control's declarative markup with HTML elements and Web controls defining the user interface.</span></span> <span data-ttu-id="b6d1b-247">Şekil 7'de görüldüğü gibi bir şablona denetimi dönüştürme bir dizi Özellikler penceresinden gibi kaldırır `TitleText`, `CreateUserUrl`, vb., sonra bu özellik değerleri, bir şablon kullanırken göz ardı edilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-247">As Figure 7 shows, converting the control to a template removes a number of properties from the Properties window, such as `TitleText`, `CreateUserUrl`, and so forth, since these property values are ignored when using a template.</span></span>


<span data-ttu-id="b6d1b-248">[![Daha az özellikler kullanılabilir olduğunda oturum açma denetim için bir şablon dönüştürülür:](validating-user-credentials-against-the-membership-user-store-vb/_static/image20.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="b6d1b-248">[![Fewer Properties are Available When the Login Control is Converted to a Template](validating-user-credentials-against-the-membership-user-store-vb/_static/image20.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image19.png)</span></span>

<span data-ttu-id="b6d1b-249">**Şekil 7**: daha az özelliklerdir kullanılabilir olduğunda oturum açma denetim için bir şablon dönüştürülür ([tam boyutlu görüntüyü görüntülemek için tıklatın](validating-user-credentials-against-the-membership-user-store-vb/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="b6d1b-249">**Figure 7**: Fewer Properties are Available When the Login Control is Converted to a Template  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image21.png))</span></span>


<span data-ttu-id="b6d1b-250">HTML biçimlendirmede `LayoutTemplate` gerektiğinde değiştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-250">The HTML markup in the `LayoutTemplate` may be modified as needed.</span></span> <span data-ttu-id="b6d1b-251">Benzer şekilde, tüm yeni Web denetimleri şablona eklemekten çekinmeyin.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-251">Likewise, feel free to add any new Web controls to the template.</span></span> <span data-ttu-id="b6d1b-252">Ancak, bu oturum açma denetimin çekirdek Web denetimleri şablonda kalır ve bunların atanmış tutmak önemlidir `ID` değerleri.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-252">However, it is important that Login control's core Web controls remain in the template and keep their assigned `ID` values.</span></span> <span data-ttu-id="b6d1b-253">Özellikle, yeniden adlandırmak veya kaldırmayın `UserName` veya `Password` metin kutuları, `RememberMe` onay kutusunu `LoginButton` düğmesi, `FailureText` etiketi veya `RequiredFieldValidator` kontrol eder.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-253">In particular, do not remove or rename the `UserName` or `Password` TextBoxes, the `RememberMe` CheckBox, the `LoginButton` Button, the `FailureText` Label, or the `RequiredFieldValidator` controls.</span></span>

<span data-ttu-id="b6d1b-254">Ziyaretçi e-posta adresi toplamak için biz TextBox şablona eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-254">To collect the visitor's email address, we need to add a TextBox to the template.</span></span> <span data-ttu-id="b6d1b-255">Tablo satırının arasında aşağıdaki bildirim temelli biçimlendirmeyi ekleyin (`<tr>`) içeren `Password` TextBox ve Beni anımsa sonraki tutan tablo satırındaki onay kutusunu süresi:</span><span class="sxs-lookup"><span data-stu-id="b6d1b-255">Add the following declarative markup between the table row (`<tr>`) that contains the `Password` TextBox and the table row that holds the Remember me next time CheckBox:</span></span>

[!code-aspx[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample2.aspx)]

<span data-ttu-id="b6d1b-256">Ekledikten sonra `Email` metin kutusuna, bir tarayıcı aracılığıyla sayfasını ziyaret edin.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-256">After adding the `Email` TextBox, visit the page through a browser.</span></span> <span data-ttu-id="b6d1b-257">Şekil 8'de görüldüğü gibi oturum açma denetimin kullanıcı arabirimi şimdi üçüncü metin kutusu içerir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-257">As Figure 8 shows, the Login control's user interface now includes a third textbox.</span></span>


<span data-ttu-id="b6d1b-258">[![Oturum açma denetimi, bir metin kutusu artık için kullanıcının e-posta adresini içerir.](validating-user-credentials-against-the-membership-user-store-vb/_static/image23.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="b6d1b-258">[![The Login Control Now Includes a Textbox for the User's Email Address](validating-user-credentials-against-the-membership-user-store-vb/_static/image23.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image22.png)</span></span>

<span data-ttu-id="b6d1b-259">**Şekil 8**: oturum açma denetimi, bir metin kutusu artık için kullanıcının e-posta adresini içerir. ([tam boyutlu görüntüyü görüntülemek için tıklatın](validating-user-credentials-against-the-membership-user-store-vb/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="b6d1b-259">**Figure 8**: The Login Control Now Includes a Textbox for the User's Email Address  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image24.png))</span></span>


<span data-ttu-id="b6d1b-260">Bu noktada, oturum açma denetimi kullanmaya devam `Membership.ValidateUser` sağlanan kimlik bilgilerini doğrulamak için yöntemi.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-260">At this point, the Login control is still using the `Membership.ValidateUser` method to validate the supplied credentials.</span></span> <span data-ttu-id="b6d1b-261">Değer gelenlere, girilen `Email` metin kutusu kullanıcı oturum açabilir üzerinde şifrelemeyle sahiptir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-261">Correspondingly, the value entered into the `Email` TextBox has no bearing on whether the user can log in.</span></span> <span data-ttu-id="b6d1b-262">Adım 3'te kimlik bilgilerini yalnızca kullanıcı adı ve parolasının geçerli olduğundan ve dosya e-posta adresi ile sağlanan e-posta adresi eşleştiğini geçerli olarak kabul edilir böylece oturum açma denetimin kimlik doğrulaması mantığı geçersiz kılmak nasıl ele alacağız.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-262">In Step 3 we will look at how to override the Login control's authentication logic so that the credentials are only considered valid if the username and password are valid and the supplied email address matches up with the email address on file.</span></span>

## <a name="step-3-modifying-the-login-controls-authentication-logic"></a><span data-ttu-id="b6d1b-263">3. adım: oturum açma denetimin kimlik doğrulaması mantığı değiştirme</span><span class="sxs-lookup"><span data-stu-id="b6d1b-263">Step 3: Modifying the Login Control's Authentication Logic</span></span>

<span data-ttu-id="b6d1b-264">Her bir ziyaretçi sağlar, kimlik bilgilerini ve oturum aç düğmesine, geri gönderimin ensues tıklar ve oturum açma, kimlik doğrulama iş akışı ilerleyerek denetler.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-264">When a visitor supplies her credentials and clicks the Log In button, a postback ensues and the Login control progresses through its authentication workflow.</span></span> <span data-ttu-id="b6d1b-265">İş akışı yükselterek başlar [ `LoggingIn` olay](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggingin.aspx).</span><span class="sxs-lookup"><span data-stu-id="b6d1b-265">The workflow starts by raising the [`LoggingIn` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggingin.aspx).</span></span> <span data-ttu-id="b6d1b-266">Bu olayla ilişkili tüm olay işleyicileri ayarlayarak işlem günlüğünde iptal edebilirsiniz `e.Cancel` özelliğine `True`.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-266">Any event handlers associated with this event may cancel the log in operation by setting the `e.Cancel` property to `True`.</span></span>

<span data-ttu-id="b6d1b-267">İşlem günlüğünde iptal edilmemiş, iş akışı yükselterek ilerler [ `Authenticate` olay](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span><span class="sxs-lookup"><span data-stu-id="b6d1b-267">If the log in operation is not cancelled, the workflow progresses by raising the [`Authenticate` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span></span> <span data-ttu-id="b6d1b-268">Bir olay işleyicisi için ise `Authenticate` olay, ardından sağlanan kimlik bilgilerinin geçerli olup olmadığını belirlemek için sorumlu.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-268">If there is an event handler for the `Authenticate` event, then it is responsible for determining whether the supplied credentials are valid or not.</span></span> <span data-ttu-id="b6d1b-269">Hiçbir olay işleyicisi belirtildiyse, oturum açma denetimi kullanır `Membership.ValidateUser` kimlik bilgilerinin geçerliliğini belirlemek için yöntem.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-269">If no event handler is specified, the Login control uses the `Membership.ValidateUser` method to determine the validity of the credentials.</span></span>

<span data-ttu-id="b6d1b-270">Sağlanan kimlik bilgilerinin geçerli sonra forms kimlik doğrulaması biletinin oluşturulduğu [ `LoggedIn` olay](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggedin.aspx) ortaya çıkar ve kullanıcı uygun sayfaya yönlendirilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-270">If the supplied credentials are valid, then the forms authentication ticket is created, the [`LoggedIn` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggedin.aspx) is raised, and the user is redirected to the appropriate page.</span></span> <span data-ttu-id="b6d1b-271">Ancak, kimlik bilgileri geçersiz sayılan, sonra [ `LoginError` olay](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loginerror.aspx) tetiklenir ve kullanıcı kimlik bilgilerini geçersiz olduğunu bildiren bir ileti görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-271">If, however, the credentials are deemed invalid, then the [`LoginError` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loginerror.aspx) is raised and a message is displayed informing the user that their credentials were invalid.</span></span> <span data-ttu-id="b6d1b-272">Yalnızca denetim varsayılan olarak, oturum açma hatası durumunda ayarlar kendi `FailureText` denetimin metin özelliğini (oturum açma girişiminiz başarılı değildi. hata iletisi etiket</span><span class="sxs-lookup"><span data-stu-id="b6d1b-272">By default, on failure the Login control simply sets its `FailureText` Label control's Text property to a failure message ( Your login attempt was not successful.</span></span> <span data-ttu-id="b6d1b-273">Lütfen yeniden deneyin).</span><span class="sxs-lookup"><span data-stu-id="b6d1b-273">Please try again ).</span></span> <span data-ttu-id="b6d1b-274">Ancak, oturum açma denetimin [ `FailureAction` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failureaction.aspx) ayarlanır `RedirectToLoginPage`, sonra oturum açma denetimi sorunları bir `Response.Redirect` sorgu dizesi parametresi ekleme oturum açma sayfasına `loginfailure=1` (neden olan oturum açma hata iletisini görüntülemek üzere Denetim).</span><span class="sxs-lookup"><span data-stu-id="b6d1b-274">However, if the Login control's [`FailureAction` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failureaction.aspx) is set to `RedirectToLoginPage`, then the Login control issues a `Response.Redirect` to the login page appending the querystring parameter `loginfailure=1` (which causes the Login control to display the failure message).</span></span>

<span data-ttu-id="b6d1b-275">Şekil 9 kimlik doğrulama iş akışı akış çizelgesi sunar.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-275">Figure 9 offers a flow chart of the authentication workflow.</span></span>


<span data-ttu-id="b6d1b-276">[![Oturum açma denetimin kimlik doğrulama iş akışı](validating-user-credentials-against-the-membership-user-store-vb/_static/image26.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="b6d1b-276">[![The Login Control's Authentication Workflow](validating-user-credentials-against-the-membership-user-store-vb/_static/image26.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image25.png)</span></span>

<span data-ttu-id="b6d1b-277">**Şekil 9**: oturum açma denetimin kimlik doğrulama iş akışı ([tam boyutlu görüntüyü görüntülemek için tıklatın](validating-user-credentials-against-the-membership-user-store-vb/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="b6d1b-277">**Figure 9**: The Login Control's Authentication Workflow  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image27.png))</span></span>


> [!NOTE]
> <span data-ttu-id="b6d1b-278">Ne zaman kullanacağınız düşünüyorsunuz varsa `FailureAction`'s `RedirectToLogin` seçeneği sayfasında, aşağıdaki senaryoyu göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-278">If you are wondering when you would use the `FailureAction`'s `RedirectToLogin` page option, consider the following scenario.</span></span> <span data-ttu-id="b6d1b-279">Şu anda bizim `Site.master` ana sayfa stranger anonim bir kullanıcı tarafından ziyaret edildiğinde sol sütunda görüntülenen metin, Hello, şu anda var ancak biz metnin bir oturum açma denetimi ile değiştirmek istediğinizi düşünelim.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-279">Right now our `Site.master` master page currently has the text, Hello, stranger displayed in the left column when visited by an anonymous user, but imagine that we wanted to replace that text with a Login control.</span></span> <span data-ttu-id="b6d1b-280">Bu, oturum açma sayfasına doğrudan gitmek erişmeleri yerine bu sitedeki herhangi bir sayfadan oturum açmak anonim kullanıcı olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-280">This would allow an anonymous user to log in from any page on the site, instead of requiring them to visit the login page directly.</span></span> <span data-ttu-id="b6d1b-281">Bir kullanıcının ana sayfa tarafından işlenen oturum açma denetimi aracılığıyla oturum açamadı, ancak, bu oturum açma sayfasına yeniden yönlendirmek için mantıklı olabilir (`Login.aspx`) büyük olasılıkla bu sayfaya ek yönergeler, bağlantılar ve bağlantıları oluşturma gibi diğer Yardım - içerdiğinden bir Yeni hesap veya ana sayfaya eklenmedi kayıp parola - alınamıyor.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-281">However, if a user was unable to log in via the Login control rendered by the master page, it might make sense to redirect them to the login page (`Login.aspx`) because that page likely includes additional instructions, links, and other help - such as links to create a new account or retrieve a lost password - that were not added to the master page.</span></span>


### <a name="creating-theauthenticateevent-handler"></a><span data-ttu-id="b6d1b-282">Oluşturma`Authenticate`olay işleyicisi</span><span class="sxs-lookup"><span data-stu-id="b6d1b-282">Creating the`Authenticate`Event Handler</span></span>

<span data-ttu-id="b6d1b-283">Özel kimlik doğrulama mantığımızı takın için oturum açma denetim için bir olay işleyicisi oluşturmak ihtiyacımız `Authenticate` olay.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-283">In order to plug in our custom authentication logic, we need to create an event handler for the Login control's `Authenticate` event.</span></span> <span data-ttu-id="b6d1b-284">Bir olay işleyicisi oluşturma `Authenticate` olay, aşağıdaki olay işleyici tanımının üretir:</span><span class="sxs-lookup"><span data-stu-id="b6d1b-284">Creating an event handler for the `Authenticate` event will generate the following event handler definition:</span></span>

[!code-vb[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample3.vb)]

<span data-ttu-id="b6d1b-285">Gördüğünüz gibi `Authenticate` olay işleyicisi türünde bir nesne geçirilen [ `AuthenticateEventArgs` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.authenticateeventargs.aspx) ikinci kendi giriş parametresi olarak.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-285">As you can see, the `Authenticate` event handler is passed an object of type [`AuthenticateEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.authenticateeventargs.aspx) as its second input parameter.</span></span> <span data-ttu-id="b6d1b-286">`AuthenticateEventArgs` Sınıfı içeren adlı bir Boolean özelliği `Authenticated` sağlanan kimlik bilgilerinin geçerli olup olmadığını belirtmek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-286">The `AuthenticateEventArgs` class contains a Boolean property named `Authenticated` that is used to specify whether the supplied credentials are valid.</span></span> <span data-ttu-id="b6d1b-287">Bizim görev, sağlanan kimlik bilgilerinin geçerli olup olmadığını belirleyen kodu buraya yazın ve ayarlamak için ise `e.Authenticate` özelliği uygun şekilde.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-287">Our task, then, is to write code here that determines whether the supplied credentials are valid or not, and to set the `e.Authenticate` property accordingly.</span></span>

### <a name="determining-and-validating-the-supplied-credentials"></a><span data-ttu-id="b6d1b-288">Belirleme ve sağlanan kimlik bilgileri doğrulanıyor</span><span class="sxs-lookup"><span data-stu-id="b6d1b-288">Determining and Validating the Supplied Credentials</span></span>

<span data-ttu-id="b6d1b-289">Oturum açma denetimin kullanmak [ `UserName` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.username.aspx) ve [ `Password` özellikleri](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.password.aspx) kullanıcı tarafından girilen kullanıcı adı ve parola kimlik bilgileri belirlemek için.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-289">Use the Login control's [`UserName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.username.aspx) and [`Password` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.password.aspx) to determine the username and password credentials entered by the user.</span></span> <span data-ttu-id="b6d1b-290">Tüm ek Web denetimlere girilen değerleri belirlemek için (gibi `Email` metin kutusuna önceki adımda eklediğimiz), kullanın `LoginControlID.FindControl`("*`controlID`*") Web programlı bir başvuru almak için Şablonda, Denetim `ID` özelliği eşittir *`controlID`*.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-290">In order to determine the values entered into any additional Web controls (such as the `Email` TextBox we added in the previous step), use `LoginControlID.FindControl`("*`controlID`*") to obtain a programmatic reference to the Web control in the template whose `ID` property is equal to *`controlID`*.</span></span> <span data-ttu-id="b6d1b-291">Örneğin, bir başvuru almak için `Email` metin kutusuna, aşağıdaki kodu kullanın:</span><span class="sxs-lookup"><span data-stu-id="b6d1b-291">For example, to get a reference to the `Email` TextBox, use the following code:</span></span>

`Dim EmailTextBox As TextBox = CType(myLogin.FindControl("Email"), TextBox)`

<span data-ttu-id="b6d1b-292">Kullanıcının kimlik bilgilerini doğrulamak için şu iki işlem yapmanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="b6d1b-292">In order to validate the user's credentials we need to do two things:</span></span>

1. <span data-ttu-id="b6d1b-293">Sağlanan kullanıcı adı ve parola geçerli olduğundan emin olun</span><span class="sxs-lookup"><span data-stu-id="b6d1b-293">Ensure that the provided username and password are valid</span></span>
2. <span data-ttu-id="b6d1b-294">Girilen e-posta adresi oturum açma girişiminde bulunan kullanıcının dosya e-posta adresi ile eşleştiğinden emin olun</span><span class="sxs-lookup"><span data-stu-id="b6d1b-294">Ensure that email address entered matches the email address on file for the user attempting to log in</span></span>

<span data-ttu-id="b6d1b-295">Yalnızca kullanabileceğiniz ilk denetimi gerçekleştirmek için `Membership.ValidateUser` adım 1'de gördüğümüz gibi yöntemi.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-295">To accomplish the first check we can simply use the `Membership.ValidateUser` method like we saw in Step 1.</span></span> <span data-ttu-id="b6d1b-296">İkinci kontrol edin, böylece biz TextBox denetimine girilen e-posta adresine karşılaştırabilirsiniz kullanıcının e-posta adresini belirlemek ihtiyacımız.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-296">For the second check, we need to determine the user's email address so that we can compare it to the email address they entered into the TextBox control.</span></span> <span data-ttu-id="b6d1b-297">Belirli bir kullanıcı hakkında bilgi almak için kullanmak `Membership` sınıfının [ `GetUser` yöntemi](https://msdn.microsoft.com/library/system.web.security.membership.getuser.aspx).</span><span class="sxs-lookup"><span data-stu-id="b6d1b-297">To get information about a particular user, use the `Membership` class's [`GetUser` method](https://msdn.microsoft.com/library/system.web.security.membership.getuser.aspx).</span></span>

<span data-ttu-id="b6d1b-298">`GetUser` Yöntemi aşırı sayısı sahiptir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-298">The `GetUser` method has a number of overloads.</span></span> <span data-ttu-id="b6d1b-299">Parametreleri geçirme olmadan kullanılırsa, şu anda oturum açmış olan kullanıcının hakkında bilgi verir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-299">If used without passing in any parameters, it returns information about the currently logged in user.</span></span> <span data-ttu-id="b6d1b-300">Belirli bir kullanıcı hakkında bilgi almak için çağrı `GetUser` kendi kullanıcı geçirme.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-300">To get information about a particular user, call `GetUser` passing in their username.</span></span> <span data-ttu-id="b6d1b-301">Her iki durumda da `GetUser` döndüren bir [ `MembershipUser` nesne](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx), gibi özellikleri olan `UserName`, `Email`, `IsApproved`, `IsOnline`ve benzeri.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-301">Either way, `GetUser` returns a [`MembershipUser` object](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx), which has properties like `UserName`, `Email`, `IsApproved`, `IsOnline`, and so on.</span></span>

<span data-ttu-id="b6d1b-302">Aşağıdaki kod bu iki denetimleri uygular.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-302">The following code implements these two checks.</span></span> <span data-ttu-id="b6d1b-303">Her ikisi de, ardından geçirirseniz `e.Authenticate` ayarlanır `True`, aksi takdirde atanan `False`.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-303">If both pass, then `e.Authenticate` is set to `True`, otherwise it is assigned `False`.</span></span>

[!code-vb[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample4.vb)]

<span data-ttu-id="b6d1b-304">Doğru kullanıcı adını, parolayı ve e-posta adresini girerek geçerli bir kullanıcı oturum açmak yerinde bu kodu ile çalışır.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-304">With this code in place, attempt to log in as a valid user, entering the correct username, password, and email address.</span></span> <span data-ttu-id="b6d1b-305">Yeniden deneyin, ancak bu kez var yanlış e-posta adresini kullanır (bkz. Şekil 10).</span><span class="sxs-lookup"><span data-stu-id="b6d1b-305">Try it again, but this time purposefully use an incorrect email address (see Figure 10).</span></span> <span data-ttu-id="b6d1b-306">Son olarak, mevcut olmayan bir kullanıcı adı kullanarak üçüncü bir kez deneyin.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-306">Finally, try it a third time using a non-existent username.</span></span> <span data-ttu-id="b6d1b-307">İlk durumda, başarıyla siteye oturum açmış, ancak son iki durumda da oturum açma denetimin geçersiz kimlik bilgileri iletiyi görmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-307">In the first case you should be successfully logged on to the site, but in the last two cases you should see the Login control's invalid credentials message.</span></span>


<span data-ttu-id="b6d1b-308">[![Yanlış e-posta adresi sağlanırken Tito oturum açamıyorsanız](validating-user-credentials-against-the-membership-user-store-vb/_static/image29.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="b6d1b-308">[![Tito Cannot Log In When Supplying an Incorrect Email Address](validating-user-credentials-against-the-membership-user-store-vb/_static/image29.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image28.png)</span></span>

<span data-ttu-id="b6d1b-309">**Şekil 10**: Tito olamaz günlük içinde olduğunda sağladığını yanlış bir e-posta adresi ([tam boyutlu görüntüyü görüntülemek için tıklatın](validating-user-credentials-against-the-membership-user-store-vb/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="b6d1b-309">**Figure 10**: Tito Cannot Log In When Supplying an Incorrect Email Address  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image30.png))</span></span>


> [!NOTE]
> <span data-ttu-id="b6d1b-310">1. adımda nasıl üyelik Framework işleme geçersiz oturum açma denemesi bölümünde anlatıldığı gibi zaman `Membership.ValidateUser` yöntemi çağrılır ve geçersiz kimlik bilgileri geçirilen, geçersiz oturum açma denemesi izler ve belirli bir aşarsanız kullanıcı kilitler Belirtilen zaman penceresi içinde geçersiz denemeleri eşiği.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-310">As discussed in the How the Membership Framework Handles Invalid Login Attempts section in Step 1, when the `Membership.ValidateUser` method is called and passed invalid credentials, it keeps track of the invalid login attempt and locks out the user if they exceed a certain threshold of invalid attempts within a specified time window.</span></span> <span data-ttu-id="b6d1b-311">Bizim Özel kimlik doğrulama mantığı çağrıları itibaren `ValidateUser` yöntemi, hatalı bir parolanın geçerli bir kullanıcı adı için geçersiz oturum açma girişimi sayacı Artır, ancak bu sayaç, kullanıcı adı ve parola nerede geçerli durumda artırılır değil ancak e-posta adresi doğru değil.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-311">Since our custom authentication logic calls the `ValidateUser` method, an incorrect password for a valid username will increment the invalid login attempt counter, but this counter is not incremented in the case where the username and password are valid, but the email address is incorrect.</span></span> <span data-ttu-id="b6d1b-312">Olasılığı olan bir bilgisayar korsanının kullanıcı adı ve parola biliyorum, ancak kullanıcının e-posta adresini belirlemek için deneme yanılma saldırısı teknikleri kullanmak zorunda olduğunu olası olduğundan bu davranış uygundur.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-312">Chances are, this behavior is suitable, since it's unlikely that a hacker will know the username and password, but have to use brute force techniques to determine the user's email address.</span></span>


## <a name="step-4-improving-the-login-controls-invalid-credentials-message"></a><span data-ttu-id="b6d1b-313">4. adım: oturum açma denetimin geçersiz kimlik bilgileri iletisi artırma</span><span class="sxs-lookup"><span data-stu-id="b6d1b-313">Step 4: Improving the Login Control's Invalid Credentials Message</span></span>

<span data-ttu-id="b6d1b-314">Bir kullanıcı geçersiz kimlik bilgileriyle oturum girişiminde bulunduğunda, oturum açma denetimi oturum açma denemesi başarısız olduğunu belirten bir ileti görüntüler.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-314">When a user attempts to log on with invalid credentials, the Login control displays a message explaining that the login attempt was unsuccessful.</span></span> <span data-ttu-id="b6d1b-315">Özellikle, denetimi tarafından belirtilen iletisi görüntüler kendi [ `FailureText` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failuretext.aspx), oturum açma girişiminiz varsayılan değeri olan başarılı olmadı.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-315">In particular, the control displays the message specified by its [`FailureText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failuretext.aspx), which has a default value of Your login attempt was not successful.</span></span> <span data-ttu-id="b6d1b-316">Lütfen yeniden deneyin.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-316">Please try again.</span></span>

<span data-ttu-id="b6d1b-317">Geri çağırma neden bir kullanıcının kimlik bilgileri geçersiz olabilir pek çok nedeni vardır:</span><span class="sxs-lookup"><span data-stu-id="b6d1b-317">Recall that there are many reasons why a user's credentials may be invalid:</span></span>

- <span data-ttu-id="b6d1b-318">Kullanıcı adı yok</span><span class="sxs-lookup"><span data-stu-id="b6d1b-318">The username may not exist</span></span>
- <span data-ttu-id="b6d1b-319">Kullanıcı adı var, ancak parola geçersiz</span><span class="sxs-lookup"><span data-stu-id="b6d1b-319">The username exists, but the password is invalid</span></span>
- <span data-ttu-id="b6d1b-320">Kullanıcı adı ve parola geçerlidir, ancak kullanıcı henüz onaylanmamış</span><span class="sxs-lookup"><span data-stu-id="b6d1b-320">The username and password are valid, but the user is not yet approved</span></span>
- <span data-ttu-id="b6d1b-321">Kullanıcı adı ve parola geçerlidir, ancak kullanıcının kilitlenip çıkış (belirtilen zaman çerçevesinde geçersiz oturum açma girişimlerinin sayısını aştığı için büyük olasılıkla)</span><span class="sxs-lookup"><span data-stu-id="b6d1b-321">The username and password are valid, but the user is locked out (most likely because they exceeded the number of invalid login attempts within the specified time frame)</span></span>

<span data-ttu-id="b6d1b-322">Ve özel kimlik doğrulama mantığı kullanırken diğer nedenleri olabilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-322">And there may be other reasons when using custom authentication logic.</span></span> <span data-ttu-id="b6d1b-323">Örneğin, kodla yazdığımız adım 3, kullanıcı adı ve parola geçerli olabilir, ancak e-posta adresi yanlış olabilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-323">For example, with the code we wrote in Step 3, the username and password may be valid, but the email address may be incorrect.</span></span>

<span data-ttu-id="b6d1b-324">Neden kimlik bilgileri geçersiz bağımsız olarak, oturum açma denetimi aynı hata iletisini görüntüler.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-324">Regardless of why the credentials are invalid, the Login control displays the same error message.</span></span> <span data-ttu-id="b6d1b-325">Bu geri bildirim eksikliği kullanıcı hesabı henüz henüz onaylanmamış veya kimin kilitlendi için kafa karıştırıcı olabilir. Biraz iş ile ancak biz daha uygun bir ileti görüntüler oturum açma denetimi olabilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-325">This lack of feedback can be confusing for a user whose account has not yet been approved or who has been locked out. With a little bit of work, though, we can have the Login control display a more appropriate message.</span></span>

<span data-ttu-id="b6d1b-326">Her bir kullanıcı çalışır Login denetimini başlatır geçersiz kimlik bilgileri ile oturum açmak kendi `LoginError` olay.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-326">Whenever a user attempts to login with invalid credentials the Login control raises its `LoginError` event.</span></span> <span data-ttu-id="b6d1b-327">Şimdi bu olay için bir olay işleyicisi oluşturun ve aşağıdaki kodu ekleyin:</span><span class="sxs-lookup"><span data-stu-id="b6d1b-327">Go ahead and create an event handler for this event, and add the following code:</span></span>

[!code-vb[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample5.vb)]

<span data-ttu-id="b6d1b-328">Yukarıdaki kod, oturum açma denetimin ayarlayarak başlatır `FailureText` özelliğinin varsayılan değeri (oturum açma girişiminiz başarılı değildi.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-328">The above code starts by setting the Login control's `FailureText` property to the default value ( Your login attempt was not successful.</span></span> <span data-ttu-id="b6d1b-329">Lütfen yeniden deneyin).</span><span class="sxs-lookup"><span data-stu-id="b6d1b-329">Please try again ).</span></span> <span data-ttu-id="b6d1b-330">Sağlanan kullanıcı adı olan bir kullanıcı hesabına eşlemeleri olmadığını görmek için o denetler.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-330">It then checks to see if the username supplied maps to an existing user account.</span></span> <span data-ttu-id="b6d1b-331">Bu nedenle, elde edilen başvuruyorsa `MembershipUser` nesnenin `IsLockedOut` ve `IsApproved` hesap kilitlendi, veya henüz onaylanmadığı belirlemek için özellikler.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-331">If so, it consults the resulting `MembershipUser` object's `IsLockedOut` and `IsApproved` properties to determine if the account has been locked out or has not yet been approved.</span></span> <span data-ttu-id="b6d1b-332">Her iki durumda da `FailureText` özelliği için karşılık gelen bir değer güncelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-332">In either case, the `FailureText` property is updated to a corresponding value.</span></span>

<span data-ttu-id="b6d1b-333">Bu kodu test etmek için var olan bir kullanıcı olarak oturum açın, ancak yanlış bir parola kullanın girişimi.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-333">To test this code, purposefully attempt to log in as an existing user, but use an incorrect password.</span></span> <span data-ttu-id="b6d1b-334">Bu beş kez satır 10 dakikalık bir zaman çerçevesinde içinde yapın ve hesap kilitlenir. Şekil 11 gösterir, sonraki oturum açma denemeleri her zaman (doğru parolayla bile) başarısız ancak şimdi daha açıklayıcı görüntüleme gibi hesabınız çok fazla geçersiz oturum açma denemesi nedeniyle kilitlendi.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-334">Do this five times in a row within a 10 minute time frame and the account will be locked out. As Figure 11 shows, subsequent login attempts will always fail (even with the correct password), but will now display the more descriptive Your account has been locked out because of too many invalid login attempts.</span></span> <span data-ttu-id="b6d1b-335">Lütfen Hesap kilidi iletinizi sağlamak için yöneticinize başvurun.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-335">Please contact the administrator to have your account unlocked message.</span></span>


<span data-ttu-id="b6d1b-336">[![Tito çok fazla geçersiz oturum açma denemesi gerçekleştirilen ve kilitlendi](validating-user-credentials-against-the-membership-user-store-vb/_static/image32.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="b6d1b-336">[![Tito Performed Too Many Invalid Login Attempts and Has Been Locked Out](validating-user-credentials-against-the-membership-user-store-vb/_static/image32.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image31.png)</span></span>

<span data-ttu-id="b6d1b-337">**Şekil 11**: Tito gerçekleştirilen çok fazla sayıda geçersiz oturum açma denemesi ve var olan kilitli Out ([tam boyutlu görüntüyü görüntülemek için tıklatın](validating-user-credentials-against-the-membership-user-store-vb/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="b6d1b-337">**Figure 11**: Tito Performed Too Many Invalid Login Attempts and Has Been Locked Out  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image33.png))</span></span>


## <a name="summary"></a><span data-ttu-id="b6d1b-338">Özet</span><span class="sxs-lookup"><span data-stu-id="b6d1b-338">Summary</span></span>

<span data-ttu-id="b6d1b-339">Önceki Bu öğretici, sabit kodlanmış kullanıcı adı/parola çiftlerinin listesini karşı sağlanan kimlik bilgileri oturum açma sayfamızı doğrulandı.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-339">Prior this tutorial, our login page validated the supplied credentials against a hard-coded list of username/password pairs.</span></span> <span data-ttu-id="b6d1b-340">Bu öğreticide, üyelik framework karşı kimlik doğrulamaya sayfa güncelleştirildi.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-340">In this tutorial, we updated the page to validate credentials against the Membership framework.</span></span> <span data-ttu-id="b6d1b-341">1. adımda biz kullanarak Aranan `Membership.ValidateUser` yöntemi programlı olarak.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-341">In Step 1 we looked at using the `Membership.ValidateUser` method programmatically.</span></span> <span data-ttu-id="b6d1b-342">2. adımda biz bizim el ile oluşturulan kullanıcı arabirimi ve kod oturum açma denetimi ile değiştirilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-342">In Step 2 we replaced our manually created user interface and code with the Login control.</span></span>

<span data-ttu-id="b6d1b-343">Oturum açma denetimi bir standart oturum açma kullanıcı arabirimi işler ve otomatik olarak kullanıcının kimlik bilgilerini üyelik framework karşı doğrular.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-343">The Login control renders a standard login user interface and automatically validates the user's credentials against the Membership framework.</span></span> <span data-ttu-id="b6d1b-344">Ayrıca, geçerli kimlik bilgileri olması durumunda oturum açma denetimi form kimlik doğrulaması oturum açtığında.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-344">Moreover, in the event of valid credentials, the Login control signs the user in via forms authentication.</span></span> <span data-ttu-id="b6d1b-345">Kısacası, tam olarak işlevsel oturum açma kullanıcı deneyiminde bir, hiçbir ek bildirim temelli işaretleme veya kod gerekli sayfaya oturum açma denetimi yalnızca sürükleyerek kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-345">In short, a fully functional login user experience is available by simply dragging the Login control onto a page, no extra declarative markup or code necessary.</span></span> <span data-ttu-id="b6d1b-346">Daha fazla nedir, oturum açma denetimi üst düzeyde bir işlenen kullanıcı arabirimi ve kimlik doğrulama mantığını denetime izin vermeyi yüksek oranda özelleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-346">What's more, the Login control is highly customizable, allowing for a fine degree of control over both the rendered user interface and authentication logic.</span></span>

<span data-ttu-id="b6d1b-347">Bu noktada, Web sitesi ziyaretçileri yeni kullanıcı hesabı ve günlük siteye oluşturabilirsiniz, ancak kimliği doğrulanmış kullanıcıyı temel alarak sayfalara erişimi kısıtlama adresindeki aramak henüz.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-347">At this point visitors to our website can create a new user account and log into the site, but we have yet to look at restricting access to pages based on the authenticated user.</span></span> <span data-ttu-id="b6d1b-348">Şu anda, herhangi bir kullanıcı kimliği doğrulanmış veya anonim, herhangi bir sayfayı sitemizde görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-348">Currently, any user, authenticated or anonymous, can view any page on our site.</span></span> <span data-ttu-id="b6d1b-349">Bir kullanıcı tarafından temelinde bizim sitenin sayfalarına erişimi denetleme yanı sıra, işlevsellik kullanıcıya bağlıdır belirli sayfalarını olabilir.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-349">Along with controlling access to our site's pages on a user-by-user basis, we might have certain pages whose functionality depends on the user.</span></span> <span data-ttu-id="b6d1b-350">Erişim ve oturum açan kullanıcıyı temel alarak sayfa işlevselliği sınırlamak nasıl sonraki öğretici bakar.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-350">The next tutorial looks at how to limit access and in-page functionality based on the logged in user.</span></span>

<span data-ttu-id="b6d1b-351">Mutluluk programlama!</span><span class="sxs-lookup"><span data-stu-id="b6d1b-351">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="b6d1b-352">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="b6d1b-352">Further Reading</span></span>

<span data-ttu-id="b6d1b-353">Bu öğreticide konular hakkında daha fazla bilgi için aşağıdaki kaynaklara bakın:</span><span class="sxs-lookup"><span data-stu-id="b6d1b-353">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="b6d1b-354">Kilitli ve onaylanmamış kullanıcılar için özel iletilerin görüntüleme</span><span class="sxs-lookup"><span data-stu-id="b6d1b-354">Displaying Custom Messages to Locked Out and Non-Approved Users</span></span>](http://aspnet.4guysfromrolla.com/articles/050306-1.aspx)
- [<span data-ttu-id="b6d1b-355">ASP.NET 2.0'ın inceleniyor üyelik, roller ve profil</span><span class="sxs-lookup"><span data-stu-id="b6d1b-355">Examining ASP.NET 2.0's Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="b6d1b-356">Nasıl yapılır: ASP.NET oturum açma sayfası oluşturma</span><span class="sxs-lookup"><span data-stu-id="b6d1b-356">How To: Create an ASP.NET Login Page</span></span>](https://msdn.microsoft.com/library/ms178331.aspx)
- [<span data-ttu-id="b6d1b-357">Oturum açma denetimi teknik belgeler</span><span class="sxs-lookup"><span data-stu-id="b6d1b-357">Login Control Technical Documentation</span></span>](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx)
- [<span data-ttu-id="b6d1b-358">Oturum açma denetimleri kullanma</span><span class="sxs-lookup"><span data-stu-id="b6d1b-358">Using the Login Controls</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/security/login.aspx)

### <a name="about-the-author"></a><span data-ttu-id="b6d1b-359">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="b6d1b-359">About the Author</span></span>

<span data-ttu-id="b6d1b-360">Scott Mitchell, birden çok ASP/ASP.NET books yazar ve 4GuysFromRolla.com, kurucusu 1998 itibaren Microsoft Web teknolojileri ile çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-360">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="b6d1b-361">Tan bağımsız Danışman, eğitmen ve yazıcı çalışır.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-361">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="b6d1b-362">En son kendi defteri  *[kendi öğretmek kendiniz ASP.NET 2.0 24 saat içindeki](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-362">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="b6d1b-363">Tan adresindeki ulaşılabilir [ mitchell@4guysfromrolla.com ](mailto:mitchell@4guysfromrolla.com) veya kendi blog aracılığıyla [ http://ScottOnWriting.NET ](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="b6d1b-363">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="b6d1b-364">Özel teşekkürler</span><span class="sxs-lookup"><span data-stu-id="b6d1b-364">Special Thanks To</span></span>

<span data-ttu-id="b6d1b-365">Bu öğretici seri pek çok yararlı gözden geçirenler tarafından gözden geçirildi.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-365">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="b6d1b-366">Bu öğretici için sağlama gözden geçirenler Teresa Murphy ve Michael Olivero yoktu.</span><span class="sxs-lookup"><span data-stu-id="b6d1b-366">Lead reviewers for this tutorial were Teresa Murphy and Michael Olivero.</span></span> <span data-ttu-id="b6d1b-367">My yaklaşan MSDN makaleleri gözden geçirme ilginizi çekiyor mu?</span><span class="sxs-lookup"><span data-stu-id="b6d1b-367">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="b6d1b-368">Öyleyse, bana bir satırında bırakma [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com).</span><span class="sxs-lookup"><span data-stu-id="b6d1b-368">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b6d1b-369">[Önceki](creating-user-accounts-vb.md)
> [sonraki](user-based-authorization-vb.md)</span><span class="sxs-lookup"><span data-stu-id="b6d1b-369">[Previous](creating-user-accounts-vb.md)
[Next](user-based-authorization-vb.md)</span></span>
