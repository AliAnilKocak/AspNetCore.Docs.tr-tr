---
uid: web-forms/overview/older-versions-getting-started/master-pages/interacting-with-the-content-page-from-the-master-page-cs
title: "Ana sayfa (C#) içerik sayfasından etkileşimde | Microsoft Docs"
author: rick-anderson
description: "Ana sayfa kodunda özellikleri içerik sayfasının vb. kümeden nasıl yöntemlerini çağıran inceler."
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/11/2008
ms.topic: article
ms.assetid: 3282df5e-516c-4972-8666-313828b90fb5
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/interacting-with-the-content-page-from-the-master-page-cs
msc.type: authoredcontent
ms.openlocfilehash: 923d291d84a47e64b31d99bcb13cfe53e5806444
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/10/2017
---
<a name="interacting-with-the-content-page-from-the-master-page-c"></a><span data-ttu-id="8b4d5-103">Ana sayfa (C#) içerik sayfasından ile etkileşim kurma</span><span class="sxs-lookup"><span data-stu-id="8b4d5-103">Interacting with the Content Page from the Master Page (C#)</span></span>
====================
<span data-ttu-id="8b4d5-104">tarafından [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="8b4d5-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="8b4d5-105">[Kodu indirme](http://download.microsoft.com/download/1/8/4/184e24fa-fcc8-47fa-ac99-4b6a52d41e97/ASPNET_MasterPages_Tutorial_07_CS.zip) veya [PDF indirin](http://download.microsoft.com/download/e/b/4/eb4abb10-c416-4ba4-9899-32577715b1bd/ASPNET_MasterPages_Tutorial_07_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="8b4d5-105">[Download Code](http://download.microsoft.com/download/1/8/4/184e24fa-fcc8-47fa-ac99-4b6a52d41e97/ASPNET_MasterPages_Tutorial_07_CS.zip) or [Download PDF](http://download.microsoft.com/download/e/b/4/eb4abb10-c416-4ba4-9899-32577715b1bd/ASPNET_MasterPages_Tutorial_07_CS.pdf)</span></span>

> <span data-ttu-id="8b4d5-106">Ana sayfa kodunda özellikleri içerik sayfasının vb. kümeden nasıl yöntemlerini çağıran inceler.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-106">Examines how to call methods, set properties, etc. of the Content Page from code in the Master Page.</span></span>


## <a name="introduction"></a><span data-ttu-id="8b4d5-107">Giriş</span><span class="sxs-lookup"><span data-stu-id="8b4d5-107">Introduction</span></span>

<span data-ttu-id="8b4d5-108">Önceki öğretici program aracılığıyla kendi ana sayfa ile etkileşim içerik sayfasını nasıl incelendi.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-108">The preceding tutorial examined how to have the content page programmatically interact with its master page.</span></span> <span data-ttu-id="8b4d5-109">Biz en son beş listelenen GridView denetimini eklemek için ana sayfa güncelleştirilmeden geri çağırma ürünleri eklendi.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-109">Recall that we updated the master page to include a GridView control that listed the five most recently added products.</span></span> <span data-ttu-id="8b4d5-110">Ardından kullanıcının yeni bir ürün ekleyebilirsiniz bir içerik sayfasını oluşturduk.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-110">We then created a content page from which the user could add a new product.</span></span> <span data-ttu-id="8b4d5-111">Yeni bir ürün ekledikten sonra içerik sayfasını yeni eklenen ürün içerir böylece, GridView yenilemek için ana sayfa istemek üzere gerekli.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-111">Upon adding a new product, the content page needed to instruct the master page to refresh its GridView so that it would include the just-added product.</span></span> <span data-ttu-id="8b4d5-112">Bu işlevsellik, yenilenen verileri GridView bağlı olduğunu ana sayfaya genel yöntem ekleyerek veya içerik sayfasından bu yöntemi çağırmadan gerçekleştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-112">This functionality was accomplished by adding a public method to the master page that refreshed the data bound to the GridView, and then invoking that method from the content page.</span></span>

<span data-ttu-id="8b4d5-113">En yaygın formun içeriği ve ana sayfa etkileşim içerik sayfasından kaynaklanır.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-113">The most common form of content and master page interaction originates from the content page.</span></span> <span data-ttu-id="8b4d5-114">Ancak, geçerli içerik sayfasını eyleme rouse ana sayfa mümkündür ve ana sayfa ayrıca içerik sayfasında görüntülenen verileri değiştirmek kullanıcıların kullanıcı arabirimi öğeleri içeriyorsa, bu tür işlevselliği gerekli olabilir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-114">However, it is possible for the master page to rouse the current content page into action, and such functionality may be needed if the master page contains user interface elements that enable users to modify data that is also displayed on the content page.</span></span> <span data-ttu-id="8b4d5-115">GridView içinde ürün bilgilerine denetimi görüntüler ve bir düğmeyi içeren bir ana denetim sayfası, tıklatıldığında bir içerik sayfasını düşünün, tüm ürünleri fiyatlar iki katına çıkar.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-115">Consider a content page that displays the products information in a GridView control and a master page that includes a Button control that, when clicked, doubles the prices of all products.</span></span> <span data-ttu-id="8b4d5-116">Örnek önceki öğreticide benzediğini GridView, böylece yeni fiyatlarını görüntüler düğmesine tıklandığında çift fiyat sonra yenilenmesi gerekiyor, ancak isteğe bağlı olarak bu senaryoda, içerik sayfasını eyleme rouse gereken ana sayfa.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-116">Much like the example in the preceding tutorial, the GridView needs to be refreshed after the double price Button is clicked so that it displays the new prices, but in this scenario it's the master page that needs to rouse the content page into action.</span></span>

<span data-ttu-id="8b4d5-117">Bu öğretici içerik sayfada tanımlı işlevleri çağırma ana sayfa nasıl araştırır.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-117">This tutorial explores how to have the master page invoke functionality defined in the content page.</span></span>

### <a name="instigating-programmatic-interaction-via-an-event-and-event-handlers"></a><span data-ttu-id="8b4d5-118">Olay ve olay işleyicileri aracılığıyla programlı etkileşim instigating</span><span class="sxs-lookup"><span data-stu-id="8b4d5-118">Instigating Programmatic Interaction via an Event and Event Handlers</span></span>

<span data-ttu-id="8b4d5-119">Bir ana sayfa İçerik sayfasını işlevleri yürütmesini daha şekilde daha zordur.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-119">Invoking content page functionality from a master page is more challenging than the other way around.</span></span> <span data-ttu-id="8b4d5-120">Bir içerik sayfasını içerik sayfasından programlı etkileşim instigating olduğunda tek bir ana sayfa olduğundan bizim elden genel yöntemler ve özellikler nelerdir biliyoruz.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-120">Because a content page has a single master page, when instigating the programmatic interaction from the content page we know what public methods and properties are at our disposal.</span></span> <span data-ttu-id="8b4d5-121">Bir ana sayfa ancak birçok farklı içerik sayfaları, her biri kendi özellikleri ve yöntemleri kümesini sahip olabilir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-121">A master page, however, can have many different content pages, each with its own set of properties and methods.</span></span> <span data-ttu-id="8b4d5-122">Nasıl daha sonra size kod size hangi içerik sayfasını çalışma zamanına kadar çağrılacak bilmiyorsanız, içerik sayfasındaki bazı eylemleri gerçekleştirmek için ana sayfa yazabilirsiniz?</span><span class="sxs-lookup"><span data-stu-id="8b4d5-122">How, then, can we write code in the master page to perform some action in its content page when we don't know what content page will be invoked until runtime?</span></span>

<span data-ttu-id="8b4d5-123">Düğme denetimi gibi bir ASP.NET Web denetimi göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-123">Consider an ASP.NET Web control, such as the Button control.</span></span> <span data-ttu-id="8b4d5-124">Düğme denetimi ASP.NET sayfaları sayıda görüntülenebilir ve bir mekanizma olarak bu sayfayı tıklattınız uyarabilir gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-124">A Button control can appear on any number of ASP.NET pages and needs a mechanism by which it can alert the page that it has been clicked.</span></span> <span data-ttu-id="8b4d5-125">Bu kullanılarak gerçekleştirilir *olayları*.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-125">This is accomplished using *events*.</span></span> <span data-ttu-id="8b4d5-126">Özellikle, düğme denetimi başlatır, `Click` olay tıklatıldığında; bu bildirim düğmeyi içeren ASP.NET sayfası isteğe bağlı olarak yanıt verebilir bir *olay işleyicisi*.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-126">In particular, the Button control raises its `Click` event when it is clicked; the ASP.NET page that contains the Button can optionally respond to that notification via an *event handler*.</span></span>

<span data-ttu-id="8b4d5-127">Bu aynı düzeni içerik sayfalarında bir ana sayfa tetikleyici işlevsellik sağlamak için kullanılabilir:</span><span class="sxs-lookup"><span data-stu-id="8b4d5-127">This same pattern can be used to have a master page trigger functionality in its content pages:</span></span>

1. <span data-ttu-id="8b4d5-128">Bir olay ana sayfasına ekleyin.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-128">Add an event to the master page.</span></span>
2. <span data-ttu-id="8b4d5-129">Ana sayfa kendi içerik sayfası ile iletişim kurması için gereken her olayı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-129">Raise the event whenever the master page needs to communicate with its content page.</span></span> <span data-ttu-id="8b4d5-130">Ana sayfa kendi içerik sayfası kullanıcı fiyatlar iki katına uyarı gerekiyorsa, Fiyatlar hemen iki katına sonra Örneğin, kendi olayı.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-130">For example, if the master page needs to alert its content page that the user has doubled the prices, its event would be raised immediately after the prices have been doubled.</span></span>
3. <span data-ttu-id="8b4d5-131">Olay işleyici bazı işlem yapmanıza gerek bu içerik sayfalarında oluşturun.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-131">Create an event handler in those content pages that need to take some action.</span></span>

<span data-ttu-id="8b4d5-132">Bu öğreticinin bu kalan girişte ana hatlarıyla verilen örnek uygular; Ayrıca, Fiyatlar çift veritabanındaki ürünleri listeler bir içerik sayfasını ve bir düğmeyi içeren bir ana sayfa denetler.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-132">This remainder of this tutorial implements the example outlined in the Introduction; namely, a content page that lists the products in the database and a master page that includes a Button control to double the prices.</span></span>

## <a name="step-1-displaying-products-in-a-content-page"></a><span data-ttu-id="8b4d5-133">1. adım: Bir içerik sayfasını ürünleri görüntüleme</span><span class="sxs-lookup"><span data-stu-id="8b4d5-133">Step 1: Displaying Products in a Content Page</span></span>

<span data-ttu-id="8b4d5-134">Bizim ilk iş sırası Northwind veritabanı ürünleri listeler bir içerik sayfasını oluşturmaktır.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-134">Our first order of business is to create a content page that lists the products from the Northwind database.</span></span> <span data-ttu-id="8b4d5-135">(Northwind veritabanı projeye önceki öğreticide eklediğimiz [ *içerik sayfasından ana sayfa ile etkileşim*](interacting-with-the-master-page-from-the-content-page-cs.md).) Yeni bir ASP.NET sayfası eklemeye başlayın `~/Admin` adlı klasörü `Products.aspx`, emin bağlamak için yapmayı `Site.master` ana sayfa.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-135">(We added the Northwind database to the project in the preceding tutorial, [*Interacting with the Master Page from the Content Page*](interacting-with-the-master-page-from-the-content-page-cs.md).) Start by adding a new ASP.NET page to the `~/Admin` folder named `Products.aspx`, making sure to bind it to the `Site.master` master page.</span></span> <span data-ttu-id="8b4d5-136">Şekil 1, bu sayfa Web sitesine eklendikten sonra Çözüm Gezgini gösterir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-136">Figure 1 shows the Solution Explorer after this page has been added to the website.</span></span>


<span data-ttu-id="8b4d5-137">[![Yönetici klasörüne yeni bir ASP.NET sayfa ekleyin](interacting-with-the-content-page-from-the-master-page-cs/_static/image2.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="8b4d5-137">[![Add a New ASP.NET Page to the Admin Folder](interacting-with-the-content-page-from-the-master-page-cs/_static/image2.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image1.png)</span></span>

<span data-ttu-id="8b4d5-138">**Şekil 01**: yeni bir ASP.NET sayfası Ekle `Admin` klasörü ([tam boyutlu görüntüyü görüntülemek için tıklatın](interacting-with-the-content-page-from-the-master-page-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="8b4d5-138">**Figure 01**: Add a New ASP.NET Page to the `Admin` Folder ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image3.png))</span></span>


<span data-ttu-id="8b4d5-139">Uygulamasında geri çağırma [ *başlık, Meta etiketler ve diğer HTML üstbilgileri ana sayfasında belirtme* ](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) adlı bir özel ana sayfa sınıf oluşturduğumuz öğretici `BasePage` oluşturan sayfanın başlığı değilse açıkça ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-139">Recall that in the [*Specifying the Title, Meta Tags, and Other HTML Headers in the Master Page*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial we created a custom base page class named `BasePage` that generates the page's title if it is not explicitly set.</span></span> <span data-ttu-id="8b4d5-140">Git `Products.aspx` sayfanın arka plandaki kod sınıfı ve sahip öğesinden türetilen `BasePage` (yerine gelen `System.Web.UI.Page`).</span><span class="sxs-lookup"><span data-stu-id="8b4d5-140">Go to the `Products.aspx` page's code-behind class and have it derive from `BasePage` (instead of from `System.Web.UI.Page`).</span></span>

<span data-ttu-id="8b4d5-141">Son olarak, güncelleştirme `Web.sitemap` dosya bu ders için bir giriş içerir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-141">Finally, update the `Web.sitemap` file to include an entry for this lesson.</span></span> <span data-ttu-id="8b4d5-142">Altında aşağıdaki biçimlendirmeleri eklemek `<siteMapNode>` içerik ana sayfa etkileşim ders için:</span><span class="sxs-lookup"><span data-stu-id="8b4d5-142">Add the following markup beneath the `<siteMapNode>` for the Content to Master Page Interaction lesson:</span></span>


[!code-xml[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample1.xml)]

<span data-ttu-id="8b4d5-143">Bu ek `<siteMapNode>` öğesi dersleri yansıtılır (bkz. Şekil 5) listesi.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-143">The addition of this `<siteMapNode>` element is reflected in the Lessons list (see Figure 5).</span></span>

<span data-ttu-id="8b4d5-144">Geri dönüp `Products.aspx`.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-144">Return to `Products.aspx`.</span></span> <span data-ttu-id="8b4d5-145">İçerik denetimi için `MainContent`, GridView denetimini ekleyin ve adını `ProductsGrid`.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-145">In the Content control for `MainContent`, add a GridView control and name it `ProductsGrid`.</span></span> <span data-ttu-id="8b4d5-146">GridView adlı yeni bir SqlDataSource denetimi bağlamak `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-146">Bind the GridView to a new SqlDataSource control named `ProductsDataSource`.</span></span>


<span data-ttu-id="8b4d5-147">[![GridView yeni bir SqlDataSource denetimine bağlama](interacting-with-the-content-page-from-the-master-page-cs/_static/image5.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="8b4d5-147">[![Bind the GridView to a New SqlDataSource Control](interacting-with-the-content-page-from-the-master-page-cs/_static/image5.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image4.png)</span></span>

<span data-ttu-id="8b4d5-148">**Şekil 02**: yeni bir SqlDataSource denetimi GridView bağlamak ([tam boyutlu görüntüyü görüntülemek için tıklatın](interacting-with-the-content-page-from-the-master-page-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="8b4d5-148">**Figure 02**: Bind the GridView to a New SqlDataSource Control  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image6.png))</span></span>


<span data-ttu-id="8b4d5-149">Northwind veritabanı kullanan Sihirbazı'nı yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-149">Configure the wizard so that it uses the Northwind database.</span></span> <span data-ttu-id="8b4d5-150">Önceki öğreticide çalışılan sonra adlı bir bağlantı dizesi zaten yüklü olmalıdır `NorthwindConnectionString` içinde `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-150">If you worked through the previous tutorial then you should already have a connection string named `NorthwindConnectionString` in `Web.config`.</span></span> <span data-ttu-id="8b4d5-151">Şekil 3'te gösterildiği gibi bu bağlantı dizesi aşağı açılan listeden seçin.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-151">Choose this connection string from the drop-down list, as shown in Figure 3.</span></span>


<span data-ttu-id="8b4d5-152">[![Northwind veritabanı kullanmak için SqlDataSource yapılandırın](interacting-with-the-content-page-from-the-master-page-cs/_static/image8.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="8b4d5-152">[![Configure the SqlDataSource to Use the Northwind Database](interacting-with-the-content-page-from-the-master-page-cs/_static/image8.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image7.png)</span></span>

<span data-ttu-id="8b4d5-153">**Şekil 03**: Northwind veritabanı kullanmak için SqlDataSource yapılandırın ([tam boyutlu görüntüyü görüntülemek için tıklatın](interacting-with-the-content-page-from-the-master-page-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="8b4d5-153">**Figure 03**: Configure the SqlDataSource to Use the Northwind Database  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image9.png))</span></span>


<span data-ttu-id="8b4d5-154">Ardından, veri kaynağı denetiminin belirtin `SELECT` Ürünler tablosuna aşağı açılan listeden seçerek ve döndürme by deyimi `ProductName` ve `UnitPrice` sütunlar (bkz. Şekil 4).</span><span class="sxs-lookup"><span data-stu-id="8b4d5-154">Next, specify the data source control's `SELECT` statement by choosing the Products table from the drop-down list and returning the `ProductName` and `UnitPrice` columns (see Figure 4).</span></span> <span data-ttu-id="8b4d5-155">İleri'yi tıklatın ve ardından veri kaynağı Yapılandırma Sihirbazı'nı tamamlamak için Son'u tıklatın.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-155">Click Next and then Finish to complete the Configure Data Source wizard.</span></span>


<span data-ttu-id="8b4d5-156">[![ProductName ve UnitPrice alanları ürünleri bir tablo döndürür](interacting-with-the-content-page-from-the-master-page-cs/_static/image11.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="8b4d5-156">[![Return the ProductName and UnitPrice Fields from the Products Table](interacting-with-the-content-page-from-the-master-page-cs/_static/image11.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image10.png)</span></span>

<span data-ttu-id="8b4d5-157">**Şekil 04**: dönüş `ProductName` ve `UnitPrice` alanlarını `Products` tablosu ([tam boyutlu görüntüyü görüntülemek için tıklatın](interacting-with-the-content-page-from-the-master-page-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="8b4d5-157">**Figure 04**: Return the `ProductName` and `UnitPrice` Fields from the `Products` Table  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image12.png))</span></span>


<span data-ttu-id="8b4d5-158">Tüm olan İşte bu kadar!</span><span class="sxs-lookup"><span data-stu-id="8b4d5-158">That's all there is to it!</span></span> <span data-ttu-id="8b4d5-159">Sihirbazı tamamladıktan sonra Visual Studio iki BoundFields SqlDataSource denetim tarafından döndürülen iki alan yansıtmak üzere GridView ekler.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-159">After completing the wizard Visual Studio adds two BoundFields to the GridView to mirror the two fields returned by the SqlDataSource control.</span></span> <span data-ttu-id="8b4d5-160">GridView ve SqlDataSource denetimleri biçimlendirme izler.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-160">The GridView and SqlDataSource controls' markup follows.</span></span> <span data-ttu-id="8b4d5-161">Şekil 5 bir tarayıcıdan görüntülendiğinde sonuçları gösterir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-161">Figure 5 shows the results when viewed through a browser.</span></span>


[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample2.aspx)]


<span data-ttu-id="8b4d5-162">[![Her ürün ve onun fiyat GridView listelenir](interacting-with-the-content-page-from-the-master-page-cs/_static/image14.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="8b4d5-162">[![Each Product and its Price is Listed in the GridView](interacting-with-the-content-page-from-the-master-page-cs/_static/image14.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image13.png)</span></span>

<span data-ttu-id="8b4d5-163">**Şekil 05**: her ürün ve onun fiyat GridView listelenir ([tam boyutlu görüntüyü görüntülemek için tıklatın](interacting-with-the-content-page-from-the-master-page-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="8b4d5-163">**Figure 05**: Each Product and its Price is Listed in the GridView  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image15.png))</span></span>


> [!NOTE]
> <span data-ttu-id="8b4d5-164">GridView görünümünü oluşturan temizlemek çekinmeyin.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-164">Feel free to clean up the appearance of the GridView.</span></span> <span data-ttu-id="8b4d5-165">Bazı öneriler, bir para birimi olarak görüntülenen UnitPrice değeri biçimlendirme ve kılavuz görünümlerini geliştirmek için arka plan renk ve yazı tipleri kullanmayı kapsar.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-165">Some suggestions include formatting the displayed UnitPrice value as a currency and using background colors and fonts to improve the grid's appearance.</span></span> <span data-ttu-id="8b4d5-166">Görüntüleme ve ASP.NET verileri biçimlendirme daha fazla bilgi için başvurmak my [veri öğretici serisi çalışma](../../data-access/index.md).</span><span class="sxs-lookup"><span data-stu-id="8b4d5-166">For more information on displaying and formatting data in ASP.NET, refer to my [Working with Data tutorial series](../../data-access/index.md).</span></span>


## <a name="step-2-adding-a-double-prices-button-to-the-master-page"></a><span data-ttu-id="8b4d5-167">2. adım: ana sayfa çift fiyatlar düğme ekleme</span><span class="sxs-lookup"><span data-stu-id="8b4d5-167">Step 2: Adding a Double Prices Button to the Master Page</span></span>

<span data-ttu-id="8b4d5-168">Bizim sonraki görev eklemek için bir düğme Web Denetimi ana sayfa, tıklatıldığında uygulamak çift veritabanındaki tüm ürünleri fiyat olacaktır.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-168">Our next task is to add a Button Web control to the master page that, when clicked, will double the price of all products in the database.</span></span> <span data-ttu-id="8b4d5-169">Açık `Site.master` ana sayfa ve bir düğme altında yerleştirme tasarımcıya araç sürükleyin `RecentProductsDataSource` önceki öğreticide eklediğimiz SqlDataSource denetimi.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-169">Open the `Site.master` master page and drag a Button from the Toolbox onto the Designer, placing it beneath the `RecentProductsDataSource` SqlDataSource control we added in the previous tutorial.</span></span> <span data-ttu-id="8b4d5-170">Düğmenin ayarlamak `ID` özelliğine `DoublePrice` ve kendi `Text` "Çift ürün fiyatları" özelliğine.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-170">Set the Button's `ID` property to `DoublePrice` and its `Text` property to "Double Product Prices".</span></span>

<span data-ttu-id="8b4d5-171">Ardından, adlandırma ana sayfaya SqlDataSource denetim ekleme `DoublePricesDataSource`.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-171">Next, add a SqlDataSource control to the master page, naming it `DoublePricesDataSource`.</span></span> <span data-ttu-id="8b4d5-172">Bu SqlDataSource yürütmek için kullanılan `UPDATE` fiyatların tümü çift deyimi.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-172">This SqlDataSource will be used to execute the `UPDATE` statement to double all prices.</span></span> <span data-ttu-id="8b4d5-173">Özellikle, ayarlamak ihtiyacımız kendi `ConnectionString` ve `UpdateCommand` uygun bir bağlantı dizesi özellikleri ve `UPDATE` deyimi.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-173">Specifically, we need to set its `ConnectionString` and `UpdateCommand` properties to the appropriate connection string and `UPDATE` statement.</span></span> <span data-ttu-id="8b4d5-174">Bu SqlDataSource denetimin çağırmak ihtiyacımız sonra `Update` yöntemi zaman `DoublePrice` düğmesine tıklandığında.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-174">Then we need to call this SqlDataSource control's `Update` method when the `DoublePrice` Button is clicked.</span></span> <span data-ttu-id="8b4d5-175">Ayarlamak için `ConnectionString` ve `UpdateCommand` özelliklerini SqlDataSource denetimi seçin ve ardından Properties penceresine gidin.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-175">To set the `ConnectionString` and `UpdateCommand` properties, select the SqlDataSource control and then go to the Properties window.</span></span> <span data-ttu-id="8b4d5-176">`ConnectionString` Özellik listelerini zaten depolanmış Bu bağlantı dizeleri `Web.config` aşağı açılan listede; seçin `NorthwindConnectionString` seçeneği Şekil 6'da gösterildiği gibi.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-176">The `ConnectionString` property lists those connection strings already stored in `Web.config` in a drop-down list; choose the `NorthwindConnectionString` option as shown in Figure 6.</span></span>


<span data-ttu-id="8b4d5-177">[![SqlDataSource NorthwindConnectionString kullanacak şekilde yapılandırma](interacting-with-the-content-page-from-the-master-page-cs/_static/image17.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="8b4d5-177">[![Configure the SqlDataSource to Use the NorthwindConnectionString](interacting-with-the-content-page-from-the-master-page-cs/_static/image17.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image16.png)</span></span>

<span data-ttu-id="8b4d5-178">**Şekil 06**: SqlDataSource kullanılacak yapılandırma `NorthwindConnectionString` ([tam boyutlu görüntüyü görüntülemek için tıklatın](interacting-with-the-content-page-from-the-master-page-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="8b4d5-178">**Figure 06**: Configure the SqlDataSource to Use the `NorthwindConnectionString` ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image18.png))</span></span>


<span data-ttu-id="8b4d5-179">Ayarlamak için `UpdateCommand` özelliği, Özellikler penceresinde veUpdateQuery seçeneğini bulun.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-179">To set the `UpdateCommand` property, locate the UpdateQuery option in the Properties window.</span></span> <span data-ttu-id="8b4d5-180">Seçili olduğunda, bu özellik, bir üç nokta düğmesini görüntüler; Şekil 7'de gösterilen komut ve parametre Düzenleyicisi iletişim kutusunu görüntülemek için bu düğmeye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-180">This property, when selected, displays a button with ellipses; click this button to display the Command and Parameter Editor dialog box shown in Figure 7.</span></span> <span data-ttu-id="8b4d5-181">Aşağıdaki komutu yazın `UPDATE` iletişim kutusunun textbox INTO deyimi:</span><span class="sxs-lookup"><span data-stu-id="8b4d5-181">Type the following `UPDATE` statement into the dialog box's textbox:</span></span>


[!code-sql[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample3.sql)]

<span data-ttu-id="8b4d5-182">Çalıştırıldığında, bu bildirimi çift `UnitPrice` her kayıt için değer `Products` tablo.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-182">This statement, when executed, will double the `UnitPrice` value for each record in the `Products` table.</span></span>


<span data-ttu-id="8b4d5-183">[![SqlDataSource'nın UpdateCommand özelliğini ayarlayın](interacting-with-the-content-page-from-the-master-page-cs/_static/image20.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="8b4d5-183">[![Set SqlDataSource's UpdateCommand Property](interacting-with-the-content-page-from-the-master-page-cs/_static/image20.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image19.png)</span></span>

<span data-ttu-id="8b4d5-184">**Şekil 07**: ayarlamak SqlDataSource'nın `UpdateCommand` özelliği ([tam boyutlu görüntüyü görüntülemek için tıklatın](interacting-with-the-content-page-from-the-master-page-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="8b4d5-184">**Figure 07**: Set SqlDataSource's `UpdateCommand` Property  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image21.png))</span></span>


<span data-ttu-id="8b4d5-185">Bu özellikleri ayarladıktan sonra düğme ve SqlDataSource denetimlerini tanımlayıcı biçimlendirme aşağıdakine benzer görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="8b4d5-185">After setting these properties, your Button and SqlDataSource controls' declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample4.aspx)]

<span data-ttu-id="8b4d5-186">Kalan tek şey çağırmak için kendi `Update` yöntemi zaman `DoublePrice` düğmesine tıklandığında.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-186">All that remains is to call its `Update` method when the `DoublePrice` Button is clicked.</span></span> <span data-ttu-id="8b4d5-187">Oluşturma bir `Click` için olay işleyicisini `DoublePrice` düğmesi ve aşağıdaki kodu ekleyin:</span><span class="sxs-lookup"><span data-stu-id="8b4d5-187">Create a `Click` event handler for the `DoublePrice` Button and add the following code:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample5.cs)]

<span data-ttu-id="8b4d5-188">Bu işlevselliğini sınamak için ziyaret `~/Admin/Products.aspx` sayfasında 1. adımda oluşturduğunuz ve "Çift ürün fiyatları" düğmesini tıklatın.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-188">To test this functionality, visit the `~/Admin/Products.aspx` page we created in Step 1 and click the "Double Product Prices" button.</span></span> <span data-ttu-id="8b4d5-189">Düğmesini tıklatarak geri gönderimin neden olur ve yürütür `DoublePrice` düğmenin `Click` tüm ürünlerin fiyatları Katlama olay işleyicisi.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-189">Clicking the button causes a postback and executes the `DoublePrice` Button's `Click` event handler, doubling the prices of all products.</span></span> <span data-ttu-id="8b4d5-190">Sayfa daha sonra yeniden oluşturulur ve biçimlendirme döndürülen ve yeniden tarayıcıda görüntülenen.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-190">The page is then re-rendered and the markup is returned and re-displayed in the browser.</span></span> <span data-ttu-id="8b4d5-191">"Çift ürün fiyatları önce" düğmesine tıklanana içerik sayfasındaki GridView ancak, aynı fiyatlar listeler.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-191">The GridView in the content page, however, lists the same prices as before the "Double Product Prices" button was clicked.</span></span> <span data-ttu-id="8b4d5-192">Başlangıçta GridView yüklenen veriler görünüm durumuna depolanmaz, yani bu üzerinde Geri göndermeler aksi belirtilmedikçe yüklenmez durumuna sahip olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-192">This is because the data initially loaded in the GridView had its state stored in view state, so it's not reloaded on postbacks unless instructed otherwise.</span></span> <span data-ttu-id="8b4d5-193">Farklı bir sayfasını ziyaret edin ve sonra geri dönüp `~/Admin/Products.aspx` sayfa güncelleştirilmiş fiyatlar göreceksiniz.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-193">If you visit a different page and then return to the `~/Admin/Products.aspx` page you'll see the updated prices.</span></span>

## <a name="step-3-raising-an-event-when-the-prices-are-doubled"></a><span data-ttu-id="8b4d5-194">3. adım: bir olay olduğunda fiyatlar oluşturma iki katına</span><span class="sxs-lookup"><span data-stu-id="8b4d5-194">Step 3: Raising an Event When the Prices are Doubled</span></span>

<span data-ttu-id="8b4d5-195">Çünkü GridView `~/Admin/Products.aspx` sayfa değil hemen yansıtacak fiyat Katlama, bir kullanıcı understandably kullanıcılar "Çift ürün fiyatları" düğmesini tıklatarak değil, ya da işe yaramadı düşünebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-195">Because the GridView in the `~/Admin/Products.aspx` page does not immediately reflect the price doubling, a user may understandably think that they did not click the "Double Product Prices" button, or that it didn't work.</span></span> <span data-ttu-id="8b4d5-196">Bunlar düğmesi süreleri ve fiyatlarını yeniden katlama birkaç daha deneyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-196">They may try clicking the button a few more times, doubling the prices again and again.</span></span> <span data-ttu-id="8b4d5-197">Bu kılavuzun içeriği sağlamak için ihtiyacımız sorunu gidermek için sayfayı görüntüleme yeni fiyatlar hemen çift sonra.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-197">To fix this we need to have the grid in the content page display the new prices immediately after they are doubled.</span></span>

<span data-ttu-id="8b4d5-198">Bu öğreticide daha önce bahsedildiği gibi kullanıcı tıkladığında ana sayfa olayda yükseltmek ihtiyacımız `DoublePrice` düğmesi.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-198">As discussed earlier in this tutorial, we need to raise an event in the master page whenever the user clicks the `DoublePrice` Button.</span></span> <span data-ttu-id="8b4d5-199">Bir olay başka bir ilgi çekici bir şey oluştu diğer sınıflar (olay aboneleri için) kümesini bildirmek için bir tane sınıfı (olay yayımcısı) için yoludur.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-199">An event is a way for one class (an event publisher) to notify another a set of other classes (the event subscribers) that something interesting has occurred.</span></span> <span data-ttu-id="8b4d5-200">Bu örnekte, ana sayfa olay yayımcısı.; Bu içerik hakkında ne zaman verdiğiniz sayfalarının `DoublePrice` düğmesine tıklandığında aboneleri şunlardır.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-200">In this example, the master page is the event publisher; those content pages that care about when the `DoublePrice` Button is clicked are the subscribers.</span></span>

<span data-ttu-id="8b4d5-201">Bir sınıf oluşturarak, bir olaya abone olan bir *olay işleyicisi*, gerçekleştirilen olaya yanıt olarak yürütülen bir yöntemi.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-201">A class subscribes to an event by creating an *event handler*, which is a method that is executed in response to the event being raised.</span></span> <span data-ttu-id="8b4d5-202">Yayımcı kendisinin başlatır tanımlayarak olayları tanımlayan bir *olay temsilci*.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-202">The publisher defines the events he raises by defining an *event delegate*.</span></span> <span data-ttu-id="8b4d5-203">Olay temsilci olay işleyicisi kabul etmelisiniz hangi giriş parametreleri belirtir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-203">The event delegate specifies what input parameters the event handler must accept.</span></span> <span data-ttu-id="8b4d5-204">.NET Framework olay temsilcileri olmayan herhangi bir değer döndürür ve iki giriş parametreleri kabul eder:</span><span class="sxs-lookup"><span data-stu-id="8b4d5-204">In the .NET Framework, event delegates do not return any value and accept two input parameters:</span></span>

- <span data-ttu-id="8b4d5-205">Bir `Object`, olay kaynağı tanımlar ve</span><span class="sxs-lookup"><span data-stu-id="8b4d5-205">An `Object`, which identifies the event source, and</span></span>
- <span data-ttu-id="8b4d5-206">Türetilen bir sınıfı`System.EventArgs`</span><span class="sxs-lookup"><span data-stu-id="8b4d5-206">A class derived from `System.EventArgs`</span></span>

<span data-ttu-id="8b4d5-207">Bir olay işleyicisi geçen ikinci parametre olayla ilgili ek bilgiler içerebilir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-207">The second parameter passed to an event handler can include additional information about the event.</span></span> <span data-ttu-id="8b4d5-208">While temel `EventArgs` sınıfı herhangi bir bilgi geçişi değil, .NET Framework genişleten sınıflar içerir `EventArgs` ve ek özellikleri kapsar.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-208">While the base `EventArgs` class does not pass along any information, the .NET Framework includes a number of classes that extend `EventArgs` and encompass additional properties.</span></span> <span data-ttu-id="8b4d5-209">Örneğin, bir `CommandEventArgs` örnek yanıt olay işleyicileri iletilir `Command` olayı ve iki bilgi özellikleri içerir: `CommandArgument` ve `CommandName`.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-209">For example, a `CommandEventArgs` instance is passed to event handlers that respond to the `Command` event, and includes two informational properties: `CommandArgument` and `CommandName`.</span></span>

> [!NOTE]
> <span data-ttu-id="8b4d5-210">Oluşturma konusunda daha fazla bilgi için bkz: oluşturma ve olayları, işleme [olaylar ve Temsilciler](https://msdn.microsoft.com/en-us/library/17sde2xt.aspx) ve [olay temsilcileri basit İngilizce](http://www.codeproject.com/KB/cs/eventdelegates.aspx).</span><span class="sxs-lookup"><span data-stu-id="8b4d5-210">For more information on creating, raising, and handling events, see [Events and Delegates](https://msdn.microsoft.com/en-us/library/17sde2xt.aspx) and [Event Delegates in Simple English](http://www.codeproject.com/KB/cs/eventdelegates.aspx).</span></span>


<span data-ttu-id="8b4d5-211">Bir olay tanımlamak için aşağıdaki sözdizimini kullanın:</span><span class="sxs-lookup"><span data-stu-id="8b4d5-211">To define an event use the following syntax:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample6.cs)]

<span data-ttu-id="8b4d5-212">Biz yalnızca kullanıcı tıklatıldığında içerik sayfasını uyarı gerektiğinden `DoublePrice` düğmesini tıklatın ve diğer ek bilgileri geçmesi gerek yoktur, olay temsilci kullanırız `EventHandler`, kendi saniye kabul eden olay işleyicisi tanımlar parametre türünde bir nesne `System.EventArgs`.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-212">Because we only need to alert the content page when the user has clicked the `DoublePrice` Button and do not need to pass along any other additional information, we can use the event delegate `EventHandler`, which defines an event handler that accepts as its second parameter an object of type `System.EventArgs`.</span></span> <span data-ttu-id="8b4d5-213">Ana sayfada olay oluşturmak için ana sayfa arka plan kodu sınıfına aşağıdaki kod satırını ekleyin:</span><span class="sxs-lookup"><span data-stu-id="8b4d5-213">To create the event in the master page, add the following line of code to the master page's code-behind class:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample7.cs)]

<span data-ttu-id="8b4d5-214">Yukarıdaki kod ortak olay adlı ana sayfasına ekler `PricesDoubled`.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-214">The above code adds a public event to the master page named `PricesDoubled`.</span></span> <span data-ttu-id="8b4d5-215">Şimdi iki katına fiyatlar sonra bu olay yükseltmek ihtiyacımız.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-215">We now need to raise this event after the prices have been doubled.</span></span> <span data-ttu-id="8b4d5-216">Bir olay oluşturmak için aşağıdaki sözdizimini kullanın:</span><span class="sxs-lookup"><span data-stu-id="8b4d5-216">To raise an event use the following syntax:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample8.cs)]

<span data-ttu-id="8b4d5-217">Burada *gönderen* ve *eventArgs* abonenin olay işleyicisine geçirmek istediğiniz değerlerdir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-217">Where *sender* and *eventArgs* are the values you want to pass to the subscriber's event handler.</span></span>

<span data-ttu-id="8b4d5-218">Güncelleştirme `DoublePrice` `Click` aşağıdaki kod ile olay işleyicisi:</span><span class="sxs-lookup"><span data-stu-id="8b4d5-218">Update the `DoublePrice` `Click` event handler with the following code:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample9.cs)]

<span data-ttu-id="8b4d5-219">Önceki gibi `Click` olay işleyicisini başlatır çağırarak `DoublePricesDataSource` SqlDataSource denetimin `Update` tüm ürünlerin fiyatları çift yöntemi.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-219">As before, the `Click` event handler starts by calling the `DoublePricesDataSource` SqlDataSource control's `Update` method to double the prices of all products.</span></span> <span data-ttu-id="8b4d5-220">Aşağıdaki iki olay işleyicisi eklemeler vardır.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-220">Following that there are two additions to the event handler.</span></span> <span data-ttu-id="8b4d5-221">İlk olarak, `RecentProducts` GridView'ın veri yenilenir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-221">First, the `RecentProducts` GridView's data is refreshed.</span></span> <span data-ttu-id="8b4d5-222">Bu GridView ana sayfaya önceki öğreticide eklendi ve beş en son eklenen ürünleri görüntüler.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-222">This GridView was added to the master page in the preceding tutorial and displays the five most recently-added products.</span></span> <span data-ttu-id="8b4d5-223">Böylece bu beş ürünler için yalnızca iki katına fiyatlar gösterir, bu kılavuz yenilemek gerekir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-223">We need to refresh this grid so that it shows the just-doubled prices for these five products.</span></span> <span data-ttu-id="8b4d5-224">Aşağıdaki `PricesDoubled` olayı oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-224">Following that, the `PricesDoubled` event is raised.</span></span> <span data-ttu-id="8b4d5-225">Ana sayfa başvuru (`this`) olay işleyicisi için olay kaynağı ve boş gönderilir `EventArgs` nesne, olay bağımsız değişken olarak gönderilir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-225">A reference to the master page itself (`this`) is sent to the event handler as the event source and an empty `EventArgs` object is sent as the event arguments.</span></span>

## <a name="step-4-handling-the-event-in-the-content-page"></a><span data-ttu-id="8b4d5-226">4. adım: içerik sayfasındaki olay işleme</span><span class="sxs-lookup"><span data-stu-id="8b4d5-226">Step 4: Handling the Event in the Content Page</span></span>

<span data-ttu-id="8b4d5-227">Bu noktada ana sayfayı başlatır, `PricesDoubled` olay her `DoublePrice` düğme denetimi tıklandığında.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-227">At this point the master page raises its `PricesDoubled` event whenever the `DoublePrice` Button control is clicked.</span></span> <span data-ttu-id="8b4d5-228">Ancak, yalnızca yarı var olma Savaşının budur - biz yine de abone olayı işleme gerekir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-228">However, this is only half the battle - we still need to handle the event in the subscriber.</span></span> <span data-ttu-id="8b4d5-229">Bu iki adımdan oluşur: olay işleyicisi oluşturma ve olay kablolama kodu ekleyerek olay işleyicisi olay oluşturulduğunda yürütülür.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-229">This involves two steps: creating the event handler and adding event wiring code so that when the event is raised the event handler is executed.</span></span>

<span data-ttu-id="8b4d5-230">Başlangıç adlı bir olay işleyicisi oluşturarak `Master_PricesDoubled`.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-230">Start by creating an event handler named `Master_PricesDoubled`.</span></span> <span data-ttu-id="8b4d5-231">Nasıl tanımladığımız nedeniyle `PricesDoubled` ana sayfa olayında olay işleyicinin iki giriş parametreleri türlerini olmalıdır `Object` ve `EventArgs`sırasıyla.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-231">Because of how we defined the `PricesDoubled` event in the master page the event handler's two input parameters must be of types `Object` and `EventArgs`, respectively.</span></span> <span data-ttu-id="8b4d5-232">Olay işleyici çağrısında `ProductsGrid` GridView'ın `DataBind` kılavuza veri rebind yöntemi.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-232">In the event handler call the `ProductsGrid` GridView's `DataBind` method to rebind the data to the grid.</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample10.cs)]

<span data-ttu-id="8b4d5-233">Olay işleyicisi için kod tamamlanır ancak biz henüz olduğunuz için ana sayfa wire `PricesDoubled` bu olay işleyicisi olaya.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-233">The code for the event handler is complete but we've yet to wire the master page's `PricesDoubled` event to this event handler.</span></span> <span data-ttu-id="8b4d5-234">Abone, aşağıdaki söz dizimini aracılığıyla olay işleyicisi için bir olay bağlayan:</span><span class="sxs-lookup"><span data-stu-id="8b4d5-234">The subscriber wires an event to an event handler via the following syntax:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample11.cs)]

<span data-ttu-id="8b4d5-235">*Yayımcı* olay sunar nesneye bir başvurusu olan *eventName*, ve *methodName* imza karşılık gelen abone olarak tanımlanan olay işleyicisi adı için *eventDelegate*.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-235">*publisher* is a reference to the object that offers the event *eventName*, and *methodName* is the name of the event handler defined in the subscriber that has a signature corresponding to the *eventDelegate*.</span></span> <span data-ttu-id="8b4d5-236">Diğer bir deyişle, olay temsilci ise `EventHandler`, ardından *methodName* bir yöntemi, bir değer döndürmüyor ve iki giriş türlerinin parametreleri kabul eden abone adı olmalıdır `Object` ve `EventArgs`, sırasıyla.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-236">In other words, if the event delegate is `EventHandler`, then *methodName* must be the name of a method in the subscriber that does not return a value and accepts two input parameters of types `Object` and `EventArgs`, respectively.</span></span>

<span data-ttu-id="8b4d5-237">Bu olay kablolama kodu ilk sayfasını ziyaret edin ve sonraki geri göndermelere yürütülmelidir ve olayı yükleyen önündeki sayfa ömrü içindeki bir noktada olmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-237">This event wiring code must be executed on the first page visit and subsequent postbacks and should occur at a point in the page lifecycle that precedes when the event may be raised.</span></span> <span data-ttu-id="8b4d5-238">Olay kablolama kodu eklemek için uygun bir çok erken sayfa çevriminin oluşur PreInit aşamasında zamandır.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-238">A good time to add event wiring code is in the PreInit stage, which occurs very early in the page lifecycle.</span></span>

<span data-ttu-id="8b4d5-239">Açık `~/Admin/Products.aspx` ve oluşturma bir `Page_PreInit` olay işleyicisi:</span><span class="sxs-lookup"><span data-stu-id="8b4d5-239">Open `~/Admin/Products.aspx` and create a `Page_PreInit` event handler:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample12.cs)]

<span data-ttu-id="8b4d5-240">Bu kablolama kod tamamlamak için ana sayfa programlı başvuru içerik sayfasından ihtiyacımız var.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-240">In order to complete this wiring code we need a programmatic reference to the master page from the content page.</span></span> <span data-ttu-id="8b4d5-241">Önceki öğreticide belirtildiği gibi bunu yapmanın iki yolu vardır:</span><span class="sxs-lookup"><span data-stu-id="8b4d5-241">As noted in the previous tutorial, there are two ways to do this:</span></span>

- <span data-ttu-id="8b4d5-242">Geniş yazılmış atama tarafından `Page.Master` uygun ana sayfa türü özelliğine veya</span><span class="sxs-lookup"><span data-stu-id="8b4d5-242">By casting the loosely-typed `Page.Master` property to the appropriate master page type, or</span></span>
- <span data-ttu-id="8b4d5-243">Ekleyerek bir `@MasterType` yönergesini `.aspx` sayfası ve kesin tür belirtilmiş kullanarak `Master` özelliği.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-243">By adding a `@MasterType` directive in the `.aspx` page and then using the strongly-typed `Master` property.</span></span>

<span data-ttu-id="8b4d5-244">İkinci yaklaşımı kullanalım.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-244">Let's use the latter approach.</span></span> <span data-ttu-id="8b4d5-245">Aşağıdakileri ekleyin `@MasterType` sayfanın bildirim temelli biçimlendirme üstüne yönerge:</span><span class="sxs-lookup"><span data-stu-id="8b4d5-245">Add the following `@MasterType` directive to the top of the page's declarative markup:</span></span>


[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample13.aspx)]

<span data-ttu-id="8b4d5-246">Ardından aşağıdaki olay kablolama kodda ekleyin `Page_PreInit` olay işleyicisi:</span><span class="sxs-lookup"><span data-stu-id="8b4d5-246">Then add the following event wiring code in the `Page_PreInit` event handler:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample14.cs)]

<span data-ttu-id="8b4d5-247">Yerinde şu kodla içerik sayfasındaki GridView yenilenir her `DoublePrice` düğmesine tıklandığında.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-247">With this code in place, the GridView in the content page is refreshed whenever the `DoublePrice` Button is clicked.</span></span>

<span data-ttu-id="8b4d5-248">Şekil 8 ve 9 bu davranışı gösterir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-248">Figures 8 and 9 illustrate this behavior.</span></span> <span data-ttu-id="8b4d5-249">Şekil 8 ilk sitesini ziyaret ettiğinizde sayfası gösterilir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-249">Figure 8 shows the page when first visited.</span></span> <span data-ttu-id="8b4d5-250">Değerleri, ikisi de fiyat Not `RecentProducts` GridView (sol sütunda ana sayfanın) ve `ProductsGrid` GridView (içerik sayfasındaki).</span><span class="sxs-lookup"><span data-stu-id="8b4d5-250">Note that price values in both the `RecentProducts` GridView (in the left column of the master page) and the `ProductsGrid` GridView (in the content page).</span></span> <span data-ttu-id="8b4d5-251">Şekil 9 gösterir aynı ekran hemen sonra `DoublePrice` düğmesine tıklanana.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-251">Figure 9 shows the same screen immediately after the `DoublePrice` Button has been clicked.</span></span> <span data-ttu-id="8b4d5-252">Gördüğünüz gibi yeni fiyatlar eşzamanlı olarak iki GridViews yansıtılır.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-252">As you can see, the new prices are instantaneously reflected in both GridViews.</span></span>


<span data-ttu-id="8b4d5-253">[![Başlangıç fiyatı değerleri](interacting-with-the-content-page-from-the-master-page-cs/_static/image23.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="8b4d5-253">[![The Initial Price Values](interacting-with-the-content-page-from-the-master-page-cs/_static/image23.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image22.png)</span></span>

<span data-ttu-id="8b4d5-254">**Şekil 08**: ilk fiyat değerlerini ([tam boyutlu görüntüyü görüntülemek için tıklatın](interacting-with-the-content-page-from-the-master-page-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="8b4d5-254">**Figure 08**: The Initial Price Values  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image24.png))</span></span>


<span data-ttu-id="8b4d5-255">[![Just-Doubled fiyatlar GridViews görüntülenir](interacting-with-the-content-page-from-the-master-page-cs/_static/image26.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="8b4d5-255">[![The Just-Doubled Prices are Displayed in the GridViews](interacting-with-the-content-page-from-the-master-page-cs/_static/image26.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image25.png)</span></span>

<span data-ttu-id="8b4d5-256">**Şekil 09**: The Just-Doubled fiyatlar GridViews görüntülenir ([tam boyutlu görüntüyü görüntülemek için tıklatın](interacting-with-the-content-page-from-the-master-page-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="8b4d5-256">**Figure 09**: The Just-Doubled Prices are Displayed in the GridViews  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image27.png))</span></span>


## <a name="summary"></a><span data-ttu-id="8b4d5-257">Özet</span><span class="sxs-lookup"><span data-stu-id="8b4d5-257">Summary</span></span>

<span data-ttu-id="8b4d5-258">İdeal olarak, bir ana sayfa ve onun içerik sayfalarını birbirinden tamamen ayrı ve etkileşim hiçbir düzeyi gerektiriyor.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-258">Ideally, a master page and its content pages are completely separate from one another and require no level of interaction.</span></span> <span data-ttu-id="8b4d5-259">Bir ana sayfa veya ana sayfa veya içerik sayfasını değiştirilebilir verileri görüntüleyen içerik sayfası varsa, ancak daha sonra içerik sayfası (veya tersi bir) uyarı ana sayfa bulunması gerekebilir veri değiştirildiği böylece görüntü güncelleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-259">However, if you have a master page or content page that displays data that can be modified from the master page or content page, then you may need to have the master page alert the content page (or vice-a-versa) when data is modified so that the display can be updated.</span></span> <span data-ttu-id="8b4d5-260">Önceki öğreticide program aracılığıyla kendi ana sayfa ile etkileşim bir içerik sayfasını nasıl gördüğümüz; Bu öğreticide bir ana sayfa başlatma etkileşim nasıl adresindeki arama.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-260">In the preceding tutorial we saw how to have a content page programmatically interact with its master page; in this tutorial we looked at how to have a master page initiate the interaction.</span></span>

<span data-ttu-id="8b4d5-261">İçerik ve ana sayfa arasındaki programlı etkileşim içerik ya ana sayfa kaynaklanan, ancak kullanılan etkileşim düzeni üzerinde oluşturulma bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-261">While programmatic interaction between a content and master page can originate from either the content or master page, the interaction pattern used depends on the origination.</span></span> <span data-ttu-id="8b4d5-262">Farkları bir içerik sayfasını tek bir ana sayfa olsa da, bir ana sayfa birçok farklı içerik sayfaları olabilir due için nedeni demektir.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-262">The differences are due to the fact that a content page has a single master page, but a master page can have many different content pages.</span></span> <span data-ttu-id="8b4d5-263">Bir ana sayfa bir içerik sayfasını ile doğrudan etkileşim sağlamak yerine, daha iyi bir yaklaşım bazı eylemleri gerçekleştikten göstermek için bir olayı ana sayfa sağlamaktır.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-263">Rather than having a master page directly interact with a content page, a better approach is to have the master page raise an event to signal that some action has taken place.</span></span> <span data-ttu-id="8b4d5-264">Bu içerik sayfaları eylem hakkında dikkatli olay işleyicileri oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-264">Those content pages that care about the action can create event handlers.</span></span>

<span data-ttu-id="8b4d5-265">Mutluluk programlama!</span><span class="sxs-lookup"><span data-stu-id="8b4d5-265">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="8b4d5-266">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="8b4d5-266">Further Reading</span></span>

<span data-ttu-id="8b4d5-267">Bu öğreticide konular hakkında daha fazla bilgi için aşağıdaki kaynaklara bakın:</span><span class="sxs-lookup"><span data-stu-id="8b4d5-267">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="8b4d5-268">Verilere erişme ve verileri ASP.NET güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="8b4d5-268">Accessing and Updating Data in ASP.NET</span></span>](http://aspnet.4guysfromrolla.com/articles/011106-1.aspx)
- [<span data-ttu-id="8b4d5-269">Olaylar ve temsilciler</span><span class="sxs-lookup"><span data-stu-id="8b4d5-269">Events and Delegates</span></span>](https://msdn.microsoft.com/en-us/library/17sde2xt.aspx)
- [<span data-ttu-id="8b4d5-270">İçerik ve ana sayfalar arasında bilgi geçirme</span><span class="sxs-lookup"><span data-stu-id="8b4d5-270">Passing Information Between Content and Master Pages</span></span>](http://aspnet.4guysfromrolla.com/articles/013107-1.aspx)
- [<span data-ttu-id="8b4d5-271">ASP.NET eğitimlerine verileri ile çalışma</span><span class="sxs-lookup"><span data-stu-id="8b4d5-271">Working with Data in ASP.NET Tutorials</span></span>](../../data-access/index.md)

### <a name="about-the-author"></a><span data-ttu-id="8b4d5-272">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="8b4d5-272">About the Author</span></span>

<span data-ttu-id="8b4d5-273">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), yazar birden çok ASP/ASP.NET books ve 4GuysFromRolla.com kurucusu, 1998 itibaren Microsoft Web teknolojileri ile çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-273">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="8b4d5-274">Tan bağımsız Danışman, eğitmen ve yazıcı çalışır.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-274">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="8b4d5-275">En son kendi defteri [ *kendi öğretmek kendiniz ASP.NET 3.5 24 saat içindeki*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="8b4d5-275">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="8b4d5-276">Tan adresindeki ulaşılabilir [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com) veya kendi blog aracılığıyla [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="8b4d5-276">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="8b4d5-277">Özel teşekkürler</span><span class="sxs-lookup"><span data-stu-id="8b4d5-277">Special Thanks To</span></span>

<span data-ttu-id="8b4d5-278">Bu öğretici seri pek çok yararlı gözden geçirenler tarafından gözden geçirildi.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-278">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="8b4d5-279">Bu öğretici için sağlama İnceleme Suchi Banerjee oluştu.</span><span class="sxs-lookup"><span data-stu-id="8b4d5-279">Lead reviewer for this tutorial was Suchi Banerjee.</span></span> <span data-ttu-id="8b4d5-280">My yaklaşan MSDN makaleleri gözden geçirme ilginizi çekiyor mu?</span><span class="sxs-lookup"><span data-stu-id="8b4d5-280">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="8b4d5-281">Öyleyse, bir satırında bana bırak[mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="8b4d5-281">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="8b4d5-282">[Önceki](interacting-with-the-master-page-from-the-content-page-cs.md)
[sonraki](master-pages-and-asp-net-ajax-cs.md)</span><span class="sxs-lookup"><span data-stu-id="8b4d5-282">[Previous](interacting-with-the-master-page-from-the-content-page-cs.md)
[Next](master-pages-and-asp-net-ajax-cs.md)</span></span>
