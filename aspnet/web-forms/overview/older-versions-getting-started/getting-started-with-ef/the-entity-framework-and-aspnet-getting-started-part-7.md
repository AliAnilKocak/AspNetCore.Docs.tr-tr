---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-7
title: "Entity Framework 4.0 veritabanı ile ilk Başlarken ve ASP.NET 4 Web Forms - Bölüm 7 | Microsoft Docs"
author: tdykstra
description: "Contoso University örnek web uygulaması Entity Framework kullanarak ASP.NET Web Forms uygulamalarının nasıl oluşturulacağını gösterir. Örnek uygulamasıdır..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/03/2010
ms.topic: article
ms.assetid: f8afb245-b705-419c-8790-0b295e90d5e2
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-7
msc.type: authoredcontent
ms.openlocfilehash: 7697763b97e36304d686c77e8cedd060d630c530
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/10/2017
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-7"></a><span data-ttu-id="a0c32-104">Entity Framework 4.0 veritabanı ile ilk Başlarken ve ASP.NET 4 Web Forms - Bölüm 7</span><span class="sxs-lookup"><span data-stu-id="a0c32-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 7</span></span>
====================
<span data-ttu-id="a0c32-105">tarafından [zel Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="a0c32-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="a0c32-106">Contoso University örnek web uygulaması Entity Framework 4.0 ve Visual Studio 2010 kullanarak ASP.NET Web Forms uygulamalarının nasıl oluşturulacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="a0c32-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="a0c32-107">Eğitmen serisi hakkında daha fazla bilgi için bkz: [serideki ilk öğreticide](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="a0c32-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="using-stored-procedures"></a><span data-ttu-id="a0c32-108">Saklı Yordamları Kullanma</span><span class="sxs-lookup"><span data-stu-id="a0c32-108">Using Stored Procedures</span></span>

<span data-ttu-id="a0c32-109">Önceki öğreticide bir tablo başına hiyerarşisi devralma deseni uygulanmadı.</span><span class="sxs-lookup"><span data-stu-id="a0c32-109">In the previous tutorial you implemented a table-per-hierarchy inheritance pattern.</span></span> <span data-ttu-id="a0c32-110">Bu öğretici saklı yordamlar veritabanı erişimi üzerinde daha fazla denetim kazanmak için nasıl kullanılacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="a0c32-110">This tutorial will show you how to use stored procedures to gain more control over database access.</span></span>

<span data-ttu-id="a0c32-111">Entity Framework bunu veritabanı erişimi için saklı yordamlar kullanmalısınız belirtmenize olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="a0c32-111">The Entity Framework lets you specify that it should use stored procedures for database access.</span></span> <span data-ttu-id="a0c32-112">Herhangi bir varlık türü için oluşturma, güncelleştirme veya silme varlık türü için kullanılacak bir saklı yordam belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a0c32-112">For any entity type, you can specify a stored procedure to use for creating, updating, or deleting entities of that type.</span></span> <span data-ttu-id="a0c32-113">Daha sonra veri modelinde varlık kümesi alma gibi görevleri gerçekleştirmek için kullanabileceğiniz saklı yordam başvurularını ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a0c32-113">Then in the data model you can add references to stored procedures that you can use to perform tasks such as retrieving sets of entities.</span></span>

<span data-ttu-id="a0c32-114">Saklı yordamları kullanarak, veritabanı erişimi için ortak bir gereksinimdir.</span><span class="sxs-lookup"><span data-stu-id="a0c32-114">Using stored procedures is a common requirement for database access.</span></span> <span data-ttu-id="a0c32-115">Bazı durumlarda, bir veritabanı Yöneticisi tüm veritabanı erişimi güvenlik nedenleriyle saklı yordamlar aracılığıyla Git gerektirebilir.</span><span class="sxs-lookup"><span data-stu-id="a0c32-115">In some cases a database administrator may require that all database access go through stored procedures for security reasons.</span></span> <span data-ttu-id="a0c32-116">Diğer durumlarda, iş mantığı bazı Entity Framework veritabanı güncelleştirdiğinde kullanan işlemler oluşturmak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a0c32-116">In other cases you may want to build business logic into some of the processes that the Entity Framework uses when it updates the database.</span></span> <span data-ttu-id="a0c32-117">Örneğin, bir varlık silindiğinde bir arşiv veritabanına kopyalamak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a0c32-117">For example, whenever an entity is deleted you might want to copy it to an archive database.</span></span> <span data-ttu-id="a0c32-118">Veya bir satır güncelleştirildiğinde değişikliği yapan kaydeden günlük tabloya bir satır yazmak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a0c32-118">Or whenever a row is updated you might want to write a row to a logging table that records who made the change.</span></span> <span data-ttu-id="a0c32-119">Entity Framework bir varlığı silen veya bir varlık güncelleştirmeler olduğunda çağrılan saklı yordam, bu tür görevleri gerçekleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a0c32-119">You can perform these kinds of tasks in a stored procedure that's called whenever the Entity Framework deletes an entity or updates an entity.</span></span>

<span data-ttu-id="a0c32-120">Önceki öğretici olduğu gibi yeni bir sayfa oluşturacağınız değil.</span><span class="sxs-lookup"><span data-stu-id="a0c32-120">As in the previous tutorial, you'll not create any new pages.</span></span> <span data-ttu-id="a0c32-121">Bunun yerine, Entity Framework veritabanı zaten oluşturulan sayfaları bazıları için erişen şekilde değiştireceksiniz.</span><span class="sxs-lookup"><span data-stu-id="a0c32-121">Instead, you'll change the way the Entity Framework accesses the database for some of the pages you already created.</span></span>

<span data-ttu-id="a0c32-122">Bu öğreticide eklemek için veritabanında depolanan yordamları oluşturacaksınız `Student` ve `Instructor` varlıklar.</span><span class="sxs-lookup"><span data-stu-id="a0c32-122">In this tutorial you'll create stored procedures in the database for inserting `Student` and `Instructor` entities.</span></span> <span data-ttu-id="a0c32-123">Veri modeline ekleyeceksiniz ve Entity Framework bunları eklemek için kullanması gerektiğini belirtirsiniz `Student` ve `Instructor` veritabanına varlıklar.</span><span class="sxs-lookup"><span data-stu-id="a0c32-123">You'll add them to the data model, and you'll specify that the Entity Framework should use them for adding `Student` and `Instructor` entities to the database.</span></span> <span data-ttu-id="a0c32-124">Ayrıca almak için kullanabileceğiniz bir saklı yordam oluşturacaksınız `Course` varlıklar.</span><span class="sxs-lookup"><span data-stu-id="a0c32-124">You'll also create a stored procedure that you can use to retrieve `Course` entities.</span></span>

## <a name="creating-stored-procedures-in-the-database"></a><span data-ttu-id="a0c32-125">Saklı yordamlar veritabanında oluşturuluyor</span><span class="sxs-lookup"><span data-stu-id="a0c32-125">Creating Stored Procedures in the Database</span></span>

<span data-ttu-id="a0c32-126">(Kullanıyorsanız, *School.mdf* dosyası Bu öğretici ile İndirilebilecek projeden saklı yordamları zaten mevcut olduğundan bu bölümü atlayabilirsiniz.)</span><span class="sxs-lookup"><span data-stu-id="a0c32-126">(If you're using the *School.mdf* file from the project available for download with this tutorial, you can skip this section because the stored procedures already exist.)</span></span>

<span data-ttu-id="a0c32-127">İçinde **Sunucu Gezgini**, genişletin *School.mdf*, sağ **saklı yordamlar**seçip **yeni saklı yordam eklemek**.</span><span class="sxs-lookup"><span data-stu-id="a0c32-127">In **Server Explorer**, expand *School.mdf*, right-click **Stored Procedures**, and select **Add New Stored Procedure**.</span></span>

<span data-ttu-id="a0c32-128">[![image15](the-entity-framework-and-aspnet-getting-started-part-7/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a0c32-128">[![image15](the-entity-framework-and-aspnet-getting-started-part-7/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image1.png)</span></span>

<span data-ttu-id="a0c32-129">Aşağıdaki SQL deyimlerini kopyalayın ve bunları iskelet saklı yordam değiştirme saklı yordam penceresine yapıştırın.</span><span class="sxs-lookup"><span data-stu-id="a0c32-129">Copy the following SQL statements and paste them into the stored procedure window, replacing the skeleton stored procedure.</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample1.sql)]

<span data-ttu-id="a0c32-130">[![image14](the-entity-framework-and-aspnet-getting-started-part-7/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="a0c32-130">[![image14](the-entity-framework-and-aspnet-getting-started-part-7/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image3.png)</span></span>

<span data-ttu-id="a0c32-131">`Student`varlıkları dört özellikleri vardır: `PersonID`, `LastName`, `FirstName`, ve `EnrollmentDate`.</span><span class="sxs-lookup"><span data-stu-id="a0c32-131">`Student` entities have four properties: `PersonID`, `LastName`, `FirstName`, and `EnrollmentDate`.</span></span> <span data-ttu-id="a0c32-132">Veritabanı kimliği değeri otomatik olarak oluşturur ve saklı yordam için diğer üç parametre kabul eder.</span><span class="sxs-lookup"><span data-stu-id="a0c32-132">The database generates the ID value automatically, and the stored procedure accepts parameters for the other three.</span></span> <span data-ttu-id="a0c32-133">Böylece Entity Framework, bellekte tutar varlık sürümünde izlemek saklı yordamı yeni sıranın kayıt anahtarının değerini döndürür.</span><span class="sxs-lookup"><span data-stu-id="a0c32-133">The stored procedure returns the value of the new row's record key so that the Entity Framework can keep track of that in the version of the entity it keeps in memory.</span></span>

<span data-ttu-id="a0c32-134">Kaydet ve saklı yordam penceresini kapatın.</span><span class="sxs-lookup"><span data-stu-id="a0c32-134">Save and close the stored procedure window.</span></span>

<span data-ttu-id="a0c32-135">Oluşturma bir `InsertInstructor` saklı yordamı aşağıdaki SQL deyimlerini kullanarak aynı şekilde:</span><span class="sxs-lookup"><span data-stu-id="a0c32-135">Create an `InsertInstructor` stored procedure in the same manner, using the following SQL statements:</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample2.sql)]

<span data-ttu-id="a0c32-136">Oluşturma `Update` saklı yordamlar için `Student` ve `Instructor` varlıklar de.</span><span class="sxs-lookup"><span data-stu-id="a0c32-136">Create `Update` stored procedures for `Student` and `Instructor` entities also.</span></span> <span data-ttu-id="a0c32-137">(Veritabanında zaten var. bir `DeletePerson` depolanan her ikisi için çalışır yordam `Instructor` ve `Student` varlıklar.)</span><span class="sxs-lookup"><span data-stu-id="a0c32-137">(The database already has a `DeletePerson` stored procedure which will work for both `Instructor` and `Student` entities.)</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample3.sql)]

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample4.sql)]

<span data-ttu-id="a0c32-138">Bu öğreticide tüm üç işlevleri--INSERT, update ve delete--her varlık türü için eşleme.</span><span class="sxs-lookup"><span data-stu-id="a0c32-138">In this tutorial you'll map all three functions -- insert, update, and delete -- for each entity type.</span></span> <span data-ttu-id="a0c32-139">Entity Framework sürüm 4, yalnızca bir eşlemenizi sağlar ya da bunların ikisini başkalarıyla, bir özel durum eşleme olmadan saklı yordamlar işlevleri: güncelleştirme işlevi ancak silme işlevini eşlerseniz Entity Framework bir özel durum olduğunda, bir varlığı silme girişimi.</span><span class="sxs-lookup"><span data-stu-id="a0c32-139">The Entity Framework version 4 allows you to map just one or two of these functions to stored procedures without mapping the others, with one exception: if you map the update function but not the delete function, the Entity Framework will throw an exception when you attempt to delete an entity.</span></span> <span data-ttu-id="a0c32-140">Entity Framework sürüm 3.5, saklı yordamlar eşleme bu kadar esneklik içermiyor: bir işlev eşlenen, tüm üç eşlemek için gerekli.</span><span class="sxs-lookup"><span data-stu-id="a0c32-140">In the Entity Framework version 3.5, you did not have this much flexibility in mapping stored procedures: if you mapped one function you were required to map all three.</span></span>

<span data-ttu-id="a0c32-141">Veri güncelleştirmeleri yerine okuyan bir saklı yordam oluşturmak için tüm seçen bir oluşturun `Course` varlıklar, aşağıdaki SQL deyimlerini kullanarak:</span><span class="sxs-lookup"><span data-stu-id="a0c32-141">To create a stored procedure that reads rather than updates data, create one that selects all `Course` entities, using the following SQL statements:</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample5.sql)]

## <a name="adding-the-stored-procedures-to-the-data-model"></a><span data-ttu-id="a0c32-142">Saklı yordamlar için veri modeli ekleme</span><span class="sxs-lookup"><span data-stu-id="a0c32-142">Adding the Stored Procedures to the Data Model</span></span>

<span data-ttu-id="a0c32-143">Saklı yordamlar artık veritabanında tanımlı, ancak Entity Framework için kullanılabilir duruma getirmek için veri modeline eklenmelidir.</span><span class="sxs-lookup"><span data-stu-id="a0c32-143">The stored procedures are now defined in the database, but they must be added to the data model to make them available to the Entity Framework.</span></span> <span data-ttu-id="a0c32-144">Açık *SchoolModel.edmx*tasarım yüzeyine sağ tıklatın ve seçin **güncelleştirme modeli veritabanından**.</span><span class="sxs-lookup"><span data-stu-id="a0c32-144">Open *SchoolModel.edmx*, right-click the design surface, and select **Update Model from Database**.</span></span> <span data-ttu-id="a0c32-145">İçinde **Ekle** sekmesinde **veritabanı nesnelerinizi** iletişim kutusunda, genişletin **saklı yordamlar**, yeni oluşturulan saklı yordamlar seçin ve `DeletePerson` saklı yordam ve ardından **son**.</span><span class="sxs-lookup"><span data-stu-id="a0c32-145">In the **Add** tab of the **Choose Your Database Objects** dialog box, expand **Stored Procedures**, select the newly created stored procedures and the `DeletePerson` stored procedure, and then click **Finish**.</span></span>

<span data-ttu-id="a0c32-146">[![image20](the-entity-framework-and-aspnet-getting-started-part-7/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="a0c32-146">[![image20](the-entity-framework-and-aspnet-getting-started-part-7/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image5.png)</span></span>

## <a name="mapping-the-stored-procedures"></a><span data-ttu-id="a0c32-147">Saklı yordamlar eşleme</span><span class="sxs-lookup"><span data-stu-id="a0c32-147">Mapping the Stored Procedures</span></span>

<span data-ttu-id="a0c32-148">Veri modeli Tasarımcısı'nda sağ `Student` varlık ve select **depolanan yordamı eşleme**.</span><span class="sxs-lookup"><span data-stu-id="a0c32-148">In the data model designer, right-click the `Student` entity and select **Stored Procedure Mapping**.</span></span>

<span data-ttu-id="a0c32-149">[![image21](the-entity-framework-and-aspnet-getting-started-part-7/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="a0c32-149">[![image21](the-entity-framework-and-aspnet-getting-started-part-7/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image7.png)</span></span>

<span data-ttu-id="a0c32-150">**Eşleme ayrıntıları** penceresi görüntülenir, ekleme, güncelleştirme ve bu tür varlıkları silmek için Entity Framework kullanması gereken saklı yordamlar belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a0c32-150">The **Mapping Details** window appears, in which you can specify stored procedures that the Entity Framework should use for inserting, updating, and deleting entities of this type.</span></span>

<span data-ttu-id="a0c32-151">[![image22](the-entity-framework-and-aspnet-getting-started-part-7/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="a0c32-151">[![image22](the-entity-framework-and-aspnet-getting-started-part-7/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image9.png)</span></span>

<span data-ttu-id="a0c32-152">Ayarlama **Ekle** için işlev **InsertStudent**.</span><span class="sxs-lookup"><span data-stu-id="a0c32-152">Set the **Insert** function to **InsertStudent**.</span></span> <span data-ttu-id="a0c32-153">Pencerenin saklı yordam parametreleri, her biri bir varlık özelliğine eşleniyor gerekir listesini gösterir.</span><span class="sxs-lookup"><span data-stu-id="a0c32-153">The window shows a list of stored procedure parameters, each of which must be mapped to an entity property.</span></span> <span data-ttu-id="a0c32-154">Adları aynı olduğundan bu iki otomatik olarak eşlenir.</span><span class="sxs-lookup"><span data-stu-id="a0c32-154">Two of these are mapped automatically because the names are the same.</span></span> <span data-ttu-id="a0c32-155">Adlı bir varlık özellik yok `FirstName`, el ile seçmeniz gerekir böylece `FirstMidName` bir açılır listeden kullanılabilir varlık özellikleri gösterir.</span><span class="sxs-lookup"><span data-stu-id="a0c32-155">There's no entity property named `FirstName`, so you must manually select `FirstMidName` from a drop-down list that shows available entity properties.</span></span> <span data-ttu-id="a0c32-156">(Adının değişip olmasıdır `FirstName` özelliğine `FirstMidName` ilk öğreticide.)</span><span class="sxs-lookup"><span data-stu-id="a0c32-156">(This is because you changed the name of the `FirstName` property to `FirstMidName` in the first tutorial.)</span></span>

<span data-ttu-id="a0c32-157">[![image23](the-entity-framework-and-aspnet-getting-started-part-7/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="a0c32-157">[![image23](the-entity-framework-and-aspnet-getting-started-part-7/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image11.png)</span></span>

<span data-ttu-id="a0c32-158">Aynı **eşleme ayrıntıları** penceresinde, harita `Update` için işlev `UpdateStudent` saklı yordamı (belirttiğinizden emin olun `FirstMidName` için parametre değeri olarak `FirstName`yaptığınız gibi `Insert` saklı yordamı) ve `Delete` için işlev `DeletePerson` saklı yordamı.</span><span class="sxs-lookup"><span data-stu-id="a0c32-158">In the same **Mapping Details** window, map the `Update` function to the `UpdateStudent` stored procedure (make sure you specify `FirstMidName` as the parameter value for `FirstName`, as you did for the `Insert` stored procedure) and the `Delete` function to the `DeletePerson` stored procedure.</span></span>

<span data-ttu-id="a0c32-159">[![image01](the-entity-framework-and-aspnet-getting-started-part-7/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="a0c32-159">[![image01](the-entity-framework-and-aspnet-getting-started-part-7/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image13.png)</span></span>

<span data-ttu-id="a0c32-160">INSERT, update ve delete eşlemek için aynı yordamı saklı yordamlar için eğitmen için izleme `Instructor` varlık.</span><span class="sxs-lookup"><span data-stu-id="a0c32-160">Follow the same procedure to map the insert, update, and delete stored procedures for instructors to the `Instructor` entity.</span></span>

<span data-ttu-id="a0c32-161">[![image02](the-entity-framework-and-aspnet-getting-started-part-7/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="a0c32-161">[![image02](the-entity-framework-and-aspnet-getting-started-part-7/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image15.png)</span></span>

<span data-ttu-id="a0c32-162">Güncelleştirme veri yerine okuma saklı yordamlar için kullandığınız **modeli tarayıcısı** saklı yordamı varlığa eşlemek için pencere döndürür yazın.</span><span class="sxs-lookup"><span data-stu-id="a0c32-162">For stored procedures that read rather than update data, you use the **Model Browser** window to map the stored procedure to the entity type it returns.</span></span> <span data-ttu-id="a0c32-163">Veri modeli Tasarımcısı'nda tasarım yüzeyi ve select sağ **modeli tarayıcısı**.</span><span class="sxs-lookup"><span data-stu-id="a0c32-163">In the data model designer, right-click the design surface and select **Model Browser**.</span></span> <span data-ttu-id="a0c32-164">Açık **SchoolModel.Store** düğümünü ve ardından açın **saklı yordamlar** düğümü.</span><span class="sxs-lookup"><span data-stu-id="a0c32-164">Open the **SchoolModel.Store** node and then open the **Stored Procedures** node.</span></span> <span data-ttu-id="a0c32-165">Ardından sağ `GetCourses` saklı yordam ve Seç **eklemek işlev içeri aktarma**.</span><span class="sxs-lookup"><span data-stu-id="a0c32-165">Then right-click the `GetCourses` stored procedure and select **Add Function Import**.</span></span>

<span data-ttu-id="a0c32-166">[![image24](the-entity-framework-and-aspnet-getting-started-part-7/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="a0c32-166">[![image24](the-entity-framework-and-aspnet-getting-started-part-7/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image17.png)</span></span>

<span data-ttu-id="a0c32-167">İçinde **eklemek işlev içeri aktarma** iletişim kutusunda **bir koleksiyon olarak döndürür** seçin **varlıklar**ve ardından `Course` varlık türü olarak döndürdü.</span><span class="sxs-lookup"><span data-stu-id="a0c32-167">In the **Add Function Import** dialog box, under **Returns a Collection Of** select **Entities**, and then select `Course` as the entity type returned.</span></span> <span data-ttu-id="a0c32-168">İşiniz bittiğinde tıklatın **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="a0c32-168">When you're done, click **OK**.</span></span> <span data-ttu-id="a0c32-169">Kaydet ve Kapat *.edmx* dosya.</span><span class="sxs-lookup"><span data-stu-id="a0c32-169">Save and close the *.edmx* file.</span></span>

<span data-ttu-id="a0c32-170">[![image25](the-entity-framework-and-aspnet-getting-started-part-7/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="a0c32-170">[![image25](the-entity-framework-and-aspnet-getting-started-part-7/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image19.png)</span></span>

## <a name="using-insert-update-and-delete-stored-procedures"></a><span data-ttu-id="a0c32-171">INSERT kullanarak, güncelleştirme ve saklı yordamlar silme</span><span class="sxs-lookup"><span data-stu-id="a0c32-171">Using Insert, Update, and Delete Stored Procedures</span></span>

<span data-ttu-id="a0c32-172">Eklemek için saklı yordamlar güncelleştirmek ve verileri silmek için veri modeli eklendi ve uygun varlıklara eşlenen sonra Entity Framework tarafından otomatik olarak kullanılır.</span><span class="sxs-lookup"><span data-stu-id="a0c32-172">Stored procedures to insert, update, and delete data are used by the Entity Framework automatically after you've added them to the data model and mapped them to the appropriate entities.</span></span> <span data-ttu-id="a0c32-173">Şimdi Çalıştır *StudentsAdd.aspx* sayfasında ve her bir yeni Öğrenci oluşturduğunuzda, Entity Framework kullanacak `InsertStudent` saklı yordamı yeni satır eklemek için `Student` tablo.</span><span class="sxs-lookup"><span data-stu-id="a0c32-173">You can now run the *StudentsAdd.aspx* page, and every time you create a new student, the Entity Framework will use the `InsertStudent` stored procedure to add the new row to the `Student` table.</span></span>

<span data-ttu-id="a0c32-174">[![image03](the-entity-framework-and-aspnet-getting-started-part-7/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="a0c32-174">[![image03](the-entity-framework-and-aspnet-getting-started-part-7/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image21.png)</span></span>

<span data-ttu-id="a0c32-175">Çalıştırma *Students.aspx* sayfası ve yeni Öğrenci listede görünür.</span><span class="sxs-lookup"><span data-stu-id="a0c32-175">Run the *Students.aspx* page and the new student appears in the list.</span></span>

<span data-ttu-id="a0c32-176">[![image04](the-entity-framework-and-aspnet-getting-started-part-7/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="a0c32-176">[![image04](the-entity-framework-and-aspnet-getting-started-part-7/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image23.png)</span></span>

<span data-ttu-id="a0c32-177">Güncelleştirme işlevi çalıştığını doğrulamak için adı değiştirin ve silme işlevini çalıştığını doğrulamak için Öğrenci silin.</span><span class="sxs-lookup"><span data-stu-id="a0c32-177">Change the name to verify that the update function works, and then delete the student to verify that the delete function works.</span></span>

<span data-ttu-id="a0c32-178">[![image05](the-entity-framework-and-aspnet-getting-started-part-7/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="a0c32-178">[![image05](the-entity-framework-and-aspnet-getting-started-part-7/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image25.png)</span></span>

## <a name="using-select-stored-procedures"></a><span data-ttu-id="a0c32-179">Select saklı yordamları kullanma</span><span class="sxs-lookup"><span data-stu-id="a0c32-179">Using Select Stored Procedures</span></span>

<span data-ttu-id="a0c32-180">Entity Framework otomatik olarak saklı yordamlar gibi çalışmaz `GetCourses`, ve bunlarla kullanamazsınız `EntityDataSource` denetim.</span><span class="sxs-lookup"><span data-stu-id="a0c32-180">The Entity Framework does not automatically run stored procedures such as `GetCourses`, and you cannot use them with the `EntityDataSource` control.</span></span> <span data-ttu-id="a0c32-181">Bunları kullanmak için bunları koddan çağırın.</span><span class="sxs-lookup"><span data-stu-id="a0c32-181">To use them, you call them from code.</span></span>

<span data-ttu-id="a0c32-182">Açık *InstructorsCourses.aspx.cs* dosya.</span><span class="sxs-lookup"><span data-stu-id="a0c32-182">Open the *InstructorsCourses.aspx.cs* file.</span></span> <span data-ttu-id="a0c32-183">`PopulateDropDownLists` Yöntemi, böylece döngü listede ilerleyin ve hangilerinin bir eğitmen atanır ve hangilerinin atanmamış belirlemek tüm indirmelere varlık almaya LINQ varlıkların sorgu kullanır:</span><span class="sxs-lookup"><span data-stu-id="a0c32-183">The `PopulateDropDownLists` method uses a LINQ-to-Entities query to retrieve all course entities so that it can loop through the list and determine which ones an instructor is assigned to and which ones are unassigned:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample6.cs)]

<span data-ttu-id="a0c32-184">Aşağıdaki kod ile değiştirin:</span><span class="sxs-lookup"><span data-stu-id="a0c32-184">Replace this with the following code:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample7.cs)]

<span data-ttu-id="a0c32-185">Sayfa şimdi kullanıyorsa `GetCourses` saklı yordamı tüm kursları listesi alınamadı.</span><span class="sxs-lookup"><span data-stu-id="a0c32-185">The page now uses the `GetCourses` stored procedure to retrieve the list of all courses.</span></span> <span data-ttu-id="a0c32-186">Uygulama önceden olduğu gibi çalışır durumda olduğunu doğrulamak için sayfayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="a0c32-186">Run the page to verify that it works as it did before.</span></span>

<span data-ttu-id="a0c32-187">(Bir saklı yordam tarafından alınan varlık Gezinti özellikleri değil otomatik olarak doldurulur bağlı olarak bu varlıklarla ilgili verilerle `ObjectContext` varsayılan ayarlar.</span><span class="sxs-lookup"><span data-stu-id="a0c32-187">(Navigation properties of entities retrieved by a stored procedure might not be automatically populated with the data related to those entities, depending on `ObjectContext` default settings.</span></span> <span data-ttu-id="a0c32-188">Daha fazla bilgi için bkz: [yüklenirken ilişkili nesneleri](https://msdn.microsoft.com/en-us/library/bb896272.aspx) MSDN Kitaplığı'nda.)</span><span class="sxs-lookup"><span data-stu-id="a0c32-188">For more information, see [Loading Related Objects](https://msdn.microsoft.com/en-us/library/bb896272.aspx) in the MSDN Library.)</span></span>

<span data-ttu-id="a0c32-189">Sonraki öğreticide, program ve test veri biçimlendirmeyi ve doğrulama kurallarını kolaylaştırmak için dinamik veri işlevini kullanmayı öğreneceksiniz.</span><span class="sxs-lookup"><span data-stu-id="a0c32-189">In the next tutorial, you'll learn how to use Dynamic Data functionality to make it easier to program and test data formatting and validation rules.</span></span> <span data-ttu-id="a0c32-190">Veri biçimi dizeleri gibi her web sayfası kuralları ve bir alan olup olmadığına gereklidir belirtme, yerine her sayfada otomatik olarak uygulanan ve veri modelinin meta verilerde bu tür bir kurallar belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a0c32-190">Instead of specifying on each web page rules such as data format strings and whether or not a field is required, you can specify such rules in data model metadata and they're automatically applied on every page.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="a0c32-191">[Önceki](the-entity-framework-and-aspnet-getting-started-part-6.md)
[sonraki](the-entity-framework-and-aspnet-getting-started-part-8.md)</span><span class="sxs-lookup"><span data-stu-id="a0c32-191">[Previous](the-entity-framework-and-aspnet-getting-started-part-6.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-8.md)</span></span>
