---
uid: identity/overview/getting-started/developing-aspnet-apps-with-windows-azure-active-directory
title: Azure Active Directory ile ASP.NET uygulama geliştirme | Microsoft Docs
author: Rick-Anderson
description: Azure Active Directory için Microsoft ASP.NET araçları, kolaylaştırır Azure üzerinde barındırılan web uygulamaları için kimlik doğrulamasını etkinleştirin. Azure Authenti kullanabilirsiniz...
ms.author: aspnetcontent
manager: wpickett
ms.date: 08/14/2014
ms.topic: article
ms.assetid: 457d7eaf-ee76-4ceb-9082-c7c1721435ad
ms.technology: ''
ms.prod: .net-framework
msc.legacyurl: /identity/overview/getting-started/developing-aspnet-apps-with-windows-azure-active-directory
msc.type: authoredcontent
ms.openlocfilehash: 44bf29e099583bf9d49f2715d3ff4f748728ad8b
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/06/2018
---
<a name="developing-aspnet-apps-with-azure-active-directory"></a><span data-ttu-id="0214e-104">Azure Active Directory ile ASP.NET uygulama geliştirme</span><span class="sxs-lookup"><span data-stu-id="0214e-104">Developing ASP.NET Apps with Azure Active Directory</span></span>
====================
<span data-ttu-id="0214e-105">tarafından [Rick Anderson](https://github.com/Rick-Anderson)</span><span class="sxs-lookup"><span data-stu-id="0214e-105">by [Rick Anderson](https://github.com/Rick-Anderson)</span></span>

> <span data-ttu-id="0214e-106">Microsoft ASP.NET araçları Azure Active Directory üzerinde barındırılan web uygulamaları için kimlik doğrulamasını etkinleştirmek basit yapar için [Azure](https://www.windowsazure.com/home/features/web-sites/).</span><span class="sxs-lookup"><span data-stu-id="0214e-106">Microsoft ASP.NET tools for Azure Active Directory makes it simple to enable authentication for web applications hosted on [Azure](https://www.windowsazure.com/home/features/web-sites/).</span></span> <span data-ttu-id="0214e-107">Kuruluşunuz, şirket içi Active Directory'nizden eşitlenen Kurumsal hesaplara veya kendi özel Azure Active Directory etki alanında oluşturulan kullanıcıların Office 365 kullanıcıların kimliğini doğrulamak için Azure kimlik doğrulaması kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0214e-107">You can use Azure Authentication to authenticate Office 365 users from your organization, corporate accounts synced from your on-premise Active Directory or users created in your own custom Azure Active Directory domain.</span></span> <span data-ttu-id="0214e-108">Windows Azure kimlik doğrulamasını etkinleştirme yapılandırır tek bir kullanarak kullanıcıların kimliklerini doğrulamak için uygulamanızın [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) Kiracı.</span><span class="sxs-lookup"><span data-stu-id="0214e-108">Enabling Windows Azure Authentication configures your application to authenticate users using a single [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) tenant.</span></span>
> 
>  <span data-ttu-id="0214e-109">Bu öğretici Rick Anderson tarafından yazıldı [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="0214e-109">This tutorial was written by Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span></span>


<span data-ttu-id="0214e-110">Bu öğretici ile oturum açma için yapılandırılmış bir ASP.NET uygulamasının nasıl oluşturulacağını gösterir [Azure Active Directory](https://msdn.microsoft.com/library/azure/mt168838.aspx) (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="0214e-110">This tutorial will show you how to create an ASP.NET application that is configured for sign-on with [Azure Active Directory](https://msdn.microsoft.com/library/azure/mt168838.aspx) (Azure AD).</span></span> <span data-ttu-id="0214e-111">Ayrıca, şu anda oturum açmış kullanıcı hakkında bilgi almak için grafik API'sini çağırmak nasıl ve uygulamayı Azure'a dağıtmayı öğreneceksiniz.</span><span class="sxs-lookup"><span data-stu-id="0214e-111">You will also learn how to call the Graph API to get information about the currently signed-in user and how to deploy the application to Azure.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="0214e-112">Önkoşullar</span><span class="sxs-lookup"><span data-stu-id="0214e-112">Prerequisites</span></span>

1. <span data-ttu-id="0214e-113">[Web için Visual Studio Express 2013](https://www.microsoft.com/visualstudio/eng/2013-downloads#d-2013-express) veya [Visual Studio 2013'ün](https://www.microsoft.com/visualstudio/eng/2013-downloads).</span><span class="sxs-lookup"><span data-stu-id="0214e-113">[Visual Studio Express 2013 for Web](https://www.microsoft.com/visualstudio/eng/2013-downloads#d-2013-express) or [Visual Studio 2013](https://www.microsoft.com/visualstudio/eng/2013-downloads).</span></span>
2. <span data-ttu-id="0214e-114">[Visual Studio 2013 güncelleştirme 4](https://www.microsoft.com/download/details.aspx?id=44921) -güncelleştirme 3 veya üstü gereklidir.</span><span class="sxs-lookup"><span data-stu-id="0214e-114">[Visual Studio 2013 Update 4](https://www.microsoft.com/download/details.aspx?id=44921) - Update 3 or higher is required.</span></span>
3. <span data-ttu-id="0214e-115">Bir Azure hesabı.</span><span class="sxs-lookup"><span data-stu-id="0214e-115">An Azure account.</span></span> <span data-ttu-id="0214e-116">[Burayı](https://azure.microsoft.com/pricing/free-trial/) bir hesap zaten yoksa ücretsiz bir deneme sürümü için.</span><span class="sxs-lookup"><span data-stu-id="0214e-116">[Click here](https://azure.microsoft.com/pricing/free-trial/) for a free trial if you do not already have an account.</span></span>

## <a name="add-a-global-administrator-to-your-active-directory"></a><span data-ttu-id="0214e-117">Genel yönetici, Active Directory'ye ekleme</span><span class="sxs-lookup"><span data-stu-id="0214e-117">Add a Global Administrator to your Active Directory</span></span>

1. <span data-ttu-id="0214e-118">Oturum [Azure Yönetim Portalı](https://manage.windowsazure.com/).</span><span class="sxs-lookup"><span data-stu-id="0214e-118">Sign in to the [Azure Management Portal](https://manage.windowsazure.com/).</span></span>
2. <span data-ttu-id="0214e-119">Tüm Azure hesaplarını içeren bir **varsayılan dizin** --tıklayın ve ardından **kullanıcılar** sayfanın üst kısmındaki sekme (aşağıdaki görüntü bakın).</span><span class="sxs-lookup"><span data-stu-id="0214e-119">All Azure accounts contain a **Default Directory** -- click on it, then click the **Users** tab at the top of the page (see image below).</span></span>
3. <span data-ttu-id="0214e-120">Kullanıcı Ekle'yi tıklatın.</span><span class="sxs-lookup"><span data-stu-id="0214e-120">Click Add User.</span></span>  
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image1.png)
4. <span data-ttu-id="0214e-121">Yeni bir kullanıcıyla oluşturma **genel yönetici** rol.</span><span class="sxs-lookup"><span data-stu-id="0214e-121">Create a new user with the **Global Administrator** role.</span></span> <span data-ttu-id="0214e-122">Tıklatın **kullanıcılar** üst menüsünden ve ardından **Kullanıcı Ekle** komut çubuğundan düğme.</span><span class="sxs-lookup"><span data-stu-id="0214e-122">Click **Users** from the top menu, and then click the **Add User** button on the command bar.</span></span>
5. <span data-ttu-id="0214e-123">İçinde **Kullanıcı Ekle** iletişim kutusunda, yeni kullanıcı için bir ad girin ve ardından sağ oka tıklayın.</span><span class="sxs-lookup"><span data-stu-id="0214e-123">In the **Add User** dialog, enter a name for the new user and then click the right arrow.</span></span>  
  
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image2.png)
6. <span data-ttu-id="0214e-124">Kullanıcı adı girin ve rol kümesine **genel yönetici**.</span><span class="sxs-lookup"><span data-stu-id="0214e-124">Enter the user name and set the role to **Global Administrator**.</span></span> <span data-ttu-id="0214e-125">Genel Yöneticiler parola kurtarma amacıyla bir alternatif e-posta adresi gerektirir.</span><span class="sxs-lookup"><span data-stu-id="0214e-125">Global administrators require an alternate email address for password recovery purposes.</span></span> <span data-ttu-id="0214e-126">Bitirdiğinizde, sağ oka tıklayın.</span><span class="sxs-lookup"><span data-stu-id="0214e-126">After you're finished, click the right arrow.</span></span>  
  
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image3.png)
7. <span data-ttu-id="0214e-127">İletişim kutusunda sonraki sayfasında **oluşturma**.</span><span class="sxs-lookup"><span data-stu-id="0214e-127">On the next page of the dialog, click **Create**.</span></span> <span data-ttu-id="0214e-128">Geçici bir parola için yeni kullanıcı oluşturulur ve iletişim kutusunda görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="0214e-128">A temporary password will be created for the new user and displayed in the dialog.</span></span>   
  
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image4.png)  
  
   <span data-ttu-id="0214e-129">Parola kaydetmeye ilk oturum açtığında sonra parolayı değiştirmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="0214e-129">Save the password, you will be required to change the password after the first log in.</span></span> <span data-ttu-id="0214e-130">Aşağıdaki resimde, yeni yönetici hesabı gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="0214e-130">The following image shows the new admin account.</span></span> <span data-ttu-id="0214e-131">Ayrıca bu sayfada gösterilen Microsoft hesabı değil uygulamanıza oturum için Azure Active Directory kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="0214e-131">You must use the Azure Active Directory to log into your app, not the Microsoft account also shown on this page.</span></span>  
  
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image5.png)

## <a name="create-an-aspnet-application"></a><span data-ttu-id="0214e-132">ASP.NET uygulaması oluşturma</span><span class="sxs-lookup"><span data-stu-id="0214e-132">Create an ASP.NET Application</span></span>

<span data-ttu-id="0214e-133">Aşağıdaki adımları kullanın [için Visual Studio Express 2013 Web](https://www.microsoft.com/download/details.aspx?id=40747)ve gerektirir [Visual Studio 2013 güncelleştirme 3'ü](https://www.microsoft.com/download/details.aspx?id=43721).</span><span class="sxs-lookup"><span data-stu-id="0214e-133">The following steps use [Visual Studio Express 2013 for Web](https://www.microsoft.com/download/details.aspx?id=40747), and requires [Visual Studio 2013 Update 3](https://www.microsoft.com/download/details.aspx?id=43721).</span></span>

1. <span data-ttu-id="0214e-134">Visual Studio'da sırasıyla **dosya** ve ardından **yeni proje**.</span><span class="sxs-lookup"><span data-stu-id="0214e-134">In Visual Studio, click **File** and then **New Project**.</span></span> <span data-ttu-id="0214e-135">Üzerinde **yeni proje** iletişim, Visual C# Web projesi sol menüden ve tıklayın select **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="0214e-135">On the **New Project** dialog, select the Visual C# Web project from the left menu and click **OK**.</span></span> <span data-ttu-id="0214e-136">İşaretini isteyebilirsiniz **projeye Application Insights Ekle** uygulamanız için işlevselliği istemiyorsanız.</span><span class="sxs-lookup"><span data-stu-id="0214e-136">You may also want to uncheck the **Add Application Insights to Project** if you don't want the functionality for your application.</span></span>
2. <span data-ttu-id="0214e-137">İçinde **yeni ASP.NET projesi** iletişim kutusunda **MVC**ve ardından **kimlik doğrulamayı Değiştir**.</span><span class="sxs-lookup"><span data-stu-id="0214e-137">In the **New ASP.NET Project** dialog, select **MVC**, and then click **Change Authentication**.</span></span>   
  
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image6.png)
3. <span data-ttu-id="0214e-138">Üzerinde **kimlik doğrulamayı Değiştir** iletişim kutusunda **Kurumsal hesaplar**.</span><span class="sxs-lookup"><span data-stu-id="0214e-138">On the **Change Authentication** dialog, select **Organizational Accounts**.</span></span> <span data-ttu-id="0214e-139">Bu seçeneklerin yanı sıra otomatik olarak Azure AD ile uygulamanızı kaydetme Azure AD ile tümleştirmek için uygulamanızı otomatik olarak yapılandırmak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="0214e-139">These options can be used to automatically register your application with Azure AD as well as automatically configure your application to integrate with Azure AD.</span></span> <span data-ttu-id="0214e-140">Kullanmak zorunda değilsiniz **kimlik doğrulamayı Değiştir** kaydetmek ve uygulamanız, ancak yapılandırmak için iletişim kılar çok daha kolay.</span><span class="sxs-lookup"><span data-stu-id="0214e-140">You don't have to use the **Change Authentication** dialog to register and configure your application, but it makes it much easier.</span></span> <span data-ttu-id="0214e-141">Visual Studio 2012 örneğin kullanıyorsanız, yine de el ile Azure Yönetim Portalı'nda uygulama kaydeder ve Azure AD ile tümleştirme yapılandırmasını güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="0214e-141">If you are using Visual Studio 2012 for example, you can still manually register the application in the Azure Management Portal and update its configuration to integrate with Azure AD.</span></span>  
   <span data-ttu-id="0214e-142">Aşağı açılan menüler seçin **bulut - tek bir kurumun** ve **çoklu oturum açma, dizin verilerini okuma**.</span><span class="sxs-lookup"><span data-stu-id="0214e-142">In the drop-down menus, select **Cloud - Single Organization** and **Single Sign On, Read directory data**.</span></span> <span data-ttu-id="0214e-143">Örneğin (görüntülerinde aşağıdaki) Azure AD dizininiz için etki alanını girin *aricka0yahoo.onmicrosoft.com*ve ardından **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="0214e-143">Enter the domain for your Azure AD directory, for example (in the images below) *aricka0yahoo.onmicrosoft.com*, and then click **OK**.</span></span> <span data-ttu-id="0214e-144">Azure portalındaki varsayılan dizin için etki alanları sekmesinden etki alanı adı alabilirsiniz (sonraki resim aşağıya bakın).</span><span class="sxs-lookup"><span data-stu-id="0214e-144">You can get the domain name from the Domains tab for the Default Directory on the azure portal (see the next image down).</span></span>   
  
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image7.png)  
  
   <span data-ttu-id="0214e-145">Aşağıdaki resim Azure portalından etki alanı adını gösterir.</span><span class="sxs-lookup"><span data-stu-id="0214e-145">The following image shows the domain name from the Azure portal.</span></span>  
  
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image8.png)  

    > [!NOTE]
    > <span data-ttu-id="0214e-146">İsteğe bağlı olarak Azure AD içinde tıklayarak kaydedilecek uygulama kimliği URI'si yapılandırabilirsiniz **diğer seçenekler**.</span><span class="sxs-lookup"><span data-stu-id="0214e-146">You can optionally configure the Application ID URI that will be registered in Azure AD by clicking **More Options**.</span></span> <span data-ttu-id="0214e-147">Uygulama Kimliği URI'si Azure AD'de kayıtlı ve Azure AD ile iletişim kurarken kendini tanıtmak için uygulama tarafından kullanılan bir uygulama için benzersiz tanıtıcıdır.</span><span class="sxs-lookup"><span data-stu-id="0214e-147">The App ID URI is the unique identifier for an application, which is registered in Azure AD and used by the application to identify itself when communicating with Azure AD.</span></span> <span data-ttu-id="0214e-148">Uygulama Kimliği URI'si ve diğer özellikleri kayıtlı uygulamalar hakkında daha fazla bilgi için bkz: [bu konuda](https://msdn.microsoft.com/library/azure/dn499820.aspx#BKMK_Registering).</span><span class="sxs-lookup"><span data-stu-id="0214e-148">For more information about the App ID URI and other properties of registered applications, see [this topic](https://msdn.microsoft.com/library/azure/dn499820.aspx#BKMK_Registering).</span></span> <span data-ttu-id="0214e-149">Uygulama Kimliği URI'si alan altında onay kutusunu tıklatarak, ayrıca varolan bir kayıt aynı uygulama kimliği URI'si kullanan Azure AD'de üzerine yazmayı seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0214e-149">By clicking the checkbox below the App ID URI field, you can also choose to overwrite an existing registration in Azure AD that uses the same App ID URI.</span></span>
4. <span data-ttu-id="0214e-150">' I tıklattıktan sonra **Tamam**, bir oturum açma iletişim kutusu görünür ve bir genel yönetici hesabı (aboneliğinizle ilişkili Microsoft hesabı değil) kullanarak oturum açmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="0214e-150">After clicking **OK**, a sign-in dialog will appear, and you'll need to sign in using a Global Administrator account (not the Microsoft account associated with your subscription).</span></span> <span data-ttu-id="0214e-151">Daha önce oluşturduğunuz yeni bir yönetici hesabı, parolayı değiştirmek ve yeni parolayı kullanarak yeniden oturum gerekecek.</span><span class="sxs-lookup"><span data-stu-id="0214e-151">If you created a new Administrator account earlier, you'll be required to change the password and then sign in again using the new password.</span></span>   
  
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image9.png)
5. <span data-ttu-id="0214e-152">Başarıyla kimlik doğruladınız sonra **yeni ASP.NET projesi** iletişim kutusu, kimlik doğrulaması seçeneği Göster (**kuruluş** ) ve yeni uygulama burada olacaktır directory (kayıtlı*aricka0yahoo.onmicrosoft.com* aşağıdaki görüntüde).</span><span class="sxs-lookup"><span data-stu-id="0214e-152">After you've successfully authenticated, the **New ASP.NET Project** dialog will show your authentication choice (**Organizational** ) and the directory where the new application will be registered (*aricka0yahoo.onmicrosoft.com* in the image below).</span></span> <span data-ttu-id="0214e-153">Bu bilgiler etiketli onay kutusunu işaretleyin **bulutta Barındır**.</span><span class="sxs-lookup"><span data-stu-id="0214e-153">Below this information, select the checkbox labeled **Host in the cloud**.</span></span> <span data-ttu-id="0214e-154">Bu onay kutusunu seçtiyseniz proje Azure web uygulaması sağlanacak ve daha sonra kolayca yayımlamak için etkinleştirilir.</span><span class="sxs-lookup"><span data-stu-id="0214e-154">If this checkbox is selected, the project will be provisioned as an Azure web app and will be enabled for easy publishing later.</span></span> <span data-ttu-id="0214e-155">**Tamam**'ı tıklatın.</span><span class="sxs-lookup"><span data-stu-id="0214e-155">Click **OK**.</span></span>   
  
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image10.png)
6. <span data-ttu-id="0214e-156">**Azure Web sitesini yapılandırın** iletişim kutusu görünecektir, otomatik olarak oluşturulan site adı ve bölge kullanma.</span><span class="sxs-lookup"><span data-stu-id="0214e-156">The **Configure Azure Website** dialog will appear, using an auto-generated site name and region.</span></span> <span data-ttu-id="0214e-157">Ayrıca, şu anda içine iletişim kutusunda oturum açtığınız hesabı unutmayın.</span><span class="sxs-lookup"><span data-stu-id="0214e-157">Also note the account you're currently signed into in the dialog.</span></span> <span data-ttu-id="0214e-158">Bu hesap, Azure aboneliğinizin, bağlı olduğundan emin olmak istiyoruz genellikle bir Microsoft hesabı.</span><span class="sxs-lookup"><span data-stu-id="0214e-158">You want to make sure that this account is the one that your Azure subscription is attached to, typically a Microsoft account.</span></span>

    > [!NOTE]
    > <span data-ttu-id="0214e-159">Bu proje bir veritabanı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="0214e-159">This project requires a database.</span></span> <span data-ttu-id="0214e-160">Mevcut veritabanlarından birini seçin veya yeni bir tane oluşturmak gerekir.</span><span class="sxs-lookup"><span data-stu-id="0214e-160">You need to select one of your existing databases, or create a new one.</span></span> <span data-ttu-id="0214e-161">Bir veritabanı proje bir yerel veritabanı dosyası zaten bir miktarda kimlik doğrulaması yapılandırma verilerini depolamak için kullandığı için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="0214e-161">A database is required because the project already uses a local database file to store a small amount of authentication configuration data.</span></span> <span data-ttu-id="0214e-162">Bir Azure Web sitesine uygulamayı dağıttığınızda, bu veritabanı bulutta erişilebilir olan bir seçim yapmanız için dağıtım ile paket değil.</span><span class="sxs-lookup"><span data-stu-id="0214e-162">When you deploy the application to an Azure Website, this database isn't packaged with the deployment, so you need to choose one that's accessible in the cloud.</span></span> <span data-ttu-id="0214e-163">**Tamam**'ı tıklatın.</span><span class="sxs-lookup"><span data-stu-id="0214e-163">Click **OK**.</span></span>

    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image11.png)
7. <span data-ttu-id="0214e-164">Proje oluşturulur ve kimlik doğrulama seçeneklerini ve web uygulama seçenekleri proje ile otomatik olarak yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="0214e-164">The project will be created, and your authentication options and web app options will be automatically configured with the project.</span></span> <span data-ttu-id="0214e-165">Bu işlem tamamlandıktan sonra projeyi yerel olarak basarak çalıştırmak **^ F5**.</span><span class="sxs-lookup"><span data-stu-id="0214e-165">Once this process has completed, run the project locally by pressing **^F5**.</span></span> <span data-ttu-id="0214e-166">Kuruluş hesabınızı kullanarak oturum açmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="0214e-166">You will be required to sign in using your organizational account.</span></span> <span data-ttu-id="0214e-167">Daha önce oluşturduğunuz hesap için kullanıcı adı ve parola sağlayın ve tıklatın **oturum**.</span><span class="sxs-lookup"><span data-stu-id="0214e-167">Provide the username and password for the account you created earlier and click **Sign in**.</span></span>   
  
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image12.png)
8. <span data-ttu-id="0214e-168">Sonra başarılı oturum açma sayfasının sağ üst köşedeki kullanıcı adı görüntüleyerek doğruladınız ASP.NET sitesi gösterilir.</span><span class="sxs-lookup"><span data-stu-id="0214e-168">After successful sign in, the ASP.NET site will show that you've authenticated by displaying the username in the top right corner of the page.</span></span>  
  
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image13.png)  
  
   <span data-ttu-id="0214e-169">Hatayı alırsanız:</span><span class="sxs-lookup"><span data-stu-id="0214e-169">If you get the error:</span></span>  
   <span data-ttu-id="0214e-170">Değer null veya boş olamaz.</span><span class="sxs-lookup"><span data-stu-id="0214e-170">Value cannot be null or empty.</span></span> <span data-ttu-id="0214e-171">Parametre adı: linkText</span><span class="sxs-lookup"><span data-stu-id="0214e-171">Parameter name: linkText</span></span>   
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image14.png)  
  
   <span data-ttu-id="0214e-172">bkz: [hata ayıklama](#dbg) öğreticinin sonunda bölüm.</span><span class="sxs-lookup"><span data-stu-id="0214e-172">see the [debug](#dbg) section at the end of the tutorial.</span></span>

## <a name="basics-of-the-graph-api"></a><span data-ttu-id="0214e-173">Grafik API'si temelleri</span><span class="sxs-lookup"><span data-stu-id="0214e-173">Basics of the Graph API</span></span>

<span data-ttu-id="0214e-174">[Grafik API'si](https://msdn.microsoft.com/library/azure/hh974476.aspx) Azure AD dizininizi CRUD ve nesneler üzerinde başka işlemler gerçekleştirmek için kullanılan programlama arabirimi.</span><span class="sxs-lookup"><span data-stu-id="0214e-174">[The Graph API](https://msdn.microsoft.com/library/azure/hh974476.aspx) is the programmatic interface used to perform CRUD and other operations on objects in your Azure AD directory.</span></span> <span data-ttu-id="0214e-175">Visual Studio 2013'te yeni bir proje oluşturma sırasında kimlik doğrulaması için bir kurumsal hesap seçeneği belirlerseniz, uygulamanız zaten grafik API'sini aramak üzere yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="0214e-175">If you select an Organizational Account option for authentication when creating a new project in Visual Studio 2013, your application will already be configured to call the Graph API.</span></span> <span data-ttu-id="0214e-176">Bu bölümde kısaca, grafik API'sini nasıl çalıştığını gösterir.</span><span class="sxs-lookup"><span data-stu-id="0214e-176">This section briefly shows you how the Graph API works.</span></span>

1. <span data-ttu-id="0214e-177">Çalışan uygulamanızda en üstünde oturum açmış kullanıcının adına tıklayın sayfasının sağ.</span><span class="sxs-lookup"><span data-stu-id="0214e-177">In your running application, click on the name of the signed-in user at the top right of the page.</span></span> <span data-ttu-id="0214e-178">Bu sizi bir eylem giriş denetleyicisinde kullanıcı profili sayfasına götürür.</span><span class="sxs-lookup"><span data-stu-id="0214e-178">This will take you to the User Profile page, which is an action on the Home Controller.</span></span> <span data-ttu-id="0214e-179">Tablo yönetici hesabı hakkında daha önce oluşturduğunuz kullanıcı bilgilerini içeren fark edeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="0214e-179">You'll notice that the table contains user information about the administrator account you created earlier.</span></span> <span data-ttu-id="0214e-180">Bu bilgiler dizininizde depolanır ve grafik API'si Sayfa yüklediğinde, bu bilgileri almak için çağrılır.</span><span class="sxs-lookup"><span data-stu-id="0214e-180">This information is stored in your directory, and the Graph API is called to retrieve this information when the page loads.</span></span>   
  
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image15.png)
2. <span data-ttu-id="0214e-181">Visual Studio'ya geri dönün ve genişletin **denetleyicileri** klasörünü ve ardından açın **HomeController.cs** dosya.</span><span class="sxs-lookup"><span data-stu-id="0214e-181">Go back to Visual Studio and expand the **Controllers** folder and then open the **HomeController.cs** file.</span></span> <span data-ttu-id="0214e-182">Göreceğiniz bir **UserProfile()** bir belirteç almak ve grafik API'sini çağırmak için kodu içeren eylem.</span><span class="sxs-lookup"><span data-stu-id="0214e-182">You'll see a **UserProfile()** action that contains code to retrieve a token and then call the Graph API.</span></span> <span data-ttu-id="0214e-183">Bu kod, aşağıda yineleniyor:</span><span class="sxs-lookup"><span data-stu-id="0214e-183">This code is duplicated below:</span></span> 

    [!code-csharp[Main](developing-aspnet-apps-with-windows-azure-active-directory/samples/sample1.cs?highlight=22)]

    <span data-ttu-id="0214e-184">Grafik API'si yi çağırmak için önce bir belirteç almak gerekir.</span><span class="sxs-lookup"><span data-stu-id="0214e-184">To call the Graph API, you first need to retrieve a token.</span></span> <span data-ttu-id="0214e-185">Belirteç alındığında, dize değeri grafik API'si için tüm sonraki istekleri için yetkilendirme üst eklenmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="0214e-185">When the token is retrieved, its string value must be appended in the Authorization header for all subsequent requests to the Graph API.</span></span> <span data-ttu-id="0214e-186">Yukarıdaki kodu çoğunu bir belirteç almak için Azure AD kimlik doğrulaması, grafik API'si için arama yapmak için belirteç kullanma ve böylece görünümde sunulan yanıt dönüştürme ayrıntılarını işler.</span><span class="sxs-lookup"><span data-stu-id="0214e-186">Most of the code above handles the details of authenticating to Azure AD to get a token, using the token to make a call to the Graph API, and then transforming the response so that it can be presented in the View.</span></span>

    <span data-ttu-id="0214e-187">Tartışma için en uygun bölümü aşağıdaki vurgulanan çizgidir: `UserProfile profile = JsonConvert.DeserializeObject<UserProfile>(responseString);`.</span><span class="sxs-lookup"><span data-stu-id="0214e-187">The most relevant portion for discussion is the following highlighted line: `UserProfile profile = JsonConvert.DeserializeObject<UserProfile>(responseString);`.</span></span> <span data-ttu-id="0214e-188">Bu satırı JSON yanıtı serisi ve görünümde sunulan kullanıcı adını temsil eder.</span><span class="sxs-lookup"><span data-stu-id="0214e-188">This line represents the name of the user, which has been deserialized from the JSON response and is presented in the View.</span></span>

    <span data-ttu-id="0214e-189">HttpClient kullanarak grafik API'sini aramak ve kendiniz ham verileri işlemek, ancak daha kolay bir yolu kullanmaktır [NuGet kullanılabilir olan grafik istemci Kitaplığı](http://www.nuget.org/packages/Microsoft.Azure.ActiveDirectory.GraphClient/).</span><span class="sxs-lookup"><span data-stu-id="0214e-189">You can call the Graph API using HttpClient and handle the raw data yourself, but an easier way is to use the [Graph Client Library which is available via NuGet](http://www.nuget.org/packages/Microsoft.Azure.ActiveDirectory.GraphClient/).</span></span> <span data-ttu-id="0214e-190">İstemci Kitaplığı ham HTTP istekleri ve döndürülen veri dönüştürme, işler ve .NET ortamında grafik API'si ile çalışmak çok daha kolay hale getirir.</span><span class="sxs-lookup"><span data-stu-id="0214e-190">The Client Library handles the raw HTTP requests and the transformation of the returned data for you, and makes it much easier to work with the Graph API in a .NET environment.</span></span> <span data-ttu-id="0214e-191">İlişkili grafik API'si kod örnekleri görmek [GitHub.](https://github.com/AzureADSamples)</span><span class="sxs-lookup"><span data-stu-id="0214e-191">See the related Graph API code samples on [GitHub.](https://github.com/AzureADSamples)</span></span>

## <a name="deploy-the-application-to-azure"></a><span data-ttu-id="0214e-192">Uygulamayı Azure'a dağıtma</span><span class="sxs-lookup"><span data-stu-id="0214e-192">Deploy the Application to Azure</span></span>

<span data-ttu-id="0214e-193">Aşağıdaki adımları uygulamayı Azure'a dağıtmak nasıl yapacağınızı gösterir.</span><span class="sxs-lookup"><span data-stu-id="0214e-193">The following steps will show you how to deploy the application to Azure.</span></span> <span data-ttu-id="0214e-194">Yalnızca birkaç adımda yayımlanmaya hazır olması için önceki adımlarda, yeni projenizi Azure üzerinde bir web uygulaması ile bağlı.</span><span class="sxs-lookup"><span data-stu-id="0214e-194">In the earlier steps, you connected your new project with a web app on Azure, so it's ready to be published in just a few steps.</span></span>

1. <span data-ttu-id="0214e-195">Visual Studio'da sağ tıklatın ve proje **Yayımla**.</span><span class="sxs-lookup"><span data-stu-id="0214e-195">In Visual Studio, right-click on the project and select **Publish**.</span></span> <span data-ttu-id="0214e-196">**Web'i Yayımla** iletişim kutusu zaten yapılandırılmış her ayarıyla görünecektir.</span><span class="sxs-lookup"><span data-stu-id="0214e-196">The **Publish Web** dialog will appear with each setting already configured.</span></span> <span data-ttu-id="0214e-197">Tıklayın **sonraki** gitmek için düğmesi **ayarları** sayfası.</span><span class="sxs-lookup"><span data-stu-id="0214e-197">Click on the **Next** button to go to the **Settings** page.</span></span> <span data-ttu-id="0214e-198">Kimlik doğrulaması istenebilir; Azure aboneliği hesabınızı (genellikle bir Microsoft hesabı) ve daha önce oluşturduğunuz Kurumsal hesap kullanarak kimlik doğrulaması emin olun.</span><span class="sxs-lookup"><span data-stu-id="0214e-198">You may be prompted to authenticate; make sure you authenticate using your Azure subscription account (typically a Microsoft account) and not the organizational account you created earlier.</span></span>  
  
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image16.png)
2. <span data-ttu-id="0214e-199">Denetleme **kuruluş kimlik doğrulamasını etkinleştir** seçeneği.</span><span class="sxs-lookup"><span data-stu-id="0214e-199">Check the **Enable Organizational Authentication** option.</span></span> <span data-ttu-id="0214e-200">İçinde **etki alanı** alan, dizininiz için etki alanını girin.</span><span class="sxs-lookup"><span data-stu-id="0214e-200">In the **Domain** field, enter the domain for your directory.</span></span> <span data-ttu-id="0214e-201">Gelen **erişim düzeyi** açılan listesinde, select **çoklu oturum açma, dizin verilerini okuma**.</span><span class="sxs-lookup"><span data-stu-id="0214e-201">From the **Access Level** drop-down, select **Single Sign On, Read directory data**.</span></span> <span data-ttu-id="0214e-202">İçinde kullanılan önceki veritabanı zaten doldurulmuş fark edeceksiniz **veritabanları** bölümü.</span><span class="sxs-lookup"><span data-stu-id="0214e-202">You'll notice that the previous database you used is already populated in the **Databases** section.</span></span> <span data-ttu-id="0214e-203">Tıklatın **yayımlama**.</span><span class="sxs-lookup"><span data-stu-id="0214e-203">Click **Publish**.</span></span>  
  
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image17.png)
3. <span data-ttu-id="0214e-204">Visual Studio Web sitenizi dağıtmaya başlar ve ardından yeni bir tarayıcı penceresi görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="0214e-204">Visual Studio will begin deploying your website, and then a new browser window will appear.</span></span> <span data-ttu-id="0214e-205">Dizininiz için bir kez yeniden kimlik doğrulaması istenebilir.</span><span class="sxs-lookup"><span data-stu-id="0214e-205">You may be prompted to authenticate to your directory once again.</span></span> <span data-ttu-id="0214e-206">Kimlik doğruladınız sonra Azure ile ilgili yeni yayımlanan Web sitesine yönlendirildi.</span><span class="sxs-lookup"><span data-stu-id="0214e-206">Once you've authenticated, you'll be redirected to your newly published website on Azure.</span></span>  
  
    ![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image18.png)

<a id="dbg"></a>
## <a name="debugging-the-app"></a><span data-ttu-id="0214e-207">Uygulama hata ayıklama</span><span class="sxs-lookup"><span data-stu-id="0214e-207">Debugging the app</span></span>

<span data-ttu-id="0214e-208">Şu hatayı alırsanız:</span><span class="sxs-lookup"><span data-stu-id="0214e-208">If you get the following error:</span></span>   
 <span data-ttu-id="0214e-209">Değer null veya boş olamaz.</span><span class="sxs-lookup"><span data-stu-id="0214e-209">Value cannot be null or empty.</span></span> <span data-ttu-id="0214e-210">Parametre adı: linkText</span><span class="sxs-lookup"><span data-stu-id="0214e-210">Parameter name: linkText</span></span>   
   
![](developing-aspnet-apps-with-windows-azure-active-directory/_static/image19.png)  
  

<span data-ttu-id="0214e-211">Kodla *görünümler/paylaşılan\\_LoginPartial.cshtml* aşağıdaki dosyasıyla:</span><span class="sxs-lookup"><span data-stu-id="0214e-211">Replace the code in the *Views\Shared\\_LoginPartial.cshtml* file with the following:</span></span>

[!code-cshtml[Main](developing-aspnet-apps-with-windows-azure-active-directory/samples/sample2.cshtml?highlight=1-8,15-16)]

<span data-ttu-id="0214e-212">Uygulama çalıştırdıktan sonra oturum açan kullanıcının "Null kullanıcı" gösteriyorsa, oturumu kapatın ve yeniden daha önce oluşturduğunuz Active Directory hesabıyla oturum açın.</span><span class="sxs-lookup"><span data-stu-id="0214e-212">After running the app, if the logged in user shows "Null User", sign out, and sign back in with the Active Directory account you created earlier.</span></span>

<span data-ttu-id="0214e-213">İzlemek için mükemmel bir öğretici Rick Rainey ait olduğu [derinlemesine bakış: Azure Web siteleri ve kuruluş Azure AD kullanarak kimlik doğrulaması](http://rickrainey.com/2014/08/19/deep-dive-azure-websites-and-organizational-authentication-using-azure-ad/).</span><span class="sxs-lookup"><span data-stu-id="0214e-213">An excellent tutorial to follow is Rick Rainey's [Deep Dive: Azure Websites and Organizational Authentication using Azure AD](http://rickrainey.com/2014/08/19/deep-dive-azure-websites-and-organizational-authentication-using-azure-ad/).</span></span>

## <a name="more-information"></a><span data-ttu-id="0214e-214">Daha fazla bilgi</span><span class="sxs-lookup"><span data-stu-id="0214e-214">More Information</span></span>

- [<span data-ttu-id="0214e-215">Derin Dalış: Azure Web siteleri ve kuruluş Azure AD kullanarak kimlik doğrulaması</span><span class="sxs-lookup"><span data-stu-id="0214e-215">Deep Dive: Azure Websites and Organizational Authentication using Azure AD</span></span>](http://rickrainey.com/2014/08/19/deep-dive-azure-websites-and-organizational-authentication-using-azure-ad/)
- [<span data-ttu-id="0214e-216">Azure AD Graph API genel bakış</span><span class="sxs-lookup"><span data-stu-id="0214e-216">Azure AD Graph API Overview</span></span>](https://msdn.microsoft.com/library/azure/hh974476.aspx)
- [<span data-ttu-id="0214e-217">Azure AD kimlik doğrulama senaryoları</span><span class="sxs-lookup"><span data-stu-id="0214e-217">Authentication Scenarios in Azure AD</span></span>](https://msdn.microsoft.com/library/azure/dn499820.aspx)
- [<span data-ttu-id="0214e-218">Github'da Azure AD kod örnekleri</span><span class="sxs-lookup"><span data-stu-id="0214e-218">Azure AD Code Samples on GitHub</span></span>](https://github.com/AzureADSamples)
