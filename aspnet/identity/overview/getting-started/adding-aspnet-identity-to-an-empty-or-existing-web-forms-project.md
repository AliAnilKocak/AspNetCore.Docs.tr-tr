---
uid: identity/overview/getting-started/adding-aspnet-identity-to-an-empty-or-existing-web-forms-project
title: ASP.NET kimliği boş veya var olan bir Web Forms proje ekleme | Microsoft Docs
author: raquelsa
description: Bu öğretici, bir ASP.NET uygulaması için ASP.NET kimliğini (ASP.NET yeni üyelik sistemi) ekleme gösterir. Yeni bir Web Forms veya MVC oluşturduğunuzda...
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/23/2013
ms.topic: article
ms.assetid: 1cbc0ed2-5bd6-4b62-8d34-4c193dcd8b25
ms.technology: ''
ms.prod: .net-framework
msc.legacyurl: /identity/overview/getting-started/adding-aspnet-identity-to-an-empty-or-existing-web-forms-project
msc.type: authoredcontent
ms.openlocfilehash: 8961e596f0d6cc4810e2439be1ec2915bddb8c78
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/06/2018
---
<a name="adding-aspnet-identity-to-an-empty-or-existing-web-forms-project"></a><span data-ttu-id="76665-104">Proje ekleme ASP.NET kimliği boş veya var olan bir Web Forms</span><span class="sxs-lookup"><span data-stu-id="76665-104">Adding ASP.NET Identity to an Empty or Existing Web Forms Project</span></span>
====================
<span data-ttu-id="76665-105">by [Raquel Soares De Almeida](https://github.com/raquelsa)</span><span class="sxs-lookup"><span data-stu-id="76665-105">by [Raquel Soares De Almeida](https://github.com/raquelsa)</span></span>

> <span data-ttu-id="76665-106">Bu öğretici nasıl ekleneceğini gösterir [ASP.NET Identity](introduction-to-aspnet-identity.md) (ASP.NET yeni üyelik sistemi) için bir ASP.NET uygulaması.</span><span class="sxs-lookup"><span data-stu-id="76665-106">This tutorial shows you how to add [ASP.NET Identity](introduction-to-aspnet-identity.md) (the new membership system for ASP.NET) to an ASP.NET application.</span></span>
> 
> <span data-ttu-id="76665-107">Visual Studio 2013 RTM bireysel hesaplar ile içinde yeni bir Web Forms veya MVC proje oluşturduğunuzda, Visual Studio tüm gerekli paketleri yüklemek ve sizin için tüm gerekli sınıfları ekleyin.</span><span class="sxs-lookup"><span data-stu-id="76665-107">When you create a new Web Forms or MVC project in Visual Studio 2013 RTM with Individual Accounts, Visual Studio will install all the required packages and add all necessary classes for you.</span></span> <span data-ttu-id="76665-108">Bu öğretici, var olan Web Forms projeniz veya yeni bir boş proje için ASP.NET Identity desteği eklemek için adımları gösterecektir.</span><span class="sxs-lookup"><span data-stu-id="76665-108">This tutorial will illustrate the steps to add ASP.NET Identity support to your existing Web Forms project or a new empty project.</span></span> <span data-ttu-id="76665-109">Tüm NuGet paketleri yüklemeniz gerekir ve eklemenize gerek sınıfları anahat.</span><span class="sxs-lookup"><span data-stu-id="76665-109">I will outline all the NuGet packages you need to install, and classes you need to add.</span></span> <span data-ttu-id="76665-110">Örnek Web Forms yeni kullanıcılar kaydetme ve kullanıcı yönetimi ve kimlik doğrulaması için tüm ana giriş noktası API'leri vurgulama sırasında oturum açmayı geçer.</span><span class="sxs-lookup"><span data-stu-id="76665-110">I will go over sample Web Forms for registering new users and logging in while highlighting all main entry point APIs for user management and authentication.</span></span> <span data-ttu-id="76665-111">Bu örnek, ASP.NET Identity varsayılan uygulaması Entity Framework üzerine kurulu SQL veri depolama için kullanır.</span><span class="sxs-lookup"><span data-stu-id="76665-111">This sample will use the ASP.NET Identity default implementation for SQL data storage which is built on Entity Framework.</span></span> <span data-ttu-id="76665-112">Bu öğretici, SQL veritabanı için yerel veritabanı kullanacağız.</span><span class="sxs-lookup"><span data-stu-id="76665-112">This tutorial, we will use LocalDB for the SQL database.</span></span>
> 
> <span data-ttu-id="76665-113">Bu öğretici Raquel Soares De Almeida ve Rick Anderson tarafından yazılan ( [ @RickAndMSFT ](https://twitter.com/#!/RickAndMSFT) ).</span><span class="sxs-lookup"><span data-stu-id="76665-113">This tutorial was written by Raquel Soares De Almeida and Rick Anderson ( [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT) ).</span></span>


## <a name="getting-started-aspnet-identity"></a><span data-ttu-id="76665-114">ASP.NET Identity Başlarken</span><span class="sxs-lookup"><span data-stu-id="76665-114">Getting Started ASP.NET Identity</span></span>

1. <span data-ttu-id="76665-115">Başlangıç yüklenmesi ve çalıştırılması [için Visual Studio Express 2013 Web](https://go.microsoft.com/fwlink/?LinkId=299058) veya [Visual Studio 2013](https://go.microsoft.com/fwlink/?LinkId=306566).</span><span class="sxs-lookup"><span data-stu-id="76665-115">Start by installing and running [Visual Studio Express 2013 for Web](https://go.microsoft.com/fwlink/?LinkId=299058) or [Visual Studio 2013](https://go.microsoft.com/fwlink/?LinkId=306566).</span></span>
2. <span data-ttu-id="76665-116">Tıklatın **yeni proje** başından sayfa veya menü ve kullanabilirsiniz seçin **dosya**ve ardından **yeni proje**.</span><span class="sxs-lookup"><span data-stu-id="76665-116">Click **New Project** from the Start page, or you can use the menu and select **File**, and then **New Project**.</span></span>
3. <span data-ttu-id="76665-117">Seçin **Visual C# i** n sol bölmede, ardından **Web** ve ardından **ASP.NET Web uygulaması**.</span><span class="sxs-lookup"><span data-stu-id="76665-117">Select **Visual C# i** n the left pane, then **Web** and then select **ASP.NET Web Application**.</span></span> <span data-ttu-id="76665-118">Projeniz "WebFormsIdentity" olarak adlandırın ve ardından **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="76665-118">Name your project "WebFormsIdentity" and then click **OK**.</span></span>   
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image1.png)
4. <span data-ttu-id="76665-119">İçinde **yeni ASP.NET projesi** iletişim kutusunda **boş** şablonu.</span><span class="sxs-lookup"><span data-stu-id="76665-119">In the **New ASP.NET Project** dialog, select the **Empty** template.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image2.png)  
  
   <span data-ttu-id="76665-120">Bildirim **kimlik doğrulamayı Değiştir** düğmesi devre dışıdır ve bu şablonda hiçbir kimlik doğrulama desteği sağlanır.</span><span class="sxs-lookup"><span data-stu-id="76665-120">Notice the **Change Authentication** button is disabled and no authentication support is provided in this template.</span></span> <span data-ttu-id="76665-121">Web Forms, MVC ve Web API şablonları için kimlik doğrulama yaklaşımını seçmenize olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="76665-121">The Web Forms, MVC and Web API templates allow you to select the authentication approach.</span></span> <span data-ttu-id="76665-122">Daha fazla bilgi için bkz: [genel bakış kimlik doğrulamasının](../../../visual-studio/overview/2013/creating-web-projects-in-visual-studio.md#auth) .</span><span class="sxs-lookup"><span data-stu-id="76665-122">For more information, see [Overview of Authentication](../../../visual-studio/overview/2013/creating-web-projects-in-visual-studio.md#auth) .</span></span>

## <a name="adding-identity-packages-to-your-app"></a><span data-ttu-id="76665-123">Uygulamanıza Kimlik paketleri ekleme</span><span class="sxs-lookup"><span data-stu-id="76665-123">Adding Identity Packages to your App</span></span>

<span data-ttu-id="76665-124">Çözüm Gezgini'nde, projenize sağ tıklayın ve seçin **NuGet paketlerini Yönet**.</span><span class="sxs-lookup"><span data-stu-id="76665-124">In Solution Explorer, right-click your project and select **Manage NuGet Packages**.</span></span> <span data-ttu-id="76665-125">Arama metin kutusuna iletişim kutusuna "*Identity.E*".</span><span class="sxs-lookup"><span data-stu-id="76665-125">In the search text box dialog, type "*Identity.E*".</span></span> <span data-ttu-id="76665-126">Bu paket için Yükle'yi tıklatın.</span><span class="sxs-lookup"><span data-stu-id="76665-126">Click install for this package.</span></span>   
  
![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image3.png)  
  
<span data-ttu-id="76665-127">Bu paket bağımlılık paketleri yükler Not: EntityFramework ve Microsoft ASP.NET Identity Core.</span><span class="sxs-lookup"><span data-stu-id="76665-127">Note that this package will install the dependency packages: EntityFramework and Microsoft ASP.NET Identity Core.</span></span>

## <a name="adding-web-forms-to-register-users"></a><span data-ttu-id="76665-128">Web Forms kullanıcıları kaydetme ekleme</span><span class="sxs-lookup"><span data-stu-id="76665-128">Adding Web Forms to Register Users</span></span>

1. <span data-ttu-id="76665-129">İçinde **Çözüm Gezgini**, projenize sağ tıklatın ve **Ekle**ve ardından **Web formu**.</span><span class="sxs-lookup"><span data-stu-id="76665-129">In **Solution Explorer**, right-click your project and click **Add**, and then **Web Form**.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image4.png)
2. <span data-ttu-id="76665-130">İçinde **öğesi için ad belirtmek** iletişim kutusunda, yeni bir web formu adı **kaydetmek**ve ardından **Tamam**</span><span class="sxs-lookup"><span data-stu-id="76665-130">In the **Specify Name for Item** dialog box, name the new web form **Register**, and then click **OK**</span></span>
3. <span data-ttu-id="76665-131">Oluşturulan biçimlendirmede Değiştir *Register.aspx* aşağıdaki kod ile dosya.</span><span class="sxs-lookup"><span data-stu-id="76665-131">Replace the markup in the generated *Register.aspx* file with the code below.</span></span> <span data-ttu-id="76665-132">Kod değişiklikleri vurgulanır.</span><span class="sxs-lookup"><span data-stu-id="76665-132">The code changes are highlighted.</span></span>   

    [!code-aspx[Main](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/samples/sample1.aspx?highlight=9,12-40)]

    > [!NOTE]
    > <span data-ttu-id="76665-133">Bu yalnızca bir Basitleştirilmiş sürümüdür *Register.aspx* yeni bir ASP.NET Web Forms projesi oluşturduğunuzda, oluşturduğunuz dosya.</span><span class="sxs-lookup"><span data-stu-id="76665-133">This is just a simplified version of the *Register.aspx* file that is created when you create a new ASP.NET Web Forms project.</span></span> <span data-ttu-id="76665-134">Yukarıdaki biçimlendirme form alanlarını ve yeni bir kullanıcı kaydı için bir düğme ekler.</span><span class="sxs-lookup"><span data-stu-id="76665-134">The markup above adds form fields and a button to register a new user.</span></span>
4. <span data-ttu-id="76665-135">Açık *Register.aspx.cs* dosya ve dosyasının içeriğini aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="76665-135">Open the *Register.aspx.cs* file and replace the contents of the file with the following code:</span></span>

    [!code-csharp[Main](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/samples/sample2.cs)]

    > [!NOTE] 
    > 
    > 1. <span data-ttu-id="76665-136">Yukarıdaki kodu basitleştirilmiş bir sürümünü *Register.aspx.cs* yeni bir ASP.NET Web Forms projesi oluşturduğunuzda, oluşturduğunuz dosya.</span><span class="sxs-lookup"><span data-stu-id="76665-136">The code above is a simplified version of the *Register.aspx.cs* file that is created when you create a new ASP.NET Web Forms project.</span></span>
    > 2. <span data-ttu-id="76665-137">*IdentityUser* sınıftır varsayılan EntityFramework uygulaması *Iuser* arabirimi.</span><span class="sxs-lookup"><span data-stu-id="76665-137">The *IdentityUser* class is the default EntityFramework implementation of the *IUser* interface.</span></span> <span data-ttu-id="76665-138">*Iuser* ASP.NET Identity Core üzerinde bir kullanıcı için en küçük arabirim bir arabirimdir.</span><span class="sxs-lookup"><span data-stu-id="76665-138">*IUser* interface is the minimal interface for a user on ASP.NET Identity Core.</span></span>
    > 3. <span data-ttu-id="76665-139">*UserStore* sınıfı bir kullanıcı deposunun varsayılan EntityFramework uygulamasıdır.</span><span class="sxs-lookup"><span data-stu-id="76665-139">The *UserStore* class is the default EntityFramework implementation of a user store.</span></span> <span data-ttu-id="76665-140">Bu sınıf ASP.NET Identity Core'nın en az arabirimlerini uygular: *Iuserstore*, *Iuserloginstore*, *Iuserclaimstore* ve *Iuserrolestore* .</span><span class="sxs-lookup"><span data-stu-id="76665-140">This class implements the ASP.NET Identity Core's minimal interfaces: *IUserStore*, *IUserLoginStore*, *IUserClaimStore* and *IUserRoleStore*.</span></span>
    > 4. <span data-ttu-id="76665-141">*UserManager* sınıfı çıkarır kullanıcıyla ilgili değişiklikler otomatik olarak kaydedecek API'ler *UserStore*.</span><span class="sxs-lookup"><span data-stu-id="76665-141">The *UserManager* class exposes user related APIs which will automatically save changes to the *UserStore*.</span></span>
    > 5. <span data-ttu-id="76665-142">*IdentityResult* sınıfı, bir kimlik işleminin sonucunu temsil eder.</span><span class="sxs-lookup"><span data-stu-id="76665-142">The *IdentityResult* class represents the result of an identity operation.</span></span>
5. <span data-ttu-id="76665-143">İçinde **Çözüm Gezgini**, projenize sağ tıklatın ve **Ekle**, **ASP.NET klasörü Ekle** ve ardından **uygulama\_veri**.</span><span class="sxs-lookup"><span data-stu-id="76665-143">In **Solution Explorer**, right-click your project and click **Add**, **Add ASP.NET Folder** and then **App\_Data**.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image5.png)
6. <span data-ttu-id="76665-144">Açık *Web.config* dosya ve kullanıcı bilgilerini depolamak için kullanacağız veritabanı için bir bağlantı dizesi girişi ekleyin.</span><span class="sxs-lookup"><span data-stu-id="76665-144">Open the *Web.config* file and add a connection string entry for the database we will use to store user information.</span></span> <span data-ttu-id="76665-145">Veritabanı çalışma zamanında kimlik varlıklar için EntityFramework tarafından oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="76665-145">The database will be created at runtime by EntityFramework for the Identity entities.</span></span> <span data-ttu-id="76665-146">Bağlantı dizesi için yeni bir Web Forms projesi oluşturduğunuzda, sizin için oluşturulan bir benzer.</span><span class="sxs-lookup"><span data-stu-id="76665-146">The connection string is similar to one created for you when you create a new Web Forms project.</span></span> <span data-ttu-id="76665-147">Vurgulanmış kodu eklemeniz gereken biçimlendirmeyi gösterir:</span><span class="sxs-lookup"><span data-stu-id="76665-147">The highlighted code shows the markup you should add:</span></span>

    [!code-xml[Main](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/samples/sample3.xml?highlight=11-14)]
    
    > [!NOTE] 
    > <span data-ttu-id="76665-148">Visual Studio 2015 veya sonraki sürümlerde, yerini `(localdb)\v11.0` ile `(localdb)\MSSQLLocalDB` bağlantı dizesi içinde.</span><span class="sxs-lookup"><span data-stu-id="76665-148">For Visual Studio 2015 or higher, replace `(localdb)\v11.0` with `(localdb)\MSSQLLocalDB` in your connection string.</span></span>
    
7. <span data-ttu-id="76665-149">Dosyasını sağ tıklatın *Register.aspx* proje ve seçin **Başlangıç Sayfası Ayarla**.</span><span class="sxs-lookup"><span data-stu-id="76665-149">Right click file *Register.aspx* in your project and select **Set as Start Page**.</span></span> <span data-ttu-id="76665-150">Derleme ve web uygulamasını çalıştırmak için Ctrl + F5 tuşuna basın.</span><span class="sxs-lookup"><span data-stu-id="76665-150">Press Ctrl + F5 to build and run the web application.</span></span> <span data-ttu-id="76665-151">Yeni bir kullanıcı adı ve parola girin ve ardından tıklatın **kaydetmek**.</span><span class="sxs-lookup"><span data-stu-id="76665-151">Enter a new user name and password and then click on **Register**.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image6.png)  

    > [!NOTE]
    > <span data-ttu-id="76665-152">ASP.NET kimlik doğrulama desteği vardır ve bu örnekte, kullanıcı ve parola varsayılan davranış doğrulayabilirsiniz kimlik çekirdek paketinden gelen doğrulayıcıları.</span><span class="sxs-lookup"><span data-stu-id="76665-152">ASP.NET Identity has support for validation and in this sample you can verify the default behavior on User and Password validators that come from the Identity Core package.</span></span> <span data-ttu-id="76665-153">Kullanıcı için varsayılan doğrulayıcı (`UserValidator`) özelliğine `AllowOnlyAlphanumericUserNames` ayarlamak varsayılan değer olan `true`.</span><span class="sxs-lookup"><span data-stu-id="76665-153">The default validator for User (`UserValidator`) has a property `AllowOnlyAlphanumericUserNames` that has default value set to `true`.</span></span> <span data-ttu-id="76665-154">Parola için varsayılan doğrulayıcı (`MinimumLengthValidator`) Bu parolaya sahip en az 6 karakterden sağlar.</span><span class="sxs-lookup"><span data-stu-id="76665-154">The default validator for Password (`MinimumLengthValidator`) ensures that password has at least 6 characters.</span></span> <span data-ttu-id="76665-155">Bu doğrulayıcıları üzerinde özelliklerdir `UserManager` , geçersiz kılınmış özel doğrulama sahip olmak istiyorsanız</span><span class="sxs-lookup"><span data-stu-id="76665-155">These validators are properties on `UserManager` that can be overridden if you want to have custom validation,</span></span>

## <a name="verifying-the-localdb-identity-database-and-tables-generated-by-entity-framework"></a><span data-ttu-id="76665-156">Yerel veritabanı kimliği veritabanında ve Entity Framework tarafından oluşturulan tabloların doğrulanıyor</span><span class="sxs-lookup"><span data-stu-id="76665-156">Verifying the LocalDb Identity Database and Tables Generated by Entity Framework</span></span>

1. <span data-ttu-id="76665-157">İçinde **Görünüm** menüsünde tıklatın **Sunucu Gezgini**.</span><span class="sxs-lookup"><span data-stu-id="76665-157">In the **View** menu, click **Server Explorer**.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image7.png)
2. <span data-ttu-id="76665-158">Genişletme **DefaultConnection (WebFormsIdentity)**, genişletin **tabloları**, sağ tıklatın **AspNetUsers** tıklatıp **tablo verileri Göster**.</span><span class="sxs-lookup"><span data-stu-id="76665-158">Expand **DefaultConnection (WebFormsIdentity)**, expand **Tables**, right click **AspNetUsers** and click **Show Table Data**.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image8.png)  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image9.png)

## <a name="configuring-the-application-for-owin-authentication"></a><span data-ttu-id="76665-159">OWIN kimlik doğrulaması için uygulamayı yapılandırma</span><span class="sxs-lookup"><span data-stu-id="76665-159">Configuring the application for OWIN authentication</span></span>

<span data-ttu-id="76665-160">Bu noktada yalnızca kullanıcılar oluşturmak için destek ekledik.</span><span class="sxs-lookup"><span data-stu-id="76665-160">At this point we have only added support for creating users.</span></span> <span data-ttu-id="76665-161">Şimdi, size bir kullanıcı oturum açma kimlik doğrulaması nasıl ekleyebiliriz göstermek için adımıdır.</span><span class="sxs-lookup"><span data-stu-id="76665-161">Now, we are going to demonstrate how we can add authentication to login a user.</span></span> <span data-ttu-id="76665-162">ASP.NET Identity Microsoft OWIN kimlik doğrulaması ara yazılımı için form kimlik doğrulaması kullanır.</span><span class="sxs-lookup"><span data-stu-id="76665-162">ASP.NET Identity uses Microsoft OWIN Authentication middleware for forms authentication.</span></span> <span data-ttu-id="76665-163">OWIN tanımlama bilgisi kimlik doğrulamasını bir tanımlama bilgisi ve barındırılan framework tarafından kullanılan tabanlı kimlik doğrulama mekanizması talep [OWIN](https://msdn.microsoft.com/magazine/dn451439.aspx) veya IIS.</span><span class="sxs-lookup"><span data-stu-id="76665-163">The OWIN Cookie Authentication is a cookie and claims based authentication mechanism that can be used by any framework hosted on [OWIN](https://msdn.microsoft.com/magazine/dn451439.aspx) or IIS.</span></span> <span data-ttu-id="76665-164">Bu model ile aynı kimlik doğrulama paketlerine ASP.NET MVC ve Web Forms dahil olmak üzere birden çok çerçeveyi kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="76665-164">With this model, the same authentication packages can be used across multiple frameworks including ASP.NET MVC and Web Forms.</span></span> <span data-ttu-id="76665-165">Proje Katana ve bir ana bilgisayar belirsiz bakın ara yazılımı çalıştırma hakkında daha fazla bilgi için [Katana proje ile çalışmaya başlama](https://msdn.microsoft.com/magazine/dn451439.aspx).</span><span class="sxs-lookup"><span data-stu-id="76665-165">For more information on project Katana and how to run middleware in a host agnostic see [Getting Started with the Katana Project](https://msdn.microsoft.com/magazine/dn451439.aspx).</span></span>

## <a name="installing-authentication-packages-to-your-application"></a><span data-ttu-id="76665-166">Uygulamanız için kimlik doğrulama paketlerini yükleme</span><span class="sxs-lookup"><span data-stu-id="76665-166">Installing authentication packages to your application</span></span>

1. <span data-ttu-id="76665-167">Çözüm Gezgini'nde, projenize sağ tıklayın ve seçin **NuGet paketlerini Yönet**.</span><span class="sxs-lookup"><span data-stu-id="76665-167">In Solution Explorer, right-click your project and select **Manage NuGet Packages**.</span></span> <span data-ttu-id="76665-168">Arama metin kutusuna iletişim kutusuna "*Identity.Owin*".</span><span class="sxs-lookup"><span data-stu-id="76665-168">In the search text box dialog, type "*Identity.Owin*".</span></span> <span data-ttu-id="76665-169">Bu paket için Yükle'yi tıklatın.</span><span class="sxs-lookup"><span data-stu-id="76665-169">Click install for this package.</span></span>   
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image10.png)
2. <span data-ttu-id="76665-170">Paket için arama ***Microsoft.Owin.Host.SystemWeb*** ve yükleyin.</span><span class="sxs-lookup"><span data-stu-id="76665-170">Search for package ***Microsoft.Owin.Host.SystemWeb*** and install it.</span></span>   

    > [!NOTE]
    > <span data-ttu-id="76665-171">**Microsoft.ASPNET.Identity.owin** paket yönetmek ve ASP.NET Identity Core paketleri tarafından kullanılacak OWIN kimlik doğrulaması ara yazılımı yapılandırmak için OWIN uzantısı sınıfları kümesi içerir.</span><span class="sxs-lookup"><span data-stu-id="76665-171">The **Microsoft.Aspnet.Identity.Owin** package contains a set of OWIN extension classes to manage and configure OWIN authentication middleware to be consumed by ASP.NET Identity Core packages.</span></span>  
    > <span data-ttu-id="76665-172">**Microsoft.Owin.Host.SystemWeb** paket, ASP.NET istek ardışık düzenini kullanarak IIS üzerinde çalıştırmak OWIN tabanlı uygulamalar sağlayan bir OWIN sunucusu içeriyor.</span><span class="sxs-lookup"><span data-stu-id="76665-172">The **Microsoft.Owin.Host.SystemWeb** package contains an OWIN server that enables OWIN-based applications to run on IIS using the ASP.NET request pipeline.</span></span> <span data-ttu-id="76665-173">Daha fazla bilgi için bkz: [OWIN ara yazılımı IIS tümleşik ardışık düzen](../../../aspnet/overview/owin-and-katana/owin-middleware-in-the-iis-integrated-pipeline.md).</span><span class="sxs-lookup"><span data-stu-id="76665-173">For more information see [OWIN Middleware in the IIS integrated pipeline](../../../aspnet/overview/owin-and-katana/owin-middleware-in-the-iis-integrated-pipeline.md).</span></span>

## <a name="adding-owin-startup-and-authentication-configuration-classes"></a><span data-ttu-id="76665-174">OWIN başlangıç ve kimlik doğrulaması yapılandırma sınıfları ekleme</span><span class="sxs-lookup"><span data-stu-id="76665-174">Adding OWIN Startup and Authentication Configuration Classes</span></span>

1. <span data-ttu-id="76665-175">İçinde **Çözüm Gezgini**, projenize sağ tıklayın, **Ekle**ve ardından **Yeni Öğe Ekle**.</span><span class="sxs-lookup"><span data-stu-id="76665-175">In **Solution Explorer**, right-click your project, click **Add**, and then **Add New Item**.</span></span> <span data-ttu-id="76665-176">Arama metin kutusuna iletişim kutusuna "*owın*".</span><span class="sxs-lookup"><span data-stu-id="76665-176">In the search text box dialog, type "*owin*".</span></span> <span data-ttu-id="76665-177">Sınıf adı "*başlangıç*" tıklatıp **Ekle**.</span><span class="sxs-lookup"><span data-stu-id="76665-177">Name the class "*Startup*" and click **Add**.</span></span>   
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image11.png)
2. <span data-ttu-id="76665-178">Haline dosyasında OWIN tanımlama bilgisi kimlik doğrulamasını yapılandırmak için aşağıda gösterilen vurgulanmış kodu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="76665-178">In the Startup.cs file, add the highlighted code shown below to configure OWIN cookie authentication.</span></span>

    [!code-csharp[Main](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/samples/sample4.cs?highlight=1,3,15-19)]

    > [!NOTE]
    > <span data-ttu-id="76665-179">Bu sınıf içerir `OwinStartup` OWIN başlangıç sınıfı belirtmek için öznitelik.</span><span class="sxs-lookup"><span data-stu-id="76665-179">This class contains the `OwinStartup` attribute for specifying the OWIN startup class.</span></span> <span data-ttu-id="76665-180">Her OWIN uygulama bileşenleri uygulama ardışık düzeni için belirttiğiniz başlangıç sınıfı vardır.</span><span class="sxs-lookup"><span data-stu-id="76665-180">Every OWIN application has a startup class where you specify components for the application pipeline.</span></span> <span data-ttu-id="76665-181">Bkz: [OWIN başlangıç sınıfı algılama](../../../aspnet/overview/owin-and-katana/owin-startup-class-detection.md) bu modeli hakkında daha fazla bilgi için.</span><span class="sxs-lookup"><span data-stu-id="76665-181">See [OWIN Startup Class Detection](../../../aspnet/overview/owin-and-katana/owin-startup-class-detection.md) for more info on this model.</span></span>

## <a name="adding-web-forms-for-registering-and-logging-in-users"></a><span data-ttu-id="76665-182">Web Forms kaydetme ve kullanıcılar oturum için ekleme</span><span class="sxs-lookup"><span data-stu-id="76665-182">Adding Web Forms for Registering and Logging in Users</span></span>

1. <span data-ttu-id="76665-183">Açık *Register.cs* dosya ve kayıt başarılı olduğunda, kullanıcı oturum aşağıdaki kodu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="76665-183">Open the *Register.cs* file and add the following code which will log in the user when registration succeeds.</span></span> <span data-ttu-id="76665-184">Değişiklikler, aşağıda vurgulanır.</span><span class="sxs-lookup"><span data-stu-id="76665-184">The changes are highlighted below.</span></span>

    [!code-csharp[Main](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/samples/sample5.cs)]

    > [!NOTE] 
    > 
    > - <span data-ttu-id="76665-185">ASP.NET Identity ve OWIN tanımlama bilgisi kimlik doğrulaması talep tabanlı sistem olduğundan, framework oluşturmak uygulama geliştiricisi gerektiren bir [Claimsıdentity](https://msdn.microsoft.com/library/microsoft.identitymodel.claims.claimsidentity.aspx) kullanıcı için.</span><span class="sxs-lookup"><span data-stu-id="76665-185">Since ASP.NET Identity and OWIN Cookie Authentication are claims based system, the framework requires the app developer to generate a [ClaimsIdentity](https://msdn.microsoft.com/library/microsoft.identitymodel.claims.claimsidentity.aspx) for the user.</span></span> <span data-ttu-id="76665-186">Claimsıdentity hangi rolleri kullanıcının ait olduğu gibi kullanıcı için tüm talepleri hakkında bilgi yer almaktadır.</span><span class="sxs-lookup"><span data-stu-id="76665-186">ClaimsIdentity has information about all the claims for the user such as what Roles the user belongs to.</span></span> <span data-ttu-id="76665-187">Bu aşamada daha fazla kullanıcı talebini de ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="76665-187">You can also add more claims for the user at this stage.</span></span>
    > - <span data-ttu-id="76665-188">OWIN ve arama bulunan kullanarak kullanıcı oturum `SignIn` ve yukarıda gösterildiği gibi Claimsıdentity geçirme.</span><span class="sxs-lookup"><span data-stu-id="76665-188">You can sign in the user by using the AuthenticationManager from OWIN and calling `SignIn` and passing in the ClaimsIdentity as shown above.</span></span> <span data-ttu-id="76665-189">Bu kod kullanıcı oturum ve de bir tanımlama bilgisi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="76665-189">This code will sign in the user and generate a cookie as well.</span></span> <span data-ttu-id="76665-190">Bu çağrı için paraleldir [FormAuthentication.SetAuthCookie](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) tarafından kullanılan [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) modülü.</span><span class="sxs-lookup"><span data-stu-id="76665-190">This call is analogous to [FormAuthentication.SetAuthCookie](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) used by the [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) module.</span></span>
2. <span data-ttu-id="76665-191">İçinde **Çözüm Gezgini**, proje tıklatmanız sağ **Ekle**ve ardından **Web formu**.</span><span class="sxs-lookup"><span data-stu-id="76665-191">In **Solution Explorer**, right-click your project click **Add**, and then **Web Form**.</span></span> <span data-ttu-id="76665-192">Web formu ad **oturum açma**.</span><span class="sxs-lookup"><span data-stu-id="76665-192">Name the web form **Login**.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image12.png)
3. <span data-ttu-id="76665-193">Değiştir *Login.aspx* aşağıdaki kod ile dosya:</span><span class="sxs-lookup"><span data-stu-id="76665-193">Replace the contents of the *Login.aspx* file with the following code:</span></span>  

    [!code-aspx[Main](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/samples/sample6.aspx)]
4. <span data-ttu-id="76665-194">Değiştir *Login.aspx.cs* aşağıdaki dosyasıyla:</span><span class="sxs-lookup"><span data-stu-id="76665-194">Replace the contents of the *Login.aspx.cs* file with the following:</span></span>  

    [!code-csharp[Main](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/samples/sample7.cs)]

    > [!NOTE] 
    > 
    > - <span data-ttu-id="76665-195">`Page_Load` Artık geçerli kullanıcının durumunu denetler ve temel eylemde kendi `Context.User.Identity.IsAuthenticated` durumu.</span><span class="sxs-lookup"><span data-stu-id="76665-195">The `Page_Load` now checks for the status of current user and takes action based on its `Context.User.Identity.IsAuthenticated` status.</span></span>  
    >     <span data-ttu-id="76665-196">**Günlüğe kaydedilen kullanıcı adını görüntülemek** : Microsoft ASP.NET Identity Framework üzerinde genişletme yöntemleri ekledi [System.Security.Principal.IIdentity](https://msdn.microsoft.com/library/system.security.principal.iidentity.aspx) almanızı sağlayan `UserName` ve `UserId` için oturum açmış olan kullanıcının.</span><span class="sxs-lookup"><span data-stu-id="76665-196">**Display Logged in User Name** : The Microsoft ASP.NET Identity Framework has added extension methods on [System.Security.Principal.IIdentity](https://msdn.microsoft.com/library/system.security.principal.iidentity.aspx) that allows you to get the `UserName` and `UserId`  for the logged in User.</span></span> <span data-ttu-id="76665-197">Bu uzantı yöntemleri tanımlanan `Microsoft.AspNet.Identity.Core` derleme.</span><span class="sxs-lookup"><span data-stu-id="76665-197">These extension methods are defined in the `Microsoft.AspNet.Identity.Core` assembly.</span></span> <span data-ttu-id="76665-198">Bu uzantı yöntemleri yerini olan [HttpContext.User.Identity.Name](https://msdn.microsoft.com/library/system.web.httpcontext.user.aspx) .</span><span class="sxs-lookup"><span data-stu-id="76665-198">These extension methods are the replacement for [HttpContext.User.Identity.Name](https://msdn.microsoft.com/library/system.web.httpcontext.user.aspx) .</span></span>
    > - <span data-ttu-id="76665-199">Oturum açma yöntemi:</span><span class="sxs-lookup"><span data-stu-id="76665-199">SignIn method:</span></span>   
    >     <span data-ttu-id="76665-200">`This` yöntemi önceki değiştirir `CreateUser_Click` artık kullanıcı başarıyla oluşturduktan sonra kullanıcı açar ve bu örnek yöntemi.</span><span class="sxs-lookup"><span data-stu-id="76665-200">`This` method replaces the previous `CreateUser_Click` method in this sample and now signs in the user after successfully creating the user.</span></span>   
    >  <span data-ttu-id="76665-201">Microsoft OWIN Framework üzerinde genişletme yöntemleri ekledi `System.Web.HttpContext` başvuru almanızı sağlayan bir `IOwinContext`.</span><span class="sxs-lookup"><span data-stu-id="76665-201">The Microsoft OWIN Framework has added extension methods on `System.Web.HttpContext` that allows you to get a reference to an `IOwinContext`.</span></span> <span data-ttu-id="76665-202">Bu uzantı yöntemleri tanımlanan `Microsoft.Owin.Host.SystemWeb` derleme.</span><span class="sxs-lookup"><span data-stu-id="76665-202">These extension methods are defined in `Microsoft.Owin.Host.SystemWeb` assembly.</span></span> <span data-ttu-id="76665-203">`OwinContext` Sınıf düzenlemenizi sağlayan bir `IAuthenticationManager` geçerli istekte mevcut olan kimlik doğrulaması ara yazılım işlevselliğini temsil eden özellik.</span><span class="sxs-lookup"><span data-stu-id="76665-203">The `OwinContext` class exposes an `IAuthenticationManager` property that represents the Authentication middleware functionality available on the current request.</span></span>  
    >  <span data-ttu-id="76665-204">Kullanarak kullanıcı oturum `AuthenticationManager` OWIN ve arama `SignIn` ve içinde geçen `ClaimsIdentity` yukarıda gösterildiği gibi.</span><span class="sxs-lookup"><span data-stu-id="76665-204">You can sign in the user by using the `AuthenticationManager` from OWIN and calling `SignIn`  and passing in the `ClaimsIdentity`  as shown above.</span></span>   
    >  <span data-ttu-id="76665-205">ASP.NET kimliği ve OWIN tanımlama bilgisi kimlik doğrulaması talep tabanlı sistem olduğundan, oluşturmak için uygulama çerçevesi gerektirir bir `ClaimsIdentity` kullanıcı için.</span><span class="sxs-lookup"><span data-stu-id="76665-205">Because ASP.NET Identity and OWIN Cookie Authentication are claims-based system, the framework requires the app to generate a `ClaimsIdentity` for the user.</span></span>   
    >  <span data-ttu-id="76665-206">`ClaimsIdentity` Kullanıcının ait olduğu için hangi rolleri gibi bir kullanıcı için tüm talepler hakkında bilgi yer almaktadır.</span><span class="sxs-lookup"><span data-stu-id="76665-206">The `ClaimsIdentity` has information about all the claims for the user, such as what roles the user belongs to.</span></span> <span data-ttu-id="76665-207">Daha fazla kullanıcı talebini bu aşamada de ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="76665-207">You can also add more claims for the user at this stage</span></span>  
    >  <span data-ttu-id="76665-208">Bu kod kullanıcı oturum ve de bir tanımlama bilgisi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="76665-208">This code will sign in the user and generate a cookie as well.</span></span> <span data-ttu-id="76665-209">Bu çağrı için paraleldir [FormAuthentication.SetAuthCookie](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) tarafından kullanılan [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) modülü.</span><span class="sxs-lookup"><span data-stu-id="76665-209">This call is analogous to [FormAuthentication.SetAuthCookie](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) used by the [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) module.</span></span>
    > - <span data-ttu-id="76665-210">`SignOut` yöntem:</span><span class="sxs-lookup"><span data-stu-id="76665-210">`SignOut` method:</span></span>   
    >  <span data-ttu-id="76665-211">Bir başvuru edinir `AuthenticationManager` OWIN ve çağrıları `SignOut`.</span><span class="sxs-lookup"><span data-stu-id="76665-211">Gets a reference to the `AuthenticationManager` from OWIN and calls `SignOut`.</span></span> <span data-ttu-id="76665-212">Bunun için paraleldir [FormsAuthentication.SignOut](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) yöntemi tarafından kullanılan [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) modülü.</span><span class="sxs-lookup"><span data-stu-id="76665-212">This is analogous to [FormsAuthentication.SignOut](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) method used by the [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) module.</span></span>
5. <span data-ttu-id="76665-213">Tuşuna **Ctrl + F5** oluşturmak ve web uygulamasını çalıştırmak için.</span><span class="sxs-lookup"><span data-stu-id="76665-213">Press **Ctrl + F5** to build and run the web application.</span></span> <span data-ttu-id="76665-214">Yeni bir kullanıcı adı ve parola girin ve ardından tıklatın **kaydetmek**.</span><span class="sxs-lookup"><span data-stu-id="76665-214">Enter a new user name and password and then click on **Register**.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image13.png)  
   <span data-ttu-id="76665-215">Not: Bu noktada, yeni kullanıcı oluşturulur ve oturum açılmış.</span><span class="sxs-lookup"><span data-stu-id="76665-215">Note: At this point, the new user is created and logged in.</span></span>
6. <span data-ttu-id="76665-216">Tıklayın **oturumunuzu** düğmesi. Form oturum yönlendirilir.</span><span class="sxs-lookup"><span data-stu-id="76665-216">Click on **Log out** button.You will be redirected to the Log in form.</span></span>
7. <span data-ttu-id="76665-217">Bir geçersiz kullanıcı adı ve parola tıklatın girin **oturum** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="76665-217">Enter an invalid user name or password and Click on **Log in** button.</span></span>   
   <span data-ttu-id="76665-218">`UserManager.Find` Yöntemi null ve hata iletisini döndürür: " *geçersiz kullanıcı adı veya parola* " görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="76665-218">The `UserManager.Find`  method will return null and the error message: " *Invalid user name or password* " will be displayed.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image14.png)
