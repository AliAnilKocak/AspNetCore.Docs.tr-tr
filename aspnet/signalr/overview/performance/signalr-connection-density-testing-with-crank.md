---
uid: signalr/overview/performance/signalr-connection-density-testing-with-crank
title: "SignalR bağlantısı yoğunluğu mili ile test etme | Microsoft Docs"
author: tfitzmac
description: "SignalR bağlantısı yoğunluğu mili ile test etme"
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/22/2015
ms.topic: article
ms.assetid: 148d9ca7-1af1-44b6-a9fb-91e261b9b463
ms.technology: dotnet-signalr
ms.prod: .net-framework
msc.legacyurl: /signalr/overview/performance/signalr-connection-density-testing-with-crank
msc.type: authoredcontent
ms.openlocfilehash: a3e8fdb47bd80d819358f9c48cd82fd51d6c0400
ms.sourcegitcommit: fe880bf4ed1c8116071c0e47c0babf3623b7f44a
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/21/2017
---
<a name="signalr-connection-density-testing-with-crank"></a><span data-ttu-id="3c8a3-103">SignalR bağlantısı yoğunluğu mili ile test etme</span><span class="sxs-lookup"><span data-stu-id="3c8a3-103">SignalR Connection Density Testing with Crank</span></span>
====================
<span data-ttu-id="3c8a3-104">tarafından [zel FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="3c8a3-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="3c8a3-105">Bu makalede, birden çok sanal istemcilerle bir uygulamayı test etmek için mili Aracı'nı kullanmayı açıklar.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-105">This article describes how to use the Crank tool to test an application with multiple simulated clients.</span></span>


<span data-ttu-id="3c8a3-106">Uygulamanızı (ya da Azure rolü, IIS, web veya Owın kullanarak kendi kendini barındıran), barındırma ortamında çalışmaya başladıktan sonra uygulamanın yanıt bağlantı yoğunluğu mili aracını kullanarak yüksek düzeyde test edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-106">Once your application is running in its hosting environment (either an Azure web role, IIS, or self-hosted using Owin), you can test application's response to a high level of connection density using the Crank tool.</span></span> <span data-ttu-id="3c8a3-107">Barındırma ortamı, Internet Information Services (IIS) sunucu, bir Owın ana bilgisayar veya bir Azure web rolü olabilir.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-107">The hosting environment can be an Internet Information Services (IIS) server, an Owin host, or an Azure web role.</span></span> <span data-ttu-id="3c8a3-108">(Not: performans sayaçları kullanılamaz Azure App Service Web Apps üzerinde öğesinden bir bağlantı yoğunluğu testi performans verilerini almak mümkün olmayacak şekilde.)</span><span class="sxs-lookup"><span data-stu-id="3c8a3-108">(Note: Performance counters are not available on Azure App Service Web Apps, so you will not be able to get performance data from a connection density test.)</span></span>

<span data-ttu-id="3c8a3-109">Bağlantı yoğunluğu bir sunucuda kurulmuş eşzamanlı TCP bağlantısı sayısını ifade eder.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-109">Connection Density refers to the number of simultaneous TCP connections that can be established on a server.</span></span> <span data-ttu-id="3c8a3-110">Her TCP bağlantısı kendi ek yükü doğurur ve çok sayıda boşta bağlantıları açılırken bir bellek performans sorunu sonunda oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-110">Each TCP connection incurs its own overhead, and opening a large number of idle connections will eventually create a memory bottleneck.</span></span>

<span data-ttu-id="3c8a3-111">[SignalR codebase](https://github.com/signalr/signalr) adı verilen bir yük testi aracı içeren **Crank**.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-111">[The SignalR codebase](https://github.com/signalr/signalr) includes a load-testing tool called **Crank**.</span></span> <span data-ttu-id="3c8a3-112">En son sürümünü mili bulunabilir [geliştirme şube](https://github.com/SignalR/signalr/tree/dev) github'da.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-112">The latest version of Crank can be found in [the Dev branch](https://github.com/SignalR/signalr/tree/dev) on GitHub.</span></span> <span data-ttu-id="3c8a3-113">SignalR geliştirme dalı arşivini codebase Zip indirebilirsiniz [burada](https://github.com/SignalR/SignalR/archive/dev.zip).</span><span class="sxs-lookup"><span data-stu-id="3c8a3-113">You can download a Zip archive of the Dev branch of the SignalR codebase [here](https://github.com/SignalR/SignalR/archive/dev.zip).</span></span>

<span data-ttu-id="3c8a3-114">Mili tam olarak sunucunun bellek saturate için boşta bağlantı sunucu donanımına olası toplam sayısını hesaplamak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-114">Crank may be used to fully saturate the server's memory in order to calculate the total number of idle connections possible on the server hardware.</span></span> <span data-ttu-id="3c8a3-115">Alternatif olarak, aynı zamanda mili yük testi için sunucunun belirli bir miktarda bellek baskısı altında belirli bir sayısı veya belirli bellek eşiğini ulaşılana kadar bağlantıları ramping kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-115">Alternatively, you may also use Crank to load test the server under a certain amount of memory pressure, by ramping up connections until a specific count or a specific memory threshold is reached.</span></span>

<span data-ttu-id="3c8a3-116">Test ederken kaynaklar (yani, TCP bağlantıları ve bellek) için tüm rekabet önlemek için Uzak istemci kullanmak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-116">When testing, it is important to use remote client(s) to avoid any competition for resources (i.e., TCP connections and memory).</span></span> <span data-ttu-id="3c8a3-117">Bunlar sunucunun tam kapasitesi (bellek veya CPU) ulaşmasına engel olabilen herhangi bir performans sorunu devreyi değil emin olmak için istemci izleyin.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-117">Monitor the client(s) to ensure that they are not hitting any bottlenecks that may prevent the server from reaching its full capacity (memory or CPU).</span></span> <span data-ttu-id="3c8a3-118">Tam sunucu iş yükü için istemci sayısını artırmak gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-118">You may need to increase the number of clients in order to fully load the server.</span></span>

### <a name="running-a-connection-density-test"></a><span data-ttu-id="3c8a3-119">Bir bağlantı yoğunluğu testi çalıştırma</span><span class="sxs-lookup"><span data-stu-id="3c8a3-119">Running a Connection Density Test</span></span>

<span data-ttu-id="3c8a3-120">Bu bölümde bir SignalR uygulamaya bir bağlantı yoğunluğu testi çalıştırmak için gereken adımlar açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-120">This section describes the steps needed to run a connection density test on a SignalR application.</span></span>

1. <span data-ttu-id="3c8a3-121">İndirin ve derleyin [SignalR geliştirme dalı codebase](https://github.com/SignalR/SignalR/archive/dev.zip).</span><span class="sxs-lookup"><span data-stu-id="3c8a3-121">Download and build the [Dev branch of the SignalR codebase](https://github.com/SignalR/SignalR/archive/dev.zip).</span></span> <span data-ttu-id="3c8a3-122">Bir komut isteminde gidin &lt;proje dizinine&gt;\src\Microsoft.AspNet.SignalR.Crank\bin\debug.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-122">In a command prompt, navigate to &lt;project directory&gt;\src\Microsoft.AspNet.SignalR.Crank\bin\debug.</span></span>
2. <span data-ttu-id="3c8a3-123">Uygulamanızı hedeflenen kendi barındırma ortamınıza dağıtın.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-123">Deploy your application to its intended hosting environment.</span></span> <span data-ttu-id="3c8a3-124">Uygulamanızı kullanan uç nokta not edin; Örneğin, oluşturulan uygulamada [Başlarken Öğreticisi](../getting-started/tutorial-getting-started-with-signalr.md), uç nokta `http://<yourhost>:8080/signalr`.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-124">Make a note of the endpoint that your application uses; for example, in the application created in the [Getting Started tutorial](../getting-started/tutorial-getting-started-with-signalr.md), the endpoint is `http://<yourhost>:8080/signalr`.</span></span>
3. <span data-ttu-id="3c8a3-125">Yükleme [SignalR performans sayaçlarını](signalr-performance.md#perfcounters) sunucusunda.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-125">Install [SignalR performance counters](signalr-performance.md#perfcounters) on the server.</span></span> <span data-ttu-id="3c8a3-126">Uygulamanızı Azure üzerinde çalışıyorsa, bkz: [SignalR performans sayaçlarını kullanarak bir Azure Web rolünde](using-signalr-performance-counters-in-an-azure-web-role.md).</span><span class="sxs-lookup"><span data-stu-id="3c8a3-126">If your application is running on Azure, see [Using SignalR Performance Counters in an Azure Web Role](using-signalr-performance-counters-in-an-azure-web-role.md).</span></span>

<span data-ttu-id="3c8a3-127">İndirilen codebase yerleşik ve performans sayaçları, ana bilgisayar üzerine yüklü sonra mili komut satırı aracı bulunabilir `src\Microsoft.AspNet.SignalR.Crank\bin\Debug` klasör.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-127">Once you've downloaded and built the codebase, and installed performance counters on your host, the Crank command-line tool can be found in the `src\Microsoft.AspNet.SignalR.Crank\bin\Debug` folder.</span></span>

<span data-ttu-id="3c8a3-128">Mili aracı için mevcut Seçenekler şunlardır:</span><span class="sxs-lookup"><span data-stu-id="3c8a3-128">Available options for the Crank tool include:</span></span>

- <span data-ttu-id="3c8a3-129">**/?** : Yardım ekranı gösterir.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-129">**/?**: Shows the help screen.</span></span> <span data-ttu-id="3c8a3-130">Kullanılabilir seçenekler ayrıca görüntülenir **Url** parametresi atlanırsa.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-130">The available options are also displayed if the **Url** parameter is omitted.</span></span>
- <span data-ttu-id="3c8a3-131">**/ Url**: SignalR bağlantıları için URL.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-131">**/Url**: The URL for SignalR connections.</span></span> <span data-ttu-id="3c8a3-132">Bu parametre gereklidir.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-132">This parameter is required.</span></span> <span data-ttu-id="3c8a3-133">Bir SignalR uygulaması için varsayılan eşlemeyi kullanarak yolun içinde sona erecek "/ signalr".</span><span class="sxs-lookup"><span data-stu-id="3c8a3-133">For a SignalR application using the default mapping, the path will end in "/signalr".</span></span>
- <span data-ttu-id="3c8a3-134">**/ Aktarım**: kullanılan taşıma adı.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-134">**/Transport**: The name of the transport used.</span></span> <span data-ttu-id="3c8a3-135">Varsayılan değer `auto`, en iyi kullanılabilir Protokolü seçebilir.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-135">The default is `auto`, which will select the best available protocol.</span></span> <span data-ttu-id="3c8a3-136">Seçenekleriniz `WebSockets`, `ServerSentEvents`, ve `LongPolling` (`ForeverFrame` yerine Internet Explorer kullanıldığı bir seçenek mili için .NET istemci bu yana değil).</span><span class="sxs-lookup"><span data-stu-id="3c8a3-136">Options include `WebSockets`, `ServerSentEvents`, and `LongPolling` (`ForeverFrame` is not an option for Crank, since the .NET client rather than Internet Explorer is used).</span></span> <span data-ttu-id="3c8a3-137">SignalR taşımaları nasıl seçtiği hakkında daha fazla bilgi için bkz: [aktarımları ve geri dönüşler](../getting-started/introduction-to-signalr.md#transports).</span><span class="sxs-lookup"><span data-stu-id="3c8a3-137">For more information on how SignalR selects transports, see [Transports and Fallbacks](../getting-started/introduction-to-signalr.md#transports).</span></span>
- <span data-ttu-id="3c8a3-138">**/ BatchSize**: her toplu işlemde eklenen istemci sayısı.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-138">**/BatchSize**: The number of clients added in each batch.</span></span> <span data-ttu-id="3c8a3-139">Varsayılan değer 50'dir.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-139">The default is 50.</span></span>
- <span data-ttu-id="3c8a3-140">**/ ConnectInterval**: bağlantıları ekleme arasındaki milisaniye cinsinden aralığı.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-140">**/ConnectInterval**: The interval in milliseconds between adding connections.</span></span> <span data-ttu-id="3c8a3-141">Varsayılan 500'dür.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-141">The default is 500.</span></span>
- <span data-ttu-id="3c8a3-142">**/ Bağlantıları**: yük testi uygulama için kullanılan bağlantı sayısı.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-142">**/Connections**: The number of connections used to load-test the application.</span></span> <span data-ttu-id="3c8a3-143">Varsayılan değer 100. 000 ' dir.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-143">The default is 100,000.</span></span>
- <span data-ttu-id="3c8a3-144">**/ ConnectTimeout**: sınama durduruluyor önce saniye olarak zaman aşımı.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-144">**/ConnectTimeout**: The timeout in seconds before aborting the test.</span></span> <span data-ttu-id="3c8a3-145">Varsayılan değer 300 ' dir.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-145">The default is 300.</span></span>
- <span data-ttu-id="3c8a3-146">**MinServerMBytes**: ulaşmak için en düşük sunucu megabayt.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-146">**MinServerMBytes**: The minimum server megabytes to reach.</span></span> <span data-ttu-id="3c8a3-147">Varsayılan 500'dür.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-147">The default is 500.</span></span>
- <span data-ttu-id="3c8a3-148">**SendBytes**: bayt sunucusuna gönderilen yükü boyutu.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-148">**SendBytes**: The size of the payload sent to the server in bytes.</span></span> <span data-ttu-id="3c8a3-149">Varsayılan değer 0'dır.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-149">The default is 0.</span></span>
- <span data-ttu-id="3c8a3-150">**SendInterval**: sunucuya iletileri arasındaki milisaniye cinsinden gecikme.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-150">**SendInterval**: The delay in milliseconds between messages to the server.</span></span> <span data-ttu-id="3c8a3-151">Varsayılan 500'dür.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-151">The default is 500.</span></span>
- <span data-ttu-id="3c8a3-152">**SendTimeout**: iletileri sunucuyu için milisaniye cinsinden zaman aşımı.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-152">**SendTimeout**: The timeout in milliseconds for messages to the server.</span></span> <span data-ttu-id="3c8a3-153">Varsayılan değer 300 ' dir.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-153">The default is 300.</span></span>
- <span data-ttu-id="3c8a3-154">**ControllerUrl**: bir istemci ana bilgisayar denetleyicisi hub Url.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-154">**ControllerUrl**: The Url where one client will host a controller hub.</span></span> <span data-ttu-id="3c8a3-155">Varsayılan değer null (hiçbir denetleyici hub).</span><span class="sxs-lookup"><span data-stu-id="3c8a3-155">The default is null (no controller hub).</span></span> <span data-ttu-id="3c8a3-156">Denetleyici hub mili oturum başlatıldığında başlatılır; denetleyici hub mili arasındaki iletişim başka yapılır.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-156">The controller hub is started when the Crank session starts; no further contact between the controller hub and Crank is made.</span></span>
- <span data-ttu-id="3c8a3-157">**NumClients**: uygulamaya bağlanmak için sanal istemci sayısı.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-157">**NumClients**: The number of simulated clients to connect to the application.</span></span> <span data-ttu-id="3c8a3-158">Varsayılan biridir.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-158">The default is one.</span></span>
- <span data-ttu-id="3c8a3-159">**Günlük dosyası**: test çalışması için günlük dosyası için dosya adı.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-159">**Logfile**: The filename for the logfile for the test run.</span></span> <span data-ttu-id="3c8a3-160">Varsayılan, `crank.csv` değeridir.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-160">The default is `crank.csv`.</span></span>
- <span data-ttu-id="3c8a3-161">**SampleInterval**: performans sayacı Örnekler arasındaki milisaniye olarak süre.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-161">**SampleInterval**: The time in milliseconds between performance counter samples.</span></span> <span data-ttu-id="3c8a3-162">Varsayılan değer 1000'dir.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-162">The default is 1000.</span></span>
- <span data-ttu-id="3c8a3-163">**SignalRInstance**: sunucu üzerindeki performans sayaçları için örnek adı.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-163">**SignalRInstance**: The instance name for the performance counters on the server.</span></span> <span data-ttu-id="3c8a3-164">Varsayılan istemci bağlantı durumu kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-164">The default is to use the client connection state.</span></span>

### <a name="example"></a><span data-ttu-id="3c8a3-165">Örnek</span><span class="sxs-lookup"><span data-stu-id="3c8a3-165">Example</span></span>

<span data-ttu-id="3c8a3-166">Aşağıdaki komutu adlı bir sitede sınayacak `pfsignalr` "ControllerHub" adlı bir hub ile bağlantı noktası 8080 üzerinde bir uygulamayı barındıran Azure üzerinde 100 bağlantıları kullanma.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-166">The following command will test a site called `pfsignalr` on Azure that hosts an application on port 8080 with a hub named "ControllerHub", using 100 connections.</span></span>

`crank /Connections:100 /Url:http://pfsignalr.cloudapp.net:8080/signalr`
