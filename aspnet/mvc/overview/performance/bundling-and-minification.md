---
uid: mvc/overview/performance/bundling-and-minification
title: Paketleme ve küçültme | Microsoft Docs
author: Rick-Anderson
description: Paketleme ve küçültme olan iki teknikleri isteği yükleme süresini artırmak için ASP.NET 4.5 içinde kullanabilirsiniz. Paketleme ve küçültme tarafından reducin yükleme süresini artırır...
ms.author: aspnetcontent
manager: wpickett
ms.date: 08/23/2012
ms.topic: article
ms.assetid: 5894dc13-5d45-4dad-8096-136499120f1d
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/performance/bundling-and-minification
msc.type: authoredcontent
ms.openlocfilehash: 001ebf89cda66a50cddcd7e4944f27b9396d4450
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/10/2018
ms.locfileid: "30877489"
---
<a name="bundling-and-minification"></a><span data-ttu-id="bf89f-104">Paketleme ve küçültme</span><span class="sxs-lookup"><span data-stu-id="bf89f-104">Bundling and Minification</span></span>
====================
<span data-ttu-id="bf89f-105">tarafından [Rick Anderson](https://github.com/Rick-Anderson)</span><span class="sxs-lookup"><span data-stu-id="bf89f-105">by [Rick Anderson](https://github.com/Rick-Anderson)</span></span>

> <span data-ttu-id="bf89f-106">Paketleme ve küçültme olan iki teknikleri isteği yükleme süresini artırmak için ASP.NET 4.5 içinde kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="bf89f-106">Bundling and minification are two techniques you can use in ASP.NET 4.5 to improve request load time.</span></span> <span data-ttu-id="bf89f-107">Paketleme ve küçültme sunucuya isteklerinin sayısını azaltmak ve istenilen varlıkların (örneğin, CSS ve JavaScript.) boyutunu azaltarak yükleme süresini artırır</span><span class="sxs-lookup"><span data-stu-id="bf89f-107">Bundling and minification improves load time by reducing the number of requests to the server and reducing the size of requested assets (such as CSS and JavaScript.)</span></span>


<span data-ttu-id="bf89f-108">Geçerli ana tarayıcılarının çoğu sayısını sınırlandır [eşzamanlı bağlantı](http://www.browserscope.org/?category=network) altı her bir ana bilgisayar başına.</span><span class="sxs-lookup"><span data-stu-id="bf89f-108">Most of the current major browsers limit the number of [simultaneous connections](http://www.browserscope.org/?category=network) per each hostname to six.</span></span> <span data-ttu-id="bf89f-109">Altı istekler işlenirken, bir ana bilgisayar üzerindeki varlıklar için ek istekler tarayıcı tarafından sıraya alınır anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-109">That means that while six requests are being processed, additional requests for assets on a host will be queued by the browser.</span></span> <span data-ttu-id="bf89f-110">Aşağıdaki resimde, IE F12 geliştirici araçları ağ sekmeleri örnek bir uygulama hakkında görünüm tarafından gerekli varlıklar için zamanlama gösterir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-110">In the image below, the IE F12 developer tools network tabs shows the timing for assets required by the About view of a sample application.</span></span>

![B/M](bundling-and-minification/_static/image1.png)

<span data-ttu-id="bf89f-112">Gri çubukların isteği altı bağlantı sınırını bekleyen tarayıcı tarafından sıraya zamanı gösterir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-112">The gray bars show the time the request is queued by the browser waiting on the six connection limit.</span></span> <span data-ttu-id="bf89f-113">İstek süresi ilk bayta sarı çubuğu olan başka bir deyişle, istek göndermek ve ilk yanıt sunucudan almak için geçen süre.</span><span class="sxs-lookup"><span data-stu-id="bf89f-113">The yellow bar is the request time to first byte, that is, the time taken to send the request and receive the first response from the server.</span></span> <span data-ttu-id="bf89f-114">Mavi çubukları yanıt verileri sunucudan almak için geçen süreyi gösterir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-114">The blue bars show the time taken to receive the response data from the server.</span></span> <span data-ttu-id="bf89f-115">Ayrıntılı zamanlama bilgilerini almak için bir varlık çift tıklayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="bf89f-115">You can double-click on an asset to get detailed timing information.</span></span> <span data-ttu-id="bf89f-116">Örneğin, aşağıdaki resimde yükleme için zamanlama ayrıntılarını gösterir */Scripts/MyScripts/JavaScript6.js* dosya.</span><span class="sxs-lookup"><span data-stu-id="bf89f-116">For example, the following image shows the timing details for loading the */Scripts/MyScripts/JavaScript6.js* file.</span></span>

![](bundling-and-minification/_static/image2.png)

<span data-ttu-id="bf89f-117">Önceki görüntü gösterir **Başlat** hangi verir isteği nedeniyle tarayıcı sıraya zaman eşzamanlı bağlantı sayısını sınırla olay.</span><span class="sxs-lookup"><span data-stu-id="bf89f-117">The preceding image shows the **Start** event, which gives the time the request was queued because of the browser limit the number of simultaneous connections.</span></span> <span data-ttu-id="bf89f-118">Bu durumda, isteği tamamlamak başka bir istek için bekleniyor 46 milisaniye için sıraya alındı.</span><span class="sxs-lookup"><span data-stu-id="bf89f-118">In this case, the request was queued for 46 milliseconds waiting for another request to complete.</span></span>

## <a name="bundling"></a><span data-ttu-id="bf89f-119">Paketleme</span><span class="sxs-lookup"><span data-stu-id="bf89f-119">Bundling</span></span>

<span data-ttu-id="bf89f-120">Paketleme, birleştirebilir veya tek bir dosyaya birden çok dosya paketini daha kolay hale getirir ASP.NET 4.5 içinde yeni bir özelliktir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-120">Bundling is a new feature in ASP.NET 4.5 that makes it easy to combine or bundle multiple files into a single file.</span></span> <span data-ttu-id="bf89f-121">CSS, JavaScript ve diğer paketleri oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="bf89f-121">You can create CSS, JavaScript and other bundles.</span></span> <span data-ttu-id="bf89f-122">Daha az sayıda dosya anlamına gelir daha az HTTP istekleri ve, ilk sayfa yükleme performansı artırabilir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-122">Fewer files means fewer HTTP requests and that can improve first page load performance.</span></span>

<span data-ttu-id="bf89f-123">Aşağıdaki resimde, daha önce ancak bu kez paketleme ve küçültme etkin ile gösterilen hakkında görünüm aynı zamanlama görünümünü gösterir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-123">The following image shows the same timing view of the About view shown previously, but this time with bundling and minification enabled.</span></span>

![](bundling-and-minification/_static/image3.png)

## <a name="minification"></a><span data-ttu-id="bf89f-124">Küçültme</span><span class="sxs-lookup"><span data-stu-id="bf89f-124">Minification</span></span>

<span data-ttu-id="bf89f-125">Küçültme farklı kod iyileştirmeler komut dosyaları veya gereksiz boşluk ve açıklamaları kaldırma ve bir karakter değişken adları kısaltmayı gibi css, çeşitli gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-125">Minification performs a variety of different code optimizations to scripts or css, such as removing unnecessary white space and comments and shortening variable names to one character.</span></span> <span data-ttu-id="bf89f-126">Şu JavaScript işlevi göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="bf89f-126">Consider the following JavaScript function.</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample1.js)]

<span data-ttu-id="bf89f-127">Küçültme sonra işlevi aşağıdaki azalır:</span><span class="sxs-lookup"><span data-stu-id="bf89f-127">After minification, the function is reduced to the following:</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample2.js)]

<span data-ttu-id="bf89f-128">Gereksiz boşluk ve açıklamaları kaldırma ek olarak, aşağıdaki parametreler ve değişken adları (kısaltılmış) aşağıdaki gibi yeniden adlandırıldı:</span><span class="sxs-lookup"><span data-stu-id="bf89f-128">In addition to removing the comments and unnecessary whitespace, the following parameters and variable names were renamed (shortened) as follows:</span></span>

| <span data-ttu-id="bf89f-129">**Özgün**</span><span class="sxs-lookup"><span data-stu-id="bf89f-129">**Original**</span></span> | <span data-ttu-id="bf89f-130">**Yeniden adlandırıldı**</span><span class="sxs-lookup"><span data-stu-id="bf89f-130">**Renamed**</span></span> |
| --- | --- |
| <span data-ttu-id="bf89f-131">imageTagAndImageID</span><span class="sxs-lookup"><span data-stu-id="bf89f-131">imageTagAndImageID</span></span> | <span data-ttu-id="bf89f-132">n</span><span class="sxs-lookup"><span data-stu-id="bf89f-132">n</span></span> |
| <span data-ttu-id="bf89f-133">imageContext</span><span class="sxs-lookup"><span data-stu-id="bf89f-133">imageContext</span></span> | <span data-ttu-id="bf89f-134">t</span><span class="sxs-lookup"><span data-stu-id="bf89f-134">t</span></span> |
| <span data-ttu-id="bf89f-135">imageElement</span><span class="sxs-lookup"><span data-stu-id="bf89f-135">imageElement</span></span> | <span data-ttu-id="bf89f-136">ı</span><span class="sxs-lookup"><span data-stu-id="bf89f-136">i</span></span> |

## <a name="impact-of-bundling-and-minification"></a><span data-ttu-id="bf89f-137">Etkisini paketleme ve küçültme</span><span class="sxs-lookup"><span data-stu-id="bf89f-137">Impact of Bundling and Minification</span></span>

<span data-ttu-id="bf89f-138">Aşağıdaki tablo arasındaki tüm varlıklarını ayrı ayrı listeleme paketleme ve küçültme (B/M) örnek programı kullanarak birkaç önemli farklılık gösterir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-138">The following table shows several important differences between listing all the assets individually and using bundling and minification (B/M) in the sample program.</span></span>

|  | <span data-ttu-id="bf89f-139">**B/M kullanma**</span><span class="sxs-lookup"><span data-stu-id="bf89f-139">**Using B/M**</span></span> | <span data-ttu-id="bf89f-140">**B/M**</span><span class="sxs-lookup"><span data-stu-id="bf89f-140">**Without B/M**</span></span> | <span data-ttu-id="bf89f-141">**değiştirme**</span><span class="sxs-lookup"><span data-stu-id="bf89f-141">**Change**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="bf89f-142">**Dosya istekleri**</span><span class="sxs-lookup"><span data-stu-id="bf89f-142">**File Requests**</span></span> | <span data-ttu-id="bf89f-143">9</span><span class="sxs-lookup"><span data-stu-id="bf89f-143">9</span></span> | <span data-ttu-id="bf89f-144">34</span><span class="sxs-lookup"><span data-stu-id="bf89f-144">34</span></span> | <span data-ttu-id="bf89f-145">256%</span><span class="sxs-lookup"><span data-stu-id="bf89f-145">256%</span></span> |
| <span data-ttu-id="bf89f-146">**Gönderilen KB**</span><span class="sxs-lookup"><span data-stu-id="bf89f-146">**KB Sent**</span></span> | <span data-ttu-id="bf89f-147">3.26</span><span class="sxs-lookup"><span data-stu-id="bf89f-147">3.26</span></span> | <span data-ttu-id="bf89f-148">11.92</span><span class="sxs-lookup"><span data-stu-id="bf89f-148">11.92</span></span> | <span data-ttu-id="bf89f-149">266%</span><span class="sxs-lookup"><span data-stu-id="bf89f-149">266%</span></span> |
| <span data-ttu-id="bf89f-150">**Alınan KB**</span><span class="sxs-lookup"><span data-stu-id="bf89f-150">**KB Received**</span></span> | <span data-ttu-id="bf89f-151">388.51</span><span class="sxs-lookup"><span data-stu-id="bf89f-151">388.51</span></span> | <span data-ttu-id="bf89f-152">530</span><span class="sxs-lookup"><span data-stu-id="bf89f-152">530</span></span> | <span data-ttu-id="bf89f-153">36%</span><span class="sxs-lookup"><span data-stu-id="bf89f-153">36%</span></span> |
| <span data-ttu-id="bf89f-154">**Yükleme süresi**</span><span class="sxs-lookup"><span data-stu-id="bf89f-154">**Load Time**</span></span> | <span data-ttu-id="bf89f-155">510 MS</span><span class="sxs-lookup"><span data-stu-id="bf89f-155">510 MS</span></span> | <span data-ttu-id="bf89f-156">780 MS</span><span class="sxs-lookup"><span data-stu-id="bf89f-156">780 MS</span></span> | <span data-ttu-id="bf89f-157">53%</span><span class="sxs-lookup"><span data-stu-id="bf89f-157">53%</span></span> |

<span data-ttu-id="bf89f-158">Gönderilen bayt tarayıcılar isteklerinde uygulamak HTTP üst bilgileri ile oldukça ayrıntılı olarak paketleme ile önemli ölçüde azalma vardı.</span><span class="sxs-lookup"><span data-stu-id="bf89f-158">The bytes sent had a significant reduction with bundling as browsers are fairly verbose with the HTTP headers they apply on requests.</span></span> <span data-ttu-id="bf89f-159">Alınan bayt azaltma kadar büyük değil çünkü büyük dosyaları (*Scripts\jquery-ui-1.8.11.min.js* ve *Scripts\jquery-1.7.1.min.js*) zaten küçültülmüş.</span><span class="sxs-lookup"><span data-stu-id="bf89f-159">The received bytes reduction is not as large because the largest files (*Scripts\jquery-ui-1.8.11.min.js* and *Scripts\jquery-1.7.1.min.js*) are already minified.</span></span> <span data-ttu-id="bf89f-160">Not: Zamanlamaları kullanılan örnek program [Fiddler](http://www.fiddler2.com/fiddler2/) yavaş bir ağ benzetimini yapmak için aracı.</span><span class="sxs-lookup"><span data-stu-id="bf89f-160">Note: The timings on the sample program used the [Fiddler](http://www.fiddler2.com/fiddler2/) tool to simulate a slow network.</span></span> <span data-ttu-id="bf89f-161">(Fiddler gelen **kuralları** menüsünde, select **performans** sonra **benzetimini Modem hızlarını**.)</span><span class="sxs-lookup"><span data-stu-id="bf89f-161">(From the Fiddler **Rules** menu, select **Performance** then **Simulate Modem Speeds**.)</span></span>

## <a name="debugging-bundled-and-minified-javascript"></a><span data-ttu-id="bf89f-162">Hata ayıklama toplanmış ve JavaScript küçültülmüş</span><span class="sxs-lookup"><span data-stu-id="bf89f-162">Debugging Bundled and Minified JavaScript</span></span>

<span data-ttu-id="bf89f-163">Bir geliştirme ortamında, JavaScript hata ayıklama kolaydır (burada [derleme öğesi](https://msdn.microsoft.com/library/s10awwz0.aspx) içinde *Web.config* dosya ayarlanmış `debug="true"` ) JavaScript dosyaları değil gruplandığından veya küçültülmüş.</span><span class="sxs-lookup"><span data-stu-id="bf89f-163">It's easy to debug your JavaScript in a development environment (where the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx) in the *Web.config* file is set to `debug="true"` ) because the JavaScript files are not bundled or minified.</span></span> <span data-ttu-id="bf89f-164">JavaScript dosyalarınızın nerede toplanmış ve küçültülmüş yayın derlemesinde hata ayıklaması yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="bf89f-164">You can also debug a release build where your JavaScript files are bundled and minified.</span></span> <span data-ttu-id="bf89f-165">IE F12 Geliştirici Araçları'nı kullanarak aşağıdaki yaklaşımı kullanarak küçültülmüş bir pakete eklenen bir JavaScript işlevi hata ayıklama:</span><span class="sxs-lookup"><span data-stu-id="bf89f-165">Using the IE F12 developer tools, you debug a JavaScript function included in a minified bundle using the following approach:</span></span>

1. <span data-ttu-id="bf89f-166">Seçin **betik** sekmesini ve ardından **hata ayıklamayı Başlat** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="bf89f-166">Select the **Script** tab and then select the **Start debugging** button.</span></span>
2. <span data-ttu-id="bf89f-167">Varlıklar düğmesini kullanarak hata ayıklamak istediğiniz JavaScript işlevi içeren paket seçin.</span><span class="sxs-lookup"><span data-stu-id="bf89f-167">Select the bundle containing the JavaScript function you want to debug using the assets button.</span></span>  
    ![](bundling-and-minification/_static/image4.png)
3. <span data-ttu-id="bf89f-168">Küçültülmüş JavaScript seçerek biçimlendirmek **Yapılandırma düğmesi** ![](bundling-and-minification/_static/image5.png)ve ardından seçerek **biçimi JavaScript**.</span><span class="sxs-lookup"><span data-stu-id="bf89f-168">Format the minified JavaScript by selecting the **Configuration button** ![](bundling-and-minification/_static/image5.png), and then selecting **Format JavaScript**.</span></span>
4. <span data-ttu-id="bf89f-169">İçinde **arama betik** t giriş kutusuna, hata ayıklama istediğiniz işlevin adını seçin.</span><span class="sxs-lookup"><span data-stu-id="bf89f-169">In the **Search Scrip** t input box, select the name of the function you want to debug.</span></span> <span data-ttu-id="bf89f-170">Aşağıdaki görüntüde **AddAltToImg** girilen **arama betik** t giriş kutusu.</span><span class="sxs-lookup"><span data-stu-id="bf89f-170">In the following image, **AddAltToImg** was entered in the **Search Scrip** t input box.</span></span>  
    ![](bundling-and-minification/_static/image6.png)

<span data-ttu-id="bf89f-171">F12 geliştirici araçları ile hata ayıklama ile ilgili daha fazla bilgi için MSDN makalesine bakın [JavaScript hataları hata ayıklamak için F12 geliştirici araçlarını kullanma](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="bf89f-171">For more information on debugging with the F12 developer tools, see the MSDN article [Using the F12 Developer Tools to Debug JavaScript Errors](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span></span>

## <a name="controlling-bundling-and-minification"></a><span data-ttu-id="bf89f-172">Denetleme paketleme ve küçültme</span><span class="sxs-lookup"><span data-stu-id="bf89f-172">Controlling Bundling and Minification</span></span>

<span data-ttu-id="bf89f-173">Paketleme ve küçültme etkin veya devre dışı hata ayıklama özniteliğinin değeri ayarlayarak [derleme öğesi](https://msdn.microsoft.com/library/s10awwz0.aspx) içinde *Web.config* dosya.</span><span class="sxs-lookup"><span data-stu-id="bf89f-173">Bundling and minification is enabled or disabled by setting the value of the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file.</span></span> <span data-ttu-id="bf89f-174">Aşağıdaki XML `debug` bunu true olarak ayarlanırsa, paketleme ve küçültme devre dışıdır.</span><span class="sxs-lookup"><span data-stu-id="bf89f-174">In the following XML, `debug` is set to true so bundling and minification is disabled.</span></span>

[!code-xml[Main](bundling-and-minification/samples/sample3.xml?highlight=2)]

<span data-ttu-id="bf89f-175">Paketleme ve küçültme etkinleştirmek için ayarlanmış `debug` "false" değerine.</span><span class="sxs-lookup"><span data-stu-id="bf89f-175">To enable bundling and minification, set the `debug` value to "false".</span></span> <span data-ttu-id="bf89f-176">Geçersiz kılabilirsiniz *Web.config* ayarı `EnableOptimizations` özellikte `BundleTable` sınıfı.</span><span class="sxs-lookup"><span data-stu-id="bf89f-176">You can override the *Web.config* setting with the `EnableOptimizations` property on the `BundleTable` class.</span></span> <span data-ttu-id="bf89f-177">Aşağıdaki kod paketleme ve küçültme sağlar ve herhangi bir ayar geçersiz kılmaları *Web.config* dosya.</span><span class="sxs-lookup"><span data-stu-id="bf89f-177">The following code enables bundling and minification and overrides any setting in the *Web.config* file.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample4.cs?highlight=7)]

> [!NOTE]
> <span data-ttu-id="bf89f-178">Sürece `EnableOptimizations` olan `true` veya hata ayıklama özniteliğinde [derleme öğesi](https://msdn.microsoft.com/library/s10awwz0.aspx) içinde *Web.config* dosya ayarlanmış `false`, dosyaları paketlenebilir veya küçültülmüş.</span><span class="sxs-lookup"><span data-stu-id="bf89f-178">Unless `EnableOptimizations` is `true` or the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file is set to `false`, files will not be bundled or minified.</span></span> <span data-ttu-id="bf89f-179">Ayrıca, dosyaların .min sürümünü kullanılmayacak, tam hata ayıklama sürümleri seçilir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-179">Additionally, the .min version of files will not be used, the full debug versions will be selected.</span></span> <span data-ttu-id="bf89f-180">`EnableOptimizations` hata ayıklama özniteliği geçersiz kılar [derleme öğesi](https://msdn.microsoft.com/library/s10awwz0.aspx) içinde *Web.config* dosyası</span><span class="sxs-lookup"><span data-stu-id="bf89f-180">`EnableOptimizations` overrides the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file</span></span>


## <a name="using-bundling-and-minification-with-aspnet-web-forms-and-web-pages"></a><span data-ttu-id="bf89f-181">Kullanarak paketleme ve küçültme ASP.NET Web formları ve Web sayfaları</span><span class="sxs-lookup"><span data-stu-id="bf89f-181">Using Bundling and Minification with ASP.NET Web Forms and Web Pages</span></span>

- <span data-ttu-id="bf89f-182">Web sayfaları için blog girişine bakın [ekleyerek Web iyileştirme Web sayfaları siteye](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="bf89f-182">For Web Pages, see the blog entry [Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="bf89f-183">Web formları için blog girişine bakın [ekleme paketleme ve küçültme Web formları için](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="bf89f-183">For Web Forms, see the blog entry [Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>

## <a name="using-bundling-and-minification-with-aspnet-mvc"></a><span data-ttu-id="bf89f-184">Paketleme kullanarak ve ASP.NET MVC ile küçültme</span><span class="sxs-lookup"><span data-stu-id="bf89f-184">Using Bundling and Minification with ASP.NET MVC</span></span>

<span data-ttu-id="bf89f-185">Bu bölümde bir ASP.NET MVC paketleme incelemek için proje ve küçültme oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="bf89f-185">In this section we will create an ASP.NET MVC project to examine bundling and minification.</span></span> <span data-ttu-id="bf89f-186">İlk olarak, adlı yeni bir ASP.NET MVC Internet projesi oluşturun **MvcBM** Varsayılanları hiçbirini değiştirmeden.</span><span class="sxs-lookup"><span data-stu-id="bf89f-186">First, create a new ASP.NET MVC internet project named **MvcBM** without changing any of the defaults.</span></span>

<span data-ttu-id="bf89f-187">Açık *uygulama\_Start\BundleConfig.cs* dosya ve inceleyin `RegisterBundles` oluşturmak, kaydetme ve paketleri yapılandırmak için kullanılan yöntem.</span><span class="sxs-lookup"><span data-stu-id="bf89f-187">Open the *App\_Start\BundleConfig.cs* file and examine the `RegisterBundles` method which is used to create, register and configure bundles.</span></span> <span data-ttu-id="bf89f-188">Aşağıdaki kod bir kısmı gösterir `RegisterBundles` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="bf89f-188">The following code shows a portion of the `RegisterBundles` method.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample5.cs)]

<span data-ttu-id="bf89f-189">Önceki kod adlı yeni bir JavaScript paket oluşturur *~/bundles/jquery* tüm uygun içerir (Hata Ayıkla'dır veya küçültülmüş değil.* vsdoc*) dosyalar *betikleri* "~/Scripts/jquery-{version} .js" joker dizeyi eşleştir klasör.</span><span class="sxs-lookup"><span data-stu-id="bf89f-189">The  preceding code creates a new JavaScript bundle named *~/bundles/jquery* that includes all the appropriate (that is debug or minified but not .*vsdoc*) files in the *Scripts* folder that match the wild card string "~/Scripts/jquery-{version}.js".</span></span> <span data-ttu-id="bf89f-190">ASP.NET MVC 4 için bu dosya bir hata ayıklama yapılandırması ile gelir *jquery 1.7.1.js* pakete eklenecek.</span><span class="sxs-lookup"><span data-stu-id="bf89f-190">For ASP.NET MVC 4, this means with a debug configuration, the file *jquery-1.7.1.js* will be added to the bundle.</span></span> <span data-ttu-id="bf89f-191">Bir yayın yapılandırmasında *jquery 1.7.1.min.js* eklenir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-191">In a release configuration, *jquery-1.7.1.min.js* will be added.</span></span> <span data-ttu-id="bf89f-192">Paket framework gibi birkaç genel kurallar aşağıdaki gibidir:</span><span class="sxs-lookup"><span data-stu-id="bf89f-192">The bundling framework follows several common conventions such as:</span></span>

- <span data-ttu-id="bf89f-193">Yayın için ".min" dosyasını "FileX.min.js" ve "FileX.js" mevcut seçme.</span><span class="sxs-lookup"><span data-stu-id="bf89f-193">Selecting ".min" file for release when "FileX.min.js" and "FileX.js" exist.</span></span>
- <span data-ttu-id="bf89f-194">Hata ayıklama için olmayan ".min" sürümü seçin.</span><span class="sxs-lookup"><span data-stu-id="bf89f-194">Selecting the non ".min" version for debug.</span></span>
- <span data-ttu-id="bf89f-195">Yoksayılıyor "-vsdoc" yalnızca IntelliSense tarafından kullanılan dosyaları (örneğin, jquery-1.7.1-vsdoc.js),.</span><span class="sxs-lookup"><span data-stu-id="bf89f-195">Ignoring "-vsdoc" files (such as jquery-1.7.1-vsdoc.js), which are used only by IntelliSense.</span></span>

<span data-ttu-id="bf89f-196">`{version}` Yukarıda gösterilen joker karakter eşleştirme jQuery paket içinde jQuery uygun sürümü ile otomatik olarak oluşturmak için kullanılır, *betikleri* klasör.</span><span class="sxs-lookup"><span data-stu-id="bf89f-196">The `{version}` wild card matching shown above is used to automatically create a jQuery bundle with the appropriate version of jQuery in your *Scripts* folder.</span></span> <span data-ttu-id="bf89f-197">Bu örnekte, joker kullanarak aşağıdaki avantajları sağlar:</span><span class="sxs-lookup"><span data-stu-id="bf89f-197">In this example, using a wild card provides the following benefits:</span></span>

- <span data-ttu-id="bf89f-198">Yukarıdaki paket kod veya sayfalarını görüntüleme jQuery başvurularında değiştirmeden jQuery bir sürüme güncelleştirmek için NuGet kullanmanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="bf89f-198">Allows you to use NuGet to update to a newer jQuery version without changing the preceding bundling code or jQuery references in your view pages.</span></span>
- <span data-ttu-id="bf89f-199">Otomatik olarak seçer, hata ayıklama yapılandırmaları için tam sürümü ve ".min" sürüm yayın için oluşturur.</span><span class="sxs-lookup"><span data-stu-id="bf89f-199">Automatically selects the full version for debug configurations and the ".min" version for release builds.</span></span>

## <a name="using-a-cdn"></a><span data-ttu-id="bf89f-200">Bir CDN kullanma</span><span class="sxs-lookup"><span data-stu-id="bf89f-200">Using a CDN</span></span>

 <span data-ttu-id="bf89f-201">İzleme kodu yerel jQuery paket CDN jQuery paket ile değiştirir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-201">The follow code replaces the local jQuery bundle with a CDN jQuery bundle.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample6.cs)]

<span data-ttu-id="bf89f-202">Yukarıdaki kod sürümde modu ve jQuery hata ayıklama sürümü yerel olarak hata ayıklama modunda getirileceği sırada jQuery CDN istenecektir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-202">In the code above, jQuery will be requested from the CDN while in release mode and the debug version of jQuery will be fetched locally in debug mode.</span></span> <span data-ttu-id="bf89f-203">CDN isteği başarısız olursa bir CDN kullanırken, bir geri dönüş mekanizması olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="bf89f-203">When using a CDN, you should have a fallback mechanism in case the CDN request fails.</span></span> <span data-ttu-id="bf89f-204">Aşağıdaki biçimlendirmede jQuery CDN hatasında istemek için eklenen düzeni dosyası gösterir betiği sonundan parçalara.</span><span class="sxs-lookup"><span data-stu-id="bf89f-204">The following markup fragment from the end of the layout file shows script added to request jQuery should the CDN fail.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample7.cshtml?highlight=5-13)]

## <a name="creating-a-bundle"></a><span data-ttu-id="bf89f-205">Bir paket oluşturma</span><span class="sxs-lookup"><span data-stu-id="bf89f-205">Creating a Bundle</span></span>

<span data-ttu-id="bf89f-206">[Paket](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) sınıfı `Include` yöntemi her dize kaynağa sanal bir yol olduğu bir dizisini alır.</span><span class="sxs-lookup"><span data-stu-id="bf89f-206">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `Include` method takes an array of strings, where each string is a virtual path to resource.</span></span> <span data-ttu-id="bf89f-207">RegisterBundles yönteminde alınan aşağıdaki kod *uygulama\_Start\BundleConfig.cs* dosyasını gösterir birden çok dosyaları bir pakete ait eklenir:</span><span class="sxs-lookup"><span data-stu-id="bf89f-207">The following code from the RegisterBundles method in the *App\_Start\BundleConfig.cs* file shows how multiple files are added to a bundle:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample8.cs)]

<span data-ttu-id="bf89f-208">[Paket](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) sınıfı `IncludeDirectory` yöntemi, bir arama deseniyle eşleşen tüm dosyaları bir dizin (ve isteğe bağlı olarak tüm alt dizinlerde) eklemek için sağlanır.</span><span class="sxs-lookup"><span data-stu-id="bf89f-208">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` method is provided to add all the files in a directory (and optionally all subdirectories) which match a search pattern.</span></span> <span data-ttu-id="bf89f-209">[Paket](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) sınıfı `IncludeDirectory` API aşağıda gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="bf89f-209">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` API is shown below:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample9.cs)]

<span data-ttu-id="bf89f-210">Paket oluşturma yöntemini kullanarak görünümlerde başvurulan ( `Styles.Render` CSS için ve `Scripts.Render` JavaScript için).</span><span class="sxs-lookup"><span data-stu-id="bf89f-210">Bundles are referenced in views using the Render method, ( `Styles.Render` for CSS and `Scripts.Render` for JavaScript).</span></span> <span data-ttu-id="bf89f-211">Aşağıdaki biçimlendirmeden *görünümler/paylaşılan\\_Layout.cshtml* dosyasını gösterir CSS ve JavaScript paketleri varsayılan ASP.NET Internet proje görünümleri ne başvuru.</span><span class="sxs-lookup"><span data-stu-id="bf89f-211">The following markup from the *Views\Shared\\_Layout.cshtml* file shows how the default ASP.NET internet project views reference CSS and JavaScript bundles.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample10.cshtml?highlight=5-6,11)]

<span data-ttu-id="bf89f-212">İşleme yöntemleri bir kod satırı içinde birden çok paket ekleyebilmek dizeler, bir dizi sağladığına dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="bf89f-212">Notice the Render methods takes an array of strings, so you can add multiple bundles in one line of code.</span></span> <span data-ttu-id="bf89f-213">Genellikle varlık başvurmak için gerekli HTML oluşturan oluşturma yöntemleri kullanmak istersiniz.</span><span class="sxs-lookup"><span data-stu-id="bf89f-213">You will generally want to use the Render methods which create the necessary HTML to reference the asset.</span></span> <span data-ttu-id="bf89f-214">Kullanabileceğiniz `Url` URL'yi varlık için varlık başvurusu için gereken biçimlendirme oluşturmak için yöntem.</span><span class="sxs-lookup"><span data-stu-id="bf89f-214">You can use the `Url` method to generate the URL to the asset without the markup needed to reference the asset.</span></span> <span data-ttu-id="bf89f-215">Yeni HTML5 kullanmak istediğinizi varsayalım [zaman uyumsuz](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) özniteliği.</span><span class="sxs-lookup"><span data-stu-id="bf89f-215">Suppose you wanted to use the new HTML5 [async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) attribute.</span></span> <span data-ttu-id="bf89f-216">Aşağıdaki kod modernizr kullanarak başvuru gösterilmektedir `Url` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="bf89f-216">The following code shows how to reference modernizr using the `Url` method.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample11.cshtml?highlight=11)]

## <a name="using-the--wildcard-character-to-select-files"></a><span data-ttu-id="bf89f-217">Kullanarak "\*" dosyaları seçmek için joker karakter</span><span class="sxs-lookup"><span data-stu-id="bf89f-217">Using the "\*" Wildcard Character to Select Files</span></span>

<span data-ttu-id="bf89f-218">Belirtilen sanal yol `Include` yöntemi ve arama deseni içinde `IncludeDirectory` yöntemi bir kabul edebilir "\*" joker karakter öneki veya son yol kesimi için soneki olarak.</span><span class="sxs-lookup"><span data-stu-id="bf89f-218">The virtual path specified in the `Include` method and the search pattern in the `IncludeDirectory` method can accept one "\*" wildcard character as a prefix or suffix to in the last path segment.</span></span> <span data-ttu-id="bf89f-219">Büyük küçük harfe duyarlı arama dizesidir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-219">The search string is case insensitive.</span></span> <span data-ttu-id="bf89f-220">`IncludeDirectory` Yöntemi alt dizinleri arama seçeneğiniz vardır.</span><span class="sxs-lookup"><span data-stu-id="bf89f-220">The `IncludeDirectory` method has the option of searching subdirectories.</span></span>

<span data-ttu-id="bf89f-221">Bir proje ile aşağıdaki JavaScript dosyaları göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="bf89f-221">Consider a project with the following JavaScript files:</span></span>

- <span data-ttu-id="bf89f-222">*Scripts\Common\AddAltToImg.js*</span><span class="sxs-lookup"><span data-stu-id="bf89f-222">*Scripts\Common\AddAltToImg.js*</span></span>
- <span data-ttu-id="bf89f-223">*Scripts\Common\ToggleDiv.js*</span><span class="sxs-lookup"><span data-stu-id="bf89f-223">*Scripts\Common\ToggleDiv.js*</span></span>
- <span data-ttu-id="bf89f-224">*Scripts\Common\ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="bf89f-224">*Scripts\Common\ToggleImg.js*</span></span>
- <span data-ttu-id="bf89f-225">*Scripts\Common\Sub1\ToggleLinks.js*</span><span class="sxs-lookup"><span data-stu-id="bf89f-225">*Scripts\Common\Sub1\ToggleLinks.js*</span></span>

![dir imag](bundling-and-minification/_static/image7.png)

<span data-ttu-id="bf89f-227">Aşağıdaki tabloda gösterildiği gibi joker karakter kullanarak bir pakete eklenen dosyalar gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="bf89f-227">The following table shows the files added to a bundle using the wildcard as shown:</span></span>

| <span data-ttu-id="bf89f-228">**Arama**</span><span class="sxs-lookup"><span data-stu-id="bf89f-228">**Call**</span></span> | <span data-ttu-id="bf89f-229">**Eklenen dosyalar veya özel durum oluştu**</span><span class="sxs-lookup"><span data-stu-id="bf89f-229">**Files Added or Exception Raised**</span></span> |
| --- | --- |
| <span data-ttu-id="bf89f-230">İçerir ("~/Scripts/Common/\*.js")</span><span class="sxs-lookup"><span data-stu-id="bf89f-230">Include("~/Scripts/Common/\*.js")</span></span> | <span data-ttu-id="bf89f-231">*AddAltToImg.js, ToggleDiv.js, ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="bf89f-231">*AddAltToImg.js, ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="bf89f-232">İçerir ("~/Scripts/Common/T\*.js")</span><span class="sxs-lookup"><span data-stu-id="bf89f-232">Include("~/Scripts/Common/T\*.js")</span></span> | <span data-ttu-id="bf89f-233">Geçersiz desen özel durum.</span><span class="sxs-lookup"><span data-stu-id="bf89f-233">Invalid pattern exception.</span></span> <span data-ttu-id="bf89f-234">Joker karakter yalnızca önek veya sonek izin verilir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-234">The wildcard character is only allowed on the prefix or suffix.</span></span> |
| <span data-ttu-id="bf89f-235">İçerir ("~/Scripts/Common/\*og.\*")</span><span class="sxs-lookup"><span data-stu-id="bf89f-235">Include("~/Scripts/Common/\*og.\*")</span></span> | <span data-ttu-id="bf89f-236">Geçersiz desen özel durum.</span><span class="sxs-lookup"><span data-stu-id="bf89f-236">Invalid pattern exception.</span></span> <span data-ttu-id="bf89f-237">Yalnızca bir joker karakter izin verilir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-237">Only one wildcard character is allowed.</span></span> |
| <span data-ttu-id="bf89f-238">"İçerir (" ~/Scripts/Common/T\*")</span><span class="sxs-lookup"><span data-stu-id="bf89f-238">"Include("~/Scripts/Common/T\*")</span></span> | <span data-ttu-id="bf89f-239">*ToggleDiv.js, ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="bf89f-239">*ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="bf89f-240">"İçerir (" ~/Scripts/Common/\*")</span><span class="sxs-lookup"><span data-stu-id="bf89f-240">"Include("~/Scripts/Common/\*")</span></span> | <span data-ttu-id="bf89f-241">Geçersiz desen özel durum.</span><span class="sxs-lookup"><span data-stu-id="bf89f-241">Invalid pattern exception.</span></span> <span data-ttu-id="bf89f-242">Saf joker kesimi geçerli değil.</span><span class="sxs-lookup"><span data-stu-id="bf89f-242">A pure wildcard segment is not valid.</span></span> |
| <span data-ttu-id="bf89f-243">IncludeDirectory ("~/Scripts/Common", "T\*")</span><span class="sxs-lookup"><span data-stu-id="bf89f-243">IncludeDirectory("~/Scripts/Common", "T\*")</span></span> | <span data-ttu-id="bf89f-244">*ToggleDiv.js, ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="bf89f-244">*ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="bf89f-245">IncludeDirectory ("~/Scripts/Common", "T\*", doğru)</span><span class="sxs-lookup"><span data-stu-id="bf89f-245">IncludeDirectory("~/Scripts/Common", "T\*",true)</span></span> | <span data-ttu-id="bf89f-246">*ToggleDiv.js, ToggleImg.js, ToggleLinks.js*</span><span class="sxs-lookup"><span data-stu-id="bf89f-246">*ToggleDiv.js, ToggleImg.js, ToggleLinks.js*</span></span> |

<span data-ttu-id="bf89f-247">Açıkça bir pakete ait her bir dosya ekleme, genellikle tercih edilen dosyaları aşağıdaki nedenlerle joker yüklemeyi üzerinden:</span><span class="sxs-lookup"><span data-stu-id="bf89f-247">Explicitly adding each file to a bundle is generally the preferred over wildcard loading of files for the following reasons:</span></span>

- <span data-ttu-id="bf89f-248">Komut dosyaları, genellikle istemezsiniz olan alfabetik sırada yükleme için joker karakter Varsayılanları tarafından ekleniyor.</span><span class="sxs-lookup"><span data-stu-id="bf89f-248">Adding scripts by wildcard defaults to loading them in alphabetical order, which is typically not what you want.</span></span> <span data-ttu-id="bf89f-249">CSS ve JavaScript dosyaları sık (alfabetik olmayan) belirli bir sırada eklenmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-249">CSS and JavaScript files frequently need to be added in a specific (non-alphabetic) order.</span></span> <span data-ttu-id="bf89f-250">Özel bir ekleyerek bu riski en aza indirebileceğiniz [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) uygulaması, ancak açıkça her dosyanın daha az hataya ekleme.</span><span class="sxs-lookup"><span data-stu-id="bf89f-250">You can mitigate this risk by adding a custom [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation, but explicitly adding each file is less error prone.</span></span> <span data-ttu-id="bf89f-251">Örneğin, değiştirmenizi gerektirebilir yeni varlıklar bir klasöre gelecekte ekleme olasılığınız, [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) uygulaması.</span><span class="sxs-lookup"><span data-stu-id="bf89f-251">For example, you might add new assets to a folder in the future which might require you to modify your [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation.</span></span>
- <span data-ttu-id="bf89f-252">Bu paket başvuran tüm görünümlerde yüklenirken joker karakter kullanarak bir dizine eklenen belirli dosyaları görüntüle eklenebilir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-252">View specific files added to a directory using wild card loading can be included in all views referencing that bundle.</span></span> <span data-ttu-id="bf89f-253">Betiği görüntüle belirli bir pakete ait eklediyseniz, paket başvuran diğer görünümleri bir JavaScript hatası alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="bf89f-253">If the view specific script is added to a bundle, you may get a JavaScript error on other views that reference the bundle.</span></span>
- <span data-ttu-id="bf89f-254">Diğer dosyaları alma CSS dosyaları iki kez yüklenen içeri aktarılan dosyaları neden.</span><span class="sxs-lookup"><span data-stu-id="bf89f-254">CSS files that import other files result in the imported files loaded twice.</span></span> <span data-ttu-id="bf89f-255">Örneğin, aşağıdaki kod iki kez yüklenen jQuery UI tema CSS dosyaları çoğunu bir paket oluşturur.</span><span class="sxs-lookup"><span data-stu-id="bf89f-255">For example, the following code creates a bundle with most of the jQuery UI theme CSS files loaded twice.</span></span> 

    [!code-csharp[Main](bundling-and-minification/samples/sample12.cs)]

  <span data-ttu-id="bf89f-256">Joker karakteriyle Seçici "\*.css" klasöründeki her CSS dosyasında getirir dahil olmak üzere *Content\themes\base\jquery.ui.all.css* dosya.</span><span class="sxs-lookup"><span data-stu-id="bf89f-256">The wild card selector "\*.css" brings in each CSS file in the folder, including the *Content\themes\base\jquery.ui.all.css* file.</span></span> <span data-ttu-id="bf89f-257">*Jquery.ui.all.css* dosyasını diğer CSS dosyaları aktarır.</span><span class="sxs-lookup"><span data-stu-id="bf89f-257">The *jquery.ui.all.css* file imports other CSS files.</span></span>

## <a name="bundle-caching"></a><span data-ttu-id="bf89f-258">Paketini önbelleğe alma</span><span class="sxs-lookup"><span data-stu-id="bf89f-258">Bundle Caching</span></span>

<span data-ttu-id="bf89f-259">Paketleri, paketin ne zaman oluşturulur, bir yıl Expires HTTP üstbilgisini ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="bf89f-259">Bundles set the HTTP Expires Header one year from when the bundle is created.</span></span> <span data-ttu-id="bf89f-260">IE paket için koşullu bir istek yapmaz Fiddler gösterir daha önce görüntülenen bir sayfaya giderseniz, diğer bir deyişle, IE paketleri için bir HTTP GET isteklerine ve vardır sunucusundan gelen HTTP 304 yanıt yok.</span><span class="sxs-lookup"><span data-stu-id="bf89f-260">If you navigate to a previously viewed page, Fiddler shows IE does not make a conditional request for the bundle, that is, there are no HTTP GET requests from IE for the bundles and no HTTP 304 responses from the server.</span></span> <span data-ttu-id="bf89f-261">Her paket için koşullu bir istek (her paket için bir HTTP 304 yanıt sonuçta) F5 tuşuna ile yapmak için IE zorlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="bf89f-261">You can force IE to make a conditional request for each bundle with the F5 key (resulting in a HTTP 304 response for each bundle).</span></span> <span data-ttu-id="bf89f-262">Kullanarak tam yenileme uygulayabilirsiniz ^ F5 (her paket için bir HTTP 200 yanıtı sonuçlanır.)</span><span class="sxs-lookup"><span data-stu-id="bf89f-262">You can force a full refresh by using ^F5 (resulting in a HTTP 200 response for each bundle.)</span></span>

<span data-ttu-id="bf89f-263">Aşağıdaki resimde gösterildiği **önbelleğe alma** Fiddler yanıt bölmesinin sekmesinde:</span><span class="sxs-lookup"><span data-stu-id="bf89f-263">The following image shows the **Caching** tab of the Fiddler response pane:</span></span>

![fiddler önbelleğe alma görüntüsü](bundling-and-minification/_static/image8.png)

<span data-ttu-id="bf89f-265">İstek</span><span class="sxs-lookup"><span data-stu-id="bf89f-265">The request</span></span>   
`http://localhost/MvcBM_time/bundles/AllMyScripts?v=r0sLDicvP58AIXN_mc3QdyVvVj5euZNzdsa2N1PKvb81`  
 <span data-ttu-id="bf89f-266">paket için olan **AllMyScripts** ve bir sorgu dizesi çiftini içeren **v r0sLDicvP58AIXN =\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span><span class="sxs-lookup"><span data-stu-id="bf89f-266">is for the bundle **AllMyScripts** and contains a query string pair **v=r0sLDicvP58AIXN\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span></span> <span data-ttu-id="bf89f-267">Sorgu dizesi **v** diğer bir deyişle önbelleğe alma işlemi için kullanılan benzersiz bir tanımlayıcı belirteci bir değere sahip.</span><span class="sxs-lookup"><span data-stu-id="bf89f-267">The query string **v** has a value token that is a unique identifier used for caching.</span></span> <span data-ttu-id="bf89f-268">Paket değiştirmez sürece, ASP.NET uygulaması isteyeceğini **AllMyScripts** Bu belirteci kullanarak paket.</span><span class="sxs-lookup"><span data-stu-id="bf89f-268">As long as the bundle doesn't change, the ASP.NET application will request the **AllMyScripts** bundle using this token.</span></span> <span data-ttu-id="bf89f-269">Paket herhangi bir dosyada değişirse, ASP.NET iyileştirme çerçevesi tarayıcı isteklerini paket için en son paket alırsınız güvence altına almak, yeni bir belirteç oluşturur.</span><span class="sxs-lookup"><span data-stu-id="bf89f-269">If any file in the bundle changes, the ASP.NET optimization framework will generate a new token, guaranteeing that browser requests for the bundle will get the latest bundle.</span></span>

<span data-ttu-id="bf89f-270">IE yanlış IE9 F12 geliştirici araçlarını çalıştırma ve daha önce yüklenen bir sayfasına gidin, her paket ve HTTP 304 döndürme sunucu yapılan koşullu GET istekleri gösterir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-270">If you run the IE9 F12 developer tools and navigate to a previously loaded page, IE incorrectly shows conditional GET requests made to each bundle and the server returning HTTP 304.</span></span> <span data-ttu-id="bf89f-271">IE9 koşullu isteği blog girişi yaptıysanız belirleme sorunları neden olduğunu okuyabilirsiniz [kullanarak CDN'ler ve Web sitesinin performansını artırmak için Expires](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="bf89f-271">You can read why IE9 has problems determining if a conditional request was made in the blog entry [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

## <a name="less-coffeescript-scss-sass-bundling"></a><span data-ttu-id="bf89f-272">Daha az, CoffeeScript, SCSS, Sass paketleme.</span><span class="sxs-lookup"><span data-stu-id="bf89f-272">LESS, CoffeeScript, SCSS, Sass Bundling.</span></span>

<span data-ttu-id="bf89f-273">Paketleme ve küçültme framework Ara diller gibi işlemek için bir mekanizma sağlar [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [daha az](http://www.dotlesscss.org/) veya [Coffeescript ](http://coffeescript.org/)ve sonuçta elde edilen paket için dönüşümler küçültme gibi uygulayın.</span><span class="sxs-lookup"><span data-stu-id="bf89f-273">The bundling and minification framework provides a mechanism to process intermediate languages such as [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [LESS](http://www.dotlesscss.org/) or [Coffeescript](http://coffeescript.org/), and apply transforms such as minification to the resulting bundle.</span></span> <span data-ttu-id="bf89f-274">Örneğin, eklemek için [.less](http://www.dotlesscss.org/) , MVC 4 proje dosyalarına:</span><span class="sxs-lookup"><span data-stu-id="bf89f-274">For example, to add [.less](http://www.dotlesscss.org/) files to your MVC 4 project:</span></span>

1. <span data-ttu-id="bf89f-275">Daha az içeriğiniz için bir klasör oluşturun.</span><span class="sxs-lookup"><span data-stu-id="bf89f-275">Create a folder for your LESS content.</span></span> <span data-ttu-id="bf89f-276">Aşağıdaki örnek kullanır *Content\MyLess* klasör.</span><span class="sxs-lookup"><span data-stu-id="bf89f-276">The following example uses the *Content\MyLess* folder.</span></span>
2. <span data-ttu-id="bf89f-277">Ekleme [.less](http://www.dotlesscss.org/) NuGet paketi **noktasız** projenize.</span><span class="sxs-lookup"><span data-stu-id="bf89f-277">Add the [.less](http://www.dotlesscss.org/) NuGet package **dotless** to your project.</span></span>  
    <span data-ttu-id="bf89f-278">![NuGet noktasız yükleme](bundling-and-minification/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="bf89f-278">![NuGet dotless install](bundling-and-minification/_static/image9.png)</span></span>
3. <span data-ttu-id="bf89f-279">Arabirimini uygulayan bir sınıf ekleyin [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) arabirimi.</span><span class="sxs-lookup"><span data-stu-id="bf89f-279">Add a class that implements the [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) interface.</span></span> <span data-ttu-id="bf89f-280">.Less dönüştürme için aşağıdaki kodu projenize ekleyin.</span><span class="sxs-lookup"><span data-stu-id="bf89f-280">For the .less transform, add the following code to your project.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample13.cs)]
4. <span data-ttu-id="bf89f-281">Paketi birlikte daha az dosyalarının oluşturma `LessTransform` ve [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) dönüştürün.</span><span class="sxs-lookup"><span data-stu-id="bf89f-281">Create a bundle of LESS files with the `LessTransform` and the [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) transform.</span></span> <span data-ttu-id="bf89f-282">Aşağıdaki kodu ekleyin `RegisterBundles` yönteminde *uygulama\_Start\BundleConfig.cs* dosya.</span><span class="sxs-lookup"><span data-stu-id="bf89f-282">Add the following code to the `RegisterBundles` method in the *App\_Start\BundleConfig.cs* file.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample14.cs)]
5. <span data-ttu-id="bf89f-283">Daha az paket başvuran tüm görünümler için aşağıdaki kodu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="bf89f-283">Add the following code to any views which references the LESS bundle.</span></span>

    [!code-cshtml[Main](bundling-and-minification/samples/sample15.cshtml)]

## <a name="bundle-considerations"></a><span data-ttu-id="bf89f-284">Paket konuları</span><span class="sxs-lookup"><span data-stu-id="bf89f-284">Bundle Considerations</span></span>

<span data-ttu-id="bf89f-285">Paketleri oluştururken izlemeniz gereken bir iyi paket adı öneki olarak "paketi" eklenecek kuralıdır.</span><span class="sxs-lookup"><span data-stu-id="bf89f-285">A good convention to follow when creating bundles is to include "bundle" as a prefix in the bundle name.</span></span> <span data-ttu-id="bf89f-286">Bu olası engelleyecek [yönlendirme çakışma](https://forums.asp.net/post/5012037.aspx).</span><span class="sxs-lookup"><span data-stu-id="bf89f-286">This will prevent a possible [routing conflict](https://forums.asp.net/post/5012037.aspx).</span></span>

<span data-ttu-id="bf89f-287">Bir paketteki tek bir dosyayı güncelleştirmek sonra yeni bir belirteç paket sorgu dizesi parametresi için oluşturulur ve bir istemci paketini içeren bir sayfa istediğinde tam paket indirilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-287">Once you update one file in a bundle, a new token is generated for the bundle query string parameter and the full bundle must be downloaded the next time a client requests a page containing the bundle.</span></span> <span data-ttu-id="bf89f-288">Burada her varlık ayrı ayrı listelenir geleneksel biçimlendirmede yalnızca değiştirilen dosya indirilmesi.</span><span class="sxs-lookup"><span data-stu-id="bf89f-288">In traditional markup where each asset is listed individually, only the changed file would be downloaded.</span></span> <span data-ttu-id="bf89f-289">Sık sık değişen varlıklar, paketleme için iyi bir aday olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-289">Assets that change frequently may not be good candidates for bundling.</span></span>

<span data-ttu-id="bf89f-290">Paketleme ve küçültme öncelikle ilk sayfa isteği yükleme süresini artırır.</span><span class="sxs-lookup"><span data-stu-id="bf89f-290">Bundling and minification primarily improve the first page request load time.</span></span> <span data-ttu-id="bf89f-291">Bir Web sayfası istenen sonra tarayıcı (JavaScript, CSS ve görüntüler) varlıklar önbelleğe paketleme ve küçültme olmaz sağlamak herhangi performansı artırma aynı sayfa isterken ya da aynı sayfalarında site aynı varlıklar isteme.</span><span class="sxs-lookup"><span data-stu-id="bf89f-291">Once a webpage has been requested, the browser caches the assets (JavaScript, CSS and images) so bundling and minification won't provide any performance boost when requesting the same page, or pages on the same site requesting the same assets.</span></span> <span data-ttu-id="bf89f-292">Verme ayarlarsanız, varlıklarınızı doğru başlığındaki süresi dolar ve paketleme ve küçültme kullanmayın, tarayıcılar yenilik buluşsal yöntemler varlıklar eski birkaç gün sonra işaretler ve tarayıcı her varlık için bir doğrulama isteği gerektirir.</span><span class="sxs-lookup"><span data-stu-id="bf89f-292">If you don't set the expires header correctly on your assets, and you don't use bundling and minification, the browsers freshness heuristics will mark the assets stale after a few days and the browser will require a validation request for each asset.</span></span> <span data-ttu-id="bf89f-293">Bu durumda, paketleme ve küçültme sonra ilk sayfa isteği performans artışı sağlar.</span><span class="sxs-lookup"><span data-stu-id="bf89f-293">In this case, bundling and minification provide a performance increase after the first page request.</span></span> <span data-ttu-id="bf89f-294">Ayrıntılar için bkz: blog [kullanarak CDN'ler ve Web sitesinin performansını artırmak için Expires](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="bf89f-294">For details, see the blog [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

<span data-ttu-id="bf89f-295">Her bir ana bilgisayar başına altı eşzamanlı bağlantı tarayıcı sınırlandırılmasıdır kullanılarak azaltılabilir bir [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="bf89f-295">The browser limitation of six simultaneous connections per each hostname can be mitigated by using a [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span> <span data-ttu-id="bf89f-296">CDN barındırma sitenizi farklı bir ana bilgisayar adı olduğundan, varlık istekleri CDN altı eşzamanlı bağlantı sayısı sınırı barındırma ortamınıza karşı sayar değil.</span><span class="sxs-lookup"><span data-stu-id="bf89f-296">Because the CDN will have a different hostname than your hosting site, asset requests from the CDN will not count against the six simultaneous connections limit to your hosting environment.</span></span> <span data-ttu-id="bf89f-297">Bir CDN ortak paketini önbelleğe alma ve avantajları önbelleğe alma kenar de sağlar.</span><span class="sxs-lookup"><span data-stu-id="bf89f-297">A CDN can also provide common package caching and edge caching advantages.</span></span>

<span data-ttu-id="bf89f-298">Paketleri tarafından gereksinim duyulan sayfaları bölümlenmiş.</span><span class="sxs-lookup"><span data-stu-id="bf89f-298">Bundles should be partitioned by pages that need them.</span></span> <span data-ttu-id="bf89f-299">Örneğin, varsayılan Internet uygulaması için ASP.NET MVC şablonu jQuery doğrulama paket jQuery ayrı oluşturur.</span><span class="sxs-lookup"><span data-stu-id="bf89f-299">For example, the default ASP.NET MVC template for an internet application creates a jQuery Validation bundle separate from jQuery.</span></span> <span data-ttu-id="bf89f-300">Oluşturulan varsayılan görünümleri herhangi bir giriş varsa ve değerleri göndermeyin çünkü doğrulama paket dahil etmeyin.</span><span class="sxs-lookup"><span data-stu-id="bf89f-300">Because the default views created have no input and do not post values, they don't include the validation bundle.</span></span>

<span data-ttu-id="bf89f-301">`System.Web.Optimization` Ad alanı içinde System.Web.Optimization.DLL uygulanır.</span><span class="sxs-lookup"><span data-stu-id="bf89f-301">The `System.Web.Optimization` namespace is implemented in System.Web.Optimization.DLL.</span></span> <span data-ttu-id="bf89f-302">Bu WebGrease kitaplığı (WebGrease.dll) küçültme özellikleri için sırayla Antlr3.Runtime.dll kullanan yararlanır.</span><span class="sxs-lookup"><span data-stu-id="bf89f-302">It leverages the WebGrease library (WebGrease.dll) for minification capabilities, which in turn uses Antlr3.Runtime.dll.</span></span>

<span data-ttu-id="bf89f-303">*Twitter hızlı gönderileri yapın ve bağlantıları paylaşmak için kullandığım. My Twitter tanıtıcısı*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="bf89f-303">*I use Twitter to make quick posts and share links. My Twitter handle is*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="bf89f-304">Ek Kaynaklar</span><span class="sxs-lookup"><span data-stu-id="bf89f-304">Additional Resources</span></span>

- <span data-ttu-id="bf89f-305">Video:[paketleme ve en iyi duruma getirme](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) tarafından [Howard Dierking](https://twitter.com/#!/howard_dierking)</span><span class="sxs-lookup"><span data-stu-id="bf89f-305">Video:[Bundling and Optimizing](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) by [Howard Dierking](https://twitter.com/#!/howard_dierking)</span></span>
- <span data-ttu-id="bf89f-306">[Web sayfaları siteye Web iyileştirme ekleme](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="bf89f-306">[Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="bf89f-307">[Ekleme paketleme ve küçültme Web formları için](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="bf89f-307">[Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>
- <span data-ttu-id="bf89f-308">[Performans etkileri paketleme ve küçültme Web gözatma](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) tarafından [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span><span class="sxs-lookup"><span data-stu-id="bf89f-308">[Performance Implications of Bundling and Minification on Web Browsing](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) by [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span></span>
- <span data-ttu-id="bf89f-309">[CDN'ler kullanarak Web sitesi performansını artırmak için dolmadan](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) tarafından Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="bf89f-309">[Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) by Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span></span>
- [<span data-ttu-id="bf89f-310">RTT (iletim süreleriyle) simge durumuna küçült</span><span class="sxs-lookup"><span data-stu-id="bf89f-310">Minimize RTT (round-trip times)</span></span>](https://developers.google.com/speed/docs/best-practices/rtt)

## <a name="contributors"></a><span data-ttu-id="bf89f-311">Katkıda Bulunanlar</span><span class="sxs-lookup"><span data-stu-id="bf89f-311">Contributors</span></span>

- <span data-ttu-id="bf89f-312">Hao Kung</span><span class="sxs-lookup"><span data-stu-id="bf89f-312">Hao Kung</span></span>
- [<span data-ttu-id="bf89f-313">Howard Dierking</span><span class="sxs-lookup"><span data-stu-id="bf89f-313">Howard Dierking</span></span>](https://twitter.com/#!/howard_dierking)
- <span data-ttu-id="bf89f-314">Diana LaRose</span><span class="sxs-lookup"><span data-stu-id="bf89f-314">Diana LaRose</span></span>
