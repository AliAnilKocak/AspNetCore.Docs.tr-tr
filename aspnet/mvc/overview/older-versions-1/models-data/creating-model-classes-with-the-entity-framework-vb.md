---
uid: mvc/overview/older-versions-1/models-data/creating-model-classes-with-the-entity-framework-vb
title: "Entity Framework (VB) ile modeli sınıfları oluşturma | Microsoft Docs"
author: microsoft
description: "Bu öğreticide, ASP.NET MVC Microsoft Entity Framework ile kullanmayı öğrenin. Bir ADO.NET varlık Da oluşturmak için varlık Sihirbazı'nı kullanmayı öğrenin..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/27/2009
ms.topic: article
ms.assetid: ff8322c9-12f3-4e24-aba6-a38046b9bb0d
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/models-data/creating-model-classes-with-the-entity-framework-vb
msc.type: authoredcontent
ms.openlocfilehash: efc190d856fe9ebf1c09e0ae4758aabb1e3254dc
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/10/2017
---
<a name="creating-model-classes-with-the-entity-framework-vb"></a><span data-ttu-id="882ff-104">Entity Framework (VB) ile modeli sınıfları oluşturma</span><span class="sxs-lookup"><span data-stu-id="882ff-104">Creating Model Classes with the Entity Framework (VB)</span></span>
====================
<span data-ttu-id="882ff-105">tarafından [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="882ff-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="882ff-106">Bu öğreticide, ASP.NET MVC Microsoft Entity Framework ile kullanmayı öğrenin.</span><span class="sxs-lookup"><span data-stu-id="882ff-106">In this tutorial, you learn how to use ASP.NET MVC with the Microsoft Entity Framework.</span></span> <span data-ttu-id="882ff-107">Bir ADO.NET varlık veri modeli oluşturmak için varlık Sihirbazı'nı kullanmayı öğrenin.</span><span class="sxs-lookup"><span data-stu-id="882ff-107">You learn how to use the Entity Wizard to create an ADO.NET Entity Data Model.</span></span> <span data-ttu-id="882ff-108">Bu öğretici süresince seçin, Ekle, Güncelleştir ve Entity Framework kullanarak veritabanı verilerini silmek üzere verilmektedir bir web uygulaması oluşturun.</span><span class="sxs-lookup"><span data-stu-id="882ff-108">Over the course of this tutorial, we build a web application that illustrates how to select, insert, update, and delete database data by using the Entity Framework.</span></span>


<span data-ttu-id="882ff-109">Bu öğretici, bir ASP.NET MVC uygulaması oluştururken Microsoft Entity Framework kullanarak veri erişim sınıfları nasıl oluşturabileceğinizi açıklamak için hedefidir.</span><span class="sxs-lookup"><span data-stu-id="882ff-109">The goal of this tutorial is to explain how you can create data access classes using the Microsoft Entity Framework when building an ASP.NET MVC application.</span></span> <span data-ttu-id="882ff-110">Bu öğreticide Microsoft Entity Framework'ün önceki bilgi varsayar.</span><span class="sxs-lookup"><span data-stu-id="882ff-110">This tutorial assumes no previous knowledge of the Microsoft Entity Framework.</span></span> <span data-ttu-id="882ff-111">Bu öğreticide sonuna tarafından nasıl Entity Framework kullanma seçin, ekleme, güncelleştirme ve veritabanı kayıtlarını sil anlamanız.</span><span class="sxs-lookup"><span data-stu-id="882ff-111">By the end of this tutorial, you'll understand how to use the Entity Framework to select, insert, update, and delete database records.</span></span>

<span data-ttu-id="882ff-112">Microsoft Entity Framework Veri erişim katmanı veritabanından otomatik olarak oluşturmanıza olanak sağlayan bir nesne ilişkisel eşleme (O/RM) bir araçtır.</span><span class="sxs-lookup"><span data-stu-id="882ff-112">The Microsoft Entity Framework is an Object Relational Mapping (O/RM) tool that enables you to generate a data access layer from a database automatically.</span></span> <span data-ttu-id="882ff-113">Entity Framework veri erişimi sınıfları el ile oluşturmanın can sıkıcı iş önlemek etkinleştirir.</span><span class="sxs-lookup"><span data-stu-id="882ff-113">The Entity Framework enables you to avoid the tedious work of building your data access classes by hand.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="882ff-114">ASP.NET MVC Microsoft Entity Framework arasındaki temel bağlantı yoktur.</span><span class="sxs-lookup"><span data-stu-id="882ff-114">There is no essential connection between ASP.NET MVC and the Microsoft Entity Framework.</span></span> <span data-ttu-id="882ff-115">ASP.NET MVC ile kullanabileceğiniz Entity Framework birkaç alternatifleri vardır.</span><span class="sxs-lookup"><span data-stu-id="882ff-115">There are several alternatives to the Entity Framework that you can use with ASP.NET MVC.</span></span> <span data-ttu-id="882ff-116">Örneğin, Microsoft LINQ SQL, NHibernate veya SubSonic gibi diğer O/RM araçları kullanarak, MVC Model sınıflarınızı oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="882ff-116">For example, you can build your MVC Model classes using other O/RM tools such as Microsoft LINQ to SQL, NHibernate, or SubSonic.</span></span>


<span data-ttu-id="882ff-117">Microsoft Entity Framework ASP.NET MVC ile nasıl kullanabileceğiniz göstermek için biz basit örnek bir uygulama oluşturmak.</span><span class="sxs-lookup"><span data-stu-id="882ff-117">In order to illustrate how you can use the Microsoft Entity Framework with ASP.NET MVC, we'll build a simple sample application.</span></span> <span data-ttu-id="882ff-118">Görüntüleme ve film veritabanı kayıtlarını düzenleme olanak tanıyan film veritabanı uygulaması oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="882ff-118">We'll create a Movie Database application that enables you to display and edit movie database records.</span></span>

<span data-ttu-id="882ff-119">Bu öğreticide, Visual Studio 2008 veya Visual Web Developer 2008 Service Pack 1 sahip olduğunuzu varsayar.</span><span class="sxs-lookup"><span data-stu-id="882ff-119">This tutorial assumes that you have Visual Studio 2008 or Visual Web Developer 2008 with Service Pack 1.</span></span> <span data-ttu-id="882ff-120">Entity Framework kullanmak için Service Pack 1 gerekir.</span><span class="sxs-lookup"><span data-stu-id="882ff-120">You need Service Pack 1 in order to use the Entity Framework.</span></span> <span data-ttu-id="882ff-121">Visual Studio 2008 Service Pack 1 veya Service Pack 1 ile Visual Web Developer aşağıdaki adresinden indirebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="882ff-121">You can download Visual Studio 2008 Service Pack 1 or Visual Web Developer with Service Pack 1 from the following address:</span></span>

> [<span data-ttu-id="882ff-122">https://www.ASP.NET/downloads/</span><span class="sxs-lookup"><span data-stu-id="882ff-122">https://www.asp.net/downloads/</span></span>](https://www.asp.net/downloads)


## <a name="creating-the-movie-sample-database"></a><span data-ttu-id="882ff-123">Film örnek veritabanı oluşturma</span><span class="sxs-lookup"><span data-stu-id="882ff-123">Creating the Movie Sample Database</span></span>

<span data-ttu-id="882ff-124">Film veritabanı uygulaması şu sütunları içerir filmler adlı bir veritabanı tablosu kullanır:</span><span class="sxs-lookup"><span data-stu-id="882ff-124">The Movie Database application uses a database table named Movies that contains the following columns:</span></span>

| <span data-ttu-id="882ff-125">Sütun adı</span><span class="sxs-lookup"><span data-stu-id="882ff-125">Column Name</span></span> | <span data-ttu-id="882ff-126">Veri Türü</span><span class="sxs-lookup"><span data-stu-id="882ff-126">Data Type</span></span> | <span data-ttu-id="882ff-127">Null değerlere izin verilsin mi?</span><span class="sxs-lookup"><span data-stu-id="882ff-127">Allow Nulls?</span></span> | <span data-ttu-id="882ff-128">Birincil anahtarı mı?</span><span class="sxs-lookup"><span data-stu-id="882ff-128">Is Primary Key?</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="882ff-129">Kimliği</span><span class="sxs-lookup"><span data-stu-id="882ff-129">Id</span></span> | <span data-ttu-id="882ff-130">int</span><span class="sxs-lookup"><span data-stu-id="882ff-130">int</span></span> | <span data-ttu-id="882ff-131">False</span><span class="sxs-lookup"><span data-stu-id="882ff-131">False</span></span> | <span data-ttu-id="882ff-132">Doğru</span><span class="sxs-lookup"><span data-stu-id="882ff-132">True</span></span> |
| <span data-ttu-id="882ff-133">Başlık</span><span class="sxs-lookup"><span data-stu-id="882ff-133">Title</span></span> | <span data-ttu-id="882ff-134">Nvarchar(100)</span><span class="sxs-lookup"><span data-stu-id="882ff-134">nvarchar(100)</span></span> | <span data-ttu-id="882ff-135">False</span><span class="sxs-lookup"><span data-stu-id="882ff-135">False</span></span> | <span data-ttu-id="882ff-136">False</span><span class="sxs-lookup"><span data-stu-id="882ff-136">False</span></span> |
| <span data-ttu-id="882ff-137">Director</span><span class="sxs-lookup"><span data-stu-id="882ff-137">Director</span></span> | <span data-ttu-id="882ff-138">Nvarchar(100)</span><span class="sxs-lookup"><span data-stu-id="882ff-138">nvarchar(100)</span></span> | <span data-ttu-id="882ff-139">False</span><span class="sxs-lookup"><span data-stu-id="882ff-139">False</span></span> | <span data-ttu-id="882ff-140">False</span><span class="sxs-lookup"><span data-stu-id="882ff-140">False</span></span> |

<span data-ttu-id="882ff-141">Bu tablo, aşağıdaki adımları izleyerek, bir ASP.NET MVC projesinde ekleyebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="882ff-141">You can add this table to an ASP.NET MVC project by following these steps:</span></span>

1. <span data-ttu-id="882ff-142">Uygulamayı sağ\_menü seçeneğini seçin ve Çözüm Gezgini penceresinin veri klasörü **Ekle, yeni öğe.**</span><span class="sxs-lookup"><span data-stu-id="882ff-142">Right-click the App\_Data folder in the Solution Explorer window and select the menu option **Add, New Item.**</span></span>
2. <span data-ttu-id="882ff-143">Gelen **Yeni Öğe Ekle** iletişim kutusunda **SQL Server veritabanı**, veritabanı MoviesDB.mdf adını verin ve tıklayın **Ekle** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="882ff-143">From the **Add New Item** dialog box, select **SQL Server Database**, give the database the name MoviesDB.mdf, and click the **Add** button.</span></span>
3. <span data-ttu-id="882ff-144">Sunucu Gezgini/veritabanı Gezgini penceresi açmak için MoviesDB.mdf dosyasını çift tıklatın.</span><span class="sxs-lookup"><span data-stu-id="882ff-144">Double-click the MoviesDB.mdf file to open the Server Explorer/Database Explorer window.</span></span>
4. <span data-ttu-id="882ff-145">MoviesDB.mdf veritabanı bağlantısı'nı genişletin, tablolar klasörünü sağ tıklatın ve menü seçeneğini belirleyin **Yeni Tablo Ekle**.</span><span class="sxs-lookup"><span data-stu-id="882ff-145">Expand the MoviesDB.mdf database connection, right-click the Tables folder, and select the menu option **Add New Table**.</span></span>
5. <span data-ttu-id="882ff-146">Tablo Tasarımcısı'nda kimliği, başlık ve Director sütunları ekleyin.</span><span class="sxs-lookup"><span data-stu-id="882ff-146">In the Table Designer, add the Id, Title, and Director columns.</span></span>
6. <span data-ttu-id="882ff-147">Tıklatın **kaydetmek** (disket simgesine sahip) düğmesini yeni bir tablo adı filmler ile kaydetmek için.</span><span class="sxs-lookup"><span data-stu-id="882ff-147">Click the **Save** button (it has the icon of the floppy) to save the new table with the name Movies.</span></span>

<span data-ttu-id="882ff-148">Film veritabanı tablosu oluşturduktan sonra bazı örnek veriler tabloya eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="882ff-148">After you create the Movies database table, you should add some sample data to the table.</span></span> <span data-ttu-id="882ff-149">Film tabloyu sağ tıklatın ve menü seçeneğini **Show Table Data**.</span><span class="sxs-lookup"><span data-stu-id="882ff-149">Right-click the Movies table and select the menu option **Show Table Data**.</span></span> <span data-ttu-id="882ff-150">Görüntülenen kılavuza sahte film verileri girebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="882ff-150">You can enter fake movie data into the grid that appears.</span></span>

## <a name="creating-the-adonet-entity-data-model"></a><span data-ttu-id="882ff-151">ADO.NET varlık veri modeli oluşturma</span><span class="sxs-lookup"><span data-stu-id="882ff-151">Creating the ADO.NET Entity Data Model</span></span>

<span data-ttu-id="882ff-152">Entity Framework kullanmak için bir varlık veri modeli oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="882ff-152">In order to use the Entity Framework, you need to create an Entity Data Model.</span></span> <span data-ttu-id="882ff-153">Visual Studio yararlanabilir *varlık veri modeli Sihirbazı* bir varlık veri modeli veritabanından otomatik olarak oluşturmak için.</span><span class="sxs-lookup"><span data-stu-id="882ff-153">You can take advantage of the Visual Studio *Entity Data Model Wizard* to generate an Entity Data Model from a database automatically.</span></span>

<span data-ttu-id="882ff-154">Aşağıdaki adımları uygulayın:</span><span class="sxs-lookup"><span data-stu-id="882ff-154">Follow these steps:</span></span>

1. <span data-ttu-id="882ff-155">Çözüm Gezgini penceresinde modeller klasörü sağ tıklatın ve menü seçeneğini **Ekle, yeni öğe**.</span><span class="sxs-lookup"><span data-stu-id="882ff-155">Right-click the Models folder in the Solution Explorer window and select the menu option **Add, New Item**.</span></span>
2. <span data-ttu-id="882ff-156">İçinde **Yeni Öğe Ekle** iletişim kutusunda, veri kategorisi seçin (bkz: Şekil 1).</span><span class="sxs-lookup"><span data-stu-id="882ff-156">In the **Add New Item** dialog, select the Data category (see Figure 1).</span></span>
3. <span data-ttu-id="882ff-157">Seçin **ADO.NET varlık veri modeli** şablonu, varlık veri modeli MoviesDBModel.edmx adını verin ve tıklatın **Ekle** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="882ff-157">Select the **ADO.NET Entity Data Model** template, give the Entity Data Model the name MoviesDBModel.edmx, and click the **Add** button.</span></span> <span data-ttu-id="882ff-158">Tıklatarak **Ekle** düğmesi veri modeli Sihirbazı'nı başlatır.</span><span class="sxs-lookup"><span data-stu-id="882ff-158">Clicking the **Add** button launches the Data Model Wizard.</span></span>
4. <span data-ttu-id="882ff-159">İçinde **Model içeriği seçin** seçin, adım **bir veritabanından Oluştur** seçeneğini ve tıklayın **sonraki** (bkz: Şekil 2) düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="882ff-159">In the **Choose Model Contents** step, choose the **Generate from a database** option and click the **Next** button (see Figure 2).</span></span>
5. <span data-ttu-id="882ff-160">İçinde **veri bağlantınızı** adım, MoviesDB.mdf veritabanı bağlantısı seçin, bağlantı ayarlarını MoviesDBEntities adlandırın ve tıklayın varlıkları girin **sonraki** (bkz: Şekil 3) düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="882ff-160">In the **Choose Your Data Connection** step, select the MoviesDB.mdf database connection, enter the entities connection settings name MoviesDBEntities, and click the **Next** button (see Figure 3).</span></span>
6. <span data-ttu-id="882ff-161">İçinde **veritabanı nesnelerinizi** adım, film veritabanı tabloyu seçin ve **son** (bkz: Şekil 4) düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="882ff-161">In the **Choose Your Database Objects** step, select the Movie database table and click the **Finish** button (see Figure 4).</span></span>

<span data-ttu-id="882ff-162">Bu adımları tamamladıktan sonra ADO.NET varlık veri modeli Tasarımcısı'nı (Entity Designer) açar.</span><span class="sxs-lookup"><span data-stu-id="882ff-162">After you complete these steps, the ADO.NET Entity Data Model Designer (Entity Designer) opens.</span></span>

<span data-ttu-id="882ff-163">**Şekil 1 – yeni bir varlık veri modeli oluşturma**</span><span class="sxs-lookup"><span data-stu-id="882ff-163">**Figure 1 – Creating a new Entity Data Model**</span></span>

![clip_image002](creating-model-classes-with-the-entity-framework-vb/_static/image1.jpg)

<span data-ttu-id="882ff-165">**Şekil 2 – modeli içeriği adım seçin**</span><span class="sxs-lookup"><span data-stu-id="882ff-165">**Figure 2 – Choose Model Contents Step**</span></span>

![clip_image004](creating-model-classes-with-the-entity-framework-vb/_static/image2.jpg)

<span data-ttu-id="882ff-167">**Şekil 3 – veri bağlantınızı seçin**</span><span class="sxs-lookup"><span data-stu-id="882ff-167">**Figure 3 – Choose Your Data Connection**</span></span>

![clip_image006](creating-model-classes-with-the-entity-framework-vb/_static/image3.jpg)

<span data-ttu-id="882ff-169">**Şekil 4 – veritabanı nesnelerini seçin**</span><span class="sxs-lookup"><span data-stu-id="882ff-169">**Figure 4 – Choose Your Database Objects**</span></span>

![clip_image008](creating-model-classes-with-the-entity-framework-vb/_static/image4.jpg)

## <a name="modifying-the-adonet-entity-data-model"></a><span data-ttu-id="882ff-171">ADO.NET varlık veri modeli değiştirme</span><span class="sxs-lookup"><span data-stu-id="882ff-171">Modifying the ADO.NET Entity Data Model</span></span>

<span data-ttu-id="882ff-172">Bir varlık veri modeli oluşturduktan sonra modelin Entity Designer yararlanarak değiştirebilirsiniz (bkz. Şekil 5).</span><span class="sxs-lookup"><span data-stu-id="882ff-172">After you create an Entity Data Model, you can modify the model by taking advantage of the Entity Designer (see Figure 5).</span></span> <span data-ttu-id="882ff-173">Çözüm Gezgini penceresi içinde modelleri klasöründe bulunan MoviesDBModel.edmx dosyasına çift tıklayarak dosyayı herhangi bir zamanda Entity Designer açabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="882ff-173">You can open the Entity Designer at any time by double-clicking the MoviesDBModel.edmx file contained in the Models folder within the Solution Explorer window.</span></span>

<span data-ttu-id="882ff-174">**ADO.NET varlık veri modeli Tasarımcısı 5 – Şekil**</span><span class="sxs-lookup"><span data-stu-id="882ff-174">**Figure 5 – The ADO.NET Entity Data Model Designer**</span></span>

![clip_image010](creating-model-classes-with-the-entity-framework-vb/_static/image5.jpg)

<span data-ttu-id="882ff-176">Örneğin, varlık Model veri Sihirbazı oluşturur sınıflarının adlarını değiştirmek için Entity Designer kullanın.</span><span class="sxs-lookup"><span data-stu-id="882ff-176">For example, you can use the Entity Designer to change the names of the classes that the Entity Model Data Wizard generates.</span></span> <span data-ttu-id="882ff-177">Sihirbaz filmler adlı yeni bir veri erişim sınıfı oluşturuldu.</span><span class="sxs-lookup"><span data-stu-id="882ff-177">The Wizard created a new data access class named Movies.</span></span> <span data-ttu-id="882ff-178">Diğer bir deyişle, sihirbazın sınıfı veritabanı tablosunun çok aynı adı verdi.</span><span class="sxs-lookup"><span data-stu-id="882ff-178">In other words, the Wizard gave the class the very same name as the database table.</span></span> <span data-ttu-id="882ff-179">Bu sınıf belirli bir filmi örneği temsil eden kullanacağız çünkü biz filmler sınıfından film için yeniden adlandırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="882ff-179">Because we will use this class to represent a particular Movie instance, we should rename the class from Movies to Movie.</span></span>

<span data-ttu-id="882ff-180">Bir varlık sınıfı yeniden adlandırmak isterseniz, sınıf adını Entity Designer'da çift tıklayın ve yeni bir ad girin (bkz. Şekil 6).</span><span class="sxs-lookup"><span data-stu-id="882ff-180">If you want to rename an entity class, you can double-click on the class name in the Entity Designer and enter a new name (see Figure 6).</span></span> <span data-ttu-id="882ff-181">Alternatif olarak, bir varlık Entity Designer'da seçtikten sonra Özellikler penceresinde bir varlığın adı değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="882ff-181">Alternatively, you can change the name of an entity in the Properties window after selecting an entity in the Entity Designer.</span></span>

<span data-ttu-id="882ff-182">**Şekil 6 – bir varlık adı değiştirme**</span><span class="sxs-lookup"><span data-stu-id="882ff-182">**Figure 6 – Changing an entity name**</span></span>

![clip_image012](creating-model-classes-with-the-entity-framework-vb/_static/image6.jpg)

<span data-ttu-id="882ff-184">Varlık veri modelinizi (disket simgesi) Kaydet düğmesine tıklayarak değişiklik yaptıktan sonra kaydetmeyi unutmayın.</span><span class="sxs-lookup"><span data-stu-id="882ff-184">Remember to save your Entity Data Model after making a modification by clicking the Save button (the icon of the floppy disk).</span></span> <span data-ttu-id="882ff-185">Arka planda Entity Designer Visual Basic .NET sınıfları kümesi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="882ff-185">Behind the scenes, the Entity Designer generates a set of Visual Basic .NET classes.</span></span> <span data-ttu-id="882ff-186">Çözüm Gezgini penceresinden MoviesDBModel.Designer.vb dosyasını açarak bu sınıfların görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="882ff-186">You can view these classes by opening the MoviesDBModel.Designer.vb file from the Solution Explorer window.</span></span>


<span data-ttu-id="882ff-187">Değişikliklerinizi Entity Designer bir sonraki kullanışınızda üzerine yazılacak beri Designer.vb olarak adlandırılır dosyasındaki kodu değiştirmeyin.</span><span class="sxs-lookup"><span data-stu-id="882ff-187">Don't modify the code in the Designer.vb file since your changes will be overwritten the next time you use the Entity Designer.</span></span> <span data-ttu-id="882ff-188">Designer.vb olarak adlandırılır dosyasında tanımlanan sınıflar işlevselliğini genişletmek istediğiniz sonra oluşturabileceğiniz *kısmi sınıflar* dosyaları'te ayırın.</span><span class="sxs-lookup"><span data-stu-id="882ff-188">If you want to extend the functionality of the entity classes defined in the Designer.vb file then you can create *partial classes* in separate files.</span></span>


#### <a name="selecting-database-records-with-the-entity-framework"></a><span data-ttu-id="882ff-189">Entity Framework veritabanı kayıtları seçme</span><span class="sxs-lookup"><span data-stu-id="882ff-189">Selecting Database Records with the Entity Framework</span></span>

<span data-ttu-id="882ff-190">Film veritabanı uygulamamızı oluşturmaya film kayıtların listesini görüntüleyen bir sayfa oluşturarak başlayalım.</span><span class="sxs-lookup"><span data-stu-id="882ff-190">Let's start building our Movie Database application by creating a page that displays a list of movie records.</span></span> <span data-ttu-id="882ff-191">İNDİS() adlı bir eylem listeleme 1 giriş denetleyicisi sunar.</span><span class="sxs-lookup"><span data-stu-id="882ff-191">The Home controller in Listing 1 exposes an action named Index().</span></span> <span data-ttu-id="882ff-192">İNDİS() eylem film kayıtların tümünü Entity Framework yararlanarak film veritabanı tablosundan döndürür.</span><span class="sxs-lookup"><span data-stu-id="882ff-192">The Index() action returns all of the movie records from the Movie database table by taking advantage of the Entity Framework.</span></span>

<span data-ttu-id="882ff-193">**1 – Controllers\HomeController.vb listeleme**</span><span class="sxs-lookup"><span data-stu-id="882ff-193">**Listing 1 – Controllers\HomeController.vb**</span></span>

[!code-vb[Main](creating-model-classes-with-the-entity-framework-vb/samples/sample1.vb)]

<span data-ttu-id="882ff-194">Denetleyici listeleme 1'deki bir oluşturucu içerdiğine dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="882ff-194">Notice that the controller in Listing 1 includes a constructor.</span></span> <span data-ttu-id="882ff-195">Adlı bir sınıf düzeyi alan oluşturucu başlatır \_db.</span><span class="sxs-lookup"><span data-stu-id="882ff-195">The constructor initializes a class-level field named \_db.</span></span> <span data-ttu-id="882ff-196">\_Db alan Microsoft Entity Framework tarafından oluşturulan veritabanı varlıkları temsil eder.</span><span class="sxs-lookup"><span data-stu-id="882ff-196">The \_db field represents the database entities generated by the Microsoft Entity Framework.</span></span> <span data-ttu-id="882ff-197">\_Db alandır varlık tasarımcısı tarafından oluşturulan MoviesDBEntities sınıfının bir örneği.</span><span class="sxs-lookup"><span data-stu-id="882ff-197">The \_db field is an instance of the MoviesDBEntities class that was generated by the Entity Designer.</span></span>

<span data-ttu-id="882ff-198">\_Db alan içinde İNDİS() eylemi filmler veritabanı tablosundan kayıtları almak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="882ff-198">The \_db field is used within the Index() action to retrieve the records from the Movies database table.</span></span> <span data-ttu-id="882ff-199">İfade \_db. MovieSet tüm kayıtlar filmler veritabanı tablosundan temsil eder.</span><span class="sxs-lookup"><span data-stu-id="882ff-199">The expression \_db.MovieSet represents all of the records from the Movies database table.</span></span> <span data-ttu-id="882ff-200">ToList() yöntemi film nesneler genel bir koleksiyona filmler kümesi dönüştürmek için kullanılır: listesi, (film).</span><span class="sxs-lookup"><span data-stu-id="882ff-200">The ToList() method is used to convert the set of movies into a generic collection of Movie objects: List( Of Movie).</span></span>

<span data-ttu-id="882ff-201">Film kayıtları, LINQ to Entities yardımıyla alınır.</span><span class="sxs-lookup"><span data-stu-id="882ff-201">The movie records are retrieved with the help of LINQ to Entities.</span></span> <span data-ttu-id="882ff-202">LINQ listeleme 1 İNDİS() eylemini kullanan *yöntem sözdizimi* veritabanı kayıt kümesi alınamadı.</span><span class="sxs-lookup"><span data-stu-id="882ff-202">The Index() action in Listing 1 uses LINQ *method syntax* to retrieve the set of database records.</span></span> <span data-ttu-id="882ff-203">İsterseniz, LINQ kullanabilirsiniz *sorgu sözdizimi* yerine.</span><span class="sxs-lookup"><span data-stu-id="882ff-203">If you prefer, you can use LINQ *query syntax* instead.</span></span> <span data-ttu-id="882ff-204">Aşağıdaki iki ifade çok aynı şeyi yapar:</span><span class="sxs-lookup"><span data-stu-id="882ff-204">The following two statements do the very same thing:</span></span>

[!code-vb[Main](creating-model-classes-with-the-entity-framework-vb/samples/sample2.vb)]

<span data-ttu-id="882ff-205">En kullanışlı bulabileceğiniz hangi LINQ sözdizimini – yöntem sözdizimi veya sorgu söz dizimi – kullanın.</span><span class="sxs-lookup"><span data-stu-id="882ff-205">Use whichever LINQ syntax – method syntax or query syntax – that you find most intuitive.</span></span> <span data-ttu-id="882ff-206">Performans iki yaklaşım arasında fark yoktur – stili yalnızca farktır.</span><span class="sxs-lookup"><span data-stu-id="882ff-206">There is no difference in performance between the two approaches – the only difference is style.</span></span>

<span data-ttu-id="882ff-207">Listeleme 2 görünümünde film kayıtları görüntülemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="882ff-207">The view in Listing 2 is used to display the movie records.</span></span>

<span data-ttu-id="882ff-208">**2 – Views\Home\Index.aspx listeleme**</span><span class="sxs-lookup"><span data-stu-id="882ff-208">**Listing 2 – Views\Home\Index.aspx**</span></span>

[!code-aspx[Main](creating-model-classes-with-the-entity-framework-vb/samples/sample3.aspx)]

<span data-ttu-id="882ff-209">Listeleme 2 görünümünde içeren bir **her** her film kaydı tekrarlanan ve film kaydın başlık ve Director özelliklerinin değerlerini görüntüleyen döngü.</span><span class="sxs-lookup"><span data-stu-id="882ff-209">The view in Listing 2 contains a **For Each** loop that iterates through each movie record and displays the values of the movie record's Title and Director properties.</span></span> <span data-ttu-id="882ff-210">Bir düzenleme ve silme bağlantı yanındaki her kayıt görüntülenir dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="882ff-210">Notice that an Edit and Delete link is displayed next to each record.</span></span> <span data-ttu-id="882ff-211">Ayrıca, bir ekleme film bağlantı görünümün en altında görüntülenen (bkz. Şekil 7).</span><span class="sxs-lookup"><span data-stu-id="882ff-211">Furthermore, an Add Movie link appears at the bottom of the view (see Figure 7).</span></span>

<span data-ttu-id="882ff-212">**Şekil 7 – dizini görünümü**</span><span class="sxs-lookup"><span data-stu-id="882ff-212">**Figure 7 – The Index view**</span></span>

![clip_image014](creating-model-classes-with-the-entity-framework-vb/_static/image7.jpg)

<span data-ttu-id="882ff-214">Dizin görünümdür bir *yazılan Görünüm*.</span><span class="sxs-lookup"><span data-stu-id="882ff-214">The Index view is a *typed view*.</span></span> <span data-ttu-id="882ff-215">Dizin görünümünün sahip bir &lt;% @ sayfa %&gt; Inherits özniteliği içeren yönergesi.</span><span class="sxs-lookup"><span data-stu-id="882ff-215">The Index view has a &lt;%@ Page %&gt; directive that includes an Inherits attribute.</span></span> <span data-ttu-id="882ff-216">Inherits özniteliği, türü kesin belirlenmiş genel listesi film nesneler koleksiyonunu – bir listesi, (film) ViewData.Model özelliğine çevirir.</span><span class="sxs-lookup"><span data-stu-id="882ff-216">The Inherits attribute casts the ViewData.Model property to a strongly typed generic List collection of Movie objects – a List(Of Movie).</span></span>

## <a name="inserting-database-records-with-the-entity-framework"></a><span data-ttu-id="882ff-217">Entity Framework veritabanı kayıtlarını ekleme</span><span class="sxs-lookup"><span data-stu-id="882ff-217">Inserting Database Records with the Entity Framework</span></span>

<span data-ttu-id="882ff-218">Entity Framework kolaylaştıran yeni kayıtlar bir veritabanı tablosuna eklemek için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="882ff-218">You can use the Entity Framework to make it easy to insert new records into a database table.</span></span> <span data-ttu-id="882ff-219">Liste 3'teki yeni kayıtlar film veritabanı tablosuna eklemek için kullanabileceğiniz giriş denetleyici sınıfı eklenen iki yeni eylemleri içerir.</span><span class="sxs-lookup"><span data-stu-id="882ff-219">Listing 3 contains two new actions added to the Home controller class that you can use to insert new records into the Movie database table.</span></span>

<span data-ttu-id="882ff-220">**3 – Controllers\HomeController.vb (Ekle yöntemleri) listeleme**</span><span class="sxs-lookup"><span data-stu-id="882ff-220">**Listing 3 – Controllers\HomeController.vb (Add methods)**</span></span>

[!code-vb[Main](creating-model-classes-with-the-entity-framework-vb/samples/sample4.vb)]

<span data-ttu-id="882ff-221">İlk Add() eylem yalnızca bir görünüm verir.</span><span class="sxs-lookup"><span data-stu-id="882ff-221">The first Add() action simply returns a view.</span></span> <span data-ttu-id="882ff-222">Yeni bir filmi veritabanı eklemek için bir form görünümü içerir (bkz. Şekil 8) kaydedin.</span><span class="sxs-lookup"><span data-stu-id="882ff-222">The view contains a form for adding a new movie database record (see Figure 8).</span></span> <span data-ttu-id="882ff-223">Formu gönderdiğinde, ikinci Add() eylemi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="882ff-223">When you submit the form, the second Add() action is invoked.</span></span>

<span data-ttu-id="882ff-224">İkinci Add() eylemi AcceptVerbs özniteliği ile tasarlandığına dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="882ff-224">Notice that the second Add() action is decorated with the AcceptVerbs attribute.</span></span> <span data-ttu-id="882ff-225">Bu eylem, yalnızca bir HTTP POST işlemi gerçekleştirirken çağrılabilir.</span><span class="sxs-lookup"><span data-stu-id="882ff-225">This action can be invoked only when performing an HTTP POST operation.</span></span> <span data-ttu-id="882ff-226">Diğer bir deyişle, bu eylem yalnızca bir HTML formuna nakil sırasında çağrılabilir.</span><span class="sxs-lookup"><span data-stu-id="882ff-226">In other words, this action can only be invoked when posting an HTML form.</span></span>

<span data-ttu-id="882ff-227">İkinci Add() eylem ASP.NET MVC TryUpdateModel() yöntemi yardımıyla Entity Framework film sınıfının yeni bir örneğini oluşturur.</span><span class="sxs-lookup"><span data-stu-id="882ff-227">The second Add() action creates a new instance of the Entity Framework Movie class with the help of the ASP.NET MVC TryUpdateModel() method.</span></span> <span data-ttu-id="882ff-228">TryUpdateModel() yöntemi Add() yönteme geçirilen FormCollection alanları alır ve bu HTML form alanların değerlerini film sınıfına atar.</span><span class="sxs-lookup"><span data-stu-id="882ff-228">The TryUpdateModel() method takes the fields in the FormCollection passed to the Add() method and assigns the values of these HTML form fields to the Movie class.</span></span>


<span data-ttu-id="882ff-229">Entity Framework kullanırken, bir varlık sınıfı özelliklerini güncelleştirmek için TryUpdateModel veya UpdateModel yöntemi kullanırken, "Beyaz"özelliklerin listesini sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="882ff-229">When using the Entity Framework, you must supply a "white list" of properties when using the TryUpdateModel or UpdateModel methods to update the properties of an entity class.</span></span>


<span data-ttu-id="882ff-230">Ardından, bazı basit form doğrulama Add() eylemi gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="882ff-230">Next, the Add() action performs some simple form validation.</span></span> <span data-ttu-id="882ff-231">Eylem başlık ve Director özellikleri değerlere sahip olduğunu doğrular.</span><span class="sxs-lookup"><span data-stu-id="882ff-231">The action verifies that both the Title and Director properties have values.</span></span> <span data-ttu-id="882ff-232">Bir doğrulama hatası varsa, bir doğrulama hata iletisi ModelState için eklenir.</span><span class="sxs-lookup"><span data-stu-id="882ff-232">If there is a validation error, then a validation error message is added to ModelState.</span></span>

<span data-ttu-id="882ff-233">Doğrulama hataları varsa yeni bir filmi kayıt Entity Framework yardımıyla filmler veritabanı tablosuna eklenir.</span><span class="sxs-lookup"><span data-stu-id="882ff-233">If there are no validation errors then a new movie record is added to the Movies database table with the help of the Entity Framework.</span></span> <span data-ttu-id="882ff-234">Yeni kayıttaki aşağıdaki iki kod satırı ile veritabanına eklenir:</span><span class="sxs-lookup"><span data-stu-id="882ff-234">The new record is added to the database with the following two lines of code:</span></span>

[!code-vb[Main](creating-model-classes-with-the-entity-framework-vb/samples/sample5.vb)]

<span data-ttu-id="882ff-235">Kod ilk satırını yeni film varlık Entity Framework tarafından izleniyor filmler kümesine ekler.</span><span class="sxs-lookup"><span data-stu-id="882ff-235">The first line of code adds the new Movie entity to the set of movies being tracked by the Entity Framework.</span></span> <span data-ttu-id="882ff-236">İkinci satır kod değişiklikleri temel veritabanına izleniyor filmler yapılmıştır kaydeder.</span><span class="sxs-lookup"><span data-stu-id="882ff-236">The second line of code saves whatever changes have been made to the Movies being tracked back to the underlying database.</span></span>

<span data-ttu-id="882ff-237">**Şekil 8 – Ekle görünümü**</span><span class="sxs-lookup"><span data-stu-id="882ff-237">**Figure 8 – The Add view**</span></span>

![clip_image016](creating-model-classes-with-the-entity-framework-vb/_static/image8.jpg)

## <a name="updating-database-records-with-the-entity-framework"></a><span data-ttu-id="882ff-239">Entity Framework ile veritabanı kayıtlarını güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="882ff-239">Updating Database Records with the Entity Framework</span></span>

<span data-ttu-id="882ff-240">Yalnızca yeni bir veritabanı kaydı eklemek için izlenen bir yaklaşım Entity Framework veritabanı kaydını düzenlemek için neredeyse aynı yaklaşımı izleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="882ff-240">You can follow almost the same approach to edit a database record with the Entity Framework as the approach that we just followed to insert a new database record.</span></span> <span data-ttu-id="882ff-241">4 listeleme Edit() adlı iki yeni denetleyici eylemleri içerir.</span><span class="sxs-lookup"><span data-stu-id="882ff-241">Listing 4 contains two new controller actions named Edit().</span></span> <span data-ttu-id="882ff-242">İlk Edit() eylem film kaydını düzenlemek için bir HTML formuna döndürür.</span><span class="sxs-lookup"><span data-stu-id="882ff-242">The first Edit() action returns an HTML form for editing a movie record.</span></span> <span data-ttu-id="882ff-243">Veritabanını güncelleştirmek ikinci Edit() eylemi çalışır.</span><span class="sxs-lookup"><span data-stu-id="882ff-243">The second Edit() action attempts to update the database.</span></span>

<span data-ttu-id="882ff-244">**4 – Controllers\HomeController.vb (düzenleme yöntemleri) listeleme**</span><span class="sxs-lookup"><span data-stu-id="882ff-244">**Listing 4 – Controllers\HomeController.vb (Edit methods)**</span></span>

[!code-vb[Main](creating-model-classes-with-the-entity-framework-vb/samples/sample6.vb)]

<span data-ttu-id="882ff-245">İkinci Edit() eylemi düzenlenen film kimliğini eşleşen veritabanından film kaydı alarak başlatır.</span><span class="sxs-lookup"><span data-stu-id="882ff-245">The second Edit() action starts by retrieving the Movie record from the database that matches the Id of the movie being edited.</span></span> <span data-ttu-id="882ff-246">Aşağıdaki LINQ to Entities deyimi belirli bir kimlik numarası eşleşen ilk veritabanı kaydını alan:</span><span class="sxs-lookup"><span data-stu-id="882ff-246">The following LINQ to Entities statement grabs the first database record that matches a particular Id:</span></span>

[!code-vb[Main](creating-model-classes-with-the-entity-framework-vb/samples/sample7.vb)]

<span data-ttu-id="882ff-247">Ardından, TryUpdateModel() yöntemi film varlık özelliklerini HTML form alanların değerlerini atamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="882ff-247">Next, the TryUpdateModel() method is used to assign the values of the HTML form fields to the properties of the movie entity.</span></span> <span data-ttu-id="882ff-248">Beyaz liste güncelleştirmek için tam özelliklerini belirtmek için sağlanan dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="882ff-248">Notice that a white list is supplied to specify the exact properties to update.</span></span>

<span data-ttu-id="882ff-249">Ardından, filmi ve Director özellikleri değerlere sahip olduğunu doğrulamak için bazı basit bir doğrulama gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="882ff-249">Next, some simple validation is performed to verify that both the Movie Title and Director properties have values.</span></span> <span data-ttu-id="882ff-250">Her iki özellik değeri eksik, ModelState için bir doğrulama hata iletisi eklenir ve ModelState.IsValid false değerini döndürür.</span><span class="sxs-lookup"><span data-stu-id="882ff-250">If either property is missing a value, then a validation error message is added to ModelState and ModelState.IsValid returns the value false.</span></span>

<span data-ttu-id="882ff-251">Doğrulama hatası varsa, son olarak, daha sonra temel filmler veritabanı tablosu herhangi bir değişiklikle SaveChanges() yöntemini çağırarak güncelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="882ff-251">Finally, if there are no validation errors, then the underlying Movies database table is updated with any changes by calling the SaveChanges() method.</span></span>

<span data-ttu-id="882ff-252">Veritabanı kayıtlarını düzenlerken, veritabanı güncelleştirme gerçekleştirir denetleyici eylemi düzenlenmekte kayıt kimliğini geçmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="882ff-252">When editing database records, you need to pass the Id of the record being edited to the controller action that performs the database update.</span></span> <span data-ttu-id="882ff-253">Aksi takdirde, denetleyici eylemi, temel veritabanında güncelleştirmek için kayıt bilmez.</span><span class="sxs-lookup"><span data-stu-id="882ff-253">Otherwise, the controller action will not know which record to update in the underlying database.</span></span> <span data-ttu-id="882ff-254">Listeleme 5'te yer alan düzenleme görünümü düzenlenmekte veritabanı kayıt kimliğini temsil eden gizli bir form alanı içerir.</span><span class="sxs-lookup"><span data-stu-id="882ff-254">The Edit view, contained in Listing 5, includes a hidden form field that represents the Id of the database record being edited.</span></span>

<span data-ttu-id="882ff-255">**5 – Views\Home\Edit.aspx listeleme**</span><span class="sxs-lookup"><span data-stu-id="882ff-255">**Listing 5 – Views\Home\Edit.aspx**</span></span>

[!code-aspx[Main](creating-model-classes-with-the-entity-framework-vb/samples/sample8.aspx)]

## <a name="deleting-database-records-with-the-entity-framework"></a><span data-ttu-id="882ff-256">Entity Framework veritabanı kayıtları silme</span><span class="sxs-lookup"><span data-stu-id="882ff-256">Deleting Database Records with the Entity Framework</span></span>

<span data-ttu-id="882ff-257">Bu öğreticide üstesinden gelmek için ihtiyacımız, son veritabanı işlemi veritabanı kayıtlarını siliyor.</span><span class="sxs-lookup"><span data-stu-id="882ff-257">The final database operation, which we need to tackle in this tutorial, is deleting database records.</span></span> <span data-ttu-id="882ff-258">Belirli veritabanı kaydını silmek için listeleme 6'denetleyici eylemini kullanın.</span><span class="sxs-lookup"><span data-stu-id="882ff-258">You can use the controller action in Listing 6 to delete a particular database record.</span></span>

<span data-ttu-id="882ff-259">**6--listeleme \Controllers\HomeController.vb (Delete eylem)**</span><span class="sxs-lookup"><span data-stu-id="882ff-259">**Listing 6 -- \Controllers\HomeController.vb (Delete action)**</span></span>

[!code-vb[Main](creating-model-classes-with-the-entity-framework-vb/samples/sample9.vb)]

<span data-ttu-id="882ff-260">Delete() Eylem Kimliği eşleşen varlık eyleme geçirilen film ilk alır.</span><span class="sxs-lookup"><span data-stu-id="882ff-260">The Delete() action first retrieves the Movie entity that matches the Id passed to the action.</span></span> <span data-ttu-id="882ff-261">Ardından, film, SaveChanges() yöntemi tarafından izlenen DeleteObject() yöntemini çağırarak veritabanından silinir.</span><span class="sxs-lookup"><span data-stu-id="882ff-261">Next, the movie is deleted from the database by calling the DeleteObject() method followed by the SaveChanges() method.</span></span> <span data-ttu-id="882ff-262">Son olarak, kullanıcı dizin görünümüne yönlendirilir.</span><span class="sxs-lookup"><span data-stu-id="882ff-262">Finally, the user is redirected back to the Index view.</span></span>

## <a name="summary"></a><span data-ttu-id="882ff-263">Özet</span><span class="sxs-lookup"><span data-stu-id="882ff-263">Summary</span></span>

<span data-ttu-id="882ff-264">ASP.NET MVC ve Microsoft Entity Framework yararlanarak veritabanı tarafından yönetilen web uygulamalarının nasıl oluşturabilirsiniz göstermek için bu öğreticinin amacı oluştu.</span><span class="sxs-lookup"><span data-stu-id="882ff-264">The purpose of this tutorial was to demonstrate how you can build database-driven web applications by taking advantage of ASP.NET MVC and the Microsoft Entity Framework.</span></span> <span data-ttu-id="882ff-265">Seç, Ekle, Güncelleştir olanak tanıyan bir uygulama oluşturmak ve veritabanı kayıtlarını silmek öğrendiniz.</span><span class="sxs-lookup"><span data-stu-id="882ff-265">You learned how to build an application that enables you to select, insert, update, and delete database records.</span></span>

<span data-ttu-id="882ff-266">İlk olarak, bir varlık veri modeli Visual Studio'dan oluşturmak için varlık veri modeli Sihirbazı'nı nasıl kullanabileceğiniz açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="882ff-266">First, we discussed how you can use the Entity Data Model Wizard to generate an Entity Data Model from within Visual Studio.</span></span> <span data-ttu-id="882ff-267">Ardından, LINQ to Entities veritabanı kayıt kümesinin bir veritabanı tablosunun almak için nasıl kullanılacağını öğrenin.</span><span class="sxs-lookup"><span data-stu-id="882ff-267">Next, you learn how to use LINQ to Entities to retrieve a set of database records from a database table.</span></span> <span data-ttu-id="882ff-268">Son olarak, Entity Framework ekleme, güncelleştirme ve veritabanı kayıtlarını sil kullandık.</span><span class="sxs-lookup"><span data-stu-id="882ff-268">Finally, we used the Entity Framework to insert, update, and delete database records.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="882ff-269">[Önceki](validation-with-the-data-annotation-validators-cs.md)
[sonraki](creating-model-classes-with-linq-to-sql-vb.md)</span><span class="sxs-lookup"><span data-stu-id="882ff-269">[Previous](validation-with-the-data-annotation-validators-cs.md)
[Next](creating-model-classes-with-linq-to-sql-vb.md)</span></span>
