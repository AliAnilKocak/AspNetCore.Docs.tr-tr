---
uid: mvc/overview/getting-started/getting-started-with-ef-using-mvc/migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application
title: İlk kod geçişler ve ASP.NET MVC uygulamasındaki Entity Framework dağıtım | Microsoft Docs
author: tdykstra
description: Contoso University örnek web uygulaması Entity Framework 6 Code First ve Visual Studio kullanarak ASP.NET MVC 5 uygulamalarının nasıl oluşturulacağını gösterir...
ms.author: aspnetcontent
manager: wpickett
ms.date: 11/07/2014
ms.topic: article
ms.assetid: d4dfc435-bda6-4621-9762-9ba270f8de4e
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/getting-started/getting-started-with-ef-using-mvc/migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application
msc.type: authoredcontent
ms.openlocfilehash: 04d393edca0469df140f06a7d083a48aa8f84b65
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/06/2018
---
<a name="code-first-migrations-and-deployment-with-the-entity-framework-in-an-aspnet-mvc-application"></a><span data-ttu-id="c19d7-103">İlk kod geçişler ve ASP.NET MVC uygulamasındaki Entity Framework ile dağıtımı</span><span class="sxs-lookup"><span data-stu-id="c19d7-103">Code First Migrations and Deployment with the Entity Framework in an ASP.NET MVC Application</span></span>
====================
<span data-ttu-id="c19d7-104">by [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="c19d7-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="c19d7-105">[Tamamlanan projenizi indirin](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) veya [PDF indirin](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span><span class="sxs-lookup"><span data-stu-id="c19d7-105">[Download Completed Project](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) or [Download PDF](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span></span>

> <span data-ttu-id="c19d7-106">Contoso University örnek web uygulaması Entity Framework 6 Code First ve Visual Studio 2013 kullanarak ASP.NET MVC 5 uygulamalarının nasıl oluşturulacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="c19d7-106">The Contoso University sample web application demonstrates how to create ASP.NET MVC 5 applications using the Entity Framework 6 Code First and Visual Studio 2013.</span></span> <span data-ttu-id="c19d7-107">Eğitmen serisi hakkında daha fazla bilgi için bkz: [serideki ilk öğreticide](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="c19d7-107">For information about the tutorial series, see [the first tutorial in the series](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span>

<span data-ttu-id="c19d7-108">Şu ana kadar uygulamayı yerel olarak IIS Express'te geliştirme bilgisayarınızda çalıştığı.</span><span class="sxs-lookup"><span data-stu-id="c19d7-108">So far the application has been running locally in IIS Express on your development computer.</span></span> <span data-ttu-id="c19d7-109">Internet üzerinden kullanmak diğer kişiler için gerçek bir uygulamada kullanabilmek için bir web barındırma sağlayıcısına dağıtmak zorunda.</span><span class="sxs-lookup"><span data-stu-id="c19d7-109">To make a real application available for other people to use over the Internet, you have to deploy it to a web hosting provider.</span></span> <span data-ttu-id="c19d7-110">Bu öğreticide, Azure bulutta Contoso University uygulamaya dağıtacaksınız.</span><span class="sxs-lookup"><span data-stu-id="c19d7-110">In this tutorial, you'll deploy the Contoso University application to the cloud in Azure.</span></span>

<span data-ttu-id="c19d7-111">Öğretici aşağıdaki bölümleri içerir:</span><span class="sxs-lookup"><span data-stu-id="c19d7-111">The tutorial contains the following sections:</span></span>

- <span data-ttu-id="c19d7-112">Code First geçişleri etkinleştirin.</span><span class="sxs-lookup"><span data-stu-id="c19d7-112">Enable Code First Migrations.</span></span> <span data-ttu-id="c19d7-113">Geçişler özelliği, veri modelini değiştirin ve değişikliklerinizi veritabanı şemasını bırakın ve veritabanını yeniden oluşturmak zorunda kalmadan güncelleştirerek üretime dağıtabilirsiniz sağlar.</span><span class="sxs-lookup"><span data-stu-id="c19d7-113">The Migrations feature enables you to change the data model and deploy your changes to production by updating the database schema without having to drop and re-create the database.</span></span>
- <span data-ttu-id="c19d7-114">Azure'a dağıtın.</span><span class="sxs-lookup"><span data-stu-id="c19d7-114">Deploy to Azure.</span></span> <span data-ttu-id="c19d7-115">Bu adım isteğe bağlıdır; Proje dağıtılan olmadan kalan öğreticileri ile devam edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c19d7-115">This step is optional; you can continue with the remaining tutorials without having deployed the project.</span></span>

<span data-ttu-id="c19d7-116">Dağıtım için kaynak denetimi ile sürekli tümleştirme işlemi kullanır, ancak bu Öğreticide bu konular kapsamaz öneririz.</span><span class="sxs-lookup"><span data-stu-id="c19d7-116">We recommend that you use a continuous integration process with source control for deployment, but this tutorial does not cover those topics.</span></span> <span data-ttu-id="c19d7-117">Daha fazla bilgi için bkz: [kaynak denetimi](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/source-control) ve [sürekli tümleştirme](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/continuous-integration-and-continuous-delivery) bölümleri [yapı Azure ile gerçek bulut uygulamaları](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/introduction) e-Kitap.</span><span class="sxs-lookup"><span data-stu-id="c19d7-117">For more information, see the [source control](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/source-control) and [continuous integration](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/continuous-integration-and-continuous-delivery) chapters of the [Building Real-World Cloud Apps with Azure](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/introduction) e-book.</span></span>

## <a name="enable-code-first-migrations"></a><span data-ttu-id="c19d7-118">Code First geçişleri etkinleştir</span><span class="sxs-lookup"><span data-stu-id="c19d7-118">Enable Code First Migrations</span></span>

<span data-ttu-id="c19d7-119">Yeni bir uygulama geliştirirken, veri modelinizi model değişikliklerini sık sık ve her zaman değiştirir, veritabanı ile eşitlenmemiş alır.</span><span class="sxs-lookup"><span data-stu-id="c19d7-119">When you develop a new application, your data model changes frequently, and each time the model changes, it gets out of sync with the database.</span></span> <span data-ttu-id="c19d7-120">Otomatik olarak bırakın ve veritabanı veri modeli değiştirdiğinizde yeniden oluşturmak için Entity Framework yapılandırdınız.</span><span class="sxs-lookup"><span data-stu-id="c19d7-120">You have configured the Entity Framework to automatically drop and re-create the database each time you change the data model.</span></span> <span data-ttu-id="c19d7-121">Ne zaman eklediğinizde, kaldırmak veya varlık sınıflarını değiştirmek veya değiştirmek, `DbContext` sınıfı, gelecek sefer uygulama çalıştırdığınızda otomatik olarak mevcut veritabanını siler, modelle ve test verilerle çekirdeğini oluşturur Yeni bir tane oluşturur.</span><span class="sxs-lookup"><span data-stu-id="c19d7-121">When you add, remove, or change entity classes or change your `DbContext` class, the next time you run the application it automatically deletes your existing database, creates a new one that matches the model, and seeds it with test data.</span></span>

<span data-ttu-id="c19d7-122">Veritabanı veri modeli ile eşitlenmiş tutmak bu yöntem, üretim uygulamayı dağıtmak iyi kadar çalışır.</span><span class="sxs-lookup"><span data-stu-id="c19d7-122">This method of keeping the database in sync with the data model works well until you deploy the application to production.</span></span> <span data-ttu-id="c19d7-123">Uygulama üretimde çalışırken, genellikle korumak istediğiniz her şeyi yeni bir sütun ekleme gibi bir değişiklik yaptığınızda kaybetmek istemediğiniz verilerini depoladığı.</span><span class="sxs-lookup"><span data-stu-id="c19d7-123">When the application is running in production, it is usually storing data that you want to keep, and you don't want to lose everything each time you make a change such as adding a new column.</span></span> <span data-ttu-id="c19d7-124">[Code First Migrations](https://msdn.microsoft.com/data/jj591621) özelliği bırakarak ve veritabanını yeniden oluşturma yerine veritabanı şemasını güncelleştirmek Code First sağlayarak bu sorunu çözer.</span><span class="sxs-lookup"><span data-stu-id="c19d7-124">The [Code First Migrations](https://msdn.microsoft.com/data/jj591621) feature solves this problem by enabling Code First to update the database schema instead of dropping and re-creating the database.</span></span> <span data-ttu-id="c19d7-125">Bu öğreticide uygulama dağıtacaksınız ve geçiş için hazırlamak için etkinleştirin.</span><span class="sxs-lookup"><span data-stu-id="c19d7-125">In this tutorial, you'll deploy the application, and to prepare for that you'll enable Migrations.</span></span>

1. <span data-ttu-id="c19d7-126">Daha önce dışarı yorum oluşturma veya silme ayarladığınız Başlatıcı devre dışı `contexts` uygulamanın Web.config dosyasına eklendi öğesi.</span><span class="sxs-lookup"><span data-stu-id="c19d7-126">Disable the initializer that you set up earlier by commenting out or deleting the `contexts` element that you added to the application Web.config file.</span></span>

    [!code-xml[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample1.xml?highlight=2,6)]
2. <span data-ttu-id="c19d7-127">Ayrıca uygulamada *Web.config* dosya, ContosoUniversity2 için bağlantı dizesinde veritabanı adını değiştirin.</span><span class="sxs-lookup"><span data-stu-id="c19d7-127">Also in the application *Web.config* file, change the name of the database in the connection string to ContosoUniversity2.</span></span>

    [!code-xml[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample2.xml?highlight=2)]

    <span data-ttu-id="c19d7-128">Bu değişikliğin yapılması projeyi ayarlar, böylece ilk geçiş yeni bir veritabanı oluşturur.</span><span class="sxs-lookup"><span data-stu-id="c19d7-128">This change sets up the project so that the first migration will create a new database.</span></span> <span data-ttu-id="c19d7-129">Bu gerekli değildir, ancak iyi bir fikirdir neden, daha sonra göreceksiniz.</span><span class="sxs-lookup"><span data-stu-id="c19d7-129">This isn't required but you'll see later why it's a good idea.</span></span>
3. <span data-ttu-id="c19d7-130">Gelen **Araçları** menüsünde tıklatın **kitaplık Paket Yöneticisi** ve ardından **Paket Yöneticisi Konsolu**.</span><span class="sxs-lookup"><span data-stu-id="c19d7-130">From the **Tools** menu, click **Library Package Manager** and then **Package Manager Console**.</span></span>

    ![Selecting_Package_Manager_Console](https://asp.net/media/4336350/1pm.png)
4. <span data-ttu-id="c19d7-132">Konumundaki `PM>` isteminde aşağıdaki komutları girin:</span><span class="sxs-lookup"><span data-stu-id="c19d7-132">At the `PM>` prompt enter the following commands:</span></span>

    `enable-migrations`  
    `add-migration InitialCreate`

    ![Enable-migrations komutunu](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image1.png)

    <span data-ttu-id="c19d7-134">`enable-migrations` Komut oluşturur bir *geçişler* ContosoUniversity proje ve bu klasöre koyar o klasördeki bir *Configuration.cs* geçişler yapılandırmak için düzenleyebilirsiniz dosya.</span><span class="sxs-lookup"><span data-stu-id="c19d7-134">The `enable-migrations` command creates a *Migrations* folder in the ContosoUniversity project, and it puts in that folder a *Configuration.cs* file that you can edit to configure Migrations.</span></span>

    <span data-ttu-id="c19d7-135">(Veritabanı adını değiştirmek için yönlendiren Yukarıdaki adımı eksik, geçişler varolan bir veritabanını bulun ve otomatik olarak `add-migration` komutu.</span><span class="sxs-lookup"><span data-stu-id="c19d7-135">(If you missed the step above that directs you to change the database name, Migrations will find the existing database and automatically do the `add-migration` command.</span></span> <span data-ttu-id="c19d7-136">Bu normaldir, bu yalnızca veritabanı dağıtmadan önce bir test geçişleri kodunun çalışmadığından anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="c19d7-136">That's OK, it just means you won't run a test of the migrations code before you deploy the database.</span></span> <span data-ttu-id="c19d7-137">Çalıştırdığınızda sonraki `update-database` hiçbir şey gerçekleşecek veritabanı zaten mevcut olduğundan komut.)</span><span class="sxs-lookup"><span data-stu-id="c19d7-137">Later when you run the `update-database` command nothing will happen because the database will already exist.)</span></span>

    ![Geçişler klasörü](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image2.png)

    <span data-ttu-id="c19d7-139">Daha önce gördüğünüz Başlatıcı sınıfı gibi `Configuration` sınıfı içeren bir `Seed` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="c19d7-139">Like the initializer class that you saw earlier, the `Configuration` class includes a `Seed` method.</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample3.cs)]

    <span data-ttu-id="c19d7-140">Amacı [çekirdek](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) yöntemdir eklemek veya Code First oluşturur veya veritabanı güncelleştirmelerini sonra test verileri güncelleştirmek sağlamak için.</span><span class="sxs-lookup"><span data-stu-id="c19d7-140">The purpose of the [Seed](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) method is to enable you to insert or update test data after Code First creates or updates the database.</span></span> <span data-ttu-id="c19d7-141">Yöntemi, veritabanı oluşturulduğunda ve veritabanı şeması bir veri modeli değiştirdikten sonra her güncelleştirildiğinde çağrılır.</span><span class="sxs-lookup"><span data-stu-id="c19d7-141">The method is called when the database is created and every time the database schema is updated after a data model change.</span></span>

### <a name="set-up-the-seed-method"></a><span data-ttu-id="c19d7-142">Set Seed yöntemi</span><span class="sxs-lookup"><span data-stu-id="c19d7-142">Set up the Seed Method</span></span>

<span data-ttu-id="c19d7-143">Ne zaman bırakarak ve her bir veri modeli değişikliği için veritabanını yeniden oluşturma, başlatıcı sınıfının kullanmak `Seed` her modeli değişiklikten sonra veritabanı bırakılmakta olduğundan test verileri eklemek için yöntem ve tüm test verileri kaybolur.</span><span class="sxs-lookup"><span data-stu-id="c19d7-143">When you are dropping and re-creating the database for every data model change, you use the initializer class's `Seed` method to insert test data, because after every model change the database is dropped and all the test data is lost.</span></span> <span data-ttu-id="c19d7-144">Code First Migrations, veriler, veritabanı değişikliklerinden sonra tutulur test şekilde test verileri dahil olmak üzere [çekirdek](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) yöntemi genellikle gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="c19d7-144">With Code First Migrations, test data is retained after database changes, so including test data in the [Seed](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) method is typically not necessary.</span></span> <span data-ttu-id="c19d7-145">Aslında, istemediğiniz `Seed` , geçişler veritabanı üretime dağıtmak için kullanacaksanız test verileri eklemek için yöntemi `Seed` yöntemi üretimde çalışır.</span><span class="sxs-lookup"><span data-stu-id="c19d7-145">In fact, you don't want the `Seed` method to insert test data if you'll be using Migrations to deploy the database to production, because the `Seed` method will run in production.</span></span> <span data-ttu-id="c19d7-146">Bu durumda, istediğiniz `Seed` veritabanına yalnızca gereksinim duyduğunuz verileri üretimde eklemek için yöntem.</span><span class="sxs-lookup"><span data-stu-id="c19d7-146">In that case you want the `Seed` method to insert into the database only the data that you need in production.</span></span> <span data-ttu-id="c19d7-147">Örneğin, gerçek bölüm adlarında veritabanına isteyebilirsiniz `Department` uygulama üretimde kullanılabilir hale geldiğinde tablo.</span><span class="sxs-lookup"><span data-stu-id="c19d7-147">For example, you might want the database to include actual department names in the `Department` table when the application becomes available in production.</span></span>

<span data-ttu-id="c19d7-148">Bu öğretici için geçiş dağıtımı için kullanıyor olmanız, ancak, `Seed` yöntemi ekler test verileri yine de çok miktarda veri el ile eklemek zorunda kalmadan uygulama işlevlerinin nasıl çalıştığını görmek kolaylaştırmak için.</span><span class="sxs-lookup"><span data-stu-id="c19d7-148">For this tutorial, you'll be using Migrations for deployment, but your `Seed` method will insert test data anyway in order to make it easier to see how application functionality works without having to manually insert a lot of data.</span></span>

1. <span data-ttu-id="c19d7-149">Değiştir *Configuration.cs* test verileri yeni veritabanına yükler aşağıdaki kod ile dosya.</span><span class="sxs-lookup"><span data-stu-id="c19d7-149">Replace the contents of the *Configuration.cs* file with the following code, which will load test data into the new database.</span></span> 

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample4.cs)]

    <span data-ttu-id="c19d7-150">[Çekirdek](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) yöntemi giriş parametresi olarak veritabanı bağlamı nesnesini alır ve yeni varlıklar veritabanına eklemek için söz konusu nesne yöntemindeki kod kullanır.</span><span class="sxs-lookup"><span data-stu-id="c19d7-150">The [Seed](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) method takes the database context object as an input parameter, and the code in the method uses that object to add new entities to the database.</span></span> <span data-ttu-id="c19d7-151">Her bir varlık türü için kod yeni varlıklar koleksiyonu oluşturur, uygun ekler [DbSet](https://msdn.microsoft.com/library/system.data.entity.dbset(v=vs.103).aspx) özellik ve değişiklikler veritabanına kaydeder.</span><span class="sxs-lookup"><span data-stu-id="c19d7-151">For each entity type, the code creates a collection of new entities, adds them to the appropriate [DbSet](https://msdn.microsoft.com/library/system.data.entity.dbset(v=vs.103).aspx) property, and then saves the changes to the database.</span></span> <span data-ttu-id="c19d7-152">Çağrı için gerekli olmayan [SaveChanges](https://msdn.microsoft.com/library/system.data.entity.dbcontext.savechanges(v=VS.103).aspx) yöntemi her grubu varlıkların sonra olarak burada yapılır, ancak, bunu yardımcı olan kod veritabanına yazma sırasında bir özel durum oluşursa, bir sorunun kaynağını bulun.</span><span class="sxs-lookup"><span data-stu-id="c19d7-152">It isn't necessary to call the [SaveChanges](https://msdn.microsoft.com/library/system.data.entity.dbcontext.savechanges(v=VS.103).aspx) method after each group of entities, as is done here, but doing that helps you locate the source of a problem if an exception occurs while the code is writing to the database.</span></span>

    <span data-ttu-id="c19d7-153">Bazı veri INSERT deyimleri kullanmak [örnek](https://msdn.microsoft.com/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) bir "upsert" işlem yapmak için yöntemi.</span><span class="sxs-lookup"><span data-stu-id="c19d7-153">Some of the statements that insert data use the [AddOrUpdate](https://msdn.microsoft.com/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) method to perform an "upsert" operation.</span></span> <span data-ttu-id="c19d7-154">Çünkü `Seed` yöntemi çalıştırır, yürütme her zaman `update-database` , her geçiş sonrasında genellikle, yalnızca ekleyemiyor veri, eklemeye çalıştığınız satır zaten var. bir veritabanı oluşturur ilk geçişten sonra olacağından komutu.</span><span class="sxs-lookup"><span data-stu-id="c19d7-154">Because the `Seed` method runs every time you execute the `update-database` command, typically after each migration, you can't just insert data, because the rows you are trying to add will already be there after the first migration that creates the database.</span></span> <span data-ttu-id="c19d7-155">"Upsert" işlemi zaten bir satır, ancak eklemeye çalışırsanız, olacağını hatalarını önler ***geçersiz kılmaları*** uygulamayı test ederken yapmış olabileceğiniz veri değişiklikleri.</span><span class="sxs-lookup"><span data-stu-id="c19d7-155">The "upsert" operation prevents errors that would happen if you try to insert a row that already exists, but it ***overrides*** any changes to data that you may have made while testing the application.</span></span> <span data-ttu-id="c19d7-156">Bazı tablolardaki test verilerle, gerçekleşmesi için istemeyebilirsiniz: Bazı durumlarda test ederken verileri değiştirdiğinizde değişikliklerinizi sonra veritabanı güncelleştirmeleri kalmasını istiyor.</span><span class="sxs-lookup"><span data-stu-id="c19d7-156">With test data in some tables you might not want that to happen: in some cases when you change data while testing you want your changes to remain after database updates.</span></span> <span data-ttu-id="c19d7-157">Bu durumda bir koşullu ekleme işlemi yapmak istiyor: yalnızca zaten yoksa bir satır ekleyin.</span><span class="sxs-lookup"><span data-stu-id="c19d7-157">In that case you want to do a conditional insert operation: insert a row only if it doesn't already exist.</span></span> <span data-ttu-id="c19d7-158">Seed yöntemi her iki yaklaşımın kullanır.</span><span class="sxs-lookup"><span data-stu-id="c19d7-158">The Seed method uses both approaches.</span></span>

    <span data-ttu-id="c19d7-159">Geçirilen ilk parametre [örnek](https://msdn.microsoft.com/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) yöntemi bir satır zaten var olup olmadığını denetlemek için kullanılacak özellik belirtir.</span><span class="sxs-lookup"><span data-stu-id="c19d7-159">The first parameter passed to the [AddOrUpdate](https://msdn.microsoft.com/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) method specifies the property to use to check if a row already exists.</span></span> <span data-ttu-id="c19d7-160">Sağlama, test Öğrenci veriler için `LastName` özelliği listedeki son her ad benzersiz olduğundan bu amaç için kullanılabilir:</span><span class="sxs-lookup"><span data-stu-id="c19d7-160">For the test student data that you are providing, the `LastName` property can be used for this purpose since each last name in the list is unique:</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample5.cs)]

    <span data-ttu-id="c19d7-161">Bu kod, son adlarının benzersiz olduğunu varsayar.</span><span class="sxs-lookup"><span data-stu-id="c19d7-161">This code assumes that last names are unique.</span></span> <span data-ttu-id="c19d7-162">Yinelenen bir soyadı ile öğrencinin el ile eklerseniz, şu özel bir geçiş gerçekleştirmek sonraki açışınızda elde edersiniz.</span><span class="sxs-lookup"><span data-stu-id="c19d7-162">If you manually add a student with a duplicate last name, you'll get the following exception the next time you perform a migration.</span></span>

    <span data-ttu-id="c19d7-163">Sıra birden fazla öğe içeriyor</span><span class="sxs-lookup"><span data-stu-id="c19d7-163">Sequence contains more than one element</span></span>

    <span data-ttu-id="c19d7-164">Yedek verileri "Alexander Cihangir'in Benli" adlı iki Öğrenciler gibi işler hakkında daha fazla bilgi için bkz: [Seeding ve hata ayıklama Entity Framework (EF) DBs](https://blogs.msdn.com/b/rickandy/archive/2013/02/12/seeding-and-debugging-entity-framework-ef-dbs.aspx) Rick Anderson'un blogunda.</span><span class="sxs-lookup"><span data-stu-id="c19d7-164">For information about how to handle redundant data such as two students named "Alexander Carson", see [Seeding and Debugging Entity Framework (EF) DBs](https://blogs.msdn.com/b/rickandy/archive/2013/02/12/seeding-and-debugging-entity-framework-ef-dbs.aspx) on Rick Anderson's blog.</span></span> <span data-ttu-id="c19d7-165">Hakkında daha fazla bilgi için `AddOrUpdate` yöntemi, bkz: [ilgilenebilmek EF 4.3 örnek yöntemiyle](http://thedatafarm.com/blog/data-access/take-care-with-ef-4-3-addorupdate-method/) Julie Lerman'ın blogunda.</span><span class="sxs-lookup"><span data-stu-id="c19d7-165">For more information about the `AddOrUpdate` method, see [Take care with EF 4.3 AddOrUpdate Method](http://thedatafarm.com/blog/data-access/take-care-with-ef-4-3-addorupdate-method/) on Julie Lerman's blog.</span></span>

    <span data-ttu-id="c19d7-166">Oluşturan kodu `Enrollment` varlıklar varsayar elinizde `ID` varlıklarda değerinde `students` koleksiyon, bu özellik koleksiyonu oluşturur kodda ayarlamadınız rağmen.</span><span class="sxs-lookup"><span data-stu-id="c19d7-166">The code that creates `Enrollment` entities assumes you have the `ID` value in the entities in the `students` collection, although you didn't set that property in the code that creates the collection.</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample6.cs?highlight=2)]

    <span data-ttu-id="c19d7-167">Kullanabileceğiniz `ID` burada özelliği olduğundan `ID` değeri çağırdığınızda ayarlanır `SaveChanges` için `students` koleksiyonu.</span><span class="sxs-lookup"><span data-stu-id="c19d7-167">You can use the `ID` property here because the `ID` value is set when you call `SaveChanges` for the `students` collection.</span></span> <span data-ttu-id="c19d7-168">EF veritabanına bir varlık ekler ve güncelleştirdiği birincil anahtar değeri otomatik olarak alır `ID` bellekte varlığın özelliği.</span><span class="sxs-lookup"><span data-stu-id="c19d7-168">EF automatically gets the primary key value when it inserts an entity into the database, and it updates the `ID` property of the entity in memory.</span></span>

    <span data-ttu-id="c19d7-169">Her ekleyen kod `Enrollment` varlığa `Enrollments` değil varlık kümesi kullanan `AddOrUpdate` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="c19d7-169">The code that adds each `Enrollment` entity to the `Enrollments` entity set doesn't use the `AddOrUpdate` method.</span></span> <span data-ttu-id="c19d7-170">Bir varlık zaten var ve yoksa varlık ekler olmadığını denetler.</span><span class="sxs-lookup"><span data-stu-id="c19d7-170">It checks if an entity already exists and inserts the entity if it doesn't exist.</span></span> <span data-ttu-id="c19d7-171">Bu yaklaşım, uygulama kullanıcı Arabirimi kullanarak bir kayıt ataması yaptığınız değişiklikler korur.</span><span class="sxs-lookup"><span data-stu-id="c19d7-171">This approach will preserve changes you make to an enrollment grade by using the application UI.</span></span> <span data-ttu-id="c19d7-172">Kod döngüler her üye `Enrollment` [listesi](https://msdn.microsoft.com/library/6sh2ey19.aspx) ve kayıt veritabanında bulunmazsa, veritabanına kayıt ekler.</span><span class="sxs-lookup"><span data-stu-id="c19d7-172">The code loops through each member of the `Enrollment`[List](https://msdn.microsoft.com/library/6sh2ey19.aspx) and if the enrollment is not found in the database, it adds the enrollment to the database.</span></span> <span data-ttu-id="c19d7-173">Her kayıt ekleyecek şekilde veritabanını güncelleştirmek ilk kez veritabanı boş olacaktır.</span><span class="sxs-lookup"><span data-stu-id="c19d7-173">The first time you update the database, the database will be empty, so it will add each enrollment.</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample7.cs)]
2. <span data-ttu-id="c19d7-174">Projeyi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="c19d7-174">Build the project.</span></span>

### <a name="execute-the-first-migration"></a><span data-ttu-id="c19d7-175">İlk Geçişi gerçekleştir</span><span class="sxs-lookup"><span data-stu-id="c19d7-175">Execute the First Migration</span></span>

<span data-ttu-id="c19d7-176">Yürütülen zaman `add-migration` komutunu geçişler oluşturulan veritabanı sıfırdan oluşturacak kodu.</span><span class="sxs-lookup"><span data-stu-id="c19d7-176">When you executed the `add-migration` command, Migrations generated the code that would create the database from scratch.</span></span> <span data-ttu-id="c19d7-177">Bu kod ayrıca kullanımda *geçişler* klasöründe adlı dosyayı  *&lt;zaman damgası&gt;\_InitialCreate.cs*.</span><span class="sxs-lookup"><span data-stu-id="c19d7-177">This code is also in the *Migrations* folder, in the file named *&lt;timestamp&gt;\_InitialCreate.cs*.</span></span> <span data-ttu-id="c19d7-178">`Up` Yöntemi `InitialCreate` sınıf veri modeli varlık kümeleri için karşılık gelen veritabanı tabloları oluşturur ve `Down` yöntemi bunları siler.</span><span class="sxs-lookup"><span data-stu-id="c19d7-178">The `Up` method of the `InitialCreate` class creates the database tables that correspond to the data model entity sets, and the `Down` method deletes them.</span></span>

[!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample8.cs)]

<span data-ttu-id="c19d7-179">Geçişler çağrıları `Up` geçiş için veri modeli değişikliklerini uygulamak için yöntem.</span><span class="sxs-lookup"><span data-stu-id="c19d7-179">Migrations calls the `Up` method to implement the data model changes for a migration.</span></span> <span data-ttu-id="c19d7-180">Geri alma güncelleştirme, geçişler çağrıları komutu girdiğinizde `Down` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="c19d7-180">When you enter a command to roll back the update, Migrations calls the `Down` method.</span></span>

<span data-ttu-id="c19d7-181">Girdiğiniz zaman, oluşturulan ilk geçiş budur `add-migration InitialCreate` komutu.</span><span class="sxs-lookup"><span data-stu-id="c19d7-181">This is the initial migration that was created when you entered the `add-migration InitialCreate` command.</span></span> <span data-ttu-id="c19d7-182">Parametre (`InitialCreate` örnekte) dosyası için kullanılan ad ve istediğiniz olabilir; genellikle bir sözcük veya tümcecik geçişte yapıldığını özetler seçin.</span><span class="sxs-lookup"><span data-stu-id="c19d7-182">The parameter (`InitialCreate` in the example) is used for the file name and can be whatever you want; you typically choose a word or phrase that summarizes what is being done in the migration.</span></span> <span data-ttu-id="c19d7-183">Örneğin, bir sonraki geçiş adlandırabilirsiniz &quot;AddDepartmentTable&quot;.</span><span class="sxs-lookup"><span data-stu-id="c19d7-183">For example, you might name a later migration &quot;AddDepartmentTable&quot;.</span></span>

<span data-ttu-id="c19d7-184">Veritabanı zaten mevcut olduğunda ilk geçiş oluşturduysanız, veritabanı oluşturma kod oluşturulur ancak veritabanı veri modeli eşleştiğinden çalıştırmak sahip değil.</span><span class="sxs-lookup"><span data-stu-id="c19d7-184">If you created the initial migration when the database already exists, the database creation code is generated but it doesn't have to run because the database already matches the data model.</span></span> <span data-ttu-id="c19d7-185">Burada veritabanı yok henüz, veritabanınızı oluşturmak için bu kodu çalıştıracak başka bir ortama uygulamayı dağıttığınızda, dolayısıyla ilk test etmek için iyi bir fikir taşır.</span><span class="sxs-lookup"><span data-stu-id="c19d7-185">When you deploy the app to another environment where the database doesn't exist yet, this code will run to create your database, so it's a good idea to test it first.</span></span> <span data-ttu-id="c19d7-186">İşte bu nedenle geçişler sıfırdan yeni bir tane oluşturabilmesi için daha önce--bağlantı dizesinde veritabanının adı değiştirildi.</span><span class="sxs-lookup"><span data-stu-id="c19d7-186">That's why you changed the name of the database in the connection string earlier -- so that migrations can create a new one from scratch.</span></span>

1. <span data-ttu-id="c19d7-187">İçinde **Paket Yöneticisi Konsolu** penceresinde aşağıdaki komutu girin:</span><span class="sxs-lookup"><span data-stu-id="c19d7-187">In the **Package Manager Console** window, enter the following command:</span></span>

    `update-database`

    ![](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image3.png)

    <span data-ttu-id="c19d7-188">`update-database` Komutu çalıştırır `Up` çalışan veritabanını ve ardından oluşturmak için yöntemini `Seed` veritabanını doldurmak için yöntem.</span><span class="sxs-lookup"><span data-stu-id="c19d7-188">The `update-database` command runs the `Up` method to create the database and then it runs the `Seed` method to populate the database.</span></span> <span data-ttu-id="c19d7-189">Uygulamanızı dağıttıktan sonra aşağıdaki bölümde göreceğiniz gibi aynı işlem üretim otomatik olarak çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="c19d7-189">The same process will run automatically in production after you deploy the application, as you'll see in the following section.</span></span>
2. <span data-ttu-id="c19d7-190">Kullanım **Sunucu Gezgini** ilk öğreticide yaptığınız gibi veritabanı inceleyin ve her şeyi hala aynı önceki gibi çalıştığını doğrulamak için uygulamayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="c19d7-190">Use **Server Explorer** to inspect the database as you did in the first tutorial, and run the application to verify that everything still works the same as before.</span></span>

## <a name="deploy-to-azure"></a><span data-ttu-id="c19d7-191">Azure'a dağıtma</span><span class="sxs-lookup"><span data-stu-id="c19d7-191">Deploy to Azure</span></span>

<span data-ttu-id="c19d7-192">Şu ana kadar uygulamayı yerel olarak IIS Express'te geliştirme bilgisayarınızda çalıştığı.</span><span class="sxs-lookup"><span data-stu-id="c19d7-192">So far the application has been running locally in IIS Express on your development computer.</span></span> <span data-ttu-id="c19d7-193">Internet üzerinden kullanmak diğer kişiler için kullanılabilir hale getirmek için bir web barındırma sağlayıcısına dağıtmak zorunda.</span><span class="sxs-lookup"><span data-stu-id="c19d7-193">To make it available for other people to use over the Internet, you have to deploy it to a web hosting provider.</span></span> <span data-ttu-id="c19d7-194">Öğreticinin bu bölümünde Azure'a dağıtacaksınız.</span><span class="sxs-lookup"><span data-stu-id="c19d7-194">In this section of the tutorial you'll deploy it to Azure.</span></span> <span data-ttu-id="c19d7-195">Bu bölüm isteğe bağlıdır; Bu atlayın ve aşağıdaki eğitici devam edebilirsiniz ya da bu bölümdeki yönergelere farklı bir barındırma sağlayıcısı için tercih ettiğiniz uyarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c19d7-195">This section is optional; you can skip this and continue with the following tutorial, or you can adapt the instructions in this section for a different hosting provider of your choice.</span></span>

### <a name="using-code-first-migrations-to-deploy-the-database"></a><span data-ttu-id="c19d7-196">Veritabanını dağıtmak için Code First geçişleri kullanma</span><span class="sxs-lookup"><span data-stu-id="c19d7-196">Using Code First Migrations to Deploy the Database</span></span>

<span data-ttu-id="c19d7-197">Veritabanını dağıtmak için Code First Migrations kullanacaksınız.</span><span class="sxs-lookup"><span data-stu-id="c19d7-197">To deploy the database you'll use Code First Migrations.</span></span> <span data-ttu-id="c19d7-198">Visual Studio'dan dağıtmak için ayarları yapılandırmak için kullandığınız yayımlama profili oluşturduğunuzda, etiketli onay kutusu seçersiniz **güncelleştirme veritabanı**.</span><span class="sxs-lookup"><span data-stu-id="c19d7-198">When you create the publish profile that you use to configure settings for deploying from Visual Studio, you'll select a check box labeled **Update Database**.</span></span> <span data-ttu-id="c19d7-199">Bu ayar uygulamayı otomatik olarak yapılandırmak dağıtım işlemi neden *Web.config* Code First kullanmayacağından hedef sunucuda dosya `MigrateDatabaseToLatestVersion` Başlatıcı sınıfı.</span><span class="sxs-lookup"><span data-stu-id="c19d7-199">This setting causes the deployment process to automatically configure the application *Web.config* file on the destination server so that Code First uses the `MigrateDatabaseToLatestVersion` initializer class.</span></span>

<span data-ttu-id="c19d7-200">Visual Studio, projenizin hedef sunucuya kopyalarken dağıtım işlemi sırasında veritabanı ile herhangi bir şey yapmaz.</span><span class="sxs-lookup"><span data-stu-id="c19d7-200">Visual Studio doesn't do anything with the database during the deployment process while it is copying your project to the destination server.</span></span> <span data-ttu-id="c19d7-201">Dağıtılan uygulamayı çalıştırın ve dağıtımdan sonra ilk kez veritabanına erişir, Code First veritabanı veri modeli eşleşip eşleşmediğini denetler.</span><span class="sxs-lookup"><span data-stu-id="c19d7-201">When you run the deployed application and it accesses the database for the first time after deployment, Code First checks if the database matches the data model.</span></span> <span data-ttu-id="c19d7-202">Bir uyuşmazlık varsa, (henüz yoksa) Code First otomatik olarak veritabanı oluşturur veya (bir veritabanı var ancak model eşleşmiyor) veritabanı şeması en son sürüme güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="c19d7-202">If there's a mismatch, Code First automatically creates the database (if it doesn't exist yet) or updates the database schema to the latest version (if a database exists but doesn't match the model).</span></span> <span data-ttu-id="c19d7-203">Uygulama bir geçişler uyguluyorsa `Seed` yöntemi, veritabanı oluşturulur veya şema güncelleştirildikten sonra yöntemi çalışır.</span><span class="sxs-lookup"><span data-stu-id="c19d7-203">If the application implements a Migrations `Seed` method, the method runs after the database is created or the schema is updated.</span></span>

<span data-ttu-id="c19d7-204">Geçişler `Seed` yöntemi test verilerini ekler.</span><span class="sxs-lookup"><span data-stu-id="c19d7-204">Your Migrations `Seed` method inserts test data.</span></span> <span data-ttu-id="c19d7-205">Bir üretim ortamına dağıtılmadan, değiştirmeniz gerekecektir `Seed` şekilde yalnızca üretim veritabanınıza eklenmesini istediğiniz veri ekleyen şekilde yöntemi.</span><span class="sxs-lookup"><span data-stu-id="c19d7-205">If you were deploying to a production environment, you would have to change the `Seed` method so that it only inserts data that you want to be inserted into your production database.</span></span> <span data-ttu-id="c19d7-206">Örneğin, geçerli veri modelinizi gerçek kurslar ancak kurgusal Öğrenciler geliştirme veritabanında olan isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c19d7-206">For example, in your current data model you might want to have real courses but fictional students in the development database.</span></span> <span data-ttu-id="c19d7-207">Yazma bir `Seed` hem de geliştirme yüklenemedi ve üretim için dağıtmadan önce kurgusal Öğrenciler açıklama yöntemi.</span><span class="sxs-lookup"><span data-stu-id="c19d7-207">You can write a `Seed` method to load both in development, and then comment out the fictional students before you deploy to production.</span></span> <span data-ttu-id="c19d7-208">Veya yazabilirsiniz bir `Seed` yalnızca kurslar yüklenip kurgusal Öğrenciler uygulamanın kullanıcı arabirimini kullanarak test veritabanında el ile girin. yöntemi.</span><span class="sxs-lookup"><span data-stu-id="c19d7-208">Or you can write a `Seed` method to load only courses, and enter the fictional students in the test database manually by using the application's UI.</span></span>

### <a name="get-an-azure-account"></a><span data-ttu-id="c19d7-209">Bir Azure hesabı edinin</span><span class="sxs-lookup"><span data-stu-id="c19d7-209">Get an Azure account</span></span>

<span data-ttu-id="c19d7-210">Bir Azure hesabınızın olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="c19d7-210">You'll need an Azure account.</span></span> <span data-ttu-id="c19d7-211">Zaten yoksa, ancak bir Visual Studio aboneliğiniz yoksa, şunları yapabilirsiniz [abonelik Avantajlarınızı etkinleştirebilirsiniz](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/).</span><span class="sxs-lookup"><span data-stu-id="c19d7-211">If you don't already have one, but you do have a Visual Studio subscription, you can [activate your subscription benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/).</span></span> <span data-ttu-id="c19d7-212">Aksi takdirde, yalnızca birkaç dakika içinde ücretsiz bir deneme hesabı oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c19d7-212">Otherwise, you can create a free trial account in just a couple of minutes.</span></span> <span data-ttu-id="c19d7-213">Ayrıntılar için bkz [Azure ücretsiz deneme sürümü](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="c19d7-213">For details, see [Azure Free Trial](https://azure.microsoft.com/free/).</span></span>

### <a name="create-a-web-site-and-a-sql-database-in-azure"></a><span data-ttu-id="c19d7-214">Bir web sitesi ve bir SQL veritabanı oluşturma</span><span class="sxs-lookup"><span data-stu-id="c19d7-214">Create a web site and a SQL database in Azure</span></span>

<span data-ttu-id="c19d7-215">Azure web uygulamanızda Azure diğer istemcilerle paylaşılan sanal makineler (VM'ler) üzerinde çalışan anlamına gelir paylaşılan bir barındırma ortamında çalışır.</span><span class="sxs-lookup"><span data-stu-id="c19d7-215">Your web app in Azure will run in a shared hosting environment, which means it runs on virtual machines (VMs) that are shared with other Azure clients.</span></span> <span data-ttu-id="c19d7-216">Paylaşılan bir barındırma ortamı, bulutta çalışmaya başlamak için bir düşük maliyetli yoludur.</span><span class="sxs-lookup"><span data-stu-id="c19d7-216">A shared hosting environment is a low-cost way to get started in the cloud.</span></span> <span data-ttu-id="c19d7-217">Daha sonra web trafiği artarsa, uygulama ayrılmış VM'ler üzerinde çalıştırılan tarafından gereksinimini karşılayacak şekilde ölçeklendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c19d7-217">Later, if your web traffic increases, the application can scale to meet the need by running on dedicated VMs.</span></span> <span data-ttu-id="c19d7-218">Azure App Service için fiyatlandırma seçenekler hakkında daha fazla bilgi edinmek için üzerinde belgeleri okuyun [Azure belgeleri](https://azure.microsoft.com/pricing/details/app-service/)</span><span class="sxs-lookup"><span data-stu-id="c19d7-218">To learn more about Pricing Options for Azure App Service, read the documentation on [Azure Docs](https://azure.microsoft.com/pricing/details/app-service/)</span></span>

<span data-ttu-id="c19d7-219">Azure SQL veritabanı için veritabanı dağıtacaksınız.</span><span class="sxs-lookup"><span data-stu-id="c19d7-219">You'll deploy the database to Azure SQL Database.</span></span> <span data-ttu-id="c19d7-220">SQL veritabanı, SQL Server teknolojilerini yerleşik olarak bulunan bir bulut tabanlı ilişkisel veritabanı hizmetidir.</span><span class="sxs-lookup"><span data-stu-id="c19d7-220">SQL Database is a cloud-based relational database service that is built on SQL Server technologies.</span></span> <span data-ttu-id="c19d7-221">Araçları ve SQL Server ile çalışan uygulamalar da SQL veritabanı ile çalışır.</span><span class="sxs-lookup"><span data-stu-id="c19d7-221">Tools and applications that work with SQL Server also work with SQL Database.</span></span>

1. <span data-ttu-id="c19d7-222">İçinde [Azure Yönetim Portalı](https://portal.azure.com), tıklatın **yeni** sol sekmesini tıklatın **tümünü görmek** yeni bir dikey pencere ve ardından **Web uygulaması & SQL** içinde **Web** bölüm ve son olarak **oluşturma**.</span><span class="sxs-lookup"><span data-stu-id="c19d7-222">In the [Azure Management Portal](https://portal.azure.com), click **New** in the left tab, click **See all** in new blade, and then click **Web App & SQL** in the **Web** Section and finally **Create**.</span></span>

    ![Yönetim Portalı'nda yeni düğmesi](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/CreateWeb-Sql.png)

   <span data-ttu-id="c19d7-224">**Yeni Web uygulaması & Create SQL -** Sihirbazı açılır.</span><span class="sxs-lookup"><span data-stu-id="c19d7-224">The **New Web App & SQL - Create** wizard opens.</span></span>

2. <span data-ttu-id="c19d7-225">Dikey penceresinde bir dize girin **uygulama adı** kutusunu uygulamanız için benzersiz bir URL olarak kullanın.</span><span class="sxs-lookup"><span data-stu-id="c19d7-225">In the blade, enter a string in the **App name** box to use as the unique URL for your application.</span></span> <span data-ttu-id="c19d7-226">Tam URL ne burada Azure App Services varsayılan etki alanı girdiğiniz oluşur (. azurewebsites.net).</span><span class="sxs-lookup"><span data-stu-id="c19d7-226">The complete URL will consist of what you enter here plus the default domain of Azure App Services (.azurewebsites.net).</span></span> <span data-ttu-id="c19d7-227">Varsa **uygulama adı** zaten, sihirbazın bu kırmızı uyarır alınmış *uygulama adı kullanılamıyor* ileti.</span><span class="sxs-lookup"><span data-stu-id="c19d7-227">If the **App name** is already taken, the Wizard will notify you of this with a red *The app name is not available* message.</span></span> <span data-ttu-id="c19d7-228">Varsa **uygulama adı** olan yeşil bir onay işareti alırsınız kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="c19d7-228">If the **App name** is available, you will get a green checkmark.</span></span>

    ![Yönetim Portalı'nda veritabanı bağlantısı oluşturun](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Create-WebApp.png)

3. <span data-ttu-id="c19d7-230">İçinde **abonelik** açılan listesinde, lütfen Azure istediğiniz aboneliği seçin **uygulama hizmeti** bulunmasını.</span><span class="sxs-lookup"><span data-stu-id="c19d7-230">In the **Subscription** Dropdown, please choose the Azure Subscription in which you want the **App Service** to reside.</span></span>

4. <span data-ttu-id="c19d7-231">İçinde **kaynak grubu** metin kutusunda, bir kaynak grubu seçin veya yeni bir tane oluşturun.</span><span class="sxs-lookup"><span data-stu-id="c19d7-231">In the **Resource Group** text box, choose a Resource Group or create a new one.</span></span> <span data-ttu-id="c19d7-232">Bu ayar, web sitenizi çalışacak hangi veri merkezi belirtir.</span><span class="sxs-lookup"><span data-stu-id="c19d7-232">This setting specifies which data center your web site will run in.</span></span> <span data-ttu-id="c19d7-233">Kaynak grupları hakkında daha fazla bilgi için üzerinde belgeleri okuyun [Azure belgeleri](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-overview#resource-groups).</span><span class="sxs-lookup"><span data-stu-id="c19d7-233">For more information about Resource Groups, read the documentation on [Azure Docs](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-overview#resource-groups).</span></span>
5. <span data-ttu-id="c19d7-234">Yeni bir **uygulama hizmeti planı** tıklayarak *uygulama hizmet bölümü*, **Yeni Oluştur**, doldurun **uygulama hizmeti planı** (aynı adı taşıyan olabilir Uygulama hizmeti), **konumu**, ve **fiyatlandırma katmanı** (ücretsiz bir seçenek yoktur).</span><span class="sxs-lookup"><span data-stu-id="c19d7-234">Create a new **App Service Plan** by clicking the *App Service section*, **Create New**, and fill in **App Service plan** (can be same name as App Service), **Location**, and **Pricing tier** (there is a free option).</span></span>

    ![](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Create-AppService.png)
6. <span data-ttu-id="c19d7-235">Tıklatın **SQL veritabanı**ve seçin *Yeni Oluştur* veya varolan bir veritabanını seçin</span><span class="sxs-lookup"><span data-stu-id="c19d7-235">Click the **SQL Database**, and choose *Create New* or select an existing database</span></span>

    ![](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Create-Database.png)

7. <span data-ttu-id="c19d7-236">İçinde **adı** kutusunda, veritabanınız için bir ad girin.</span><span class="sxs-lookup"><span data-stu-id="c19d7-236">In the **Name** box, enter a name for your database.</span></span>
8. <span data-ttu-id="c19d7-237">Tıklatın **hedef sunucu** kutusunda **yeni bir sunucu oluşturmak**.</span><span class="sxs-lookup"><span data-stu-id="c19d7-237">Click the **Target Server** box, select **Create a new server**.</span></span> <span data-ttu-id="c19d7-238">Alternatif olarak, daha önce bir sunucu oluşturduysanız, bu sunucu kullanılabilir sunucuların listesinden seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c19d7-238">Alternatively, if you previously created a server, you can select that server from list of available servers.</span></span>
9. <span data-ttu-id="c19d7-239">Seçin **fiyatlandırma katmanı** bölümünde, seçin *serbest*.</span><span class="sxs-lookup"><span data-stu-id="c19d7-239">Choose **Pricing tier** section, choose *Free*.</span></span> <span data-ttu-id="c19d7-240">Ek kaynaklar gerekirse, veritabanı herhangi bir zamanda ölçeklendirilebilir.</span><span class="sxs-lookup"><span data-stu-id="c19d7-240">If additional resources are needed, the database can be scaled up at any time.</span></span> <span data-ttu-id="c19d7-241">SQL Azure fiyatlandırma hakkında daha fazla bilgi için üzerinde belgeleri okuyun [Azure belgeleri](https://azure.microsoft.com/pricing/details/sql-database/).</span><span class="sxs-lookup"><span data-stu-id="c19d7-241">To learn more on Azure SQL Pricing, read the documentation on [Azure Docs](https://azure.microsoft.com/pricing/details/sql-database/).</span></span>
10. <span data-ttu-id="c19d7-242">Değiştirme [harmanlama](https://docs.microsoft.com/sql/relational-databases/collations/collation-and-unicode-support) gerektiğinde.</span><span class="sxs-lookup"><span data-stu-id="c19d7-242">Modify [collation](https://docs.microsoft.com/sql/relational-databases/collations/collation-and-unicode-support) as needed.</span></span>
11. <span data-ttu-id="c19d7-243">Bir yönetici girin **SQL yönetici kullanıcı adı** ve **SQL yönetici parolası**.</span><span class="sxs-lookup"><span data-stu-id="c19d7-243">Enter an administrator **SQL Admin Username** and **SQL Admin Password**.</span></span> <span data-ttu-id="c19d7-244">Seçtiyseniz **yeni SQL veritabanı sunucusu**, mevcut bir ad ve burada parola girmezsiniz, yeni bir ad ve daha sonra veritabanına eriştiğinizde kullanmak üzere şimdi tanımlayacağınız parolayı girersiniz.</span><span class="sxs-lookup"><span data-stu-id="c19d7-244">If you selected **New SQL Database server**, you aren't entering an existing name and password here, you're entering a new name and password that you're defining now to use later when you access the database.</span></span> <span data-ttu-id="c19d7-245">Daha önce oluşturduğunuz bir sunucuyu seçtiyseniz, bu sunucu için kimlik bilgilerini girin.</span><span class="sxs-lookup"><span data-stu-id="c19d7-245">If you selected a server that you created previously, you'll enter credentials for that server.</span></span>
12. <span data-ttu-id="c19d7-246">Telemetri koleksiyonunu uygulama Application Insights kullanarak hizmet için etkinleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="c19d7-246">Telemetry collection can be enabled for App Service using Application Insights.</span></span> <span data-ttu-id="c19d7-247">Application Insights az yapılandırmayla değerli olay, özel durum, bağımlılık, istek ve izleme bilgilerini toplar.</span><span class="sxs-lookup"><span data-stu-id="c19d7-247">Application Insights with little configuration collects valuable event, exception, dependency, request, and trace information.</span></span> <span data-ttu-id="c19d7-248">Application Insights hakkında daha fazla bilgi için başlama [Azure belgeleri](https://azure.microsoft.com/services/application-insights/).</span><span class="sxs-lookup"><span data-stu-id="c19d7-248">To learn more about Application Insights, get started in [Azure Docs](https://azure.microsoft.com/services/application-insights/).</span></span>
13. <span data-ttu-id="c19d7-249">Tıklatın **oluşturma** tamamlanmış belirtmek için dikey pencerenin altındaki.</span><span class="sxs-lookup"><span data-stu-id="c19d7-249">Click **Create** at the bottom of the blade to indicate that you're finished.</span></span>
  
    <span data-ttu-id="c19d7-250">Yönetim Portalı Panoları sayfasına döndürür ve **bildirimleri** dikey penceresinde sayfanın üst kısmındaki gösterir site oluşturulmaktadır.</span><span class="sxs-lookup"><span data-stu-id="c19d7-250">The Management Portal returns to the Dashboards page, and the **Notifications** blade at the top of the page shows that the site is being created.</span></span> <span data-ttu-id="c19d7-251">(Genellikle bir dakikadan az), bir süre sonra dağıtım başarılı olduğunu belirten bir bildirim olacaktır.</span><span class="sxs-lookup"><span data-stu-id="c19d7-251">After a while (typically less than a minute), there will be a notification that the Deployment succeeded.</span></span> <span data-ttu-id="c19d7-252">Sol gezinti çubuğunda yeni **uygulama hizmeti** görünür *uygulama hizmetleri* bölüm ve yeni **SQL veritabanı** görünür *SQL veritabanları*  bölümü.</span><span class="sxs-lookup"><span data-stu-id="c19d7-252">In the navigation bar at the left, the new **App Service** appears in the *App Services* section and the new **SQL Database** appears in the *SQL Databases* section.</span></span>

### <a name="deploy-the-application-to-azure"></a><span data-ttu-id="c19d7-253">Uygulamayı Azure'a dağıtma</span><span class="sxs-lookup"><span data-stu-id="c19d7-253">Deploy the application to Azure</span></span>

1. <span data-ttu-id="c19d7-254">Visual Studio'da'nde projeye sağ **Çözüm Gezgini** seçip **Yayımla** ve bağlam menüsünden.</span><span class="sxs-lookup"><span data-stu-id="c19d7-254">In Visual Studio, right-click the project in **Solution Explorer** and select **Publish** from the context menu.</span></span>
  
    ![Proje bağlam menüsünde Yayımla](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image10.png)
2. <span data-ttu-id="c19d7-256">İçinde **profil** sekmesinde **Web'i Yayımla** Sihirbazı'nı tıklatın **Microsoft Azure App Service**.</span><span class="sxs-lookup"><span data-stu-id="c19d7-256">In the **Profile** tab of the **Publish Web** wizard, click **Microsoft Azure App Service**.</span></span>
  
    ![Yayımlama ayarlarını İçeri Aktar](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-ChooseTarget.png)
3. <span data-ttu-id="c19d7-258">Visual Studio'da daha önce Azure aboneliğinizin eklemediyseniz, ekranda adımları gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="c19d7-258">If you have not previously added your Azure subscription in Visual Studio, perform the steps on the screen.</span></span> <span data-ttu-id="c19d7-259">Bu adımları Azure aboneliğinize bu nedenle, bağlanmak için Visual Studio listesini etkinleştir **uygulama hizmetleri** web sitenizi dahil edilir.</span><span class="sxs-lookup"><span data-stu-id="c19d7-259">These steps enable Visual Studio to connect to your Azure subscription so that the list of **App Services** will include your web site.</span></span>
 
4. <span data-ttu-id="c19d7-260">Seçin **abonelik** uygulama hizmeti için ardından eklenen **App Service planı** uygulama hizmetiniz bir parçası klasör ve son olarak **uygulama hizmeti** kendisi ve ardından **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="c19d7-260">Select the **Subscription** you added the App Service to, then the **App Service Plan** folder your App Service is a part of, and finally the **App Service** itself followed by **Ok**.</span></span>

    ![Uygulama hizmeti seçin](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-AppService.png)
5. <span data-ttu-id="c19d7-262">Profili yapılandırıldıktan sonra **bağlantı** sekmesinde gösterilecek.</span><span class="sxs-lookup"><span data-stu-id="c19d7-262">After the Profile has been configured, the **Connection** tab will be shown.</span></span> <span data-ttu-id="c19d7-263">Tıklatın **bağlantıyı doğrula** ayarlarının doğru olduğundan emin olmak için</span><span class="sxs-lookup"><span data-stu-id="c19d7-263">Click **Validate Connection** to make sure that the settings are correct</span></span>

    ![Bağlantı doğrula](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-Connection.png)
6. <span data-ttu-id="c19d7-265">Bağlantı doğrulandığında yeşil bir onay işareti yanında gösterilen **bağlantıyı doğrula** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="c19d7-265">When the connection has been validated, a green check mark is shown next to the **Validate Connection** button.</span></span> <span data-ttu-id="c19d7-266">**İleri**'ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="c19d7-266">Click **Next**.</span></span>
  
    ![Başarıyla doğrulanan bağlantı](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-SettingsValidated.png)
7. <span data-ttu-id="c19d7-268">Açık **uzak bağlantı dizesi** açılır listesi altında **SchoolContext** ve oluşturduğunuz veritabanı için bağlantı dizesi seçin.</span><span class="sxs-lookup"><span data-stu-id="c19d7-268">Open the **Remote connection string** drop-down list under **SchoolContext** and select the connection string for the database you created.</span></span>
8. <span data-ttu-id="c19d7-269">Seçin **güncelleştirme veritabanı**.</span><span class="sxs-lookup"><span data-stu-id="c19d7-269">Select **Update database**.</span></span>

    ![Ayarlar sekmesi](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-Settings.png)

    <span data-ttu-id="c19d7-271">Bu ayar uygulamayı otomatik olarak yapılandırmak dağıtım işlemi neden *Web.config* Code First kullanmayacağından hedef sunucuda dosya `MigrateDatabaseToLatestVersion` Başlatıcı sınıfı.</span><span class="sxs-lookup"><span data-stu-id="c19d7-271">This setting causes the deployment process to automatically configure the application *Web.config* file on the destination server so that Code First uses the `MigrateDatabaseToLatestVersion` initializer class.</span></span>
9. <span data-ttu-id="c19d7-272">**İleri**'ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="c19d7-272">Click **Next**.</span></span>
10. <span data-ttu-id="c19d7-273">İçinde **Önizleme** sekmesini tıklatın, **önizlemeyi Başlat**.</span><span class="sxs-lookup"><span data-stu-id="c19d7-273">In the **Preview** tab, click **Start Preview**.</span></span>
  
    ![Önizleme sekmesinde StartPreview düğmesi](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-Preview.png)
  
    <span data-ttu-id="c19d7-275">Sekme sunucuya kopyalanacak dosyaların bir listesini görüntüler.</span><span class="sxs-lookup"><span data-stu-id="c19d7-275">The tab displays a list of the files that will be copied to the server.</span></span> <span data-ttu-id="c19d7-276">Önizleme görüntüleme uygulamayı yayımlamak için gerekli değildir ancak farkında olması için kullanışlı bir işlevdir.</span><span class="sxs-lookup"><span data-stu-id="c19d7-276">Displaying the preview isn't required to publish the application but is a useful function to be aware of.</span></span> <span data-ttu-id="c19d7-277">Bu durumda, görüntülenen dosyaların listesi ile herhangi bir şey yapmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="c19d7-277">In this case, you don't need to do anything with the list of files that is displayed.</span></span> <span data-ttu-id="c19d7-278">Bu uygulamayı dağıtabilmek sonraki açışınızda değişen dosyaları bu listede yer alacaktır.</span><span class="sxs-lookup"><span data-stu-id="c19d7-278">The next time you deploy this application, only the files that have changed will be in this list.</span></span>
    <span data-ttu-id="c19d7-279">![StartPreview dosya çıktısı](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-PreviewLoaded.png)</span><span class="sxs-lookup"><span data-stu-id="c19d7-279">![StartPreview file output](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-PreviewLoaded.png)</span></span>

11. <span data-ttu-id="c19d7-280">Tıklatın **yayımlama**.</span><span class="sxs-lookup"><span data-stu-id="c19d7-280">Click **Publish**.</span></span>
    <span data-ttu-id="c19d7-281">Visual Studio dosyaların Azure sunucusuna kopyalama işlemi başlar.</span><span class="sxs-lookup"><span data-stu-id="c19d7-281">Visual Studio begins the process of copying the files to the Azure server.</span></span>
12. <span data-ttu-id="c19d7-282">**Çıkış** penceresinde hangi dağıtım eylemlerinin gerçekleştirilen gösterir ve dağıtımın başarılı şekilde tamamlandığını bildirir.</span><span class="sxs-lookup"><span data-stu-id="c19d7-282">The **Output** window shows what deployment actions were taken and reports successful completion of the deployment.</span></span>
  
    ![Çıktı penceresi başarılı dağıtım raporlama](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-BuildOutput.png)
13. <span data-ttu-id="c19d7-284">Başarılı dağıtım sırasında varsayılan tarayıcı otomatik olarak dağıtılan web sitesinin URL'sini açar.</span><span class="sxs-lookup"><span data-stu-id="c19d7-284">Upon successful deployment, the default browser automatically opens to the URL of the deployed web site.</span></span>
    <span data-ttu-id="c19d7-285">Oluşturduğunuz uygulama bulutta şu anda çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="c19d7-285">The application you created is now running in the cloud.</span></span> 
  
    ![Students_index_page_with_paging](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-Site.png)

<span data-ttu-id="c19d7-287">Bu noktada, *SchoolContext* veritabanı oluşturulan Azure SQL veritabanı'nda seçtiğiniz çünkü **yürütme önce kod uygulamalı geçişler (uygulama başlatılırken çalışır)**.</span><span class="sxs-lookup"><span data-stu-id="c19d7-287">At this point your *SchoolContext* database has been created in the Azure SQL Database because you selected **Execute Code First Migrations (runs on app start)**.</span></span> <span data-ttu-id="c19d7-288">*Web.config* web sitesi dağıtıldı dosyasında değiştirildi böylece [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) Başlatıcı kodunuz okur veya (oldu veritabanında veri Yazar ilk kez çalıştırır Seçili olduğunda **Öğrenciler** sekmesi):</span><span class="sxs-lookup"><span data-stu-id="c19d7-288">The *Web.config* file in the deployed web site has been changed so that the [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) initializer runs the first time your code reads or writes data in the database (which happened when you selected the **Students** tab):</span></span>

![](https://asp.net/media/4367421/mig.png)

<span data-ttu-id="c19d7-289">Dağıtım işlemi de oluşturulan yeni bir bağlantı dizesi *(SchoolContext\_DatabasePublish*) veritabanı şemasının güncelleştirme ve veritabanı dengeli dağıtımı için kullanılacak Code First geçişleri için.</span><span class="sxs-lookup"><span data-stu-id="c19d7-289">The deployment process also created a new connection string *(SchoolContext\_DatabasePublish*) for Code First Migrations to use for updating the database schema and seeding the database.</span></span>

![Database_Publish bağlantı dizesi](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image26.png)

<span data-ttu-id="c19d7-291">Web.config dosyasının kendi bilgisayara dağıtılmış sürümünde bulabilirsiniz *ContosoUniversity\obj\Release\Package\PackageTmp\Web.config*. Dağıtılan erişim *Web.config* kendisini FTP kullanarak dosya.</span><span class="sxs-lookup"><span data-stu-id="c19d7-291">You can find the deployed version of the Web.config file on your own computer in *ContosoUniversity\obj\Release\Package\PackageTmp\Web.config*. You can access the deployed *Web.config* file itself by using FTP.</span></span> <span data-ttu-id="c19d7-292">Yönergeler için bkz: [Visual Studio kullanarak ASP.NET Web Dağıtımı: bir kod güncelleştirme dağıtımı](xref:web-forms/overview/deployment/visual-studio-web-deployment/deploying-a-code-update).</span><span class="sxs-lookup"><span data-stu-id="c19d7-292">For instructions, see [ASP.NET Web Deployment using Visual Studio: Deploying a Code Update](xref:web-forms/overview/deployment/visual-studio-web-deployment/deploying-a-code-update).</span></span> <span data-ttu-id="c19d7-293">İle başlayan yönergeleri izleyin "bir FTP aracı kullanmak için üç şey gerekir: FTP URL'si, kullanıcı adı ve parolanın."</span><span class="sxs-lookup"><span data-stu-id="c19d7-293">Follow the instructions that start with "To use an FTP tool, you need three things: the FTP URL, the user name, and the password."</span></span>

> [!NOTE]
> <span data-ttu-id="c19d7-294">URL bulur herkes veri değiştirebilmeniz için web uygulaması güvenlik uygulamaz.</span><span class="sxs-lookup"><span data-stu-id="c19d7-294">The web app doesn't implement security, so anyone who finds the URL can change the data.</span></span> <span data-ttu-id="c19d7-295">Web sitesini güvenli hale getirmek yönergeler için bkz: [bir Güvenli ASP.NET MVC uygulaması üyeliği, OAuth ve SQL veritabanı ile Azure'a dağıtma](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data).</span><span class="sxs-lookup"><span data-stu-id="c19d7-295">For instructions on how to secure the web site, see [Deploy a Secure ASP.NET MVC app with Membership, OAuth, and SQL Database to Azure](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data).</span></span> <span data-ttu-id="c19d7-296">Azure Yönetim Portalı'nı kullanarak site kullanarak diğer kişilerin engelleyebilir veya **Sunucu Gezgini** siteyi durdurmak için Visual Studio'da.</span><span class="sxs-lookup"><span data-stu-id="c19d7-296">You can prevent other people from using the site by using the Azure Management Portal or **Server Explorer** in Visual Studio to stop the site.</span></span>


![](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Stop-Service.png)

## <a name="advanced-migrations-scenarios"></a><span data-ttu-id="c19d7-297">Gelişmiş geçiş senaryoları</span><span class="sxs-lookup"><span data-stu-id="c19d7-297">Advanced Migrations Scenarios</span></span>

<span data-ttu-id="c19d7-298">Geçişler Bu öğreticide gösterilen şekilde otomatik olarak çalıştırarak bir veritabanını dağıtmak ve birden çok sunucu üzerinde çalışan bir web sitesine dağıtıyorsanız, aynı anda geçişler çalıştırmaya birden çok sunucu alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c19d7-298">If you deploy a database by running migrations automatically as shown in this tutorial, and you are deploying to a web site that runs on multiple servers, you could get multiple servers trying to run migrations at the same time.</span></span> <span data-ttu-id="c19d7-299">Geçişler atomik, böylece iki sunucu aynı geçiş çalıştırmayı denerseniz, biri başarılı olur ve diğer (işlemleri iki kez gerçekleştirilemez varsayılarak) başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="c19d7-299">Migrations are atomic, so if two servers try to run the same migration, one will succeed and the other will fail (assuming the operations can't be done twice).</span></span> <span data-ttu-id="c19d7-300">Bu senaryoda bu sorunları önlemek istiyorsanız yaparsanız geçişler el ile çağırın ve böylece yalnızca bir kez gerçekleşir kendi kodu ayarlamak.</span><span class="sxs-lookup"><span data-stu-id="c19d7-300">In that scenario if you want to avoid those issues, you can call migrations manually and set up your own code so that it only happens once.</span></span> <span data-ttu-id="c19d7-301">Daha fazla bilgi için bkz: [çalışan ve komut dosyası geçişleri kodundan](http://romiller.com/2012/02/09/running-scripting-migrations-from-code/) Rowan Mert'ın blogunda ve [Migrate.exe](https://msdn.microsoft.com/data/jj618307) (geçişler komut satırından çalıştırma) için MSDN'de.</span><span class="sxs-lookup"><span data-stu-id="c19d7-301">For more information, see [Running and Scripting Migrations from Code](http://romiller.com/2012/02/09/running-scripting-migrations-from-code/) on Rowan Miller's blog and [Migrate.exe](https://msdn.microsoft.com/data/jj618307) (for executing migrations from the command line) on MSDN.</span></span>

<span data-ttu-id="c19d7-302">Diğer geçiş senaryoları hakkında daha fazla bilgi için bkz: [geçişler ekran kaydı serisi](https://blogs.msdn.com/b/adonet/archive/2014/03/12/migrations-screencast-series.aspx).</span><span class="sxs-lookup"><span data-stu-id="c19d7-302">For information about other migrations scenarios, see [Migrations Screencast Series](https://blogs.msdn.com/b/adonet/archive/2014/03/12/migrations-screencast-series.aspx).</span></span>

## <a name="code-first-initializers"></a><span data-ttu-id="c19d7-303">Kod ilk başlatıcıları</span><span class="sxs-lookup"><span data-stu-id="c19d7-303">Code First Initializers</span></span>

<span data-ttu-id="c19d7-304">Dağıtım bölümünde gördüğünüz [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) kullanılan Başlatıcısı.</span><span class="sxs-lookup"><span data-stu-id="c19d7-304">In the deployment section you saw the [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) initializer being used.</span></span> <span data-ttu-id="c19d7-305">Kod ilk dahil olmak üzere diğer başlatıcıları de sağlar [Createdatabaseıfnotexists](https://msdn.microsoft.com/library/gg679221(v=vs.103).aspx) (varsayılan), [DropCreateDatabaseIfModelChanges](https://msdn.microsoft.com/library/gg679604(v=VS.103).aspx) (Bu, daha önce kullandığınız) ve [ DropCreateDatabaseAlways](https://msdn.microsoft.com/library/gg679506(v=VS.103).aspx).</span><span class="sxs-lookup"><span data-stu-id="c19d7-305">Code First also provides other initializers, including [CreateDatabaseIfNotExists](https://msdn.microsoft.com/library/gg679221(v=vs.103).aspx) (the default), [DropCreateDatabaseIfModelChanges](https://msdn.microsoft.com/library/gg679604(v=VS.103).aspx) (which you used earlier) and [DropCreateDatabaseAlways](https://msdn.microsoft.com/library/gg679506(v=VS.103).aspx).</span></span> <span data-ttu-id="c19d7-306">`DropCreateAlways` Başlatıcı birim testleri için koşullar ayarlamak için yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="c19d7-306">The `DropCreateAlways` initializer can be useful for setting up conditions for unit tests.</span></span> <span data-ttu-id="c19d7-307">Ayrıca kendi başlatıcıları yazabilirsiniz ve uygulama okur veya veritabanına yazar beklemek istemiyorsanız, bir başlatıcı açıkça çağırabilir.</span><span class="sxs-lookup"><span data-stu-id="c19d7-307">You can also write your own initializers, and you can call an initializer explicitly if you don't want to wait until the application reads from or writes to the database.</span></span> <span data-ttu-id="c19d7-308">Geçişler etkinleştirmeden önce bu öğreticide Kasım, 2013'te yazılmış zaman yalnızca oluşturma ve DropCreate başlatıcıları kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c19d7-308">At the time this tutorial is being written in November, 2013, you can only use the Create and DropCreate initializers before you enable migrations.</span></span> <span data-ttu-id="c19d7-309">Entity Framework takım bu başlatıcıları de geçişler ile kullanılabilir hale çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="c19d7-309">The Entity Framework team is working on making these initializers usable with migrations as well.</span></span>

<span data-ttu-id="c19d7-310">Başlatıcılar hakkında daha fazla bilgi için bkz: [anlama veritabanı başlatıcıları Entity Framework Code First içinde](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm) ve Bölüm 6 defterinin [programlama Entity Framework: Code First](http://shop.oreilly.com/product/0636920022220.do) Julie Lerman tarafından ve Rowan Mert.</span><span class="sxs-lookup"><span data-stu-id="c19d7-310">For more information about initializers, see [Understanding Database Initializers in Entity Framework Code First](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm) and chapter 6 of the book [Programming Entity Framework: Code First](http://shop.oreilly.com/product/0636920022220.do) by Julie Lerman and Rowan Miller.</span></span>

## <a name="summary"></a><span data-ttu-id="c19d7-311">Özet</span><span class="sxs-lookup"><span data-stu-id="c19d7-311">Summary</span></span>

<span data-ttu-id="c19d7-312">Bu öğreticide geçişleri etkinleştir ve uygulama dağıtma gördünüz.</span><span class="sxs-lookup"><span data-stu-id="c19d7-312">In this tutorial you've seen how to enable migrations and deploy the application.</span></span> <span data-ttu-id="c19d7-313">Sonraki öğreticide veri modelini genişleterek daha gelişmiş konuları arayan başlarsınız.</span><span class="sxs-lookup"><span data-stu-id="c19d7-313">In the next tutorial you'll begin looking at more advanced topics by expanding the data model.</span></span>

<span data-ttu-id="c19d7-314">Lütfen geri bildirim, Bu öğretici beğendiğinizi nasıl ve ne biz artabileceğini bırakın.</span><span class="sxs-lookup"><span data-stu-id="c19d7-314">Please leave feedback on how you liked this tutorial and what we could improve.</span></span> <span data-ttu-id="c19d7-315">En yeni konular da isteğinde bulunabilirsiniz [Göster bana nasıl kodu ile](http://aspnet.uservoice.com/forums/228522-show-me-how-with-code).</span><span class="sxs-lookup"><span data-stu-id="c19d7-315">You can also request new topics at [Show Me How With Code](http://aspnet.uservoice.com/forums/228522-show-me-how-with-code).</span></span>

<span data-ttu-id="c19d7-316">Diğer Entity Framework kaynaklarına bağlantılar bulunabilir [ASP.NET Data Access - kaynakları önerilen](xref:whitepapers/aspnet-data-access-content-map).</span><span class="sxs-lookup"><span data-stu-id="c19d7-316">Links to other Entity Framework resources can be found in [ASP.NET Data Access - Recommended Resources](xref:whitepapers/aspnet-data-access-content-map).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c19d7-317">[Önceki](xref:mvc/overview/getting-started/getting-started-with-ef-using-mvc/connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application)
> [sonraki](xref:mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-a-more-complex-data-model-for-an-asp-net-mvc-application)</span><span class="sxs-lookup"><span data-stu-id="c19d7-317">[Previous](xref:mvc/overview/getting-started/getting-started-with-ef-using-mvc/connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application)
[Next](xref:mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-a-more-complex-data-model-for-an-asp-net-mvc-application)</span></span>
