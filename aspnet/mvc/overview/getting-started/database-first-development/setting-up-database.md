---
uid: mvc/overview/getting-started/database-first-development/setting-up-database
title: 'Öğretici: EF veritabanı MVC 5 kullanarak First ile çalışmaya başlama'
description: Bu öğreticide, başlama mevcut bir veritabanı ve hızlı bir şekilde kullanıcıların verilerle etkileşime olanak sağlayan bir web uygulaması oluşturma gösterilmektedir.
author: Rick-Anderson
ms.author: riande
ms.date: 01/28/2019
ms.topic: tutorial
ms.assetid: 095abad4-3bfe-4f06-b092-ae6a735b7e49
msc.legacyurl: /mvc/overview/getting-started/database-first-development/setting-up-database
msc.type: authoredcontent
ms.openlocfilehash: a503e3db63c873249178fd4783d322f4067c3208
ms.sourcegitcommit: c47d7c131eebbcd8811e31edda210d64cf4b9d6b
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/30/2019
ms.locfileid: "55236386"
---
# <a name="tutorial-get-started-with-ef-database-first-using-mvc-5"></a><span data-ttu-id="7c589-103">Öğretici: EF veritabanı MVC 5 kullanarak First ile çalışmaya başlama</span><span class="sxs-lookup"><span data-stu-id="7c589-103">Tutorial: Get started with EF Database First using MVC 5</span></span>

<span data-ttu-id="7c589-104">MVC, Entity Framework ve ASP.NET iskeleti oluşturma kullanarak mevcut bir veritabanı için bir arabirim sunan bir web uygulaması oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7c589-104">Using MVC, Entity Framework, and ASP.NET Scaffolding, you can create a web application that provides an interface to an existing database.</span></span> <span data-ttu-id="7c589-105">Bu öğretici serisinde, otomatik olarak kullanıcıların görüntüleme, düzenleme, oluşturma olanak sağlayan bir kod oluşturmak ve bir veritabanı tablosu, bulunan verileri silmek gösterilir.</span><span class="sxs-lookup"><span data-stu-id="7c589-105">This tutorial series shows you how to automatically generate code that enables users to display, edit, create, and delete data that resides in a database table.</span></span> <span data-ttu-id="7c589-106">Oluşturulan kod, veritabanı tablosundaki sütunlara karşılık gelir.</span><span class="sxs-lookup"><span data-stu-id="7c589-106">The generated code corresponds to the columns in the database table.</span></span> <span data-ttu-id="7c589-107">Serisinin son bölümünde sitenizi ve veritabanınızı Azure'a dağıtır.</span><span class="sxs-lookup"><span data-stu-id="7c589-107">In the last part of the series, you will deploy the site and database to Azure.</span></span>

<span data-ttu-id="7c589-108">Bu öğreticide, başlama mevcut bir veritabanı ve hızlı bir şekilde kullanıcıların verilerle etkileşime olanak sağlayan bir web uygulaması oluşturma gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="7c589-108">This tutorial shows how to start with an existing database and quickly create a web application that enables users to interact with the data.</span></span> <span data-ttu-id="7c589-109">Bu Entity Framework 6 ve MVC 5 web uygulaması oluşturmak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="7c589-109">It uses the Entity Framework 6 and MVC 5 to build the web application.</span></span> <span data-ttu-id="7c589-110">ASP.NET iskeleti oluşturma özelliği, görüntülemek, güncelleştirmek, oluşturmak ve verileri silme kod otomatik olarak oluşturmanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="7c589-110">The ASP.NET Scaffolding feature enables you to automatically generate code for displaying, updating, creating and deleting data.</span></span> <span data-ttu-id="7c589-111">Visual Studio'dan yayımlama araçları kullanarak, kolayca sitenizi ve veritabanınızı Azure'a dağıtabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7c589-111">Using the publishing tools within Visual Studio, you can easily deploy the site and database to Azure.</span></span>

<span data-ttu-id="7c589-112">Bu serinin veritabanı oluşturma ve verilerle doldurma odaklanır.</span><span class="sxs-lookup"><span data-stu-id="7c589-112">This part of the series focuses on creating a database and populating it with data.</span></span>

<span data-ttu-id="7c589-113">Bu seri, Tom Dykstra ve Rick Anderson katkılar ile yazılmıştır.</span><span class="sxs-lookup"><span data-stu-id="7c589-113">This series was written with contributions from Tom Dykstra and Rick Anderson.</span></span> <span data-ttu-id="7c589-114">Bu temel kullanıcıların yorumlar bölümünde geri bildirim üzerinde geliştirildi.</span><span class="sxs-lookup"><span data-stu-id="7c589-114">It was improved based on feedback from users in the comments section.</span></span>

<span data-ttu-id="7c589-115">Bu öğreticide şunları yaptınız:</span><span class="sxs-lookup"><span data-stu-id="7c589-115">In this tutorial, you:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="7c589-116">Veritabanı ayarlama</span><span class="sxs-lookup"><span data-stu-id="7c589-116">Set up the database</span></span>

## <a name="prerequisites"></a><span data-ttu-id="7c589-117">Önkoşullar</span><span class="sxs-lookup"><span data-stu-id="7c589-117">Prerequisites</span></span>

* [<span data-ttu-id="7c589-118">Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="7c589-118">Visual Studio 2017</span></span>](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=button+cta&utm_content=download+vs2017)

## <a name="introduction"></a><span data-ttu-id="7c589-119">Giriş</span><span class="sxs-lookup"><span data-stu-id="7c589-119">Introduction</span></span>

<span data-ttu-id="7c589-120">Bu öğreticide, bir veritabanına sahip ve bu veritabanının alanlara göre bir web uygulaması için kod oluşturmak istediğiniz durumu ele alır.</span><span class="sxs-lookup"><span data-stu-id="7c589-120">This tutorial addresses the situation where you have a database and want to generate code for a web application based on the fields of that database.</span></span> <span data-ttu-id="7c589-121">Bu yaklaşım, ilk veritabanı geliştirme adı verilir.</span><span class="sxs-lookup"><span data-stu-id="7c589-121">This approach is called Database First development.</span></span> <span data-ttu-id="7c589-122">Mevcut bir veritabanı zaten yoksa, bunun yerine veri sınıfları tanımlama ve veritabanı oluşturma sınıfı özelliklerinden içerir Code First geliştirme olarak adlandırılan bir yaklaşımı kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7c589-122">If you do not already have an existing database, you can instead use an approach called Code First development which involves defining data classes and generating the database from the class properties.</span></span>

## <a name="set-up-the-database"></a><span data-ttu-id="7c589-123">Veritabanı ayarlama</span><span class="sxs-lookup"><span data-stu-id="7c589-123">Set up the database</span></span>

<span data-ttu-id="7c589-124">Mevcut bir veritabanına sahip olmanın ortamınızın benzetimini yapmak için önce önceden doldurulmuş bazı verilerle bir veritabanı oluşturun ve ardından veritabanına bağlanan web uygulamanızı oluşturma.</span><span class="sxs-lookup"><span data-stu-id="7c589-124">To mimic the environment of having an existing database, you will first create a database with some pre-filled data, and then create your web application that connects to the database.</span></span>

<span data-ttu-id="7c589-125">Bu öğreticide, LocalDB kullanımıyla geliştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="7c589-125">This tutorial was developed using LocalDB.</span></span> <span data-ttu-id="7c589-126">LocalDB yerine mevcut bir veritabanı sunucusunu kullanabilirsiniz, ancak Visual Studio ve veritabanı türüne, sürümüne bağlı olarak, tüm Visual Studio veri Araçları'nın desteklenmiyor.</span><span class="sxs-lookup"><span data-stu-id="7c589-126">You can use an existing database server instead of LocalDB, but depending on your version of Visual Studio and your type of database, all of the data tools in Visual Studio might not be supported.</span></span> <span data-ttu-id="7c589-127">Araçları, veritabanı için mevcut değilse, veritabanınız için bazı yönetim paketi içinde veritabanı özgü adımlarını gerçekleştirmek gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="7c589-127">If the tools are not available for your database, you may need to perform some of the database-specific steps within the management suite for your database.</span></span>

<span data-ttu-id="7c589-128">Visual Studio sürümünde veritabanı araçları ile ilgili bir sorun varsa, Veritabanı Araçları'nın en son sürümünü yüklediğinizden emin olun.</span><span class="sxs-lookup"><span data-stu-id="7c589-128">If you have a problem with the database tools in your version of Visual Studio, make sure you have installed the latest version of the database tools.</span></span> <span data-ttu-id="7c589-129">Güncelleştirme veya veritabanı araçlarını yükleme hakkında daha fazla bilgi için bkz: [Microsoft SQL Server veri Araçları](https://msdn.microsoft.com/data/hh297027).</span><span class="sxs-lookup"><span data-stu-id="7c589-129">For information about updating or installing the database tools, see [Microsoft SQL Server Data Tools](https://msdn.microsoft.com/data/hh297027).</span></span>

<span data-ttu-id="7c589-130">Visual Studio'yu başlatın ve oluşturma bir **SQL Server veritabanı projesi**.</span><span class="sxs-lookup"><span data-stu-id="7c589-130">Launch Visual Studio and create a **SQL Server Database Project**.</span></span> <span data-ttu-id="7c589-131">Projeyi adlandırın **ContosoUniversityData**.</span><span class="sxs-lookup"><span data-stu-id="7c589-131">Name the project **ContosoUniversityData**.</span></span>

![veritabanı projesi oluşturun](setting-up-database/_static/image1.png)

<span data-ttu-id="7c589-133">Artık bir boş veritabanı projesi vardır.</span><span class="sxs-lookup"><span data-stu-id="7c589-133">You now have an empty database project.</span></span> <span data-ttu-id="7c589-134">Proje için hedef platform olarak Azure SQL veritabanı ihtiyacınız olacak şekilde bu veritabanı Bu öğreticide daha sonra Azure'a dağıtır.</span><span class="sxs-lookup"><span data-stu-id="7c589-134">You will deploy this database to Azure later in this tutorial, so you'll need to set Azure SQL Database as the target platform for the project.</span></span> <span data-ttu-id="7c589-135">Hedef platform ayarlama, veritabanı gerçekten dağıtmayan; Bu, yalnızca veritabanı projesini veritabanı tasarımı hedef platform ile uyumlu olduğunu doğrular anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="7c589-135">Setting the target platform does not actually deploy the database; it only means that the database project will verify that the database design is compatible with the target platform.</span></span> <span data-ttu-id="7c589-136">Hedef platform ayarlamak için açın **özellikleri** seçin ve proje için **Microsoft Azure SQL veritabanı** hedef platformu için.</span><span class="sxs-lookup"><span data-stu-id="7c589-136">To set the target platform, open the **Properties** for the project and select **Microsoft Azure SQL Database** for the target platform.</span></span>

<span data-ttu-id="7c589-137">Tabloları tanımlama SQL komut dosyaları ekleyerek Bu öğretici için gerekli olan tablolar oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7c589-137">You can create the tables needed for this tutorial by adding SQL scripts that define the tables.</span></span> <span data-ttu-id="7c589-138">Projenize sağ tıklayın ve yeni bir öğe ekleyin.</span><span class="sxs-lookup"><span data-stu-id="7c589-138">Right-click your project and add a new item.</span></span> <span data-ttu-id="7c589-139">Seçin **tabloları ve görünümleri** > **tablo** ve adlandırın *Öğrenci*.</span><span class="sxs-lookup"><span data-stu-id="7c589-139">Select **Tables and Views** > **Table** and name it *Student*.</span></span>

<span data-ttu-id="7c589-140">Tablo dosyasında T-SQL komutu tablo oluşturmak için aşağıdaki kod ile değiştirin.</span><span class="sxs-lookup"><span data-stu-id="7c589-140">In the table file, replace the T-SQL command with the following code to create the table.</span></span>

[!code-sql[Main](setting-up-database/samples/sample1.sql)]

<span data-ttu-id="7c589-141">Tasarım penceresinde kod ile otomatik olarak eşitler dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="7c589-141">Notice that the design window automatically synchronizes with the code.</span></span> <span data-ttu-id="7c589-142">Kod veya Tasarımcısı ile çalışabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7c589-142">You can work with either the code or designer.</span></span>

![kod ve tasarımının Göster](setting-up-database/_static/image5.png)

<span data-ttu-id="7c589-144">Başka bir tablo ekleyin.</span><span class="sxs-lookup"><span data-stu-id="7c589-144">Add another table.</span></span> <span data-ttu-id="7c589-145">Bu kez, kurs adlandırın ve aşağıdaki T-SQL komutunu kullanın.</span><span class="sxs-lookup"><span data-stu-id="7c589-145">This time name it Course and use the following T-SQL command.</span></span>

[!code-sql[Main](setting-up-database/samples/sample2.sql)]

<span data-ttu-id="7c589-146">Ayrıca, kayıt adında bir tablo oluşturmak için bir kez daha yineleyin.</span><span class="sxs-lookup"><span data-stu-id="7c589-146">And, repeat one more time to create a table named Enrollment.</span></span>

[!code-sql[Main](setting-up-database/samples/sample3.sql)]

<span data-ttu-id="7c589-147">Veritabanınızı veritabanı dağıtıldıktan sonra çalıştırılacak bir komut dosyası aracılığıyla verilerle doldurabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7c589-147">You can populate your database with data through a script that is run after the database is deployed.</span></span> <span data-ttu-id="7c589-148">Dağıtım sonrası komut dosyası projeye ekleyin.</span><span class="sxs-lookup"><span data-stu-id="7c589-148">Add a Post-Deployment Script to the project.</span></span> <span data-ttu-id="7c589-149">Projenize sağ tıklayın ve yeni bir öğe ekleyin.</span><span class="sxs-lookup"><span data-stu-id="7c589-149">Right-click your project and add a new item.</span></span> <span data-ttu-id="7c589-150">Seçin **kullanıcı betikleri** > **dağıtım sonrası betiği**.</span><span class="sxs-lookup"><span data-stu-id="7c589-150">Select **User Scripts** > **Post-Deployment Script**.</span></span> <span data-ttu-id="7c589-151">Varsayılan adı kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7c589-151">You can use the default name.</span></span>

<span data-ttu-id="7c589-152">Dağıtım sonrası betiği aşağıdaki T-SQL kodu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="7c589-152">Add the following T-SQL code to the post-deployment script.</span></span> <span data-ttu-id="7c589-153">Eşleşen bir kaydı bulunduğunda bu betik yalnızca veritabanına veri ekler.</span><span class="sxs-lookup"><span data-stu-id="7c589-153">This script simply adds data to the database when no matching record is found.</span></span> <span data-ttu-id="7c589-154">Üzerine değil veya veritabanına girilir tüm verileri silebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7c589-154">It does not overwrite or delete any data you may have entered into the database.</span></span>

[!code-sql[Main](setting-up-database/samples/sample4.sql)]

<span data-ttu-id="7c589-155">Veritabanı projenizde dağıttığınız her zaman dağıtım sonrası betiği çalıştırılır dikkat edin önemlidir.</span><span class="sxs-lookup"><span data-stu-id="7c589-155">It is important to note that the post-deployment script is run every time you deploy your database project.</span></span> <span data-ttu-id="7c589-156">Bu nedenle, gereksinimlerinizi bu betik yazarken dikkatli bir şekilde göz önünde bulundurmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="7c589-156">Therefore, you need to carefully consider your requirements when writing this script.</span></span> <span data-ttu-id="7c589-157">Bazı durumlarda, projeyi dağıtılan her zaman bilinen bir veri kümesinden başlamak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7c589-157">In some cases, you may wish to start over from a known set of data every time the project is deployed.</span></span> <span data-ttu-id="7c589-158">Diğer durumlarda, var olan verilere herhangi bir şekilde alter istemeyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7c589-158">In other cases, you may not want to alter the existing data in any way.</span></span> <span data-ttu-id="7c589-159">Gereksinimlerinize göre bir dağıtım sonrası komut dosyası veya betik eklemek gerekenler ihtiyacınız karar verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7c589-159">Based on your requirements, you can decide whether you need a post-deployment script or what you need to include in the script.</span></span> <span data-ttu-id="7c589-160">Uygulamanızın bir dağıtım sonrası betiği veritabanıyla doldurma hakkında daha fazla bilgi için bkz. [dahil olmak üzere verileri bir SQL Server veritabanı projesi](https://blogs.msdn.com/b/ssdt/archive/2012/02/02/including-data-in-an-sql-server-database-project.aspx).</span><span class="sxs-lookup"><span data-stu-id="7c589-160">For more information about populating your database with a post-deployment script, see [Including Data in a SQL Server Database Project](https://blogs.msdn.com/b/ssdt/archive/2012/02/02/including-data-in-an-sql-server-database-project.aspx).</span></span>

<span data-ttu-id="7c589-161">Artık 4 SQL komut dosyaları ancak gerçek tablo vardır.</span><span class="sxs-lookup"><span data-stu-id="7c589-161">You now have 4 SQL script files but no actual tables.</span></span> <span data-ttu-id="7c589-162">Yerel veritabanına, veritabanı projenizi dağıtmaya hazırsınız.</span><span class="sxs-lookup"><span data-stu-id="7c589-162">You are ready to deploy your database project to localdb.</span></span> <span data-ttu-id="7c589-163">Visual Studio'da oluşturmak ve veritabanı projenizi dağıtmak için Başlat düğmesine (veya F5) tıklayın.</span><span class="sxs-lookup"><span data-stu-id="7c589-163">In Visual Studio, click the Start button (or F5) to build and deploy your database project.</span></span> <span data-ttu-id="7c589-164">Denetleme **çıkış** derleme ve dağıtım başarılı olduğunu doğrulamak için sekmesinde.</span><span class="sxs-lookup"><span data-stu-id="7c589-164">Check the **Output** tab to verify that the build and deployment succeeded.</span></span>

<span data-ttu-id="7c589-165">Yeni veritabanı oluşturulduğunu görmek için **SQL Server Nesne Gezgini** ve doğru yerel veritabanı sunucusundaki projesinin adını bulun (Bu durumda **(localdb) \ProjectsV13**).</span><span class="sxs-lookup"><span data-stu-id="7c589-165">To see that the new database has been created, open **SQL Server Object Explorer** and look for the name of the project in the correct local database server (in this case **(localdb)\ProjectsV13**).</span></span>

<span data-ttu-id="7c589-166">Tabloları verilerle doldurulmuş olduğunu görmek için tabloyu sağ tıklatın ve seçin **görünüm verilerini**.</span><span class="sxs-lookup"><span data-stu-id="7c589-166">To see that the tables are populated with data, right-click a table, and select **View Data**.</span></span>

![tablo verilerini Göster](setting-up-database/_static/image9.png)

<span data-ttu-id="7c589-168">Tablo verilerini düzenlenebilir bir görünümü görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="7c589-168">An editable view of the table data is displayed.</span></span> <span data-ttu-id="7c589-169">Örneğin, **tabloları** > **dbo.course** > **görünüm verilerini**, üç sütun içeren bir tablo görürsünüz (**Kurs**, **Başlık**, ve **KREDİLERİ**) ve dört satır.</span><span class="sxs-lookup"><span data-stu-id="7c589-169">For example, if you select **Tables** > **dbo.course** > **View Data**, you see a table with three columns (**Course**, **Title**, and **Credits**) and four rows.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="7c589-170">Ek kaynaklar</span><span class="sxs-lookup"><span data-stu-id="7c589-170">Additional resources</span></span>

<span data-ttu-id="7c589-171">Code First geliştirmeye giriş örneği için bkz: [ASP.NET MVC 5 ile çalışmaya başlama](../introduction/getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="7c589-171">For an introductory example of Code First development, see [Getting Started with ASP.NET MVC 5](../introduction/getting-started.md).</span></span> <span data-ttu-id="7c589-172">Daha gelişmiş bir örnek için bkz: [ASP.NET MVC 4 uygulaması için bir Entity Framework veri modeli oluşturma](../getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="7c589-172">For a more advanced example, see [Creating an Entity Framework Data Model for an ASP.NET MVC 4 App](../getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span>

<span data-ttu-id="7c589-173">Kullanmak için hangi Entity Framework yaklaşım seçme konusunda yönergeler için bkz [Entity Framework Geliştirme yaklaşımları](https://msdn.microsoft.com/library/ms178359.aspx#dbfmfcf).</span><span class="sxs-lookup"><span data-stu-id="7c589-173">For guidance on selecting which Entity Framework approach to use, see [Entity Framework Development Approaches](https://msdn.microsoft.com/library/ms178359.aspx#dbfmfcf).</span></span>

## <a name="next-steps"></a><span data-ttu-id="7c589-174">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="7c589-174">Next steps</span></span>

<span data-ttu-id="7c589-175">Bu öğreticide şunları yaptınız:</span><span class="sxs-lookup"><span data-stu-id="7c589-175">In this tutorial, you:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="7c589-176">Veritabanı ayarlama</span><span class="sxs-lookup"><span data-stu-id="7c589-176">Set up the database</span></span>

<span data-ttu-id="7c589-177">Web uygulama ve veri modelleri oluşturma hakkında bilgi edinmek için sonraki öğreticiye ilerleyin.</span><span class="sxs-lookup"><span data-stu-id="7c589-177">Advance to the next tutorial to learn how to create the web application and data models.</span></span>
> [!div class="nextstepaction"]
> [<span data-ttu-id="7c589-178">Web uygulama ve veri modelleri oluşturma</span><span class="sxs-lookup"><span data-stu-id="7c589-178">Create the web application and data models</span></span>](creating-the-web-application.md)