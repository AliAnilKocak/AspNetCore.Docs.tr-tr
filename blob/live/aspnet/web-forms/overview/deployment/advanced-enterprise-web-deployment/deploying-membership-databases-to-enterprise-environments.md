---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
title: "Kurumsal ortamlar için üyelik veritabanları dağıtma | Microsoft Docs"
author: jrjlee
description: "Bu konuda önemli noktalar ve ASP.NET uygulama Hizmetleri veritabanlarını (daha fazla ortak... sağladığınızda üstesinden gerekir zorluklar açıklanmaktadır"
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 3cf765df-d311-4f68-a295-c9685ceea830
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
msc.type: authoredcontent
ms.openlocfilehash: f4d898b6e09b5b9df44b62f9cb4b9d367f288efb
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/10/2017
---
<a name="deploying-membership-databases-to-enterprise-environments"></a><span data-ttu-id="33f6b-103">Kurumsal ortamlar için üyelik veritabanları dağıtma</span><span class="sxs-lookup"><span data-stu-id="33f6b-103">Deploying Membership Databases to Enterprise Environments</span></span>
====================
<span data-ttu-id="33f6b-104">tarafından [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="33f6b-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="33f6b-105">PDF indirin</span><span class="sxs-lookup"><span data-stu-id="33f6b-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="33f6b-106">Bu konu önemli noktalar ve ASP.NET uygulaması sağlama (genellikle daha üyelik veritabanları olarak adlandırılır) veritabanları test, hazırlık veya üretim ortamlarında Hizmetleri zaman üstesinden gerekir zorluklar açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="33f6b-106">This topic explains the key considerations and challenges you'll need to overcome when you provision ASP.NET application services databases (more commonly referred to as membership databases) in test, staging, or production environments.</span></span> <span data-ttu-id="33f6b-107">Ayrıca, bu zorluklar karşılamak için kullanabileceğiniz yaklaşım anlatır.</span><span class="sxs-lookup"><span data-stu-id="33f6b-107">It also describes approaches you can use to meet these challenges.</span></span>


<span data-ttu-id="33f6b-108">Bu konuda eğitim serileri Fabrikam Ltd. adlı kurgusal bir şirket kurumsal dağıtım gereksinimleri dayalı parçası formlar Bu öğretici serisi örnek çözümü & #x 2014; kullanır [Contact Manager çözüm](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)& Windows bir ASP.NET MVC 3 uygulama da dahil olmak üzere karmaşıklıkta gerçekçi düzeyine sahip bir web uygulamasını temsil eden #x 2014; Communication Foundation (WCF) hizmetini ve veritabanı projesi.</span><span class="sxs-lookup"><span data-stu-id="33f6b-108">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="33f6b-109">Bu öğreticileri merkezinde dağıtım yöntemi, açıklanan bölünmüş proje dosyası yaklaşım dayalı [proje dosyası anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md), hangi derleme süreci tarafından denetlenen içinde iki dosyaları & #x 2014; proje bir içeren Her hedef ortam ve ortama özgü derleme ve dağıtım ayarları içeren bir için geçerli olan yönergeleri oluşturun.</span><span class="sxs-lookup"><span data-stu-id="33f6b-109">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="33f6b-110">Derleme zamanında ortama özgü proje dosyası oluşturma yönergeleri eksiksiz bir kümesini oluşturmak için ortam belirsiz proje dosyasına birleştirilir.</span><span class="sxs-lookup"><span data-stu-id="33f6b-110">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="what-are-the-issues-when-you-deploy-a-membership-database"></a><span data-ttu-id="33f6b-111">Bir üyelik veritabanı dağıttığınızda sorunlar nelerdir?</span><span class="sxs-lookup"><span data-stu-id="33f6b-111">What Are the Issues When You Deploy a Membership Database?</span></span>

<span data-ttu-id="33f6b-112">Bir veritabanı için bir Dağıtım stratejisi insanlara çoğu durumda, göz önünde bulundurmanız gereken ilk şey, dağıtmak istediğiniz hangi verilerin durumdur.</span><span class="sxs-lookup"><span data-stu-id="33f6b-112">In most cases, when you devise a deployment strategy for a database, the first thing you need to consider is what data you want to deploy.</span></span> <span data-ttu-id="33f6b-113">Bir geliştirme veya test ortamında, hızlı ve kolay bir şekilde test kolaylaştırmak için kullanıcı hesabı verileri dağıtmak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="33f6b-113">In a development or test environment, you might want to deploy user account data to facilitate quick and easy testing.</span></span> <span data-ttu-id="33f6b-114">Bir hazırlık veya üretim ortamında, kullanıcı hesabı verileri dağıtmak istediğiniz çok düşüktür.</span><span class="sxs-lookup"><span data-stu-id="33f6b-114">In a staging or production environment, it's very unlikely that you'd want to deploy user account data.</span></span>

<span data-ttu-id="33f6b-115">Ne yazık ki, bu çok daha karmaşık bir kararı belirli bazı zorluklar ASP.NET üyelik veritabanları tanıtmaktadır:</span><span class="sxs-lookup"><span data-stu-id="33f6b-115">Unfortunately, ASP.NET membership databases introduce some specific challenges that make this decision a lot more complex:</span></span>

- <span data-ttu-id="33f6b-116">Yalnızca şema dağıtım üyelik veritabanının çalışmaz durumda bırakır.</span><span class="sxs-lookup"><span data-stu-id="33f6b-116">A schema-only deployment will leave the membership database in a non-operational state.</span></span> <span data-ttu-id="33f6b-117">Üyelik veritabanının bazı yapılandırma verilerini içeren olmasıdır (içinde **aspnet\_SchemaVersions** tablo) çalışabilmesi için veritabanını gerektiren.</span><span class="sxs-lookup"><span data-stu-id="33f6b-117">This is because the membership database includes some configuration data (in the **aspnet\_SchemaVersions** table) that the database requires in order to function.</span></span> <span data-ttu-id="33f6b-118">Bu nedenle, kullanıcı hesabı verileri dışlamak için üyelik veritabanının yalnızca şema dağıtımı gerçekleştirirseniz, gerekli yapılandırma verileri eklemek için bir dağıtım sonrası komut dosyası çalıştırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="33f6b-118">As such, if you perform a schema-only deployment of your membership database in order to exclude user account data, you'll need to run a post-deployment script to add the essential configuration data.</span></span>
- <span data-ttu-id="33f6b-119">Nasıl yapılandırıldığına bağlı olarak, üyelik veritabanının üyelik sağlayıcısı, parolaları şifrelemek ve bunları veritabanında depolamak için makine anahtarı kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="33f6b-119">Depending on how your membership database is configured, the membership provider may use the machine key to encrypt passwords and store them in the database.</span></span> <span data-ttu-id="33f6b-120">Bu durumda, veritabanı ile dağıttığınız herhangi bir kullanıcı hesabı veri hedef sunucuda kullanılamaz olur.</span><span class="sxs-lookup"><span data-stu-id="33f6b-120">In this case, any user account data you deploy with the database will become unusable on the destination server.</span></span> <span data-ttu-id="33f6b-121">Bu nedenle, kullanıcı hesabı verileri dağıtma desteklenen bir senaryo değil.</span><span class="sxs-lookup"><span data-stu-id="33f6b-121">For this reason, deploying user account data is not a supported scenario.</span></span>

## <a name="choosing-a-membership-database-strategy"></a><span data-ttu-id="33f6b-122">Bir üyelik veritabanı stratejisini seçme</span><span class="sxs-lookup"><span data-stu-id="33f6b-122">Choosing a Membership Database Strategy</span></span>

<span data-ttu-id="33f6b-123">Kuruluş sunucu ortamında üyelik veritabanında sağlama seçtiğinizde aşağıdaki yönergeleri kullanın:</span><span class="sxs-lookup"><span data-stu-id="33f6b-123">Use these guidelines when you choose how to provision a membership database in an enterprise server environment:</span></span>

- <span data-ttu-id="33f6b-124">Mümkün olduğunda, üyelik veritabanları dağıtmayın.</span><span class="sxs-lookup"><span data-stu-id="33f6b-124">Wherever possible, do not deploy membership databases.</span></span> <span data-ttu-id="33f6b-125">Bunun yerine, üyelik veritabanının hedef veritabanı sunucusunda el ile oluşturun.</span><span class="sxs-lookup"><span data-stu-id="33f6b-125">Instead, create the membership database manually on the target database server.</span></span> <span data-ttu-id="33f6b-126">Üyelik veritabanı şeması özelleştirilmiş yapmadıysanız, yalnızca yeni bir giriş situ hedef kullanarak oluşturabileceğiniz [ASP.NET SQL Server Kayıt Aracı (aspnet\_regsql.exe)](https://msdn.microsoft.com/en-us/library/ms229862(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="33f6b-126">If you haven't customized your membership database schema, you can simply create a new one in situ at the destination using the [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/en-us/library/ms229862(v=vs.100).aspx).</span></span>
- <span data-ttu-id="33f6b-127">Bir üyelik veritabanı & #x 2014; dağıtmak üzere ancak hiçbir seçeneği varsa veritabanı şeması & #x 2014; kapsamlı değişiklikler yaptıysanız, örneğin, yalnızca şema dağıtım kullanıcı hesabı verileri, dışlamak için üyelik veritabanının uygulamalısınız ve ardından tüm gerekli yapılandırma verileri eklemek için bir dağıtım sonrası komut dosyasını çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="33f6b-127">If you have no option but to deploy a membership database&#x2014;for example, if you've made extensive modifications to the database schema&#x2014;you should perform a schema-only deployment of the membership database, to exclude user account data, and then run a post-deployment script to add any required configuration data.</span></span> <span data-ttu-id="33f6b-128">Bu yaklaşım geniş kapsamlı yönergeler bulabilirsiniz [nasıl yapılır: ASP.NET üyelik veritabanı olmadan da dahil olmak üzere kullanıcı hesapları dağıtmayı](https://msdn.microsoft.com/en-us/library/ff361972(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="33f6b-128">You can find broad guidance on these approaches in [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/en-us/library/ff361972(v=vs.100).aspx).</span></span>

<span data-ttu-id="33f6b-129">Unutulmaması önemlidir *üyelik veritabanı şeması oldukça statik olması olasıdır*.</span><span class="sxs-lookup"><span data-stu-id="33f6b-129">It's important to remember that *the schema of your membership database is likely to be fairly static*.</span></span> <span data-ttu-id="33f6b-130">Üyelik veritabanının özelleştirdiğiniz olsa bile, düzenli aralıklarla & #x 2014 şema güncelleştirmesi gerekir; aynı sıklıkta kodu bir web uygulaması veya bir veritabanı projesi olarak değiştirmek için geçiyor değil düşüktür.</span><span class="sxs-lookup"><span data-stu-id="33f6b-130">Even if you've customized the membership database, it's unlikely that you'll need to update the schema on a regular basis&#x2014;it's not going to change with the same frequency as the code in a web application or a database project.</span></span> <span data-ttu-id="33f6b-131">Bu nedenle, üyelik veritabanının tüm otomatik olarak veya tek adımlı dağıtım işlemleri dahil gerek yoktur.</span><span class="sxs-lookup"><span data-stu-id="33f6b-131">As such, you shouldn't need to include the membership database in any automated or single-step deployment processes.</span></span>

## <a name="using-vsdbcmd-to-update-a-membership-database-schema"></a><span data-ttu-id="33f6b-132">Bir üyelik veritabanı şeması güncelleştirmek için VSDBCMD kullanma</span><span class="sxs-lookup"><span data-stu-id="33f6b-132">Using VSDBCMD to Update a Membership Database Schema</span></span>

<span data-ttu-id="33f6b-133">İlk dağıtımdan sonra üyelik veritabanının yapısını değiştirirseniz, veritabanını yeniden dağıtmak için Internet Information Services (IIS) Web Dağıtım Aracı (Web dağıtımı) kullanmak istemeyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="33f6b-133">If you modify the structure of your membership database after your first deployment, you may not want to use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to redeploy the database.</span></span> <span data-ttu-id="33f6b-134">Web dağıtımı veritabanı dağıtım işlevleri #x 2014 & Hedef veritabanı fark güncelleştirmelerini yapma özelliği dahil değildir; bunun yerine, Web dağıtımı bırakın ve veritabanını yeniden oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="33f6b-134">The database deployment functionality in Web Deploy doesn't include the capability to make differential updates to a destination database&#x2014;instead, Web Deploy must drop and re-create the database.</span></span> <span data-ttu-id="33f6b-135">Başka bir deyişle, hazırlık veya üretim ortamlarında genellikle istenmeyen tüm var olan kullanıcı hesabı verileri kaybedersiniz.</span><span class="sxs-lookup"><span data-stu-id="33f6b-135">This means that you lose any existing user account data, which is typically undesirable in staging or production environments.</span></span>

<span data-ttu-id="33f6b-136">Bir alternatif, hedef veritabanı şemasını güncelleştirmek için VSDBCMD yardımcı programını kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="33f6b-136">The alternative is to use the VSDBCMD utility to update the schema of your destination database.</span></span> <span data-ttu-id="33f6b-137">VSDBCMD iki önemli özellikleri içerir.</span><span class="sxs-lookup"><span data-stu-id="33f6b-137">VSDBCMD includes two important capabilities.</span></span> <span data-ttu-id="33f6b-138">İlk olarak, var olan bir veritabanı şeması .dbschema dosyasına aktarabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="33f6b-138">First, it can import the schema of an existing database into a .dbschema file.</span></span> <span data-ttu-id="33f6b-139">İkinci olarak, bu, yalnızca hedef veritabanının güncel duruma getirmek için gerekli değişiklikleri yapar ve herhangi bir veri kaybetmeyin fark bir güncelleştirme olarak mevcut bir veritabanına .dbschema dosya dağıtabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="33f6b-139">Second, it can deploy a .dbschema file to an existing database as a differential update, which means that it only makes the changes required to bring the target database up to date and you don't lose any data.</span></span>

<span data-ttu-id="33f6b-140">Bir üyelik veritabanı şeması güncelleştirmek için üst düzey adımları kullanabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="33f6b-140">You can use these high-level steps to update a membership database schema:</span></span>

1. <span data-ttu-id="33f6b-141">VSDBCMD kullanmak **alma** kaynak üyelik veritabanınız için bir .dbschema dosyası oluşturmak için eylem.</span><span class="sxs-lookup"><span data-stu-id="33f6b-141">Use the VSDBCMD **Import** action to generate a .dbschema file for your source membership database.</span></span> <span data-ttu-id="33f6b-142">Bu yordamda açıklanan [nasıl yapılır: bir komut isteminden bir şema alma](https://msdn.microsoft.com/en-us/library/dd172135.aspx).</span><span class="sxs-lookup"><span data-stu-id="33f6b-142">This procedure is described in [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/en-us/library/dd172135.aspx).</span></span>
2. <span data-ttu-id="33f6b-143">VSDBCMD kullanmak **dağıtma** .dbschema dosyasını, hedef üyelik veritabanına dağıtmak için eylem.</span><span class="sxs-lookup"><span data-stu-id="33f6b-143">Use the VSDBCMD **Deploy** action to deploy the .dbschema file to your destination membership database.</span></span> <span data-ttu-id="33f6b-144">Bu yordamda açıklanan [VSDBCMD için komut satırı başvurusu. EXE (dağıtım ve şema Al)](https://msdn.microsoft.com/en-us/library/dd193283.aspx).</span><span class="sxs-lookup"><span data-stu-id="33f6b-144">This procedure is described in [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/en-us/library/dd193283.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="33f6b-145">Sonuç</span><span class="sxs-lookup"><span data-stu-id="33f6b-145">Conclusion</span></span>

<span data-ttu-id="33f6b-146">Bu konuda çeşitli hedef ortamlarda ASP.NET üyelik veritabanları sağlamanız gerektiğinde karşılaşabilecekleri zorluklarından bazıları açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="33f6b-146">This topic described some of the challenges you may face when you need to provision ASP.NET membership databases in various target environments.</span></span> <span data-ttu-id="33f6b-147">Özellikle, neden yalnızca şema dağıtımları üyelik veritabanının çalışmaz durumda bırakır ve neden kullanıcı hesabı verileri dağıtma desteklenmiyor açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="33f6b-147">In particular, it explained why schema-only deployments will leave the membership database in a non-operational state and why deploying user account data is not supported.</span></span> <span data-ttu-id="33f6b-148">Konusunda yönergeler sağlamak, dağıtmak ve farklı senaryolar üyelik veritabanlarında güncelleştirme konusunda de sunulmaktadır.</span><span class="sxs-lookup"><span data-stu-id="33f6b-148">The topic also presented guidance on how to provision, deploy, and update membership databases in different scenarios.</span></span>

## <a name="further-reading"></a><span data-ttu-id="33f6b-149">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="33f6b-149">Further Reading</span></span>

<span data-ttu-id="33f6b-150">Daha fazla yönergeler ve VSDBCMD kullanımıyla ilgili örnekler için bkz: [VSDBCMD için komut satırı başvurusu. EXE (dağıtım ve şema Al)](https://msdn.microsoft.com/en-us/library/dd193283.aspx) ve [nasıl yapılır: bir komut isteminden bir şema alma](https://msdn.microsoft.com/en-us/library/dd172135.aspx).</span><span class="sxs-lookup"><span data-stu-id="33f6b-150">For more guidance and examples of how to use VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/en-us/library/dd193283.aspx) and [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/en-us/library/dd172135.aspx).</span></span> <span data-ttu-id="33f6b-151">Aspnet kullanma hakkında daha fazla bilgi için\_regsql.exe üyelik veritabanları oluşturmak için bkz: [ASP.NET SQL Server Kayıt Aracı (aspnet\_regsql.exe)](https://msdn.microsoft.com/en-us/library/ms229862(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="33f6b-151">For more information on using aspnet\_regsql.exe to create membership databases, see [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/en-us/library/ms229862(v=vs.100).aspx).</span></span> <span data-ttu-id="33f6b-152">Üyelik veritabanları dağıtma konusunda daha fazla genel yönergeler için bkz: [nasıl yapılır: ASP.NET üyelik veritabanı olmadan da dahil olmak üzere kullanıcı hesapları dağıtmayı](https://msdn.microsoft.com/en-us/library/ff361972(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="33f6b-152">For more general guidance on deploying membership databases, see [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/en-us/library/ff361972(v=vs.100).aspx).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="33f6b-153">[Önceki](deploying-database-role-memberships-to-test-environments.md)
[sonraki](excluding-files-and-folders-from-deployment.md)</span><span class="sxs-lookup"><span data-stu-id="33f6b-153">[Previous](deploying-database-role-memberships-to-test-environments.md)
[Next](excluding-files-and-folders-from-deployment.md)</span></span>
