# <a name="response-compression-sample-application-aspnet-core-3x"></a><span data-ttu-id="1debd-101">Yanıt sıkıştırma örnek uygulaması (ASP.NET Core 3. x)</span><span class="sxs-lookup"><span data-stu-id="1debd-101">Response compression sample application (ASP.NET Core 3.x)</span></span>

<span data-ttu-id="1debd-102">Bu örnek, HTTP yanıtlarını sıkıştırmak için ASP.NET Core 3. x yanıt sıkıştırma ara yazılımı kullanımını gösterir.</span><span class="sxs-lookup"><span data-stu-id="1debd-102">This sample illustrates the use of ASP.NET Core 3.x Response Compression Middleware to compress HTTP responses.</span></span> <span data-ttu-id="1debd-103">Örnek, metin ve görüntü yanıtları için gzip, Brotli ve özel sıkıştırma sağlayıcılarını gösterir ve sıkıştırma için bir MIME türünün nasıl ekleneceğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="1debd-103">The sample demonstrates Gzip, Brotli, and custom compression providers for text and image responses and shows how to add a MIME type for compression.</span></span> <span data-ttu-id="1debd-104">ASP.NET Core 2. x örneği için bkz. [Yanıt sıkıştırması örnek uygulaması (ASP.NET Core 2. x)](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/performance/response-compression/samples/2.x).</span><span class="sxs-lookup"><span data-stu-id="1debd-104">For the ASP.NET Core 2.x sample, see [Response compression sample application (ASP.NET Core 2.x)](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/performance/response-compression/samples/2.x).</span></span>

## <a name="examples-in-this-sample"></a><span data-ttu-id="1debd-105">Bu örnekteki örnekler</span><span class="sxs-lookup"><span data-stu-id="1debd-105">Examples in this sample</span></span>

* `BrotliCompressionProvider`
  * `text/plain`
    * <span data-ttu-id="1debd-106">**/** -Lorem Ipsum metin dosyası yanıtı, ~ 979 bayt olarak sıkıştıran 2.044 bayttır.</span><span class="sxs-lookup"><span data-stu-id="1debd-106">**/** - Lorem Ipsum text file response at 2,044 bytes that compresses to ~979 bytes.</span></span>
    * <span data-ttu-id="1debd-107">**/testfile1kb.txt** -1.033 baytındaki metin dosyası yanıtı ~ 36 bayt olarak sıkıştırır.</span><span class="sxs-lookup"><span data-stu-id="1debd-107">**/testfile1kb.txt** - Text file response at 1,033 bytes that compresses to ~36 bytes.</span></span>
    * <span data-ttu-id="1debd-108">**/Trickle** -yanıt, 1 saniyelik aralıklarla tek karakter olarak verildi.</span><span class="sxs-lookup"><span data-stu-id="1debd-108">**/trickle** - Response issued as single characters at 1 second intervals.</span></span>
* `GzipCompressionProvider`
  * `text/plain`
    * <span data-ttu-id="1debd-109">**/** -Lorem Ipsum metin dosyası yanıtı, ~ 927 bayt olarak sıkıştıran 2.044 bayttır.</span><span class="sxs-lookup"><span data-stu-id="1debd-109">**/** - Lorem Ipsum text file response at 2,044 bytes that compresses to ~927 bytes.</span></span>
    * <span data-ttu-id="1debd-110">**/testfile1kb.txt** -1.033 baytındaki metin dosyası yanıtı ~ 47 bayt olarak sıkıştırır.</span><span class="sxs-lookup"><span data-stu-id="1debd-110">**/testfile1kb.txt** - Text file response at 1,033 bytes that compresses to ~47 bytes.</span></span>
    * <span data-ttu-id="1debd-111">**/Trickle** -yanıt, 1 saniyelik aralıklarla tek karakter olarak verildi.</span><span class="sxs-lookup"><span data-stu-id="1debd-111">**/trickle** - Response issued as single characters at 1 second intervals.</span></span>
  * `image/svg+xml`
    * <span data-ttu-id="1debd-112">**/Banner.SVG** -yaklaşık 4.459 bayt olarak sıkıştıran 9.707 baytındaki ölçeklenebilir vektör GRAFIK (SVG) görüntü yanıtı.</span><span class="sxs-lookup"><span data-stu-id="1debd-112">**/banner.svg** - A Scalable Vector Graphics (SVG) image response at 9,707 bytes that compresses to ~4,459 bytes.</span></span>
* `CustomCompressionProvider`<br><span data-ttu-id="1debd-113">Bir özel sıkıştırma sağlayıcısının, ara yazılım ile kullanılmak üzere nasıl uygulanacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="1debd-113">Shows how to implement a custom compression provider for use with the middleware.</span></span>

<span data-ttu-id="1debd-114">İstek `Accept-Encoding` üstbilgisini içerdiğinde ve yanıt sıkıştırması başarılı olduğunda, ara yazılım yanıta otomatik olarak bir `Vary: Accept-Encoding` üst bilgisi ekler.</span><span class="sxs-lookup"><span data-stu-id="1debd-114">When the request includes the `Accept-Encoding` header and response compression is successful, the middleware automatically adds a `Vary: Accept-Encoding` header to the response.</span></span> <span data-ttu-id="1debd-115">`Vary` üst bilgisi, `Accept-Encoding`alternatif değerlerine göre yanıtın birden çok kopyasını tutmak üzere önbellekler verir, böylece hem sıkıştırılmış (gzip veya Brotli) hem de sıkıştırılmamış sürüm, sıkıştırılmış veya sıkıştırılmamış yanıtı kabul edebilecek sistemler için önbelleklerle depolanır.</span><span class="sxs-lookup"><span data-stu-id="1debd-115">The `Vary` header instructs caches to maintain multiple copies of the response based on alternative values of `Accept-Encoding`, so both a compressed (Gzip or Brotli) and uncompressed version are stored in caches for systems that can either accept the compressed or the uncompressed response.</span></span>

## <a name="use-the-sample"></a><span data-ttu-id="1debd-116">Örneği kullanın</span><span class="sxs-lookup"><span data-stu-id="1debd-116">Use the sample</span></span>

1. <span data-ttu-id="1debd-117">`Accept-Encoding` üst bilgisi olmadan [Fiddler](https://www.telerik.com/fiddler), [Firebug](https://getfirebug.com/)veya [Postman](https://www.getpostman.com/) kullanarak uygulamaya bir istek yapın ve yanıt yükünü, yanıt boyutunu ve yanıt üst bilgilerini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="1debd-117">Make a request using [Fiddler](https://www.telerik.com/fiddler), [Firebug](https://getfirebug.com/), or [Postman](https://www.getpostman.com/) to the application without an `Accept-Encoding` header and note the response payload, response size, and response headers.</span></span>
1. <span data-ttu-id="1debd-118">`Accept-Encoding: br` veya `Accept-Encoding: gzip` üst bilgisi ekleyin ve sıkıştırılan yanıt boyutunu ve yanıt üst bilgilerini aklınızda yapın.</span><span class="sxs-lookup"><span data-stu-id="1debd-118">Add an `Accept-Encoding: br` or `Accept-Encoding: gzip` header and note the compressed response size and response headers.</span></span> <span data-ttu-id="1debd-119">Yanıt boyutu düşer ve `Content-Encoding` yanıt üst bilgisi, gzip veya Brotli oluştuğunu belirten bir ara yazılım tarafından eklenir.</span><span class="sxs-lookup"><span data-stu-id="1debd-119">The response size drops, and the `Content-Encoding` response header is included by the middleware indicating that compression with either Gzip or Brotli occurred.</span></span> <span data-ttu-id="1debd-120">Lorem Ipsum veya **testfile1kb. txt** yanıtının yanıt gövdesine baktığınızda, metnin sıkıştırıldığını ve okunmadığını görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="1debd-120">When you look at the response body for the Lorem Ipsum or **testfile1kb.txt** response, you see that the text is compressed and unreadable.</span></span>
1. <span data-ttu-id="1debd-121">`Accept-Encoding: mycustomcompression` üst bilgisi ekleyin ve yanıt üst bilgilerini aklınızda yapın.</span><span class="sxs-lookup"><span data-stu-id="1debd-121">Add an `Accept-Encoding: mycustomcompression` header and note the response headers.</span></span> <span data-ttu-id="1debd-122">`CustomCompressionProvider`, yanıtı gerçekten sıkıştıramadığında boş bir uygulama, ancak `CreateStream()` yöntemi için özel bir sıkıştırma akış sarmalayıcısı oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1debd-122">The `CustomCompressionProvider` is an empty implementation that doesn't actually compress the response, but you can create a custom compression stream wrapper for the `CreateStream()` method.</span></span>
