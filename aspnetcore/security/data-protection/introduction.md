---
title: "Veri koruma giriş"
author: rick-anderson
description: "Bu belge, veri koruma kavramını sunmaktadır ve ilişkili ASP.NET Core API tasarım ilkeleri özetlenmektedir."
keywords: ASP.NET Core, veri koruma
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: article
ms.assetid: 4542cd37-b47c-454c-be19-d1b5810d67fe
ms.technology: aspnet
ms.prod: asp.net-core
uid: security/data-protection/introduction
ms.openlocfilehash: dd34f2e69ea0f6427ee5f446d6440dfab17a42c4
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/10/2017
---
# <a name="introduction-to-data-protection"></a><span data-ttu-id="f9b78-104">Veri koruma giriş</span><span class="sxs-lookup"><span data-stu-id="f9b78-104">Introduction to Data Protection</span></span>

<span data-ttu-id="f9b78-105">Web uygulamaları, genellikle güvenlik açısından duyarlı verileri depolamak gerekir.</span><span class="sxs-lookup"><span data-stu-id="f9b78-105">Web applications often need to store security-sensitive data.</span></span> <span data-ttu-id="f9b78-106">Windows Masaüstü uygulamaları için DPAPI sağlar ancak bu web uygulamaları için uygun değil.</span><span class="sxs-lookup"><span data-stu-id="f9b78-106">Windows provides DPAPI for desktop applications but this is unsuitable for web applications.</span></span> <span data-ttu-id="f9b78-107">ASP.NET Core veri koruma yığını Geliştirici anahtar yönetimi ve döndürme dahil olmak üzere verileri korumak için kullanabileceğiniz basit, kullanımı kolay bir şifreleme API sağlar.</span><span class="sxs-lookup"><span data-stu-id="f9b78-107">The ASP.NET Core data protection stack provide a simple, easy to use cryptographic API a developer can use to protect data, including key management and rotation.</span></span>

<span data-ttu-id="f9b78-108">ASP.NET Core veri koruma yığını uzun vadeli yerini olarak hizmet için tasarlanmış <machineKey> ASP.NET öğesinde 1.x - 4.x.</span><span class="sxs-lookup"><span data-stu-id="f9b78-108">The ASP.NET Core data protection stack is designed to serve as the long-term replacement for the <machineKey> element in ASP.NET 1.x - 4.x.</span></span> <span data-ttu-id="f9b78-109">Eski şifreleme yığın eksikliklerini çoğunu Çoğu modern uygulamalar karşılaşabileceğiniz olası kullanım durumu için Giden kutusu çözümünü sağlarken gidermek için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="f9b78-109">It was designed to address many of the shortcomings of the old cryptographic stack while providing an out-of-the-box solution for the majority of use cases modern applications are likely to encounter.</span></span>

## <a name="problem-statement"></a><span data-ttu-id="f9b78-110">Sorun bildirimi</span><span class="sxs-lookup"><span data-stu-id="f9b78-110">Problem statement</span></span>

<span data-ttu-id="f9b78-111">Genel Sorun bildirimi tek bir tümcedeki temellerini belirtilebilir: güvenilir bilgi sonraki alma için kalıcı olması gerekir, ancak Kalıcılık mekanizma güvenmeyin.</span><span class="sxs-lookup"><span data-stu-id="f9b78-111">The overall problem statement can be succinctly stated in a single sentence: I need to persist trusted information for later retrieval, but I do not trust the persistence mechanism.</span></span> <span data-ttu-id="f9b78-112">"Güvenilmeyen bir istemci yoluyla güvenilen gidiş dönüş durumu istiyorum."olarak web bağlamında bu yazılı olabilir</span><span class="sxs-lookup"><span data-stu-id="f9b78-112">In web terms, this might be written as "I need to round-trip trusted state via an untrusted client."</span></span>

<span data-ttu-id="f9b78-113">Kurallı bu bir kimlik doğrulama tanımlama bilgisi veya taşıyıcı örneğidir belirteci.</span><span class="sxs-lookup"><span data-stu-id="f9b78-113">The canonical example of this is an authentication cookie or bearer token.</span></span> <span data-ttu-id="f9b78-114">Sunucu oluşturur bir "I Groot çıkarım ve xyz izinleriniz" token ve istemciye aktarır.</span><span class="sxs-lookup"><span data-stu-id="f9b78-114">The server generates an "I am Groot and have xyz permissions" token and hands it to the client.</span></span> <span data-ttu-id="f9b78-115">Bazı ileriki bir tarihte istemci sunucuya geri belirtecini sunacaktır, ancak sunucu istemci belirteç sahte kurmadı güvence çeşit gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="f9b78-115">At some future date the client will present that token back to the server, but the server needs some kind of assurance that the client hasn't forged the token.</span></span> <span data-ttu-id="f9b78-116">Bu nedenle ilk gereksinim: Orijinallik Sertifikası (paketini</span><span class="sxs-lookup"><span data-stu-id="f9b78-116">Thus the first requirement: authenticity (a.k.a.</span></span> <span data-ttu-id="f9b78-117">bütünlük, yetkisiz değiştirmeye karşı sağlama).</span><span class="sxs-lookup"><span data-stu-id="f9b78-117">integrity, tamper-proofing).</span></span>

<span data-ttu-id="f9b78-118">Kalıcı durum sunucusu tarafından güvenilir olduğundan, bu durum işletim ortamına özgü bilgiler içerebilir beklenir.</span><span class="sxs-lookup"><span data-stu-id="f9b78-118">Since the persisted state is trusted by the server, we anticipate that this state might contain information that is specific to the operating environment.</span></span> <span data-ttu-id="f9b78-119">Bu, bir dosya yolu, bir izin, tanıtıcı veya diğer dolaylı başvuru veya bazı bir sunucuya özgü veri parçası olabilir.</span><span class="sxs-lookup"><span data-stu-id="f9b78-119">This could be in the form of a file path, a permission, a handle or other indirect reference, or some other piece of server-specific data.</span></span> <span data-ttu-id="f9b78-120">Bu tür bilgiler genellikle güvenilmeyen bir istemci açıklanmaması gereken.</span><span class="sxs-lookup"><span data-stu-id="f9b78-120">Such information should generally not be disclosed to an untrusted client.</span></span> <span data-ttu-id="f9b78-121">Böylece ikinci gereksinimi: gizliliği.</span><span class="sxs-lookup"><span data-stu-id="f9b78-121">Thus the second requirement: confidentiality.</span></span>

<span data-ttu-id="f9b78-122">Modern uygulamalar bileşenlerden oluşan olduğundan, son olarak, ne gördük bileşenleri tek tek sistemdeki diğer bileşenler dikkate almaksızın bu sistem yararlanmak istersiniz kalır.</span><span class="sxs-lookup"><span data-stu-id="f9b78-122">Finally, since modern applications are componentized, what we've seen is that individual components will want to take advantage of this system without regard to other components in the system.</span></span> <span data-ttu-id="f9b78-123">Örneği için bir taşıyıcı belirteci bileşen bu yığını kullanıyorsanız, aynı yığınına de kullanıyor olabilecek bir anti-CSRF mekanizması girişime olmadan çalışacağını.</span><span class="sxs-lookup"><span data-stu-id="f9b78-123">For instance, if a bearer token component is using this stack, it should operate without interference from an anti-CSRF mechanism that might also be using the same stack.</span></span> <span data-ttu-id="f9b78-124">Böylece son gereksinimi: yalıtım.</span><span class="sxs-lookup"><span data-stu-id="f9b78-124">Thus the final requirement: isolation.</span></span>

<span data-ttu-id="f9b78-125">Daha fazla kısıtlamaları bizim gereksinimleri kapsamını daraltmak için sunuyoruz.</span><span class="sxs-lookup"><span data-stu-id="f9b78-125">We can provide further constraints in order to narrow the scope of our requirements.</span></span> <span data-ttu-id="f9b78-126">Cryptosystem içinde çalışan tüm hizmetlerin eşit oranda güvenilir ve veri oluşturulan veya doğrudan sunduğumuz denetim hizmetler dışında tüketilen gerekmediğine varsayıyoruz.</span><span class="sxs-lookup"><span data-stu-id="f9b78-126">We assume that all services operating within the cryptosystem are equally trusted and that the data does not need to be generated or consumed outside of the services under our direct control.</span></span> <span data-ttu-id="f9b78-127">Ayrıca, her web hizmeti isteğine bir veya birden çok kez cryptosystem geçebilir beri işlemleri olabildiğince hızlı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="f9b78-127">Furthermore, we require that operations are as fast as possible since each request to the web service might go through the cryptosystem one or more times.</span></span> <span data-ttu-id="f9b78-128">Bu simetrik şifreleme senaryomuz için ideal hale getirir ve biz asimetrik şifreleme gibi kadar gerekli birer indirim.</span><span class="sxs-lookup"><span data-stu-id="f9b78-128">This makes symmetric cryptography ideal for our scenario, and we can discount asymmetric cryptography until such a time that it is needed.</span></span>

## <a name="design-philosophy"></a><span data-ttu-id="f9b78-129">Tasarımı felsefesi</span><span class="sxs-lookup"><span data-stu-id="f9b78-129">Design philosophy</span></span>

<span data-ttu-id="f9b78-130">Varolan yığını sorun belirleyerek başlatıldı.</span><span class="sxs-lookup"><span data-stu-id="f9b78-130">We started by identifying problems with the existing stack.</span></span> <span data-ttu-id="f9b78-131">Biz, vardı sonra biz varolan çözümleri yatay inceledik ve varolan bir çözümü oldukça biz Aranan yetenekleri vardı sonuçları.</span><span class="sxs-lookup"><span data-stu-id="f9b78-131">Once we had that, we surveyed the landscape of existing solutions and concluded that no existing solution quite had the capabilities we sought.</span></span> <span data-ttu-id="f9b78-132">Biz sonra birkaç yol gösterici kurallara göre bir çözüm tasarlandı.</span><span class="sxs-lookup"><span data-stu-id="f9b78-132">We then engineered a solution based on several guiding principles.</span></span>

* <span data-ttu-id="f9b78-133">Sistem Yapılandırması basitliği sunmaktadır.</span><span class="sxs-lookup"><span data-stu-id="f9b78-133">The system should offer simplicity of configuration.</span></span> <span data-ttu-id="f9b78-134">İdeal olarak sistem sıfır yapılandırma olacaktır ve geliştiricilerin çalıştıran başından başlayarak oluşabilir.</span><span class="sxs-lookup"><span data-stu-id="f9b78-134">Ideally the system would be zero-configuration and developers could hit the ground running.</span></span> <span data-ttu-id="f9b78-135">Bu belirli yapılandırmalar basit hale getirmek için geliştiriciler nerede (örneğin, anahtar depo) belirli bir yönüne yapılandırmanıza gerek durumlarda göz önünde bulundurarak verilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="f9b78-135">In situations where developers need to configure a specific aspect (such as the key repository), consideration should be given to making those specific configurations simple.</span></span>

* <span data-ttu-id="f9b78-136">Basit bir tüketiciye yönelik API sunar.</span><span class="sxs-lookup"><span data-stu-id="f9b78-136">Offer a simple consumer-facing API.</span></span> <span data-ttu-id="f9b78-137">API'ler, doğru bir şekilde kullanmak kolay ve hatalı kullanmayı zor olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="f9b78-137">The APIs should be easy to use correctly and difficult to use incorrectly.</span></span>

* <span data-ttu-id="f9b78-138">Geliştiriciler anahtar yönetimi ilkeleri de öğrenmelisiniz değil.</span><span class="sxs-lookup"><span data-stu-id="f9b78-138">Developers should not learn key management principles.</span></span> <span data-ttu-id="f9b78-139">Sistem algoritması seçimi ve anahtar yaşam süresi Geliştirici adınıza işlemelidir.</span><span class="sxs-lookup"><span data-stu-id="f9b78-139">The system should handle algorithm selection and key lifetime on the developer's behalf.</span></span> <span data-ttu-id="f9b78-140">İdeal olarak Geliştirici hiçbir zaman bile ham anahtar malzemesi erişiminiz olması.</span><span class="sxs-lookup"><span data-stu-id="f9b78-140">Ideally the developer should never even have access to the raw key material.</span></span>

* <span data-ttu-id="f9b78-141">Anahtarları bekleyen mümkün olduğunda korunmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f9b78-141">Keys should be protected at rest when possible.</span></span> <span data-ttu-id="f9b78-142">Sistem, uygun varsayılan koruma mekanizması şekil ve otomatik olarak uygula.</span><span class="sxs-lookup"><span data-stu-id="f9b78-142">The system should figure out an appropriate default protection mechanism and apply it automatically.</span></span>

<span data-ttu-id="f9b78-143">Bu ilkeler aklınızda ile biz basit bir geliştirilen [kullanımı kolay](using-data-protection.md) veri koruma yığını.</span><span class="sxs-lookup"><span data-stu-id="f9b78-143">With these principles in mind we developed a simple, [easy to use](using-data-protection.md) data protection stack.</span></span>

<span data-ttu-id="f9b78-144">ASP.NET Core veri koruma API değil öncelikle yöneliktir gizli yüklerini belirsiz kalıcılığını.</span><span class="sxs-lookup"><span data-stu-id="f9b78-144">The ASP.NET Core data protection APIs are not primarily intended for indefinite persistence of confidential payloads.</span></span> <span data-ttu-id="f9b78-145">Diğer teknolojiler ister [Windows CNG DPAPI](https://msdn.microsoft.com/library/windows/desktop/hh706794%28v=vs.85%29.aspx) ve [Azure Rights Management](https://docs.microsoft.com/rights-management/) belirsiz depolama senaryosu için daha uygundur ve buna bağlı olarak güçlü anahtar yönetim olanaklarına sahip olursunuz.</span><span class="sxs-lookup"><span data-stu-id="f9b78-145">Other technologies like [Windows CNG DPAPI](https://msdn.microsoft.com/library/windows/desktop/hh706794%28v=vs.85%29.aspx) and [Azure Rights Management](https://docs.microsoft.com/rights-management/) are more suited to the scenario of indefinite storage, and they have correspondingly strong key management capabilities.</span></span> <span data-ttu-id="f9b78-146">Bu, gizli verilerin uzun dönem koruma için ASP.NET Core veri koruma API'ları kullanarak bir geliştirici yasaklanması hiçbir şey belirtti.</span><span class="sxs-lookup"><span data-stu-id="f9b78-146">That said, there is nothing prohibiting a developer from using the ASP.NET Core data protection APIs for long-term protection of confidential data.</span></span>

## <a name="audience"></a><span data-ttu-id="f9b78-147">Hedef Kitle</span><span class="sxs-lookup"><span data-stu-id="f9b78-147">Audience</span></span>

<span data-ttu-id="f9b78-148">Veri koruma sisteminde beş ana paketlere ayrılmıştır.</span><span class="sxs-lookup"><span data-stu-id="f9b78-148">The data protection system is divided into five main packages.</span></span> <span data-ttu-id="f9b78-149">Bu API'leri çeşitli yönlerini üç ana izleyicileri hedef;</span><span class="sxs-lookup"><span data-stu-id="f9b78-149">Various aspects of these APIs target three main audiences;</span></span>

1. <span data-ttu-id="f9b78-150">[Tüketici API'leri genel bakış](consumer-apis/overview.md) hedef uygulama ve framework geliştiriciler.</span><span class="sxs-lookup"><span data-stu-id="f9b78-150">The [Consumer APIs Overview](consumer-apis/overview.md) target application and framework developers.</span></span>

   <span data-ttu-id="f9b78-151">"Yığını nasıl çalıştığı hakkında veya nasıl yapılandırılacağı hakkında bilgi edinin istemiyorum.</span><span class="sxs-lookup"><span data-stu-id="f9b78-151">"I don't want to learn about how the stack operates or about how it is configured.</span></span> <span data-ttu-id="f9b78-152">Yalnızca, başka bir işlem olarak basit bir şekilde mümkün olduğunca API'leri başarıyla kullanımının yüksek olasılık gerçekleştirmek istiyorum."</span><span class="sxs-lookup"><span data-stu-id="f9b78-152">I simply want to perform some operation in as simple a manner as possible with high probability of using the APIs successfully."</span></span>

2. <span data-ttu-id="f9b78-153">[Yapılandırma API'leri](configuration/overview.md) hedef uygulama geliştiricileri ve sistem yöneticileri.</span><span class="sxs-lookup"><span data-stu-id="f9b78-153">The [configuration APIs](configuration/overview.md) target application developers and system administrators.</span></span>

   <span data-ttu-id="f9b78-154">"I veri koruma sisteminde my ortam varsayılan olmayan yolları veya ayarları gerektirir bildirmeniz gerekir."</span><span class="sxs-lookup"><span data-stu-id="f9b78-154">"I need to tell the data protection system that my environment requires non-default paths or settings."</span></span>

3. <span data-ttu-id="f9b78-155">Özel ilke uygulama sorumlu genişletilebilirlik API hedef geliştiriciler.</span><span class="sxs-lookup"><span data-stu-id="f9b78-155">The extensibility APIs target developers in charge of implementing custom policy.</span></span> <span data-ttu-id="f9b78-156">Bu API'leri kullanımını nadir durumlarda sınırlı ve karşılaştı, güvenlik kullanan geliştiriciler.</span><span class="sxs-lookup"><span data-stu-id="f9b78-156">Usage of these APIs would be limited to rare situations and experienced, security aware developers.</span></span>

   <span data-ttu-id="f9b78-157">"I gerçekten benzersiz davranış gereksinimlere sahip olduğundan sistem içinde tüm bir bileşen değiştirmeniz gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="f9b78-157">"I need to replace an entire component within the system because I have truly unique behavioral requirements.</span></span> <span data-ttu-id="f9b78-158">My gereksinimlerini karşılayan bir eklenti oluşturmak için API yüzeyi uncommonly kullanılan parçalarının öğrenin istiyorum."</span><span class="sxs-lookup"><span data-stu-id="f9b78-158">I am willing to learn uncommonly-used parts of the API surface in order to build a plugin that fulfills my requirements."</span></span>

## <a name="package-layout"></a><span data-ttu-id="f9b78-159">Paket düzeni</span><span class="sxs-lookup"><span data-stu-id="f9b78-159">Package Layout</span></span>

<span data-ttu-id="f9b78-160">Veri koruma yığını beş paketlerini oluşur.</span><span class="sxs-lookup"><span data-stu-id="f9b78-160">The data protection stack consists of five packages.</span></span>

* <span data-ttu-id="f9b78-161">Microsoft.AspNetCore.DataProtection.Abstractions temel IDataProtectionProvider ve Idataprotector arabirimleri içerir.</span><span class="sxs-lookup"><span data-stu-id="f9b78-161">Microsoft.AspNetCore.DataProtection.Abstractions contains the basic IDataProtectionProvider and IDataProtector interfaces.</span></span> <span data-ttu-id="f9b78-162">Ayrıca, bu türleri (örneğin, IDataProtector.Protect aşırı) ile çalışma yardımcı olabilecek yararlı genişletme yöntemleri içerir.</span><span class="sxs-lookup"><span data-stu-id="f9b78-162">It also contains useful extension methods that can assist working with these types (e.g., overloads of IDataProtector.Protect).</span></span> <span data-ttu-id="f9b78-163">Daha fazla bilgi için tüketici arabirimleri bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="f9b78-163">See the consumer interfaces section for more information.</span></span> <span data-ttu-id="f9b78-164">Başkası veri koruma sisteminde başlatmasını sorumludur ve API'ları yalnızca kullanıyor, başvuru Microsoft.AspNetCore.DataProtection.Abstractions isteyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="f9b78-164">If somebody else is responsible for instantiating the data protection system and you are simply consuming the APIs, you'll want to reference Microsoft.AspNetCore.DataProtection.Abstractions.</span></span>

* <span data-ttu-id="f9b78-165">Microsoft.AspNetCore.DataProtection çekirdek şifreleme işlemleri, anahtar yönetimi, yapılandırması ve genişletilebilirlik gibi veri koruma sisteminde çekirdek uygulamasını içerir.</span><span class="sxs-lookup"><span data-stu-id="f9b78-165">Microsoft.AspNetCore.DataProtection contains the core implementation of the data protection system, including the core cryptographic operations, key management, configuration, and extensibility.</span></span> <span data-ttu-id="f9b78-166">Veri koruma sisteminde başlatmasını için sorumlu (örneğin, bir IServiceCollection ekleme) ya da değiştirme veya davranışını genişletme, başvuru Microsoft.AspNetCore.DataProtection istemeniz.</span><span class="sxs-lookup"><span data-stu-id="f9b78-166">If you're responsible for instantiating the data protection system (e.g., adding it to an IServiceCollection) or modifying or extending its behavior, you'll want to reference Microsoft.AspNetCore.DataProtection.</span></span>

* <span data-ttu-id="f9b78-167">Microsoft.AspNetCore.DataProtection.Extensions hangi geliştiricilere yararlı olabilir ancak çekirdek pakete ait olmayan ek API'leri içerir.</span><span class="sxs-lookup"><span data-stu-id="f9b78-167">Microsoft.AspNetCore.DataProtection.Extensions contains additional APIs which developers might find useful but which don't belong in the core package.</span></span> <span data-ttu-id="f9b78-168">Örneğin, bu paket, bir basit bir "Hiçbir bağımlılık ekleme Kurulum sahip bir özel anahtar depolama dizin gösteren sistem örneği" API (daha fazla bilgi) içerir.</span><span class="sxs-lookup"><span data-stu-id="f9b78-168">For instance, this package contains a simple "instantiate the system pointing at a specific key storage directory with no dependency injection setup" API (more info).</span></span> <span data-ttu-id="f9b78-169">Ayrıca, korumalı yüklerini (daha fazla bilgi) ömrü sınırlamak için genişletme yöntemleri içerir.</span><span class="sxs-lookup"><span data-stu-id="f9b78-169">It also contains extension methods for limiting the lifetime of protected payloads (more info).</span></span>

* <span data-ttu-id="f9b78-170">Microsoft.AspNetCore.DataProtection.SystemWeb yönlendirmek için mevcut ASP.NET 4.x uygulamasına yüklenebilir kendi <machineKey> yeni veri koruma yığını kullanmayı işlemleri.</span><span class="sxs-lookup"><span data-stu-id="f9b78-170">Microsoft.AspNetCore.DataProtection.SystemWeb can be installed into an existing ASP.NET 4.x application to redirect its <machineKey> operations to instead use the new data protection stack.</span></span> <span data-ttu-id="f9b78-171">Bkz: [Uyumluluk](compatibility/replacing-machinekey.md#compatibility-replacing-machinekey) daha fazla bilgi için.</span><span class="sxs-lookup"><span data-stu-id="f9b78-171">See [compatibility](compatibility/replacing-machinekey.md#compatibility-replacing-machinekey) for more information.</span></span>

* <span data-ttu-id="f9b78-172">Microsoft.AspNetCore.Cryptography.KeyDerivation PBKDF2 parola yordamı karma uygulaması sağlar ve kullanıcı parolalarını güvenli bir şekilde işlemek için gereken sistemleri tarafından kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="f9b78-172">Microsoft.AspNetCore.Cryptography.KeyDerivation provides an implementation of the PBKDF2 password hashing routine and can be used by systems which need to handle user passwords securely.</span></span> <span data-ttu-id="f9b78-173">Bkz: [parola karma](consumer-apis/password-hashing.md) daha fazla bilgi için.</span><span class="sxs-lookup"><span data-stu-id="f9b78-173">See [Password Hashing](consumer-apis/password-hashing.md) for more information.</span></span>
