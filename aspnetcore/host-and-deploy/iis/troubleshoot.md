---
title: "IIS üzerinde ASP.NET Core sorun giderme"
author: guardrex
description: "ASP.NET Core uygulamaların IIS dağıtımlarını sorunları tanılamak öğrenin."
manager: wpickett
ms.author: riande
ms.custom: mvc
ms.date: 03/13/2017
ms.prod: asp.net-core
ms.technology: aspnet
ms.topic: article
uid: host-and-deploy/iis/troubleshoot
ms.openlocfilehash: c68070a9cba5667504d1ad4927b02b73f83e6573
ms.sourcegitcommit: a510f38930abc84c4b302029d019a34dfe76823b
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/30/2018
---
# <a name="troubleshoot-aspnet-core-on-iis"></a><span data-ttu-id="ff14b-103">IIS üzerinde ASP.NET Core sorun giderme</span><span class="sxs-lookup"><span data-stu-id="ff14b-103">Troubleshoot ASP.NET Core on IIS</span></span>

<span data-ttu-id="ff14b-104">Tarafından [Luke Latham](https://github.com/guardrex)</span><span class="sxs-lookup"><span data-stu-id="ff14b-104">By [Luke Latham](https://github.com/guardrex)</span></span>

<span data-ttu-id="ff14b-105">IIS dağıtımları ile ilgili sorunları tanılamak için:</span><span class="sxs-lookup"><span data-stu-id="ff14b-105">To diagnose issues with IIS deployments:</span></span>

* <span data-ttu-id="ff14b-106">Tarayıcı çıktı üzerinde çalışın.</span><span class="sxs-lookup"><span data-stu-id="ff14b-106">Study browser output.</span></span>
* <span data-ttu-id="ff14b-107">Sistemin inceleyin **uygulama** aracılığıyla oturum **Olay Görüntüleyicisi'ni**.</span><span class="sxs-lookup"><span data-stu-id="ff14b-107">Examine the system's **Application** log through **Event Viewer**.</span></span>
* <span data-ttu-id="ff14b-108">Etkinleştirme `stdout` günlüğü.</span><span class="sxs-lookup"><span data-stu-id="ff14b-108">Enable `stdout` logging.</span></span> <span data-ttu-id="ff14b-109">**ASP.NET Core Modülü** günlük sağlanan yolunda bulunduğunda *stdoutLogFile* özniteliği `<aspNetCore>` öğesinde *web.config*. Öznitelik değerinde sağlanan yol üzerindeki herhangi bir klasörde dağıtımda mevcut olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="ff14b-109">The **ASP.NET Core Module** log is found on the path provided in the *stdoutLogFile* attribute of the `<aspNetCore>` element in *web.config*. Any folders on the path provided in the attribute value must exist in the deployment.</span></span> <span data-ttu-id="ff14b-110">Ayarlama *stdoutLogEnabled* için `true`.</span><span class="sxs-lookup"><span data-stu-id="ff14b-110">Set *stdoutLogEnabled* to `true`.</span></span> <span data-ttu-id="ff14b-111">Kullanan uygulamalar `Microsoft.NET.Sdk.Web` oluşturmak için SDK *web.config* dosya varsayılan *stdoutLogEnabled* ayarını `false`, böylece el ile sağlamak *web.config* dosya veya etkinleştirmek için dosyasını değiştirmek `stdout` günlüğü.</span><span class="sxs-lookup"><span data-stu-id="ff14b-111">Apps that use the the `Microsoft.NET.Sdk.Web` SDK to create the *web.config* file default the *stdoutLogEnabled* setting to `false`, so manually provide the *web.config* file or modify the file in order to enable `stdout` logging.</span></span>

<span data-ttu-id="ff14b-112">İle üç bu kaynaklardan bilgi kullanmak [sık karşılaşılan başvuru konu](xref:host-and-deploy/azure-iis-errors-reference) sorunu belirlemek için.</span><span class="sxs-lookup"><span data-stu-id="ff14b-112">Use information from those three sources with the [common errors reference topic](xref:host-and-deploy/azure-iis-errors-reference) to determine the problem.</span></span> <span data-ttu-id="ff14b-113">Bu sorunu çözmek için sağlanan sorun giderme önerileri izleyin.</span><span class="sxs-lookup"><span data-stu-id="ff14b-113">Follow the troubleshooting advice provided to resolve the issue.</span></span>

<span data-ttu-id="ff14b-114">Sık karşılaşılan çeşitli tarayıcı, uygulama günlüğüne ve ASP.NET Core modülü günlük modülü kadar görünmüyor *startupTimeLimit* (varsayılan: 120 saniye) ve *startupRetryCount* (varsayılan: 2) geçti.</span><span class="sxs-lookup"><span data-stu-id="ff14b-114">Several of the common errors don't appear in the browser, Application Log, and ASP.NET Core Module Log until the module *startupTimeLimit* (default: 120 seconds) and *startupRetryCount* (default: 2) have passed.</span></span> <span data-ttu-id="ff14b-115">Bu nedenle, bir tam altı önce deducing modülü uygulama için bir işlemi başlatmak için başarısız olan dakika bekleyin.</span><span class="sxs-lookup"><span data-stu-id="ff14b-115">Therefore, wait a full six minutes before deducing that the module has failed to start a process for the app.</span></span>

<span data-ttu-id="ff14b-116">Uygulamanın düzgün çalıştığını belirlemek için bir hızlı doğrudan Kestrel üzerinde uygulamayı çalıştırmak için yoludur.</span><span class="sxs-lookup"><span data-stu-id="ff14b-116">One quick way to determine if the app is working properly is to run the app directly on Kestrel.</span></span> <span data-ttu-id="ff14b-117">Uygulama olarak yayımlandıysa bir [framework bağımlı dağıtım](/dotnet/core/deploying/#framework-dependent-deployments-fdd), yürütme `dotnet <assembly_name>.dll` dağıtım klasöründe olan uygulamanın IIS fiziksel yolu.</span><span class="sxs-lookup"><span data-stu-id="ff14b-117">If the app was published as a [framework-dependent deployment](/dotnet/core/deploying/#framework-dependent-deployments-fdd), execute `dotnet <assembly_name>.dll` in the deployment folder, which is the IIS physical path to the app.</span></span> <span data-ttu-id="ff14b-118">Uygulama olarak yayımlandıysa bir [müstakil dağıtım](/dotnet/core/deploying/#self-contained-deployments-scd)çalıştırın uygulamayı doğrudan bir komut isteminden, yürütülebilir `<assembly_name>.exe`, dağıtım klasörü.</span><span class="sxs-lookup"><span data-stu-id="ff14b-118">If the app was published as a [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd), run the app's executable directly from a command prompt, `<assembly_name>.exe`, in the deployment folder.</span></span> <span data-ttu-id="ff14b-119">Kestrel 5000 varsayılan bağlantı noktasında dinleme, uygulama kullanılabilir olmalıdır `http://localhost:5000/`.</span><span class="sxs-lookup"><span data-stu-id="ff14b-119">If Kestrel is listening on default port 5000, the app should be available at `http://localhost:5000/`.</span></span> <span data-ttu-id="ff14b-120">Uygulama Kestrel uç nokta adresinde normalde yanıt verirse, sorun ilişkili ters proxy yapılandırmasını ve büyük olasılıkla daha az uygulama içinde daha yüksektir.</span><span class="sxs-lookup"><span data-stu-id="ff14b-120">If the app responds normally at the Kestrel endpoint address, the problem is more likely related to the reverse proxy configuration and less likely within the app.</span></span>

<span data-ttu-id="ff14b-121">Ters proxy düzgün çalışıp çalışmadığını belirlemek için bir yoldur stil sayfası, betik veya uygulamanın statik dosyaları görüntüden basit statik dosya isteği gerçekleştirmek için *wwwroot* kullanarak [statik dosya ara yazılımlarını](xref:fundamentals/static-files).</span><span class="sxs-lookup"><span data-stu-id="ff14b-121">One way to determine if the reverse proxy is working properly is to perform a simple static file request for a stylesheet, script, or image from the app's static files in *wwwroot* using [Static File Middleware](xref:fundamentals/static-files).</span></span> <span data-ttu-id="ff14b-122">Uygulama statik dosyaları görebilecek ancak MVC görünümleri ve diğer uç noktaları başarısız oluyor, sorun büyük olasılıkla daha az ters proxy yapılandırma ile ilgili ve büyük olasılıkla uygulama (örneğin, MVC yönlendirme veya için 500 İç sunucu hatası) içinde ' dir.</span><span class="sxs-lookup"><span data-stu-id="ff14b-122">If the app can serve static files but MVC Views and other endpoints are failing, the problem is less likely related to the reverse proxy configuration and more likely within the app (for example, MVC routing or 500 Internal Server Error).</span></span>

<span data-ttu-id="ff14b-123">Kestrel başlatır normalde IIS ancak uygulama başarıyla yerel olarak çalıştırdıktan sonra sistem üzerinde çalışmadığından, bir ortam değişkeni geçici olarak eklenebilir *web.config* ayarlamak için `ASPNETCORE_ENVIRONMENT` için `Development`.</span><span class="sxs-lookup"><span data-stu-id="ff14b-123">When Kestrel starts normally behind IIS but the app won't run on the system after successfully running locally, an environment variable can be temporarily added to *web.config* to set the `ASPNETCORE_ENVIRONMENT` to `Development`.</span></span> <span data-ttu-id="ff14b-124">Uygulama başlangıç ortamı kılmadığınız sürece, ortam değişkeni ayarlamayı sağlar [Geliştirici özel durum sayfasında](xref:fundamentals/error-handling) görünmesi uygulama çalıştırıldığında.</span><span class="sxs-lookup"><span data-stu-id="ff14b-124">As long as the environment isn't overridden in app startup, setting the environment variable allows the [developer exception page](xref:fundamentals/error-handling) to appear when the app is run.</span></span> <span data-ttu-id="ff14b-125">Ortam değişkeni ayarı `ASPNETCORE_ENVIRONMENT` bu şekilde yalnızca Internet'e açık olmayan hazırlama ve test sunucuları için önerilir.</span><span class="sxs-lookup"><span data-stu-id="ff14b-125">Setting the environment variable for `ASPNETCORE_ENVIRONMENT` in this way is only recommended for staging/testing servers that aren't exposed to the Internet.</span></span> <span data-ttu-id="ff14b-126">Ortam değişkenini kaldırdığınızdan emin olun *web.config* dosya bitirdikten sonra.</span><span class="sxs-lookup"><span data-stu-id="ff14b-126">Be sure to remove the environment variable from the *web.config* file when finished.</span></span> <span data-ttu-id="ff14b-127">Aracılığıyla ortam değişkenlerini ayarlama hakkında bilgi için *web.config*, bkz: [aspNetCore environmentVariables alt öğesi](xref:host-and-deploy/aspnet-core-module#setting-environment-variables).</span><span class="sxs-lookup"><span data-stu-id="ff14b-127">For information on setting environment variables via *web.config*, see [environmentVariables child element of aspNetCore](xref:host-and-deploy/aspnet-core-module#setting-environment-variables).</span></span>

<span data-ttu-id="ff14b-128">Çoğu durumda, Uygulama günlüğünü etkinleştirme uygulama veya ters proxy sorun gidermeye yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="ff14b-128">In most cases, enabling application logging assists in troubleshooting problems with the app or the reverse proxy.</span></span> <span data-ttu-id="ff14b-129">Bkz: [günlüğü](xref:fundamentals/logging/index) daha fazla bilgi için.</span><span class="sxs-lookup"><span data-stu-id="ff14b-129">See [Logging](xref:fundamentals/logging/index) for more information.</span></span>

<span data-ttu-id="ff14b-130">Son sorun giderme ipucu ya da yükselttikten sonra çalışamayan uygulamalar için .NET Core SDK geliştirme makine ya da paketi sürümlerinde uygulama içinde ilgilidir.</span><span class="sxs-lookup"><span data-stu-id="ff14b-130">The last troubleshooting tip pertains to apps that fail to run after upgrading either the .NET Core SDK on the development machine or package versions within the app.</span></span> <span data-ttu-id="ff14b-131">Bazı durumlarda, önemli yükseltme yaparken, bir uygulama tutarsız paketleri kesilebilir.</span><span class="sxs-lookup"><span data-stu-id="ff14b-131">In some cases, incoherent packages may break an app when performing major upgrades.</span></span> <span data-ttu-id="ff14b-132">Bu sorunların çoğunu tarafından çözülebilir:</span><span class="sxs-lookup"><span data-stu-id="ff14b-132">Most of these issues can be fixed by:</span></span>

* <span data-ttu-id="ff14b-133">Silme `bin` ve `obj` projesinde klasörler.</span><span class="sxs-lookup"><span data-stu-id="ff14b-133">Deleting the `bin` and `obj` folders in the project.</span></span>
* <span data-ttu-id="ff14b-134">Temizleme paketi önbelleğe adresindeki `%UserProfile%\.nuget\packages\` ve `%LocalAppData%\Nuget\v3-cache`.</span><span class="sxs-lookup"><span data-stu-id="ff14b-134">Clearing package caches at `%UserProfile%\.nuget\packages\` and `%LocalAppData%\Nuget\v3-cache`.</span></span>
* <span data-ttu-id="ff14b-135">Geri yükleme ve projeyi yeniden derlemeyi.</span><span class="sxs-lookup"><span data-stu-id="ff14b-135">Restoring and rebuilding the project.</span></span>
* <span data-ttu-id="ff14b-136">Önceki dağıtım sunucu üzerinde tamamen uygulamayı yeniden dağıtmadan önce silinmiş olduğunu onaylayan.</span><span class="sxs-lookup"><span data-stu-id="ff14b-136">Confirming that the prior deployment on the server has been completely deleted prior to re-deploying the app.</span></span>

> [!TIP]
> <span data-ttu-id="ff14b-137">Yürütülecek paket önbellekleri temizlemek için kolay bir yol olduğundan `dotnet nuget locals all --clear` bir komut isteminden.</span><span class="sxs-lookup"><span data-stu-id="ff14b-137">A convenient way to clear package caches is to execute `dotnet nuget locals all --clear` from a command prompt.</span></span>
> 
> <span data-ttu-id="ff14b-138">Paket önbelleklerini temizleme de gerçekleştirilebilir kullanarak [nuget.exe](https://www.nuget.org/downloads) aracı ve komutu yürütülürken `nuget locals all -clear`.</span><span class="sxs-lookup"><span data-stu-id="ff14b-138">Clearing package caches can also be accomplished by using the [nuget.exe](https://www.nuget.org/downloads) tool and executing the command `nuget locals all -clear`.</span></span> <span data-ttu-id="ff14b-139">*nuget.exe* Windows 10 ile birlikte gelen yükleme değildir ve ayrı olarak NuGet Web sitesinden alınması gerekir.</span><span class="sxs-lookup"><span data-stu-id="ff14b-139">*nuget.exe* isn't a bundled install with Windows 10 and must be obtained separately from the NuGet website.</span></span>
<!--
> [!TIP]
> A convenient way to clear package caches is to:
>
> * Obtain the *NuGet.exe* tool from [NuGet.org](https://www.nuget.org/).
> * Add the path to *NuGet.exe* to the system PATH.
> * Execute `nuget locals all -clear` from a command prompt.
>
> Alternatively, execute `dotnet nuget locals all --clear` from a command prompt without obtaining *NuGet.exe*. -->

## <a name="additional-resources"></a><span data-ttu-id="ff14b-140">Ek kaynaklar</span><span class="sxs-lookup"><span data-stu-id="ff14b-140">Additional resources</span></span>

* [<span data-ttu-id="ff14b-141">Azure App Service ve ASP.NET Core IIS için ortak hataları başvurusu</span><span class="sxs-lookup"><span data-stu-id="ff14b-141">Common errors reference for Azure App Service and IIS with ASP.NET Core</span></span>](xref:host-and-deploy/azure-iis-errors-reference)
* [<span data-ttu-id="ff14b-142">ASP.NET Core Module yapılandırma başvurusu</span><span class="sxs-lookup"><span data-stu-id="ff14b-142">ASP.NET Core Module configuration reference</span></span>](xref:host-and-deploy/aspnet-core-module)
