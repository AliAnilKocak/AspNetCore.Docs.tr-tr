---
title: "ASP.NET çekirdeği Modülü"
author: tdykstra
description: "ASP.NET çekirdeği Modülü (ANCM), IIS veya IIS Express ters proxy sunucusu olarak kullanacak Kestrel web sunucusu olanak sağlayan bir IIS Modülü tanıtır."
manager: wpickett
ms.author: tdykstra
ms.custom: H1Hack27Feb2017
ms.date: 08/03/2017
ms.prod: asp.net-core
ms.technology: aspnet
ms.topic: article
uid: fundamentals/servers/aspnet-core-module
ms.openlocfilehash: cf02604f2a2f0eba496d0df5c4662f169d044c74
ms.sourcegitcommit: 9f758b1550fcae88ab1eb284798a89e6320548a5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/19/2018
---
# <a name="introduction-to-aspnet-core-module"></a><span data-ttu-id="11a46-103">ASP.NET çekirdeği modülü için giriş</span><span class="sxs-lookup"><span data-stu-id="11a46-103">Introduction to ASP.NET Core Module</span></span>

<span data-ttu-id="11a46-104">Tarafından [zel Dykstra](https://github.com/tdykstra), [Rick Strahl](https://github.com/RickStrahl), ve [Chris fillerin](https://github.com/Tratcher)</span><span class="sxs-lookup"><span data-stu-id="11a46-104">By [Tom Dykstra](https://github.com/tdykstra), [Rick Strahl](https://github.com/RickStrahl), and [Chris Ross](https://github.com/Tratcher)</span></span> 

<span data-ttu-id="11a46-105">ASP.NET çekirdeği Modülü (ANCM) ASP.NET Core uygulamaları IIS arkasında çalıştırmak olanak tanır (güvenlik, yönetilebilirlik ve çok daha fazla) iyi nedir için IIS kullanarak ve kullanarak [Kestrel](kestrel.md) (gerçekten hızlı olmasının en), iyi nedir için ve alma aynı anda hem teknolojilerden avantajları.</span><span class="sxs-lookup"><span data-stu-id="11a46-105">ASP.NET Core Module (ANCM) lets you run ASP.NET Core applications behind IIS, using IIS for what it's good at (security, manageability, and lots more) and using [Kestrel](kestrel.md) for what it's good at (being really fast), and getting the benefits from both technologies at once.</span></span> <span data-ttu-id="11a46-106">**ANCM yalnızca Kestrel ile çalışır; WebListener ile uyumlu değil (ASP.NET Core içinde 1.x) veya HTTP.sys (içinde 2.x).**</span><span class="sxs-lookup"><span data-stu-id="11a46-106">**ANCM works only with Kestrel; it isn't compatible with WebListener (in ASP.NET Core 1.x) or HTTP.sys (in 2.x).**</span></span> 

<span data-ttu-id="11a46-107">Desteklenen Windows sürümlerine:</span><span class="sxs-lookup"><span data-stu-id="11a46-107">Supported Windows versions:</span></span>

* <span data-ttu-id="11a46-108">Windows 7 ve Windows Server 2008 R2 ve sonraki sürümler</span><span class="sxs-lookup"><span data-stu-id="11a46-108">Windows 7 and Windows Server 2008 R2 and later</span></span>

<span data-ttu-id="11a46-109">[Görüntülemek veya karşıdan örnek kod](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/servers/aspnet-core-module/sample) ([nasıl indirileceğini](xref:tutorials/index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="11a46-109">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/servers/aspnet-core-module/sample) ([how to download](xref:tutorials/index#how-to-download-a-sample))</span></span>

## <a name="what-aspnet-core-module-does"></a><span data-ttu-id="11a46-110">ASP.NET çekirdeği Modülü'ne</span><span class="sxs-lookup"><span data-stu-id="11a46-110">What ASP.NET Core Module does</span></span>

<span data-ttu-id="11a46-111">ANCM IIS ardışık düzenine kanca oluşturur ve ASP.NET Core uygulama arka ucuna trafiğini yönlendiren yerel bir IIS modüldür.</span><span class="sxs-lookup"><span data-stu-id="11a46-111">ANCM is a native IIS module that hooks into the IIS pipeline and redirects traffic to the backend ASP.NET Core application.</span></span> <span data-ttu-id="11a46-112">Windows kimlik doğrulaması gibi birçok diğer modüller, hala çalıştırmak için bir fırsat alın.</span><span class="sxs-lookup"><span data-stu-id="11a46-112">Most other modules, such as windows authentication, still get a chance to run.</span></span> <span data-ttu-id="11a46-113">ANCM istek için bir işleyici seçildiğinde ve işleyici eşlemesi uygulamada tanımlı denetimi yalnızca sürer *web.config* dosya.</span><span class="sxs-lookup"><span data-stu-id="11a46-113">ANCM only takes control when a handler is selected for the request, and handler mapping is defined in the application *web.config* file.</span></span>

<span data-ttu-id="11a46-114">ASP.NET Core uygulamaları bir işlem olarak çalıştırmak için IIS çalışan işlemini ayrı olduğundan ANCM yönetim işlem.</span><span class="sxs-lookup"><span data-stu-id="11a46-114">Because ASP.NET Core applications run in a process separate from the IIS worker process, ANCM also does process management.</span></span> <span data-ttu-id="11a46-115">İlk istek geldiğinde ve onu kilitlendiğinde yeniden başlatıldığında ANCM ASP.NET Core uygulama işlemini başlatır.</span><span class="sxs-lookup"><span data-stu-id="11a46-115">ANCM starts the process for the ASP.NET Core application when the first request comes in and restarts it when it crashes.</span></span> <span data-ttu-id="11a46-116">Klasik ASP.NET uygulamaları temelde aynı davranışı budur çalışan işlem içi IIS'de ve WAS (Windows Etkinleştirme hizmeti) tarafından yönetilir.</span><span class="sxs-lookup"><span data-stu-id="11a46-116">This is essentially the same behavior as classic ASP.NET applications that run in-process in IIS and are managed by WAS (Windows Activation Service).</span></span>

<span data-ttu-id="11a46-117">IIS, ANCM ve ASP.NET Core uygulamaları arasındaki ilişkiyi gösteren diyagram aşağıdadır.</span><span class="sxs-lookup"><span data-stu-id="11a46-117">Here's a diagram that illustrates the relationship between IIS, ANCM, and ASP.NET Core applications.</span></span>

![ASP.NET çekirdeği Modülü](aspnet-core-module/_static/ancm.png)

<span data-ttu-id="11a46-119">İstekleri Web sunucusundan gelen ve bunları birincil bağlantı noktası (80) veya SSL bağlantı noktası (443) üzerinde IIS içine yönlendiren çekirdek modu Http.Sys sürücüsünü ulaştı.</span><span class="sxs-lookup"><span data-stu-id="11a46-119">Requests come in from the Web and hit the kernel mode Http.Sys driver which routes them into IIS on the primary port (80) or SSL port (443).</span></span> <span data-ttu-id="11a46-120">ANCM iletir istekleri ASP.NET Core uygulamaya bağlantı noktası olmayan uygulama için yapılandırılan HTTP bağlantı noktası 80/443'tür.</span><span class="sxs-lookup"><span data-stu-id="11a46-120">ANCM forwards the requests to the ASP.NET Core application on the HTTP port configured for the application, which isn't port 80/443.</span></span>

<span data-ttu-id="11a46-121">ANCM gelen trafik için kestrel dinler.</span><span class="sxs-lookup"><span data-stu-id="11a46-121">Kestrel listens for traffic coming from ANCM.</span></span>  <span data-ttu-id="11a46-122">ANCM başlangıçta ortam değişkeni aracılığıyla bağlantı noktasını belirtir ve [UseIISIntegration](#call-useiisintegration) yöntemi yapılandırır üzerinde dinlemek üzere `http://localhost:{port}`.</span><span class="sxs-lookup"><span data-stu-id="11a46-122">ANCM specifies the port via environment variable at startup, and the [UseIISIntegration](#call-useiisintegration) method configures the server to listen on `http://localhost:{port}`.</span></span> <span data-ttu-id="11a46-123">ANCM değil, istekleri reddedecek şekilde ek denetimler vardır.</span><span class="sxs-lookup"><span data-stu-id="11a46-123">There are additional checks to reject requests not from ANCM.</span></span> <span data-ttu-id="11a46-124">(HTTPS üzerinden IIS tarafından alınan olsa bile istekleri HTTP üzerinden iletilir şekilde ANCM HTTPS iletme desteklemiyor.)</span><span class="sxs-lookup"><span data-stu-id="11a46-124">(ANCM doesn't support HTTPS forwarding, so requests are forwarded over HTTP even if received by IIS over HTTPS.)</span></span>

<span data-ttu-id="11a46-125">Kestrel ANCM istekleri seçer ve bunları daha sonra bunları işler ve bunları olarak geçirdiği ASP.NET Core ara yazılım ardışık düzenini içine iter `HttpContext` uygulama mantığını örneklerine.</span><span class="sxs-lookup"><span data-stu-id="11a46-125">Kestrel picks up requests from ANCM and pushes them into the ASP.NET Core middleware pipeline, which then handles them and passes them on as `HttpContext` instances to application logic.</span></span> <span data-ttu-id="11a46-126">Uygulamanın yanıtları sonra IIS, isteklerin başlatılan HTTP istemcisi geri hangi iter dön geçirilir.</span><span class="sxs-lookup"><span data-stu-id="11a46-126">The application's responses are then passed back to IIS, which pushes them back out to the HTTP client that initiated the requests.</span></span>

<span data-ttu-id="11a46-127">ANCM birkaç diğer işlevleri de vardır:</span><span class="sxs-lookup"><span data-stu-id="11a46-127">ANCM has a few other functions as well:</span></span>

* <span data-ttu-id="11a46-128">Ortam değişkenlerini ayarlar.</span><span class="sxs-lookup"><span data-stu-id="11a46-128">Sets environment variables.</span></span>
* <span data-ttu-id="11a46-129">Günlükleri `stdout` dosya depolama alanına çıktı.</span><span class="sxs-lookup"><span data-stu-id="11a46-129">Logs `stdout` output to file storage.</span></span>
* <span data-ttu-id="11a46-130">Windows kimlik doğrulama belirteçleri iletir.</span><span class="sxs-lookup"><span data-stu-id="11a46-130">Forwards Windows authentication tokens.</span></span>

## <a name="how-to-use-ancm-in-aspnet-core-apps"></a><span data-ttu-id="11a46-131">ASP.NET Core uygulamaları ANCM kullanma</span><span class="sxs-lookup"><span data-stu-id="11a46-131">How to use ANCM in ASP.NET Core apps</span></span>

<span data-ttu-id="11a46-132">Bu bölümde, bir IIS sunucusu ve ASP.NET Core uygulama ayarlama işlemine genel bakış sağlar.</span><span class="sxs-lookup"><span data-stu-id="11a46-132">This section provides an overview of the process for setting up an IIS server and ASP.NET Core application.</span></span> <span data-ttu-id="11a46-133">Ayrıntılı yönergeler için bkz: [IIS ile Windows konakta](xref:host-and-deploy/iis/index).</span><span class="sxs-lookup"><span data-stu-id="11a46-133">For detailed instructions, see [Host on Windows with IIS](xref:host-and-deploy/iis/index).</span></span>

### <a name="install-ancm"></a><span data-ttu-id="11a46-134">ANCM yükleyin</span><span class="sxs-lookup"><span data-stu-id="11a46-134">Install ANCM</span></span>

<span data-ttu-id="11a46-135">ANCM, Windows Server IIS ve IIS Express'te Windows masaüstü işletim sistemlerinde yüklenir.</span><span class="sxs-lookup"><span data-stu-id="11a46-135">The ANCM is installed in IIS on Windows Server and in IIS Express on Windows desktop operating systems.</span></span> <span data-ttu-id="11a46-136">Sunucuları ve geliştirme makineler için ANCM dahil [.NET Core Windows Server barındırma paket](https://aka.ms/dotnetcore-2-windowshosting).</span><span class="sxs-lookup"><span data-stu-id="11a46-136">For servers and development machines, the ANCM is included in the [.NET Core Windows Server Hosting bundle](https://aka.ms/dotnetcore-2-windowshosting).</span></span> <span data-ttu-id="11a46-137">Visual Studio yüklüyorsanız, ANCM IIS Express (ve IIS, makinedeki varsa) otomatik olarak yüklenir.</span><span class="sxs-lookup"><span data-stu-id="11a46-137">If installing Visual Studio, the ANCM is automatically installed in IIS Express (and in IIS, if present on the machine).</span></span>

### <a name="net-core-windows-server-hosting-bundle"></a><span data-ttu-id="11a46-138">.NET core Windows Server barındırma paket</span><span class="sxs-lookup"><span data-stu-id="11a46-138">.NET Core Windows Server Hosting bundle</span></span>

<span data-ttu-id="11a46-139">[.NET Core Windows Server barındırma paket](https://aka.ms/dotnetcore-2-windowshosting) .NET çekirdeği çalışma zamanı, .NET Core kitaplığı ve ANCM yükler.</span><span class="sxs-lookup"><span data-stu-id="11a46-139">The [.NET Core Windows Server Hosting bundle](https://aka.ms/dotnetcore-2-windowshosting) installs the .NET Core Runtime, .NET Core Library, and the ANCM.</span></span> <span data-ttu-id="11a46-140">Daha fazla bilgi için bkz: [.NET Core Windows Server barındırma paketini yüklemeniz](
xref:host-and-deploy/iis/index#install-the-net-core-windows-server-hosting-bundle).</span><span class="sxs-lookup"><span data-stu-id="11a46-140">For more information, see [Install the .NET Core Windows Server Hosting bundle](
xref:host-and-deploy/iis/index#install-the-net-core-windows-server-hosting-bundle).</span></span>

### <a name="install-the-iisintegration-nuget-package"></a><span data-ttu-id="11a46-141">IISIntegration NuGet paketini yükleyin</span><span class="sxs-lookup"><span data-stu-id="11a46-141">Install the IISIntegration NuGet package</span></span>

# <a name="aspnet-core-2xtabaspnetcore2x"></a>[<span data-ttu-id="11a46-142">ASP.NET Core 2.x</span><span class="sxs-lookup"><span data-stu-id="11a46-142">ASP.NET Core 2.x</span></span>](#tab/aspnetcore2x)

<span data-ttu-id="11a46-143">[Microsoft.AspNetCore.Server.IISIntegration](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.IISIntegration/) paketinde ASP.NET Core metapackages ([Microsoft.AspNetCore](https://www.nuget.org/packages/Microsoft.AspNetCore/) ve [Microsoft.AspNetCore.All](xref:fundamentals/metapackage) ).</span><span class="sxs-lookup"><span data-stu-id="11a46-143">The [Microsoft.AspNetCore.Server.IISIntegration](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.IISIntegration/) package is included in the ASP.NET Core metapackages ([Microsoft.AspNetCore](https://www.nuget.org/packages/Microsoft.AspNetCore/) and [Microsoft.AspNetCore.All](xref:fundamentals/metapackage)).</span></span> <span data-ttu-id="11a46-144">Metapackages birini kullanmıyorsanız, yükleme `Microsoft.AspNetCore.Server.IISIntegration` ayrı olarak.</span><span class="sxs-lookup"><span data-stu-id="11a46-144">If you don't use one of the metapackages, install `Microsoft.AspNetCore.Server.IISIntegration` separately.</span></span> <span data-ttu-id="11a46-145">`IISIntegration` Uygulamanızı ayarlayın ANCM tarafından yayınlanan ortam değişkenleri okur birlikte çalışabilirlik paketi paketidir.</span><span class="sxs-lookup"><span data-stu-id="11a46-145">The `IISIntegration` package is an interoperability pack that reads environment variables broadcast by ANCM to set up your app.</span></span> <span data-ttu-id="11a46-146">Ortam değişkenleri Dinlemenin yapılacağı bağlantı noktası gibi yapılandırma bilgilerini sağlar.</span><span class="sxs-lookup"><span data-stu-id="11a46-146">The environment variables provide configuration information, such as the port to listen on.</span></span> 

# <a name="aspnet-core-1xtabaspnetcore1x"></a>[<span data-ttu-id="11a46-147">ASP.NET Core 1.x</span><span class="sxs-lookup"><span data-stu-id="11a46-147">ASP.NET Core 1.x</span></span>](#tab/aspnetcore1x)

<span data-ttu-id="11a46-148">Uygulamanızda yüklemek [Microsoft.AspNetCore.Server.IISIntegration](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.IISIntegration/).</span><span class="sxs-lookup"><span data-stu-id="11a46-148">In your application, install [Microsoft.AspNetCore.Server.IISIntegration](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.IISIntegration/).</span></span> <span data-ttu-id="11a46-149">`IISIntegration` Uygulamanızı ayarlayın ANCM tarafından yayınlanan ortam değişkenleri okur birlikte çalışabilirlik paketi paketidir.</span><span class="sxs-lookup"><span data-stu-id="11a46-149">The `IISIntegration` package  is an interoperability pack that reads environment variables broadcast by ANCM to set up your app.</span></span> <span data-ttu-id="11a46-150">Ortam değişkenleri Dinlemenin yapılacağı bağlantı noktası gibi yapılandırma bilgilerini sağlar.</span><span class="sxs-lookup"><span data-stu-id="11a46-150">The environment variables provide configuration information, such as the port to listen on.</span></span> 

---

### <a name="call-useiisintegration"></a><span data-ttu-id="11a46-151">Çağrı UseIISIntegration</span><span class="sxs-lookup"><span data-stu-id="11a46-151">Call UseIISIntegration</span></span>

# <a name="aspnet-core-2xtabaspnetcore2x"></a>[<span data-ttu-id="11a46-152">ASP.NET Core 2.x</span><span class="sxs-lookup"><span data-stu-id="11a46-152">ASP.NET Core 2.x</span></span>](#tab/aspnetcore2x)

<span data-ttu-id="11a46-153">`UseIISIntegration` Genişletme yöntemi [ `WebHostBuilder` ](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.webhostbuilder) IIS ile çalıştırdığınızda otomatik olarak çağrılır.</span><span class="sxs-lookup"><span data-stu-id="11a46-153">The `UseIISIntegration` extension method on [`WebHostBuilder`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.webhostbuilder) is called automatically when you run with IIS.</span></span>

<span data-ttu-id="11a46-154">ASP.NET Core metapackages birini kullanmadığınız ve yüklemediniz `Microsoft.AspNetCore.Server.IISIntegration` paketi, bir çalışma zamanı hatası alın.</span><span class="sxs-lookup"><span data-stu-id="11a46-154">If you aren't using one of the ASP.NET Core metapackages and haven't installed the  `Microsoft.AspNetCore.Server.IISIntegration` package, you get a runtime error.</span></span> <span data-ttu-id="11a46-155">Çağırırsanız `UseIISIntegration` paketi yüklü değilse açıkça bir derleme zamanı hatası alın.</span><span class="sxs-lookup"><span data-stu-id="11a46-155">If you call `UseIISIntegration` explicitly, you get a compile time error if the package isn't installed.</span></span>

# <a name="aspnet-core-1xtabaspnetcore1x"></a>[<span data-ttu-id="11a46-156">ASP.NET Core 1.x</span><span class="sxs-lookup"><span data-stu-id="11a46-156">ASP.NET Core 1.x</span></span>](#tab/aspnetcore1x)

<span data-ttu-id="11a46-157">Uygulamanızın içinde `Main` yöntemi, çağrı `UseIISIntegration` genişletme yöntemi [ `WebHostBuilder` ](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.webhostbuilder).</span><span class="sxs-lookup"><span data-stu-id="11a46-157">In your application's `Main` method, call the `UseIISIntegration` extension method on [`WebHostBuilder`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.webhostbuilder).</span></span> 

[!code-csharp[](aspnet-core-module/sample/Program.cs?name=snippet_Main&highlight=12)]

---

<span data-ttu-id="11a46-158">`UseIISIntegration` Yöntemi ANCM ayarlar ortam değişkenleri ve onu görünen no-ops bulunamazsa değil.</span><span class="sxs-lookup"><span data-stu-id="11a46-158">The `UseIISIntegration` method looks for environment variables that ANCM sets, and it no-ops if they aren't found.</span></span> <span data-ttu-id="11a46-159">Bu davranış, geliştirme ve macOS veya Linux'ta test etme ve IIS çalıştıran bir sunucuya dağıtma gibi senaryoları kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="11a46-159">This behavior facilitates scenarios like developing and testing on macOS or Linux and deploying to a server that runs IIS.</span></span> <span data-ttu-id="11a46-160">MacOS ya da Linux üzerinde çalışırken, Kestrel web sunucusu gibi davranan; Ancak uygulama IIS ortamına dağıtıldığında, otomatik olarak ANCM ve IIS kullanır.</span><span class="sxs-lookup"><span data-stu-id="11a46-160">While running on macOS or Linux, Kestrel acts as the web server; but when the app is deployed to the IIS environment, it automatically uses ANCM and IIS.</span></span>

### <a name="ancm-port-binding-overrides-other-port-bindings"></a><span data-ttu-id="11a46-161">Diğer bağlantı noktası bağlamaları ANCM bağlantı noktası bağlama geçersiz kılar</span><span class="sxs-lookup"><span data-stu-id="11a46-161">ANCM port binding overrides other port bindings</span></span>

# <a name="aspnet-core-2xtabaspnetcore2x"></a>[<span data-ttu-id="11a46-162">ASP.NET Core 2.x</span><span class="sxs-lookup"><span data-stu-id="11a46-162">ASP.NET Core 2.x</span></span>](#tab/aspnetcore2x)

<span data-ttu-id="11a46-163">ANCM arka uç işleme atamak için dinamik bir bağlantı noktası oluşturur.</span><span class="sxs-lookup"><span data-stu-id="11a46-163">ANCM generates a dynamic port to assign to the back-end process.</span></span> <span data-ttu-id="11a46-164">`UseIISIntegration` Yöntemi bu dinamik bir bağlantı noktası seçer ve Dinlemenin yapılacağı Kestrel yapılandırır `http://locahost:{dynamicPort}/`.</span><span class="sxs-lookup"><span data-stu-id="11a46-164">The `UseIISIntegration` method picks up this dynamic port and configures Kestrel to listen on `http://locahost:{dynamicPort}/`.</span></span> <span data-ttu-id="11a46-165">Bu çağrı gibi diğer URL yapılandırmaları geçersiz kılar `UseUrls` veya [Kestrel'ın dinleme API](xref:fundamentals/servers/kestrel?tabs=aspnetcore2x#endpoint-configuration).</span><span class="sxs-lookup"><span data-stu-id="11a46-165">This overrides other URL configurations, such as calls to `UseUrls` or [Kestrel's Listen API](xref:fundamentals/servers/kestrel?tabs=aspnetcore2x#endpoint-configuration).</span></span> <span data-ttu-id="11a46-166">Bu nedenle, çağrı gerekmez `UseUrls` veya Kestrel'ın `Listen` ANCM kullandığınızda API.</span><span class="sxs-lookup"><span data-stu-id="11a46-166">Therefore, you don't need to call `UseUrls` or Kestrel's `Listen` API when you use ANCM.</span></span> <span data-ttu-id="11a46-167">Çağırırsanız `UseUrls` veya `Listen`, Kestrel uygulama IIS olmadan çalıştırdığınızda, belirttiğiniz bağlantı noktasında dinler.</span><span class="sxs-lookup"><span data-stu-id="11a46-167">If you do call `UseUrls` or `Listen`, Kestrel listens on the port you specify when you run the app without IIS.</span></span>

# <a name="aspnet-core-1xtabaspnetcore1x"></a>[<span data-ttu-id="11a46-168">ASP.NET Core 1.x</span><span class="sxs-lookup"><span data-stu-id="11a46-168">ASP.NET Core 1.x</span></span>](#tab/aspnetcore1x)

<span data-ttu-id="11a46-169">ANCM arka uç işleme atamak için dinamik bir bağlantı noktası oluşturur.</span><span class="sxs-lookup"><span data-stu-id="11a46-169">ANCM generates a dynamic port to assign to the back-end process.</span></span> <span data-ttu-id="11a46-170">`UseIISIntegration` Yöntemi bu dinamik bir bağlantı noktası seçer ve Dinlemenin yapılacağı Kestrel yapılandırır `http://locahost:{dynamicPort}/`.</span><span class="sxs-lookup"><span data-stu-id="11a46-170">The `UseIISIntegration` method picks up this dynamic port and configures Kestrel to listen on `http://locahost:{dynamicPort}/`.</span></span> <span data-ttu-id="11a46-171">Bu çağrı gibi diğer URL yapılandırmaları geçersiz kılar `UseUrls`.</span><span class="sxs-lookup"><span data-stu-id="11a46-171">This overrides other URL configurations, such as calls to `UseUrls`.</span></span> <span data-ttu-id="11a46-172">Bu nedenle, çağrı gerekmez `UseUrls` ANCM kullandığınızda.</span><span class="sxs-lookup"><span data-stu-id="11a46-172">Therefore, you don't need to call `UseUrls` when you use ANCM.</span></span> <span data-ttu-id="11a46-173">Çağırırsanız `UseUrls`, Kestrel uygulama IIS olmadan çalıştırdığınızda, belirttiğiniz bağlantı noktasında dinler.</span><span class="sxs-lookup"><span data-stu-id="11a46-173">If you do call `UseUrls`, Kestrel listens on the port you specify when you run the app without IIS.</span></span>

<span data-ttu-id="11a46-174">ASP.NET Core 1.0 çağırırsanız, `UseUrls`, çağrısından **önce** çağırmanız `UseIISIntegration` böylece ANCM yapılandırılan bağlantı noktası üzerine değildir.</span><span class="sxs-lookup"><span data-stu-id="11a46-174">In ASP.NET Core 1.0, if you call `UseUrls`, call it **before** you call `UseIISIntegration` so that the ANCM-configured port doesn't get overwritten.</span></span> <span data-ttu-id="11a46-175">ANCM ayarı geçersiz kıldığından bu arama sırası ASP.NET Core 1.1 gerekli olmadığından `UseUrls`.</span><span class="sxs-lookup"><span data-stu-id="11a46-175">This calling order isn't required in ASP.NET Core 1.1, because the ANCM setting overrides `UseUrls`.</span></span>

---

### <a name="configure-ancm-options-in-webconfig"></a><span data-ttu-id="11a46-176">Web.config dosyasında ANCM seçeneklerini yapılandırma</span><span class="sxs-lookup"><span data-stu-id="11a46-176">Configure ANCM options in Web.config</span></span>

<span data-ttu-id="11a46-177">ASP.NET çekirdeği modülü için yapılandırması depolanır *web.config* uygulamanın kök klasöründe yer alan dosya.</span><span class="sxs-lookup"><span data-stu-id="11a46-177">Configuration for the ASP.NET Core Module is stored in the *web.config* file that's located in the application's root folder.</span></span> <span data-ttu-id="11a46-178">Noktası başlangıç komut ve ASP.NET Core uygulamanızı başlatmak bağımsız değişkenler için bu dosyadaki ayarlar.</span><span class="sxs-lookup"><span data-stu-id="11a46-178">Settings in this file point to the startup command and arguments that start your ASP.NET Core app.</span></span> <span data-ttu-id="11a46-179">Örnek için *web.config* kod ve yapılandırma seçenekleri hakkında yönergeler bkz [ASP.NET temel modül yapılandırma başvurusu](xref:host-and-deploy/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="11a46-179">For sample *web.config* code and guidance on configuration options, see [ASP.NET Core Module Configuration Reference](xref:host-and-deploy/aspnet-core-module).</span></span>

### <a name="run-with-iis-express-in-development"></a><span data-ttu-id="11a46-180">IIS Express ile geliştirme çalıştırın</span><span class="sxs-lookup"><span data-stu-id="11a46-180">Run with IIS Express in development</span></span>

<span data-ttu-id="11a46-181">IIS Express ASP.NET Core şablonları tarafından tanımlanan varsayılan profili kullanarak Visual Studio tarafından başlatılabilir.</span><span class="sxs-lookup"><span data-stu-id="11a46-181">IIS Express can be launched by Visual Studio using the default profile defined by the ASP.NET Core templates.</span></span>

## <a name="proxy-configuration-uses-http-protocol-and-a-pairing-token"></a><span data-ttu-id="11a46-182">HTTP protokolünü ve bir eşleşme belirteci proxy yapılandırması kullanır</span><span class="sxs-lookup"><span data-stu-id="11a46-182">Proxy configuration uses HTTP protocol and a pairing token</span></span>

<span data-ttu-id="11a46-183">ANCM arasında Kestrel oluşturulan proxy HTTP protokolünü kullanır.</span><span class="sxs-lookup"><span data-stu-id="11a46-183">The proxy created between the ANCM and Kestrel uses the HTTP protocol.</span></span> <span data-ttu-id="11a46-184">HTTP performansı en iyi duruma getirme ANCM ve Kestrel arasındaki trafiğin geri döngü adresine dışına ağ arabirimi gerçekleştiği kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="11a46-184">Using HTTP is a performance optimization where the traffic between the ANCM and Kestrel takes place on a loopback address off of the network interface.</span></span> <span data-ttu-id="11a46-185">Hiçbir riski ANCM ve sunucu dışına bir konumdan Kestrel arasındaki trafiğin gizli dinleme yoktur.</span><span class="sxs-lookup"><span data-stu-id="11a46-185">There's no risk of eavesdropping the traffic between the ANCM and Kestrel from a location off of the server.</span></span>

<span data-ttu-id="11a46-186">Bir eşleşme belirteci Kestrel tarafından alınan isteği IIS tarafından yönlendirilirken ve bazı başka bir kaynaktan geliyor kaydetmedi güvence altına almak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="11a46-186">A pairing token is used to guarantee that the requests received by Kestrel were proxied by IIS and didn't come from some other source.</span></span> <span data-ttu-id="11a46-187">Eşleştirme belirteci oluşturulur ve bir ortam değişkeni ayarlayın (`ASPNETCORE_TOKEN`) ANCM tarafından.</span><span class="sxs-lookup"><span data-stu-id="11a46-187">The pairing token is created and set into an environment variable (`ASPNETCORE_TOKEN`) by the ANCM.</span></span> <span data-ttu-id="11a46-188">Eşleştirme belirteci de bir üstbilgisine ayarlayın (`MSAspNetCoreToken`) yönlendirilirken her istekte.</span><span class="sxs-lookup"><span data-stu-id="11a46-188">The pairing token is also set into a header (`MSAspNetCoreToken`) on every proxied request.</span></span> <span data-ttu-id="11a46-189">IIS Ara denetimleri eşleştirme belirteci üstbilgi değeri ortam değişkeni değeri ile eşleşen onaylamak için aldığı isteyin.</span><span class="sxs-lookup"><span data-stu-id="11a46-189">IIS Middleware checks each request it receives to confirm that the pairing token header value matches the environment variable value.</span></span> <span data-ttu-id="11a46-190">Belirteç değerleri eşleşirse, isteği günlüğe ve reddetti.</span><span class="sxs-lookup"><span data-stu-id="11a46-190">If the token values are mismatched, the request is logged and rejected.</span></span> <span data-ttu-id="11a46-191">Eşleştirme belirteci ortam değişkenine ve ANCM ve Kestrel arasındaki trafiğin sunucunun dışına bir konumdan erişilebilir değil.</span><span class="sxs-lookup"><span data-stu-id="11a46-191">The pairing token environment variable and the traffic between the ANCM and Kestrel aren't accessible from a location off of the server.</span></span> <span data-ttu-id="11a46-192">Eşleştirme belirteç değeri bilmeden bir saldırgan IIS Ara yazılımında denetimini atla istek gönderemez.</span><span class="sxs-lookup"><span data-stu-id="11a46-192">Without knowing the pairing token value, an attacker can't submit requests that bypass the check in the IIS Middleware.</span></span>

## <a name="next-steps"></a><span data-ttu-id="11a46-193">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="11a46-193">Next steps</span></span>

<span data-ttu-id="11a46-194">Daha fazla bilgi için aşağıdaki kaynaklara bakın:</span><span class="sxs-lookup"><span data-stu-id="11a46-194">For more information, see the following resources:</span></span>

* [<span data-ttu-id="11a46-195">Bu makale için örnek uygulama</span><span class="sxs-lookup"><span data-stu-id="11a46-195">Sample app for this article</span></span>](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/servers/aspnet-core-module/sample)
* [<span data-ttu-id="11a46-196">ASP.NET çekirdeği modülü kaynak kodu</span><span class="sxs-lookup"><span data-stu-id="11a46-196">ASP.NET Core Module source code</span></span>](https://github.com/aspnet/AspNetCoreModule)
* [<span data-ttu-id="11a46-197">ASP.NET Core Module Yapılandırma Başvurusu</span><span class="sxs-lookup"><span data-stu-id="11a46-197">ASP.NET Core Module Configuration Reference</span></span>](xref:host-and-deploy/aspnet-core-module)
* [<span data-ttu-id="11a46-198">IIS ile Windows’da barındırma</span><span class="sxs-lookup"><span data-stu-id="11a46-198">Host on Windows with IIS</span></span>](xref:host-and-deploy/iis/index)
