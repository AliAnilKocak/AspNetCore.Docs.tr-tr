---
title: ASP.NET Çekirdeğinde Yönlendirme
author: rick-anderson
description: ASP.NET Core yönlendirmenin HTTP isteklerini eşleştirmekten ve çalıştırılabilir uç noktalara göndermekten nasıl sorumlu olduğunu keşfedin.
monikerRange: '>= aspnetcore-2.1'
ms.author: riande
ms.custom: mvc
ms.date: 4/1/2020
uid: fundamentals/routing
ms.openlocfilehash: 5742ac6879ce46e01247ddd2f8bfe3e3b8a2a02a
ms.sourcegitcommit: 72792e349458190b4158fcbacb87caf3fc605268
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/06/2020
ms.locfileid: "80751152"
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="8f156-103">ASP.NET Çekirdeğinde Yönlendirme</span><span class="sxs-lookup"><span data-stu-id="8f156-103">Routing in ASP.NET Core</span></span>

<span data-ttu-id="8f156-104">Ryan [Nowak](https://github.com/rynowak), [Kirk Larkin](https://twitter.com/serpent5)ve [Rick Anderson](https://twitter.com/RickAndMSFT) tarafından</span><span class="sxs-lookup"><span data-stu-id="8f156-104">By [Ryan Nowak](https://github.com/rynowak), [Kirk Larkin](https://twitter.com/serpent5), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

::: moniker range=">= aspnetcore-3.0"

<span data-ttu-id="8f156-105">Yönlendirme, gelen HTTP isteklerini eşleştirmekten ve bu istekleri uygulamanın yürütülebilir uç noktalarına göndermekten sorumludur.</span><span class="sxs-lookup"><span data-stu-id="8f156-105">Routing is responsible for matching incoming HTTP requests and dispatching those requests to the app's executable endpoints.</span></span> <span data-ttu-id="8f156-106">[Uç noktalar,](#endpoint) uygulamanın çalıştırılabilir istek işleme kodu birimleridir.</span><span class="sxs-lookup"><span data-stu-id="8f156-106">[Endpoints](#endpoint) are the app's units of executable request-handling code.</span></span> <span data-ttu-id="8f156-107">Uç noktalar uygulamada tanımlanır ve uygulama başladığında yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-107">Endpoints are defined in the app and configured when the app starts.</span></span> <span data-ttu-id="8f156-108">Uç nokta eşleştirme işlemi, isteğin URL'sinden değerleri ayıklayabilir ve istek işleme için bu değerleri sağlayabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-108">The endpoint matching process can extract values from the request's URL and provide those values for request processing.</span></span> <span data-ttu-id="8f156-109">Uygulamadan gelen uç nokta bilgilerini kullanarak yönlendirme, uç noktalara eşlenen URL'ler de oluşturabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-109">Using endpoint information from the app, routing is also able to generate URLs that map to endpoints.</span></span>

<span data-ttu-id="8f156-110">Uygulamalar yönlendirmeyi şu kullanarak yapılandırabilir:</span><span class="sxs-lookup"><span data-stu-id="8f156-110">Apps can configure routing using:</span></span>

- <span data-ttu-id="8f156-111">Denetleyiciler</span><span class="sxs-lookup"><span data-stu-id="8f156-111">Controllers</span></span>
- <span data-ttu-id="8f156-112">Razor Pages</span><span class="sxs-lookup"><span data-stu-id="8f156-112">Razor Pages</span></span>
- <span data-ttu-id="8f156-113">SignalR</span><span class="sxs-lookup"><span data-stu-id="8f156-113">SignalR</span></span>
- <span data-ttu-id="8f156-114">gRPC Hizmetleri</span><span class="sxs-lookup"><span data-stu-id="8f156-114">gRPC Services</span></span>
- <span data-ttu-id="8f156-115">[Sistem Durumu Denetimleri](xref:host-and-deploy/health-checks)gibi uç nokta etkin [ara yazılım.](xref:fundamentals/middleware/index)</span><span class="sxs-lookup"><span data-stu-id="8f156-115">Endpoint-enabled [middleware](xref:fundamentals/middleware/index) such as [Health Checks](xref:host-and-deploy/health-checks).</span></span>
- <span data-ttu-id="8f156-116">Delegeler ve lambdas yönlendirme ile kayıtlı.</span><span class="sxs-lookup"><span data-stu-id="8f156-116">Delegates and lambdas registered with routing.</span></span>

<span data-ttu-id="8f156-117">Bu belge, ASP.NET Core yönlendirmesinin alt düzey ayrıntılarını kapsar.</span><span class="sxs-lookup"><span data-stu-id="8f156-117">This document covers low-level details of ASP.NET Core routing.</span></span> <span data-ttu-id="8f156-118">Yönlendirme yapılandırma hakkında bilgi için:</span><span class="sxs-lookup"><span data-stu-id="8f156-118">For information on configuring routing:</span></span>

* <span data-ttu-id="8f156-119">Denetleyiciler için <xref:mvc/controllers/routing>bkz.</span><span class="sxs-lookup"><span data-stu-id="8f156-119">For controllers, see <xref:mvc/controllers/routing>.</span></span>
* <span data-ttu-id="8f156-120">Razor Pages kuralları için <xref:razor-pages/razor-pages-conventions>bkz.</span><span class="sxs-lookup"><span data-stu-id="8f156-120">For Razor Pages conventions, see <xref:razor-pages/razor-pages-conventions>.</span></span>

<span data-ttu-id="8f156-121">Bu belgede açıklanan uç nokta yönlendirme sistemi, Core 3.0 ve sonraki ASP.NET için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-121">The endpoint routing system described in this document applies to ASP.NET Core 3.0 and later.</span></span> <span data-ttu-id="8f156-122">Dayalı önceki yönlendirme sistemi hakkında bilgi <xref:Microsoft.AspNetCore.Routing.IRouter>için, aşağıdaki yaklaşımlardan birini kullanarak ASP.NET Core 2.1 sürümünü seçin:</span><span class="sxs-lookup"><span data-stu-id="8f156-122">For information on the previous routing system based on <xref:Microsoft.AspNetCore.Routing.IRouter>, select the ASP.NET Core 2.1 version using one of the following approaches:</span></span>

* <span data-ttu-id="8f156-123">Önceki sürümün sürüm seçici.</span><span class="sxs-lookup"><span data-stu-id="8f156-123">The version selector for a previous version.</span></span>
* <span data-ttu-id="8f156-124">[Core 2.1 yönlendirmeASP.NET](https://docs.microsoft.com/aspnet/core/fundamentals/routing?view=aspnetcore-2.1)seçin.</span><span class="sxs-lookup"><span data-stu-id="8f156-124">Select [ASP.NET Core 2.1 routing](https://docs.microsoft.com/aspnet/core/fundamentals/routing?view=aspnetcore-2.1).</span></span>

<span data-ttu-id="8f156-125">[Örnek kodu görüntüleme veya indirme](https://github.com/aspnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples/3.x) ( nasıl[indirilir](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="8f156-125">[View or download sample code](https://github.com/aspnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples/3.x) ([how to download](xref:index#how-to-download-a-sample))</span></span>

<span data-ttu-id="8f156-126">Bu belgenin karşıdan yükleme örnekleri `Startup` belirli bir sınıf tarafından etkinleştirilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-126">The download samples for this document are enabled by a specific `Startup` class.</span></span> <span data-ttu-id="8f156-127">Belirli bir örneği çalıştırmak *Program.cs* için, istenen `Startup` sınıfı aramak için Program.cs değiştirin.</span><span class="sxs-lookup"><span data-stu-id="8f156-127">To run a specific sample, modify *Program.cs* to call the desired `Startup` class.</span></span>

## <a name="routing-basics"></a><span data-ttu-id="8f156-128">Yönlendirme temelleri</span><span class="sxs-lookup"><span data-stu-id="8f156-128">Routing basics</span></span>

<span data-ttu-id="8f156-129">Tüm ASP.NET Core şablonları oluşturulan kodda yönlendirme içerir.</span><span class="sxs-lookup"><span data-stu-id="8f156-129">All ASP.NET Core templates include routing in the generated code.</span></span> <span data-ttu-id="8f156-130">Yönlendirme, [middleware](xref:fundamentals/middleware/index) boru hattında `Startup.Configure`kayıtlıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-130">Routing is registered in the [middleware](xref:fundamentals/middleware/index) pipeline in `Startup.Configure`.</span></span>

<span data-ttu-id="8f156-131">Aşağıdaki kod yönlendirmenin temel bir örneğini gösterir:</span><span class="sxs-lookup"><span data-stu-id="8f156-131">The following code shows a basic example of routing:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/Startup.cs?name=snippet&highlight=8,10)]

<span data-ttu-id="8f156-132">Yönlendirme tarafından kayıtlı bir ara yazılım <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseRouting*> çifti <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseEndpoints*>kullanır ve:</span><span class="sxs-lookup"><span data-stu-id="8f156-132">Routing uses a pair of middleware, registered by <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseRouting*> and <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseEndpoints*>:</span></span>

* <span data-ttu-id="8f156-133">`UseRouting`ara yazılım boru hattına eşleşen rota ekler.</span><span class="sxs-lookup"><span data-stu-id="8f156-133">`UseRouting` adds route matching to the middleware pipeline.</span></span> <span data-ttu-id="8f156-134">Bu ara yazılım, uygulamada tanımlanan uç nokta kümesine bakar ve isteğe göre [en iyi eşleşmeyi](#urlm) seçer.</span><span class="sxs-lookup"><span data-stu-id="8f156-134">This middleware looks at the set of endpoints defined in the app, and selects the [best match](#urlm) based on the request.</span></span>
* <span data-ttu-id="8f156-135">`UseEndpoints`ara yazılım ardışık noktasına uç nokta yürütme ekler.</span><span class="sxs-lookup"><span data-stu-id="8f156-135">`UseEndpoints` adds endpoint execution to the middleware pipeline.</span></span> <span data-ttu-id="8f156-136">Seçili bitiş noktasıyla ilişkili temsilciyi çalıştırZ.</span><span class="sxs-lookup"><span data-stu-id="8f156-136">It runs the delegate associated with the selected endpoint.</span></span>

<span data-ttu-id="8f156-137">Önceki örnek, [MapGet](xref:Microsoft.AspNetCore.Builder.EndpointRouteBuilderExtensions.MapGet*) yöntemini kullanarak kod bitiş noktasına giden tek bir *rotayı* içerir:</span><span class="sxs-lookup"><span data-stu-id="8f156-137">The preceding example includes a single *route to code* endpoint using the [MapGet](xref:Microsoft.AspNetCore.Builder.EndpointRouteBuilderExtensions.MapGet*) method:</span></span>

* <span data-ttu-id="8f156-138">Bir HTTP `GET` isteği kök URL'ye `/`gönderildiğinde:</span><span class="sxs-lookup"><span data-stu-id="8f156-138">When an HTTP `GET` request is sent to the root URL `/`:</span></span>
  * <span data-ttu-id="8f156-139">Gösterilen istek temsilcisi yürütülür.</span><span class="sxs-lookup"><span data-stu-id="8f156-139">The request delegate shown executes.</span></span>
  * <span data-ttu-id="8f156-140">`Hello World!`HTTP yanıtına yazılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-140">`Hello World!` is written to the HTTP response.</span></span> <span data-ttu-id="8f156-141">Varsayılan olarak, kök `/` `https://localhost:5001/`URL.</span><span class="sxs-lookup"><span data-stu-id="8f156-141">By default, the root URL `/` is `https://localhost:5001/`.</span></span>
* <span data-ttu-id="8f156-142">İstek yöntemi değilse `GET` veya kök URL `/`değilse, rota eşleşmeleri yok ve http 404 döndürülür.</span><span class="sxs-lookup"><span data-stu-id="8f156-142">If the request method is not `GET` or the root URL is not `/`, no route matches and an HTTP 404 is returned.</span></span>

### <a name="endpoint"></a><span data-ttu-id="8f156-143">Uç Nokta</span><span class="sxs-lookup"><span data-stu-id="8f156-143">Endpoint</span></span>

<a name="endpoint"></a>

<span data-ttu-id="8f156-144">Yöntem `MapGet` bir **bitiş noktası**tanımlamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-144">The `MapGet` method is used to define an **endpoint**.</span></span> <span data-ttu-id="8f156-145">Bitiş noktası şu olabilir:</span><span class="sxs-lookup"><span data-stu-id="8f156-145">An endpoint is something that can be:</span></span>

* <span data-ttu-id="8f156-146">URL ve HTTP yöntemini eşleştirerek seçilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-146">Selected, by matching the URL and HTTP method.</span></span>
* <span data-ttu-id="8f156-147">Temsilci çalıştırılarak yürütülür.</span><span class="sxs-lookup"><span data-stu-id="8f156-147">Executed, by running the delegate.</span></span>

<span data-ttu-id="8f156-148">Uygulama tarafından eşleşip çalıştırılabilen uç noktalar `UseEndpoints`.</span><span class="sxs-lookup"><span data-stu-id="8f156-148">Endpoints that can be matched and executed by the app are configured in `UseEndpoints`.</span></span> <span data-ttu-id="8f156-149">Örneğin, <xref:Microsoft.AspNetCore.Builder.EndpointRouteBuilderExtensions.MapGet*>, <xref:Microsoft.AspNetCore.Builder.EndpointRouteBuilderExtensions.MapPost*>, ve [benzer yöntemler](xref:Microsoft.AspNetCore.Builder.EndpointRouteBuilderExtensions) istek temsilcilerini yönlendirme sistemine bağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-149">For example, <xref:Microsoft.AspNetCore.Builder.EndpointRouteBuilderExtensions.MapGet*>, <xref:Microsoft.AspNetCore.Builder.EndpointRouteBuilderExtensions.MapPost*>, and [similar methods](xref:Microsoft.AspNetCore.Builder.EndpointRouteBuilderExtensions) connect request delegates to the routing system.</span></span>
<span data-ttu-id="8f156-150">Core çerçeve özelliklerini yönlendirme sistemine bağlamak için ek yöntemler ASP.NET kullanılabilir:</span><span class="sxs-lookup"><span data-stu-id="8f156-150">Additional methods can be used to connect ASP.NET Core framework features to the routing system:</span></span>
- [<span data-ttu-id="8f156-151">Razor Sayfalar için MapRazorPages</span><span class="sxs-lookup"><span data-stu-id="8f156-151">MapRazorPages for Razor Pages</span></span>](xref:Microsoft.AspNetCore.Builder.RazorPagesEndpointRouteBuilderExtensions.MapRazorPages*)
- [<span data-ttu-id="8f156-152">Denetleyiciler için MapControllers</span><span class="sxs-lookup"><span data-stu-id="8f156-152">MapControllers for controllers</span></span>](xref:Microsoft.AspNetCore.Builder.ControllerEndpointRouteBuilderExtensions.MapControllers*)
- [<span data-ttu-id="8f156-153">SignalR\<için MapHub THub></span><span class="sxs-lookup"><span data-stu-id="8f156-153">MapHub\<THub> for SignalR</span></span>](xref:Microsoft.AspNetCore.SignalR.HubRouteBuilder.MapHub*) 
- [<span data-ttu-id="8f156-154">MapGrpcService\<TService> gRPC için</span><span class="sxs-lookup"><span data-stu-id="8f156-154">MapGrpcService\<TService> for gRPC</span></span>](xref:grpc/aspnetcore)

<span data-ttu-id="8f156-155">Aşağıdaki örnekte, daha karmaşık bir rota şablonuyla yönlendirme gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="8f156-155">The following example shows routing with a more sophisticated route template:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/RouteTemplateStartup.cs?name=snippet)]

<span data-ttu-id="8f156-156">Dize `/hello/{name:alpha}` bir **rota şablonudur.**</span><span class="sxs-lookup"><span data-stu-id="8f156-156">The string `/hello/{name:alpha}` is a **route template**.</span></span> <span data-ttu-id="8f156-157">Bitiş noktasının nasıl eşleştinin yapılandırılması için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-157">It is used to configure how the endpoint is matched.</span></span> <span data-ttu-id="8f156-158">Bu durumda, şablon eşleşir:</span><span class="sxs-lookup"><span data-stu-id="8f156-158">In this case, the template matches:</span></span>

* <span data-ttu-id="8f156-159">Bir URL gibi`/hello/Ryan`</span><span class="sxs-lookup"><span data-stu-id="8f156-159">A URL like `/hello/Ryan`</span></span>
* <span data-ttu-id="8f156-160">Alfabetik karakter `/hello/` dizisi ile başlayan herhangi bir URL yolu.</span><span class="sxs-lookup"><span data-stu-id="8f156-160">Any URL path that begins with `/hello/` followed by a sequence of alphabetic characters.</span></span>  <span data-ttu-id="8f156-161">`:alpha`yalnızca alfabetik karakterlerle eşleşen bir rota kısıtlaması uygular.</span><span class="sxs-lookup"><span data-stu-id="8f156-161">`:alpha` applies a route constraint that matches only alphabetic characters.</span></span> <span data-ttu-id="8f156-162">[Rota kısıtlamaları](#route-constraint-reference) daha sonra bu belgede açıklanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-162">[Route constraints](#route-constraint-reference) are explained later in this document.</span></span>

<span data-ttu-id="8f156-163">URL yolunun ikinci bölümü: `{name:alpha}`</span><span class="sxs-lookup"><span data-stu-id="8f156-163">The second segment of the URL path, `{name:alpha}`:</span></span>

* <span data-ttu-id="8f156-164">Parametreye `name` bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-164">Is bound to the `name` parameter.</span></span>
* <span data-ttu-id="8f156-165">Yakalanır ve [httpRequest.RouteValues'te](xref:Microsoft.AspNetCore.Http.HttpRequest.RouteValues*)saklanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-165">Is captured and stored in [HttpRequest.RouteValues](xref:Microsoft.AspNetCore.Http.HttpRequest.RouteValues*).</span></span>

<span data-ttu-id="8f156-166">Bu belgede açıklanan uç nokta yönlendirme sistemi, Core 3.0 ASP.NET itibariyle yenidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-166">The endpoint routing system described in this document is new as of ASP.NET Core 3.0.</span></span> <span data-ttu-id="8f156-167">Ancak, ASP.NET Core'un tüm sürümleri aynı rota şablonu özelliklerini ve rota kısıtlamalarını destekler.</span><span class="sxs-lookup"><span data-stu-id="8f156-167">However, all versions of ASP.NET Core support the same set of route template features and route constraints.</span></span>

<span data-ttu-id="8f156-168">Aşağıdaki örnek, [sistem durumu denetimleri](xref:host-and-deploy/health-checks) ve yetkilendirme ile yönlendirmeyi gösterir:</span><span class="sxs-lookup"><span data-stu-id="8f156-168">The following example shows routing with [health checks](xref:host-and-deploy/health-checks) and authorization:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/AuthorizationStartup.cs?name=snippet)]

[!INCLUDE[request localized comments](~/includes/code-comments-loc.md)]

<span data-ttu-id="8f156-169">Önceki örnek, aşağıdakileri gösterir:</span><span class="sxs-lookup"><span data-stu-id="8f156-169">The preceding example demonstrates how:</span></span>

* <span data-ttu-id="8f156-170">Yetkilendirme ara ware yönlendirme ile kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-170">The authorization middleware can be used with routing.</span></span>
* <span data-ttu-id="8f156-171">Uç noktalar yetkilendirme davranışını yapılandırmak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-171">Endpoints can be used to configure authorization behavior.</span></span>

<span data-ttu-id="8f156-172">Arama, <xref:Microsoft.AspNetCore.Builder.HealthCheckEndpointRouteBuilderExtensions.MapHealthChecks*> bir sistem durumu denetimi bitiş noktası ekler.</span><span class="sxs-lookup"><span data-stu-id="8f156-172">The <xref:Microsoft.AspNetCore.Builder.HealthCheckEndpointRouteBuilderExtensions.MapHealthChecks*> call adds a health check endpoint.</span></span> <span data-ttu-id="8f156-173">Bu <xref:Microsoft.AspNetCore.Builder.AuthorizationEndpointConventionBuilderExtensions.RequireAuthorization*> çağrıya zincirleme, bitiş noktasına bir yetkilendirme ilkesi iliştiriyor.</span><span class="sxs-lookup"><span data-stu-id="8f156-173">Chaining <xref:Microsoft.AspNetCore.Builder.AuthorizationEndpointConventionBuilderExtensions.RequireAuthorization*> on to this call attaches an authorization policy to the endpoint.</span></span>

<span data-ttu-id="8f156-174">Arama <xref:Microsoft.AspNetCore.Builder.AuthAppBuilderExtensions.UseAuthentication*> <xref:Microsoft.AspNetCore.Builder.AuthorizationAppBuilderExtensions.UseAuthorization*> ve kimlik doğrulama ve yetkilendirme ara ware ekler.</span><span class="sxs-lookup"><span data-stu-id="8f156-174">Calling <xref:Microsoft.AspNetCore.Builder.AuthAppBuilderExtensions.UseAuthentication*> and <xref:Microsoft.AspNetCore.Builder.AuthorizationAppBuilderExtensions.UseAuthorization*> adds the authentication and authorization middleware.</span></span> <span data-ttu-id="8f156-175">Bu ara yazılımlar <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseRouting*> `UseEndpoints` arasına yerleştirilir ve böylece şunlar arasında dır:</span><span class="sxs-lookup"><span data-stu-id="8f156-175">These middleware are placed between <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseRouting*> and `UseEndpoints` so that they can:</span></span>

* <span data-ttu-id="8f156-176">Hangi bitiş noktasının `UseRouting`seçili olduğunu görün.</span><span class="sxs-lookup"><span data-stu-id="8f156-176">See which endpoint was selected by `UseRouting`.</span></span>
* <span data-ttu-id="8f156-177">Bitiş noktasına gönderilmeden önce <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseEndpoints*> bir yetkilendirme ilkesi uygulayın.</span><span class="sxs-lookup"><span data-stu-id="8f156-177">Apply an authorization policy before <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseEndpoints*> dispatches to the endpoint.</span></span>

<a name="metadata"></a>

### <a name="endpoint-metadata"></a><span data-ttu-id="8f156-178">Uç nokta meta verileri</span><span class="sxs-lookup"><span data-stu-id="8f156-178">Endpoint metadata</span></span>

<span data-ttu-id="8f156-179">Önceki örnekte, iki uç nokta vardır, ancak yalnızca sistem durumu denetimi bitiş noktasının bir yetkilendirme ilkesi eklenmiş olması vardır.</span><span class="sxs-lookup"><span data-stu-id="8f156-179">In the preceding example, there are two endpoints, but only the health check endpoint has an authorization policy attached.</span></span> <span data-ttu-id="8f156-180">İstek, sistem durumu denetimi bitiş `/healthz`noktasıyla eşleşiyorsa, yetkilendirme denetimi gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-180">If the request matches the health check endpoint, `/healthz`, an authorization check is performed.</span></span> <span data-ttu-id="8f156-181">Bu, uç noktaların kendilerine eklenmiş ekstra veri olabileceğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="8f156-181">This demonstrates that endpoints can have extra data attached to them.</span></span> <span data-ttu-id="8f156-182">Bu ekstra veri uç nokta **meta veri**denir:</span><span class="sxs-lookup"><span data-stu-id="8f156-182">This extra data is called endpoint **metadata**:</span></span>

* <span data-ttu-id="8f156-183">Meta veriler yönlendirmeye duyarlı ara yazılımlarla işlenebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-183">The metadata can be processed by routing-aware middleware.</span></span>
* <span data-ttu-id="8f156-184">Meta veriler herhangi bir .NET türünden olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-184">The metadata can be of any .NET type.</span></span>

## <a name="routing-concepts"></a><span data-ttu-id="8f156-185">Yönlendirme kavramları</span><span class="sxs-lookup"><span data-stu-id="8f156-185">Routing concepts</span></span>

<span data-ttu-id="8f156-186">Yönlendirme sistemi, güçlü **uç nokta** konseptini ekleyerek ara yazılım boru hattının üzerine inşa eder.</span><span class="sxs-lookup"><span data-stu-id="8f156-186">The routing system builds on top of the middleware pipeline by adding the powerful **endpoint** concept.</span></span> <span data-ttu-id="8f156-187">Uç noktalar, yönlendirme, yetkilendirme ve ASP.NET Core sistemlerinin herhangi bir sayısı açısından uygulamanın işlevselliğinin birbirinden farklı birimlerini temsil eder.</span><span class="sxs-lookup"><span data-stu-id="8f156-187">Endpoints represent units of the app's functionality that are distinct from each other in terms of routing, authorization, and any number of ASP.NET Core's systems.</span></span>

<a name="endpoint"></a>

### <a name="aspnet-core-endpoint-definition"></a><span data-ttu-id="8f156-188">ASP.NET Temel uç nokta tanımı</span><span class="sxs-lookup"><span data-stu-id="8f156-188">ASP.NET Core endpoint definition</span></span>

<span data-ttu-id="8f156-189">ASP.NET Core bitiş noktası:</span><span class="sxs-lookup"><span data-stu-id="8f156-189">An ASP.NET Core endpoint is:</span></span>

* <span data-ttu-id="8f156-190">Çalıştırılabilir: Bir <xref:Microsoft.AspNetCore.Http.Endpoint.RequestDelegate>.</span><span class="sxs-lookup"><span data-stu-id="8f156-190">Executable: Has a <xref:Microsoft.AspNetCore.Http.Endpoint.RequestDelegate>.</span></span>
* <span data-ttu-id="8f156-191">Genişletilebilir: Meta [veri](xref:Microsoft.AspNetCore.Http.Endpoint.Metadata*) koleksiyonu vardır.</span><span class="sxs-lookup"><span data-stu-id="8f156-191">Extensible: Has a [Metadata](xref:Microsoft.AspNetCore.Http.Endpoint.Metadata*) collection.</span></span>
* <span data-ttu-id="8f156-192">Seçilebilir: İsteğe bağlı olarak, [yönlendirme bilgileri](xref:Microsoft.AspNetCore.Routing.RouteEndpoint.RoutePattern*)vardır.</span><span class="sxs-lookup"><span data-stu-id="8f156-192">Selectable: Optionally, has [routing information](xref:Microsoft.AspNetCore.Routing.RouteEndpoint.RoutePattern*).</span></span>
* <span data-ttu-id="8f156-193">Sayısal: Uç noktalarının toplanması <xref:Microsoft.AspNetCore.Routing.EndpointDataSource> [DI'den](xref:fundamentals/dependency-injection)alınarak listelenebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-193">Enumerable: The collection of endpoints can be listed by retrieving the <xref:Microsoft.AspNetCore.Routing.EndpointDataSource> from [DI](xref:fundamentals/dependency-injection).</span></span>

<span data-ttu-id="8f156-194">Aşağıdaki kod, geçerli istekle eşleşen bitiş noktasının nasıl alınıp denetlenerek alınabildiğini gösterir:</span><span class="sxs-lookup"><span data-stu-id="8f156-194">The following code shows how to retrieve and inspect the endpoint matching the current request:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/EndpointInspectorStartup.cs?name=snippet)]

<span data-ttu-id="8f156-195">Bitiş noktası seçilirse, `HttpContext`'den alınabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-195">The endpoint, if selected, can be retrieved from the `HttpContext`.</span></span> <span data-ttu-id="8f156-196">Özellikleri kontrol edilebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-196">Its properties can be inspected.</span></span> <span data-ttu-id="8f156-197">Uç nokta nesneleri değişmezdir ve oluşturulduktan sonra değiştirilemez.</span><span class="sxs-lookup"><span data-stu-id="8f156-197">Endpoint objects are immutable and cannot be modified after creation.</span></span> <span data-ttu-id="8f156-198">Bitiş noktasının en yaygın <xref:Microsoft.AspNetCore.Routing.RouteEndpoint>türü bir .</span><span class="sxs-lookup"><span data-stu-id="8f156-198">The most common type of endpoint is a <xref:Microsoft.AspNetCore.Routing.RouteEndpoint>.</span></span> <span data-ttu-id="8f156-199">`RouteEndpoint`yönlendirme sistemi tarafından seçilmesini sağlayan bilgileri içerir.</span><span class="sxs-lookup"><span data-stu-id="8f156-199">`RouteEndpoint` includes information that allows it to be to selected by the routing system.</span></span>

<span data-ttu-id="8f156-200">Önceki kodda, [uygulama. Kullanın](xref:Microsoft.AspNetCore.Builder.UseExtensions.Use*) sıralı bir [ara yazılım](xref:fundamentals/middleware/index)yapılandırır.</span><span class="sxs-lookup"><span data-stu-id="8f156-200">In the preceding code, [app.Use](xref:Microsoft.AspNetCore.Builder.UseExtensions.Use*) configures an in-line [middleware](xref:fundamentals/middleware/index).</span></span>

<a name="mt"></a>

<span data-ttu-id="8f156-201">Aşağıdaki kod, ardışık alanda `app.Use` çağrıldığına bağlı olarak bir bitiş noktası olmayabileceğini gösterir:</span><span class="sxs-lookup"><span data-stu-id="8f156-201">The following code shows that, depending on where `app.Use` is called in the pipeline, there may not be an endpoint:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/MiddlewareFlowStartup.cs?name=snippet)]

<span data-ttu-id="8f156-202">Bu önceki örnek, bir bitiş noktası seçilip seçilmediğini gösteren ifadeler ekler. `Console.WriteLine`</span><span class="sxs-lookup"><span data-stu-id="8f156-202">This preceding sample adds `Console.WriteLine` statements that display whether or not an endpoint has been selected.</span></span> <span data-ttu-id="8f156-203">Netlik için, örnek sağlanan `/` bitiş noktasına bir görüntü adı atar.</span><span class="sxs-lookup"><span data-stu-id="8f156-203">For clarity, the sample assigns a display name to the provided `/` endpoint.</span></span>

<span data-ttu-id="8f156-204">Bu kodu bir EKRAN `/` URL'si ile çalıştırma:</span><span class="sxs-lookup"><span data-stu-id="8f156-204">Running this code with a URL of `/` displays:</span></span>

```txt
1. Endpoint: (null)
2. Endpoint: Hello
3. Endpoint: Hello
```

<span data-ttu-id="8f156-205">Bu kodu diğer URL ekranlarıyla çalıştırma:</span><span class="sxs-lookup"><span data-stu-id="8f156-205">Running this code with any other URL displays:</span></span>

```txt
1. Endpoint: (null)
2. Endpoint: (null)
4. Endpoint: (null)
```

<span data-ttu-id="8f156-206">Bu çıktı şunu göstermektedir:</span><span class="sxs-lookup"><span data-stu-id="8f156-206">This output demonstrates that:</span></span>

* <span data-ttu-id="8f156-207">Bitiş noktası her zaman `UseRouting` null önce denir.</span><span class="sxs-lookup"><span data-stu-id="8f156-207">The endpoint is always null before `UseRouting` is called.</span></span>
* <span data-ttu-id="8f156-208">Bir eşleşme bulunursa, bitiş noktası ile `UseRouting` <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseEndpoints*>.'nin arasında null olmayan</span><span class="sxs-lookup"><span data-stu-id="8f156-208">If a match is found, the endpoint is non-null between `UseRouting` and <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseEndpoints*>.</span></span>
* <span data-ttu-id="8f156-209">Bir `UseEndpoints` eşleşme bulunduğunda ara yazılım **terminaldir.**</span><span class="sxs-lookup"><span data-stu-id="8f156-209">The `UseEndpoints` middleware is **terminal** when a match is found.</span></span> <span data-ttu-id="8f156-210">[Terminal ara yazılımları](#tm) daha sonra bu belgede tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-210">[Terminal middleware](#tm) is defined later in this document.</span></span>
* <span data-ttu-id="8f156-211">Yalnızca eşleşme `UseEndpoints` bulunamayınca çalıştırdıktan sonra ara yazılım.</span><span class="sxs-lookup"><span data-stu-id="8f156-211">The middleware after `UseEndpoints` execute only when no match is found.</span></span>

<span data-ttu-id="8f156-212">Ara `UseRouting` yazılım, bitiş noktasını geçerli içeriğe eklemek için [SetEndpoint](xref:Microsoft.AspNetCore.Http.EndpointHttpContextExtensions.SetEndpoint*) yöntemini kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-212">The `UseRouting` middleware uses the [SetEndpoint](xref:Microsoft.AspNetCore.Http.EndpointHttpContextExtensions.SetEndpoint*) method to attach the endpoint to the current context.</span></span> <span data-ttu-id="8f156-213">Aracıyı `UseRouting` özel mantıkla değiştirmek ve yine de uç noktaları kullanmanın avantajlarından yararlanmak mümkündür.</span><span class="sxs-lookup"><span data-stu-id="8f156-213">It's possible to replace the `UseRouting` middleware with custom logic and still get the benefits of using endpoints.</span></span> <span data-ttu-id="8f156-214">Uç noktalar ara yazılım gibi düşük düzeyli bir ilkeldir ve yönlendirme uygulamasıyla birleştiğinde değildir.</span><span class="sxs-lookup"><span data-stu-id="8f156-214">Endpoints are a low-level primitive like middleware, and aren't coupled to the routing implementation.</span></span> <span data-ttu-id="8f156-215">Çoğu uygulamanın özel mantıkla değiştirilmesi `UseRouting` gerekmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-215">Most apps don't need to replace `UseRouting` with custom logic.</span></span>

<span data-ttu-id="8f156-216">Ara `UseEndpoints` yazılım, `UseRouting` ara yazılımla birlikte kullanılmak üzere tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="8f156-216">The `UseEndpoints` middleware is designed to be used in tandem with the `UseRouting` middleware.</span></span> <span data-ttu-id="8f156-217">Bir bitiş noktası yürütmek için temel mantık karmaşık değildir.</span><span class="sxs-lookup"><span data-stu-id="8f156-217">The core logic to execute an endpoint isn't complicated.</span></span> <span data-ttu-id="8f156-218">Bitiş <xref:Microsoft.AspNetCore.Http.EndpointHttpContextExtensions.GetEndpoint*> noktasını almak ve sonra özelliğini <xref:Microsoft.AspNetCore.Http.Endpoint.RequestDelegate> çağırmak için kullanın.</span><span class="sxs-lookup"><span data-stu-id="8f156-218">Use <xref:Microsoft.AspNetCore.Http.EndpointHttpContextExtensions.GetEndpoint*> to retrieve the endpoint, and then invoke its <xref:Microsoft.AspNetCore.Http.Endpoint.RequestDelegate> property.</span></span>

<span data-ttu-id="8f156-219">Aşağıdaki kod, ara yazılımların yönlendirmeyi nasıl etkileyebileceğini veya buna tepki verebileceğini gösterir:</span><span class="sxs-lookup"><span data-stu-id="8f156-219">The following code demonstrates how middleware can influence or react to routing:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/IntegratedMiddlewareStartup.cs?name=snippet)]

<span data-ttu-id="8f156-220">Önceki örnek iki önemli kavram gösterir:</span><span class="sxs-lookup"><span data-stu-id="8f156-220">The preceding example demonstrates two important concepts:</span></span>

* <span data-ttu-id="8f156-221">Ara yazılım, `UseRouting` yönlendirmenin üzerinde çalıştığı verileri değiştirmek için önce çalıştırılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-221">Middleware can run before `UseRouting` to modify the data that routing operates upon.</span></span>
    * <span data-ttu-id="8f156-222">Yönlendirmeden önce görünen genellikle ara yazılım, isteğin bazı özelliğini <xref:Microsoft.AspNetCore.Builder.RewriteBuilderExtensions.UseRewriter*> <xref:Microsoft.AspNetCore.Builder.HttpMethodOverrideExtensions.UseHttpMethodOverride*>değiştirir, <xref:Microsoft.AspNetCore.Builder.UsePathBaseExtensions.UsePathBase*>örneğin , , veya .</span><span class="sxs-lookup"><span data-stu-id="8f156-222">Usually middleware that appears before routing modifies some property of the request, such as <xref:Microsoft.AspNetCore.Builder.RewriteBuilderExtensions.UseRewriter*>, <xref:Microsoft.AspNetCore.Builder.HttpMethodOverrideExtensions.UseHttpMethodOverride*>, or <xref:Microsoft.AspNetCore.Builder.UsePathBaseExtensions.UsePathBase*>.</span></span>
* <span data-ttu-id="8f156-223">Middleware arasında `UseRouting` ve <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseEndpoints*> bitiş noktası yürütülmeden önce yönlendirme sonuçlarını işlemek için çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8f156-223">Middleware can run between `UseRouting` and <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseEndpoints*> to process the results of routing before the endpoint is executed.</span></span>
    * <span data-ttu-id="8f156-224">Arasında `UseRouting` çalışan ara `UseEndpoints`yazılım:</span><span class="sxs-lookup"><span data-stu-id="8f156-224">Middleware that runs between `UseRouting` and `UseEndpoints`:</span></span>
      * <span data-ttu-id="8f156-225">Genellikle bitiş noktalarını anlamak için meta verileri inceler.</span><span class="sxs-lookup"><span data-stu-id="8f156-225">Usually inspects metadata to understand the endpoints.</span></span>
      * <span data-ttu-id="8f156-226">Genellikle güvenlik kararları verir, `UseAuthorization` tarafından `UseCors`yapılan ve .</span><span class="sxs-lookup"><span data-stu-id="8f156-226">Often makes security decisions, as done by `UseAuthorization` and `UseCors`.</span></span>
    * <span data-ttu-id="8f156-227">Ara yazılım ve meta verilerin birleşimi, son nokta başına ilkelerin yapılandırılmasına olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-227">The combination of middleware and metadata allows configuring policies per-endpoint.</span></span>

<span data-ttu-id="8f156-228">Önceki kod, uç nokta başına ilkeleri destekleyen özel bir ara yazılım örneğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="8f156-228">The preceding code shows an example of a custom middleware that supports per-endpoint policies.</span></span> <span data-ttu-id="8f156-229">Ara yazılım, konsola hassas verilere erişimin *denetim günlüğünü* yazar.</span><span class="sxs-lookup"><span data-stu-id="8f156-229">The middleware writes an *audit log* of access to sensitive data to the console.</span></span> <span data-ttu-id="8f156-230">Ara yazılım, `AuditPolicyAttribute` meta verilerle bir bitiş noktasını *denetlemek* üzere yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-230">The middleware can be configured to *audit* an endpoint with the `AuditPolicyAttribute` metadata.</span></span> <span data-ttu-id="8f156-231">Bu örnek, yalnızca hassas olarak işaretlenmiş uç noktaların denetlendiği bir *kabul* deseni gösterir.</span><span class="sxs-lookup"><span data-stu-id="8f156-231">This sample demonstrates an *opt-in* pattern where only endpoints that are marked as sensitive are audited.</span></span> <span data-ttu-id="8f156-232">Bu mantığı terste tanımlamak, örneğin güvenli olarak işaretlenmeyen her şeyi denetlemek mümkündür.</span><span class="sxs-lookup"><span data-stu-id="8f156-232">It's possible to define this logic in reverse, auditing everything that isn't marked as safe, for example.</span></span> <span data-ttu-id="8f156-233">Uç nokta meta veri sistemi esnektir.</span><span class="sxs-lookup"><span data-stu-id="8f156-233">The endpoint metadata system is flexible.</span></span> <span data-ttu-id="8f156-234">Bu mantık, kullanım örneğine uygun şekilde tasarlanabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-234">This logic could be designed in whatever way suits the use case.</span></span>

<span data-ttu-id="8f156-235">Önceki örnek kod uç noktalarının temel kavramlarını göstermek için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="8f156-235">The preceding sample code is intended to demonstrate the basic concepts of endpoints.</span></span> <span data-ttu-id="8f156-236">**Örnek üretim kullanımı için tasarlanmamıştır.**</span><span class="sxs-lookup"><span data-stu-id="8f156-236">**The sample is not intended for production use**.</span></span> <span data-ttu-id="8f156-237">Bir *denetim günlüğü* ara ware daha eksiksiz bir sürümü olacaktır:</span><span class="sxs-lookup"><span data-stu-id="8f156-237">A more complete version of an *audit log* middleware would:</span></span>

* <span data-ttu-id="8f156-238">Bir dosyaya veya veritabanına oturum açın.</span><span class="sxs-lookup"><span data-stu-id="8f156-238">Log to a file or database.</span></span>
* <span data-ttu-id="8f156-239">Kullanıcı, IP adresi, hassas bitiş noktasının adı ve daha fazlası gibi ayrıntıları ekleyin.</span><span class="sxs-lookup"><span data-stu-id="8f156-239">Include details such as the user, IP address, name of the sensitive endpoint, and more.</span></span>

<span data-ttu-id="8f156-240">Denetim ilkesi meta `AuditPolicyAttribute` verileri, `Attribute` denetleyiciler ve SignalR gibi sınıf tabanlı çerçevelerle daha kolay kullanım için bir veri olarak tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-240">The audit policy metadata `AuditPolicyAttribute` is defined as an `Attribute` for easier use with class-based frameworks such as controllers and SignalR.</span></span> <span data-ttu-id="8f156-241">*Koda rota*kullanırken:</span><span class="sxs-lookup"><span data-stu-id="8f156-241">When using *route to code*:</span></span>

* <span data-ttu-id="8f156-242">Meta veriler bir oluşturucu API ile eklenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-242">Metadata is attached with a builder API.</span></span>
* <span data-ttu-id="8f156-243">Sınıf tabanlı çerçeveler, uç noktaları oluştururken ilgili yöntem ve sınıf tüm öznitelikleri içerir.</span><span class="sxs-lookup"><span data-stu-id="8f156-243">Class-based frameworks include all attributes on the corresponding method and class when creating endpoints.</span></span>

<span data-ttu-id="8f156-244">Meta veri türleri için en iyi uygulamalar, bunları arabirim veya öznitelikler olarak tanımlamakiçindir.</span><span class="sxs-lookup"><span data-stu-id="8f156-244">The best practices for metadata types are to define them either as interfaces or attributes.</span></span> <span data-ttu-id="8f156-245">Arabirimler ve öznitelikler kodun yeniden kullanılmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="8f156-245">Interfaces and attributes allow code reuse.</span></span> <span data-ttu-id="8f156-246">Meta veri sistemi esnektir ve herhangi bir sınırlama getirmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-246">The metadata system is flexible and doesn't impose any limitations.</span></span>

<a name="tm"></a>

### <a name="comparing-a-terminal-middleware-and-routing"></a><span data-ttu-id="8f156-247">Terminal ara yazılımlarını ve yönlendirmeyi karşılaştırma</span><span class="sxs-lookup"><span data-stu-id="8f156-247">Comparing a terminal middleware and routing</span></span>

<span data-ttu-id="8f156-248">Aşağıdaki kod örneği, ara yazılım kullanarak yönlendirme ile tezat eder:</span><span class="sxs-lookup"><span data-stu-id="8f156-248">The following code sample contrasts using middleware with using routing:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/TerminalMiddlewareStartup.cs?name=snippet)]

<span data-ttu-id="8f156-249">Middleware ile `Approach 1:` gösterilen tarzı **terminal middleware**olduğunu.</span><span class="sxs-lookup"><span data-stu-id="8f156-249">The style of middleware shown with `Approach 1:` is **terminal middleware**.</span></span> <span data-ttu-id="8f156-250">Eşleşen bir işlem yaptığı için buna terminal ara yazılım denir:</span><span class="sxs-lookup"><span data-stu-id="8f156-250">It's called terminal middleware because it does a matching operation:</span></span>

* <span data-ttu-id="8f156-251">Önceki örnekteki eşleşen işlem `Path == "/"` ara yazılım ve `Path == "/Movie"` yönlendirme içindir.</span><span class="sxs-lookup"><span data-stu-id="8f156-251">The matching operation in the preceding sample is `Path == "/"` for the middleware and `Path == "/Movie"` for routing.</span></span>
* <span data-ttu-id="8f156-252">Bir eşleşme başarılı olduğunda, `next` ara yazılımı çağırmak yerine bazı işlevleri yürütür ve döndürür.</span><span class="sxs-lookup"><span data-stu-id="8f156-252">When a match is successful, it executes some functionality and returns, rather than invoking the `next` middleware.</span></span>

<span data-ttu-id="8f156-253">Aramayı sonlandırdığı, bazı işlevleri yürüttüğü ve sonra döndürdettiği için buna terminal ara ware denir.</span><span class="sxs-lookup"><span data-stu-id="8f156-253">It's called terminal middleware because it terminates the search, executes some functionality, and then returns.</span></span>

<span data-ttu-id="8f156-254">Terminal ara yazılımlarını ve yönlendirmeyi karşılaştırma:</span><span class="sxs-lookup"><span data-stu-id="8f156-254">Comparing a terminal middleware and routing:</span></span>
* <span data-ttu-id="8f156-255">Her iki yaklaşım da işleme ardışık ardışık ardışık işleminin sonlandırmasını sağlar:</span><span class="sxs-lookup"><span data-stu-id="8f156-255">Both approaches allow terminating the processing pipeline:</span></span>
    * <span data-ttu-id="8f156-256">Middleware yerine çağıran dönerek boru hattı `next`sona erer.</span><span class="sxs-lookup"><span data-stu-id="8f156-256">Middleware terminates the pipeline by returning rather than invoking `next`.</span></span>
    * <span data-ttu-id="8f156-257">Uç noktalar her zaman terminaldir.</span><span class="sxs-lookup"><span data-stu-id="8f156-257">Endpoints are always terminal.</span></span>
* <span data-ttu-id="8f156-258">Terminal ara yazılım, ara yazılımın ardışık alanda rasgele bir yerde konumlandırılamasına olanak tanır:</span><span class="sxs-lookup"><span data-stu-id="8f156-258">Terminal middleware allows positioning the middleware at an arbitrary place in the pipeline:</span></span>
    * <span data-ttu-id="8f156-259">Uç noktalar <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseEndpoints*>. konumunda yürütülür</span><span class="sxs-lookup"><span data-stu-id="8f156-259">Endpoints execute at the position of <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseEndpoints*>.</span></span>
* <span data-ttu-id="8f156-260">Terminal ara yazılım, ara yazılımın ne zaman eşleştiğini belirlemek için rasgele kod sağlar:</span><span class="sxs-lookup"><span data-stu-id="8f156-260">Terminal middleware allows arbitrary code to determine when the middleware matches:</span></span>
    * <span data-ttu-id="8f156-261">Özel rota eşleştirme kodu ayrıntılı olabilir ve doğru yazmak zor.</span><span class="sxs-lookup"><span data-stu-id="8f156-261">Custom route matching code can be verbose and difficult to write correctly.</span></span>
    * <span data-ttu-id="8f156-262">Yönlendirme, tipik uygulamalar için basit çözümler sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-262">Routing provides straightforward solutions for typical apps.</span></span> <span data-ttu-id="8f156-263">Çoğu uygulama özel rota eşleştirme kodu gerektirmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-263">Most apps don't require custom route matching code.</span></span>
* <span data-ttu-id="8f156-264">Gibi ara yazılım ile `UseAuthorization` uç `UseCors`noktaları arayüzü ve .</span><span class="sxs-lookup"><span data-stu-id="8f156-264">Endpoints interface with middleware such as `UseAuthorization` and `UseCors`.</span></span>
    * <span data-ttu-id="8f156-265">Yetkilendirme sistemi yle `UseAuthorization` bir `UseCors` terminal ara ware kullanma veya el ile interfacing gerektirir.</span><span class="sxs-lookup"><span data-stu-id="8f156-265">Using a terminal middleware with `UseAuthorization` or `UseCors` requires manual interfacing with the authorization system.</span></span>

<span data-ttu-id="8f156-266">[Bitiş noktası](#endpoint) her ikisini de tanımlar:</span><span class="sxs-lookup"><span data-stu-id="8f156-266">An [endpoint](#endpoint) defines both:</span></span>

* <span data-ttu-id="8f156-267">İstekleri işlemek için bir temsilci.</span><span class="sxs-lookup"><span data-stu-id="8f156-267">A delegate to process requests.</span></span>
* <span data-ttu-id="8f156-268">Rasgele meta veri koleksiyonu.</span><span class="sxs-lookup"><span data-stu-id="8f156-268">A collection of arbitrary metadata.</span></span> <span data-ttu-id="8f156-269">Meta veriler, her bitiş noktasına bağlı ilkelere ve yapılandırmaya dayalı çapraz kesme endişelerini uygulamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-269">The metadata is used to implement cross-cutting concerns based on policies and configuration attached to each endpoint.</span></span>

<span data-ttu-id="8f156-270">Terminal ara yazılım etkili bir araç olabilir, ancak şunları gerektirebilir:</span><span class="sxs-lookup"><span data-stu-id="8f156-270">Terminal middleware can be an effective tool, but can require:</span></span>

* <span data-ttu-id="8f156-271">Önemli miktarda kodlama ve test.</span><span class="sxs-lookup"><span data-stu-id="8f156-271">A significant amount of coding and testing.</span></span>
* <span data-ttu-id="8f156-272">İstenilen esneklik düzeyine ulaşmak için diğer sistemlerle manuel entegrasyon.</span><span class="sxs-lookup"><span data-stu-id="8f156-272">Manual integration with other systems to achieve the desired level of flexibility.</span></span>

<span data-ttu-id="8f156-273">Bir terminal ara yazılım yazmadan önce yönlendirme ile entegre düşünün.</span><span class="sxs-lookup"><span data-stu-id="8f156-273">Consider integrating with routing before writing a terminal middleware.</span></span>

<span data-ttu-id="8f156-274">[Harita](xref:fundamentals/middleware/index#branch-the-middleware-pipeline) ile tümleşen veya <xref:Microsoft.AspNetCore.Builder.MapWhenExtensions.MapWhen*> genellikle yönlendirme farkında uç noktasına dönüştürülebilen mevcut terminal ara ware.</span><span class="sxs-lookup"><span data-stu-id="8f156-274">Existing terminal middleware that integrates with [Map](xref:fundamentals/middleware/index#branch-the-middleware-pipeline) or <xref:Microsoft.AspNetCore.Builder.MapWhenExtensions.MapWhen*> can usually be turned into a routing aware endpoint.</span></span> <span data-ttu-id="8f156-275">[MapHealthChecks](https://github.com/aspnet/AspNetCore/blob/master/src/Middleware/HealthChecks/src/Builder/HealthCheckEndpointRouteBuilderExtensions.cs#L16) yönlendirici-ware için desen gösterir:</span><span class="sxs-lookup"><span data-stu-id="8f156-275">[MapHealthChecks](https://github.com/aspnet/AspNetCore/blob/master/src/Middleware/HealthChecks/src/Builder/HealthCheckEndpointRouteBuilderExtensions.cs#L16) demonstrates the pattern for router-ware:</span></span>
* <span data-ttu-id="8f156-276"><xref:Microsoft.AspNetCore.Routing.IEndpointRouteBuilder>Bir uzantı yöntemi yazın.</span><span class="sxs-lookup"><span data-stu-id="8f156-276">Write an extension method on <xref:Microsoft.AspNetCore.Routing.IEndpointRouteBuilder>.</span></span>
* <span data-ttu-id="8f156-277"><xref:Microsoft.AspNetCore.Routing.IEndpointRouteBuilder.CreateApplicationBuilder*>Kullanarak iç içe bir ara yazılım ardışık alanı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="8f156-277">Create a nested middleware pipeline using <xref:Microsoft.AspNetCore.Routing.IEndpointRouteBuilder.CreateApplicationBuilder*>.</span></span>
* <span data-ttu-id="8f156-278">Aracı yeni boru hattına takın.</span><span class="sxs-lookup"><span data-stu-id="8f156-278">Attach the middleware to the new pipeline.</span></span> <span data-ttu-id="8f156-279">Bu durumda, <xref:Microsoft.AspNetCore.Builder.HealthCheckApplicationBuilderExtensions.UseHealthChecks*>.</span><span class="sxs-lookup"><span data-stu-id="8f156-279">In this case, <xref:Microsoft.AspNetCore.Builder.HealthCheckApplicationBuilderExtensions.UseHealthChecks*>.</span></span>
* <span data-ttu-id="8f156-280"><xref:Microsoft.AspNetCore.Builder.IApplicationBuilder.Build*>bir <xref:Microsoft.AspNetCore.Http.RequestDelegate>içine middleware boru hattı .</span><span class="sxs-lookup"><span data-stu-id="8f156-280"><xref:Microsoft.AspNetCore.Builder.IApplicationBuilder.Build*> the middleware pipeline into a <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span></span>
* <span data-ttu-id="8f156-281">Yeni `Map` ara yazılım boru hattını arayın ve sağlayın.</span><span class="sxs-lookup"><span data-stu-id="8f156-281">Call `Map` and provide the new middleware pipeline.</span></span>
* <span data-ttu-id="8f156-282">Uzantı `Map` yöntemiyle sağlanan oluşturucu nesneyi döndürün.</span><span class="sxs-lookup"><span data-stu-id="8f156-282">Return the builder object provided by `Map` from the extension method.</span></span>

<span data-ttu-id="8f156-283">Aşağıdaki kod [MapHealthChecks](xref:host-and-deploy/health-checks)kullanımını gösterir:</span><span class="sxs-lookup"><span data-stu-id="8f156-283">The following code shows use of [MapHealthChecks](xref:host-and-deploy/health-checks):</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/AuthorizationStartup.cs?name=snippet)]

<span data-ttu-id="8f156-284">Önceki örnek, oluşturucu nesneyi döndürmenin neden önemli olduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="8f156-284">The preceding sample shows why returning the builder object is important.</span></span> <span data-ttu-id="8f156-285">Oluşturucu nesnesini döndürmek, uygulama geliştiricisinin bitiş noktası için yetkilendirme gibi ilkeleri yapılandırmasına olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-285">Returning the builder object allows the app developer to configure policies such as authorization for the endpoint.</span></span> <span data-ttu-id="8f156-286">Bu örnekte, sistem denetimleri aracı nın yetkilendirme sistemiyle doğrudan tümleştirmesi yoktur.</span><span class="sxs-lookup"><span data-stu-id="8f156-286">In this example, the health checks middleware has no direct integration with the authorization system.</span></span>

<span data-ttu-id="8f156-287">Meta veri sistemi terminal ara yazılım kullanarak genişletilebilirlik yazarları tarafından karşılaşılan sorunlara yanıt olarak oluşturuldu.</span><span class="sxs-lookup"><span data-stu-id="8f156-287">The metadata system was created in response to the problems encountered by extensibility authors using terminal middleware.</span></span> <span data-ttu-id="8f156-288">Her ara yazılımın yetkilendirme sistemiyle kendi tümleştirmesini uygulaması sorunludur.</span><span class="sxs-lookup"><span data-stu-id="8f156-288">It's problematic for each middleware to implement its own integration with the authorization system.</span></span>

<a name="urlm"></a>

### <a name="url-matching"></a><span data-ttu-id="8f156-289">URL eşleştirme</span><span class="sxs-lookup"><span data-stu-id="8f156-289">URL matching</span></span>

* <span data-ttu-id="8f156-290">Yönlendirmenin gelen istekle bitiş [noktasına eşleşmesi](#endpoint)işlemidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-290">Is the process by which routing matches an incoming request to an [endpoint](#endpoint).</span></span>
* <span data-ttu-id="8f156-291">URL yolundaki verilere ve üstbilgilere dayanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-291">Is based on data in the URL path and headers.</span></span>
* <span data-ttu-id="8f156-292">İstekteki herhangi bir veriyi dikkate almak için uzatılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-292">Can be extended to consider any data in the request.</span></span>

<span data-ttu-id="8f156-293">Bir yönlendirme ara ware yürütüldüğünde, `Endpoint` geçerli istekteki bir istek <xref:Microsoft.AspNetCore.Http.HttpContext> [özelliğine](xref:fundamentals/request-features) bir ve rota değerleri ayarlar:</span><span class="sxs-lookup"><span data-stu-id="8f156-293">When a routing middleware executes, it sets an `Endpoint` and route values to a [request feature](xref:fundamentals/request-features) on the <xref:Microsoft.AspNetCore.Http.HttpContext> from the current request:</span></span>

* <span data-ttu-id="8f156-294">[HttpContext.GetEndpoint'i](<xref:Microsoft.AspNetCore.Http.EndpointHttpContextExtensions.GetEndpoint*>) aramak bitiş noktasını alır.</span><span class="sxs-lookup"><span data-stu-id="8f156-294">Calling [HttpContext.GetEndpoint](<xref:Microsoft.AspNetCore.Http.EndpointHttpContextExtensions.GetEndpoint*>) gets the endpoint.</span></span>
* <span data-ttu-id="8f156-295">`HttpRequest.RouteValues`rota değerlerinin toplanmasını alır.</span><span class="sxs-lookup"><span data-stu-id="8f156-295">`HttpRequest.RouteValues` gets the collection of route values.</span></span>

<span data-ttu-id="8f156-296">Yönlendirme ara ware sonra çalışan [middleware](xref:fundamentals/middleware/index) bitiş noktasını incelemek ve harekete geçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8f156-296">[Middleware](xref:fundamentals/middleware/index) running after the routing middleware can inspect the endpoint and take action.</span></span> <span data-ttu-id="8f156-297">Örneğin, bir yetkilendirme ara ware bir yetkilendirme ilkesi için bitiş noktası meta veri toplama sorgulayabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-297">For example, an authorization middleware can interrogate the endpoint's metadata collection for an authorization policy.</span></span> <span data-ttu-id="8f156-298">İstek işleme ardışık ardışık ardışık tüm ara yazılım yürütüldükten sonra, seçilen bitiş noktasının temsilcisi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-298">After all of the middleware in the request processing pipeline is executed, the selected endpoint's delegate is invoked.</span></span>

<span data-ttu-id="8f156-299">Uç nokta yönlendirmedeki yönlendirme sistemi tüm sevk kararlarından sorumludur.</span><span class="sxs-lookup"><span data-stu-id="8f156-299">The routing system in endpoint routing is responsible for all dispatching decisions.</span></span> <span data-ttu-id="8f156-300">Ara yazılım, seçili bitiş noktasına dayalı ilkeler uyguladığından, aşağıdakilerin olması önemlidir:</span><span class="sxs-lookup"><span data-stu-id="8f156-300">Because the middleware applies policies based on the selected endpoint, it's important that:</span></span>

* <span data-ttu-id="8f156-301">Gönderme veya güvenlik ilkelerinin uygulanmasını etkileyebilecek herhangi bir karar yönlendirme sistemi içinde verilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-301">Any decision that can affect dispatching or the application of security policies is made inside the routing system.</span></span>

> [!WARNING]
> <span data-ttu-id="8f156-302">Geriye dönük uyumluluk için, bir Denetleyici veya Razor Pages bitiş noktası temsilcisi yürütüldüğünde, [RouteContext.RouteData'nın](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) özellikleri şimdiye kadar gerçekleştirilen istek işlemedayalı olarak uygun değerlere ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-302">For backwards-compatibility, when a Controller or Razor Pages endpoint delegate is executed, the properties of [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) are set to appropriate values based on the request processing performed thus far.</span></span>
>
> <span data-ttu-id="8f156-303">Tür, `RouteContext` gelecekteki bir sürümde eski olarak işaretlenir:</span><span class="sxs-lookup"><span data-stu-id="8f156-303">The `RouteContext` type will be marked obsolete in a future release:</span></span>
>
> * <span data-ttu-id="8f156-304">'ye `RouteData.Values` `HttpRequest.RouteValues`geçirin.</span><span class="sxs-lookup"><span data-stu-id="8f156-304">Migrate `RouteData.Values` to `HttpRequest.RouteValues`.</span></span>
> * <span data-ttu-id="8f156-305">Uç `RouteData.DataTokens` nokta meta verilerinden [IDataTokensMetadata](xref:Microsoft.AspNetCore.Routing.IDataTokensMetadata) almak için geçirin.</span><span class="sxs-lookup"><span data-stu-id="8f156-305">Migrate `RouteData.DataTokens` to retrieve [IDataTokensMetadata](xref:Microsoft.AspNetCore.Routing.IDataTokensMetadata) from the endpoint metadata.</span></span>

<span data-ttu-id="8f156-306">URL eşleştirme, yapılandırılabilir bir aşama lar kümesinde çalışır.</span><span class="sxs-lookup"><span data-stu-id="8f156-306">URL matching operates in a configurable set of phases.</span></span> <span data-ttu-id="8f156-307">Her aşamada, çıkış eşleşmeler kümesidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-307">In each phase, the output is a set of matches.</span></span> <span data-ttu-id="8f156-308">Maç seti bir sonraki aşamaya kadar daha da daraltılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-308">The set of matches can be narrowed down further by the next phase.</span></span> <span data-ttu-id="8f156-309">Yönlendirme uygulaması, uç noktaları eşleştirmek için bir işlem emri garanti etmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-309">The routing implementation does not guarantee a processing order for matching endpoints.</span></span> <span data-ttu-id="8f156-310">**Olası tüm** eşleşmeler aynı anda işlenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-310">**All** possible matches are processed at once.</span></span> <span data-ttu-id="8f156-311">URL eşleştirme aşamaları aşağıdaki sırada gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-311">The URL matching phases occur in the following order.</span></span> <span data-ttu-id="8f156-312">ASP.NET Core:</span><span class="sxs-lookup"><span data-stu-id="8f156-312">ASP.NET Core:</span></span>

1. <span data-ttu-id="8f156-313">URL yolunu uç noktalar kümesine ve rota şablonlarına göre işler ve **tüm** eşleşmeleri toplar.</span><span class="sxs-lookup"><span data-stu-id="8f156-313">Processes the URL path against the set of endpoints and their route templates, collecting **all** of the matches.</span></span>
1. <span data-ttu-id="8f156-314">Önceki listeyi alır ve uygulanan rota kısıtlamalarıyla başarısız olan eşleşmeleri kaldırır.</span><span class="sxs-lookup"><span data-stu-id="8f156-314">Takes the preceding list and removes matches that fail with route constraints applied.</span></span>
1. <span data-ttu-id="8f156-315">Önceki listeyi alır ve [MatcherPolicy](xref:Microsoft.AspNetCore.Routing.MatcherPolicy) örnekleri kümesinde başarısız olan eşleşmeleri kaldırır.</span><span class="sxs-lookup"><span data-stu-id="8f156-315">Takes the preceding list and removes matches that fail the set of [MatcherPolicy](xref:Microsoft.AspNetCore.Routing.MatcherPolicy) instances.</span></span>
1. <span data-ttu-id="8f156-316">Önceki listeden son kararı vermek için [EndpointSelector'u](xref:Microsoft.AspNetCore.Routing.Matching.EndpointSelector) kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-316">Uses the [EndpointSelector](xref:Microsoft.AspNetCore.Routing.Matching.EndpointSelector) to make a final decision from the preceding list.</span></span>

<span data-ttu-id="8f156-317">Uç noktaların listesine göre öncelik verilir:</span><span class="sxs-lookup"><span data-stu-id="8f156-317">The list of endpoints is prioritized according to:</span></span>

* <span data-ttu-id="8f156-318">[RouteEndpoint.Order](xref:Microsoft.AspNetCore.Routing.RouteEndpoint.Order*)</span><span class="sxs-lookup"><span data-stu-id="8f156-318">The [RouteEndpoint.Order](xref:Microsoft.AspNetCore.Routing.RouteEndpoint.Order*)</span></span>
* <span data-ttu-id="8f156-319">[Rota şablonu önceliği](#rtp)</span><span class="sxs-lookup"><span data-stu-id="8f156-319">The [route template precedence](#rtp)</span></span>

<span data-ttu-id="8f156-320">Eşleşen tüm uç noktalar, ulaşılana <xref:Microsoft.AspNetCore.Routing.Matching.EndpointSelector> kadar her aşamada işlenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-320">All matching endpoints are processed in each phase until the <xref:Microsoft.AspNetCore.Routing.Matching.EndpointSelector> is reached.</span></span> <span data-ttu-id="8f156-321">Son `EndpointSelector` aşama.</span><span class="sxs-lookup"><span data-stu-id="8f156-321">The `EndpointSelector` is the final phase.</span></span> <span data-ttu-id="8f156-322">En iyi eşleşme olarak maçlardan en yüksek öncelikli bitiş noktasını seçer.</span><span class="sxs-lookup"><span data-stu-id="8f156-322">It chooses the highest priority endpoint from the matches as the best match.</span></span> <span data-ttu-id="8f156-323">En iyi eşleşmeyle aynı önceliğe sahip başka eşleşmeler varsa, belirsiz bir eşleşme özel durumu atılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-323">If there are other matches with the same priority as the best match, an ambiguous match exception is thrown.</span></span>

<span data-ttu-id="8f156-324">Rota önceliği, daha yüksek bir öncelik verilen **daha özel** bir rota şablonuna göre hesaplanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-324">The route precedence is computed based on a **more specific** route template being given a higher priority.</span></span> <span data-ttu-id="8f156-325">Örneğin, şablonları `/hello` göz `/{message}`önünde bulundurun ve:</span><span class="sxs-lookup"><span data-stu-id="8f156-325">For example, consider the templates `/hello` and `/{message}`:</span></span>

* <span data-ttu-id="8f156-326">Her ikisi de `/hello`URL yoluna eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-326">Both match the URL path `/hello`.</span></span>
* <span data-ttu-id="8f156-327">`/hello`daha spesifik ve bu nedenle daha yüksek önceliktir.</span><span class="sxs-lookup"><span data-stu-id="8f156-327">`/hello`  is more specific and therefore higher priority.</span></span>

<span data-ttu-id="8f156-328">Genel olarak, rota önceliği uygulamada kullanılan URL şemaları türleri için en iyi eşleşmeyi seçme iyi bir iş yapar.</span><span class="sxs-lookup"><span data-stu-id="8f156-328">In general, route precedence does a good job of choosing the best match for the kinds of URL schemes used in practice.</span></span> <span data-ttu-id="8f156-329">Belirsizliği önlemek için yalnızca gerektiğinde kullanın. <xref:Microsoft.AspNetCore.Routing.RouteEndpoint.Order></span><span class="sxs-lookup"><span data-stu-id="8f156-329">Use <xref:Microsoft.AspNetCore.Routing.RouteEndpoint.Order> only when necessary to avoid an ambiguity.</span></span>

<span data-ttu-id="8f156-330">Yönlendirme tarafından sağlanan genişletilebilirlik türleri nedeniyle, yönlendirme sisteminin belirsiz yolları önceden hesaplaması mümkün değildir.</span><span class="sxs-lookup"><span data-stu-id="8f156-330">Due to the kinds of extensibility provided by routing, it isn't possible for the routing system to compute ahead of time the ambiguous routes.</span></span> <span data-ttu-id="8f156-331">Rota şablonları `/{message:alpha}` gibi bir örnek `/{message:int}`düşünün ve:</span><span class="sxs-lookup"><span data-stu-id="8f156-331">Consider an example such as the route templates `/{message:alpha}` and `/{message:int}`:</span></span>

* <span data-ttu-id="8f156-332">Kısıtlama `alpha` yalnızca alfabetik karakterlerle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-332">The `alpha` constraint matches only alphabetic characters.</span></span>
* <span data-ttu-id="8f156-333">Kısıtlama `int` yalnızca sayılarla eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-333">The `int` constraint matches only numbers.</span></span>
* <span data-ttu-id="8f156-334">Bu şablonlar aynı rota önceliğine sahiptir, ancak her ikisinin de eşleşen tek bir URL'si yoktur.</span><span class="sxs-lookup"><span data-stu-id="8f156-334">These templates have the same route precedence, but there's no single URL they both match.</span></span>
* <span data-ttu-id="8f156-335">Yönlendirme sistemi başlangıçta bir belirsizlik hatası bildirdiyse, bu geçerli kullanım örneğini engeller.</span><span class="sxs-lookup"><span data-stu-id="8f156-335">If the routing system reported an ambiguity error at startup, it would block this valid use case.</span></span>

> [!WARNING]
>
> <span data-ttu-id="8f156-336">İçerideki <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseEndpoints*> işlemlerin sırası, bir istisna dışında yönlendirme davranışını etkilemez.</span><span class="sxs-lookup"><span data-stu-id="8f156-336">The order of operations inside <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseEndpoints*> doesn't influence the behavior of routing, with one exception.</span></span> <span data-ttu-id="8f156-337"><xref:Microsoft.AspNetCore.Builder.ControllerEndpointRouteBuilderExtensions.MapControllerRoute*>ve <xref:Microsoft.AspNetCore.Builder.MvcAreaRouteBuilderExtensions.MapAreaRoute*> çağrıldıkları sıraya göre uç noktalarına otomatik olarak bir sipariş değeri atayın.</span><span class="sxs-lookup"><span data-stu-id="8f156-337"><xref:Microsoft.AspNetCore.Builder.ControllerEndpointRouteBuilderExtensions.MapControllerRoute*> and <xref:Microsoft.AspNetCore.Builder.MvcAreaRouteBuilderExtensions.MapAreaRoute*> automatically assign an order value to their endpoints based on the order they are invoked.</span></span> <span data-ttu-id="8f156-338">Bu, eski yönlendirme uygulamalarıyla aynı garantileri sağlayan yönlendirme sistemi olmadan denetleyicilerin uzun süreli davranışını simüle eder.</span><span class="sxs-lookup"><span data-stu-id="8f156-338">This simulates long-time behavior of controllers without the routing system providing the same guarantees as older routing implementations.</span></span>
>
> <span data-ttu-id="8f156-339">Yönlendirmenin eski uygulamasında, yolların işlendiği sıraya bağımlı olan yönlendirme genişletilebilirliğini uygulamak mümkündür.</span><span class="sxs-lookup"><span data-stu-id="8f156-339">In the legacy implementation of routing, it's possible to implement routing extensibility that has a dependency on the order in which routes are processed.</span></span> <span data-ttu-id="8f156-340">Core 3.0 ve sonraki ASP.NET'da bitiş noktası yönlendirmesi:</span><span class="sxs-lookup"><span data-stu-id="8f156-340">Endpoint routing in ASP.NET Core 3.0 and later:</span></span>
> 
> * <span data-ttu-id="8f156-341">Güzergah kavramı yok.</span><span class="sxs-lookup"><span data-stu-id="8f156-341">Doesn't have a concept of routes.</span></span>
> * <span data-ttu-id="8f156-342">Sipariş garantisi sağlamaz.</span><span class="sxs-lookup"><span data-stu-id="8f156-342">Doesn't provide ordering guarantees.</span></span> <span data-ttu-id="8f156-343">Tüm uç noktalar aynı anda işlenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-343">All endpoints are processed at once.</span></span>
>
> <span data-ttu-id="8f156-344">Bu, eski yönlendirme sistemini kullanarak sıkışıp kaldığınız anlamına geliyorsa, [yardım için bir GitHub sorunu açın.](https://github.com/dotnet/aspnetcore/issues)</span><span class="sxs-lookup"><span data-stu-id="8f156-344">If this means you're stuck using the legacy routing system, [open a GitHub issue for assistance](https://github.com/dotnet/aspnetcore/issues).</span></span>

<a name="rtp"></a>

### <a name="route-template-precedence-and-endpoint-selection-order"></a><span data-ttu-id="8f156-345">Rota şablonu önceliği ve bitiş noktası seçim sırası</span><span class="sxs-lookup"><span data-stu-id="8f156-345">Route template precedence and endpoint selection order</span></span>

<span data-ttu-id="8f156-346">[Rota şablonu önceliği,](https://github.com/dotnet/aspnetcore/blob/master/src/Http/Routing/src/Template/RoutePrecedence.cs#L16) her rota şablonu ne kadar özel olduğuna bağlı bir değer atayan bir sistemdir.</span><span class="sxs-lookup"><span data-stu-id="8f156-346">[Route template precedence](https://github.com/dotnet/aspnetcore/blob/master/src/Http/Routing/src/Template/RoutePrecedence.cs#L16) is a system that assigns each route template a value based on how specific it is.</span></span> <span data-ttu-id="8f156-347">Rota şablonu önceliği:</span><span class="sxs-lookup"><span data-stu-id="8f156-347">Route template precedence:</span></span>

* <span data-ttu-id="8f156-348">Sık karşılaşılan durumlarda uç noktaların sırasını ayarlama gereksinimini önler.</span><span class="sxs-lookup"><span data-stu-id="8f156-348">Avoids the need to adjust the order of endpoints in common cases.</span></span>
* <span data-ttu-id="8f156-349">Yönlendirme davranışının sağduyulu beklentilerini karşılamaya çalışır.</span><span class="sxs-lookup"><span data-stu-id="8f156-349">Attempts to match the common-sense expectations of routing behavior.</span></span>

<span data-ttu-id="8f156-350">Örneğin, şablonları `/Products/List` ve `/Products/{id}`.</span><span class="sxs-lookup"><span data-stu-id="8f156-350">For example, consider templates `/Products/List` and `/Products/{id}`.</span></span> <span data-ttu-id="8f156-351">Bu URL yolu `/Products/List` `/Products/{id}` `/Products/List`için daha iyi bir maç olduğunu varsaymak makul olacaktır.</span><span class="sxs-lookup"><span data-stu-id="8f156-351">It would be reasonable to assume that `/Products/List` is a better match than `/Products/{id}` for the URL path `/Products/List`.</span></span> <span data-ttu-id="8f156-352">Edebi segment `/List` parametre segmentinden `/{id}`daha iyi bir önceliğe sahip olarak kabul edilir çünkü çalışır .</span><span class="sxs-lookup"><span data-stu-id="8f156-352">The works because the literal segment `/List` is considered to have better precedence than the parameter segment `/{id}`.</span></span>

<span data-ttu-id="8f156-353">Öncelik çalışmalarının ayrıntıları, rota şablonlarının nasıl tanımlandığıyla birleştiğinde yapılır:</span><span class="sxs-lookup"><span data-stu-id="8f156-353">The details of how precedence works are coupled to how route templates are defined:</span></span>

* <span data-ttu-id="8f156-354">Daha fazla segmente sahip şablonlar daha spesifik olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-354">Templates with more segments are considered more specific.</span></span>
* <span data-ttu-id="8f156-355">Gerçek metnin içeren bir kesimi, parametre kesiminden daha spesifik olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-355">A segment with literal text is considered more specific than a parameter segment.</span></span>
* <span data-ttu-id="8f156-356">Kısıtlamalı bir parametre kesimi, olmayan bir parametre den daha özel olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-356">A parameter segment with a constraint is considered more specific than one without.</span></span>
* <span data-ttu-id="8f156-357">Karmaşık bir segment, kısıtlamalı bir parametre kesimi olarak özel olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-357">A complex segment is considered as specific as a parameter segment with a constraint.</span></span>
* <span data-ttu-id="8f156-358">Tüm parametreleri yakalamak en az spesifiktir.</span><span class="sxs-lookup"><span data-stu-id="8f156-358">Catch all parameters are the least specific.</span></span>

<span data-ttu-id="8f156-359">Tam değerlere başvurmak için [GitHub'daki kaynak koduna](https://github.com/dotnet/aspnetcore/blob/master/src/Http/Routing/src/Template/RoutePrecedence.cs#L189) bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-359">See the [source code on GitHub](https://github.com/dotnet/aspnetcore/blob/master/src/Http/Routing/src/Template/RoutePrecedence.cs#L189) for a reference of exact values.</span></span>

<a name="lg"></a>

### <a name="url-generation-concepts"></a><span data-ttu-id="8f156-360">URL oluşturma kavramları</span><span class="sxs-lookup"><span data-stu-id="8f156-360">URL generation concepts</span></span>

<span data-ttu-id="8f156-361">URL oluşturma:</span><span class="sxs-lookup"><span data-stu-id="8f156-361">URL generation:</span></span>

* <span data-ttu-id="8f156-362">Yönlendirmenin bir rota değerleri kümesine dayalı bir URL yolu oluşturabileceği işlemdir.</span><span class="sxs-lookup"><span data-stu-id="8f156-362">Is the process by which routing can create a URL path based on a set of route values.</span></span>
* <span data-ttu-id="8f156-363">Uç noktalar ve bunlara erişen URL'ler arasında mantıksal bir ayrım yapılmasına olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-363">Allows for a logical separation between endpoints and the URLs that access them.</span></span>

<span data-ttu-id="8f156-364">Uç nokta yönlendirme, <xref:Microsoft.AspNetCore.Routing.LinkGenerator> API'yi içerir.</span><span class="sxs-lookup"><span data-stu-id="8f156-364">Endpoint routing includes the <xref:Microsoft.AspNetCore.Routing.LinkGenerator> API.</span></span> <span data-ttu-id="8f156-365">`LinkGenerator`[DI'den](xref:fundamentals/dependency-injection)edinilebilen tek tonlu bir hizmettir.</span><span class="sxs-lookup"><span data-stu-id="8f156-365">`LinkGenerator` is a singleton service available from [DI](xref:fundamentals/dependency-injection).</span></span> <span data-ttu-id="8f156-366">API, `LinkGenerator` yürütme isteği bağlamının dışında kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-366">The `LinkGenerator` API can be used outside of the context of an executing request.</span></span> <span data-ttu-id="8f156-367">[Mvc.IUrlHelper](xref:Microsoft.AspNetCore.Mvc.IUrlHelper) ve Tag <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> [Helpers,](xref:mvc/views/tag-helpers/intro)HTML Yardımcıları ve [Eylem Sonuçları](xref:mvc/controllers/actions)gibi, bağlantı `LinkGenerator` oluşturma yetenekleri sağlamak için dahili olarak API kullanın güveniyor senaryolar.</span><span class="sxs-lookup"><span data-stu-id="8f156-367">[Mvc.IUrlHelper](xref:Microsoft.AspNetCore.Mvc.IUrlHelper) and scenarios that rely on <xref:Microsoft.AspNetCore.Mvc.IUrlHelper>, such as [Tag Helpers](xref:mvc/views/tag-helpers/intro), HTML Helpers, and [Action Results](xref:mvc/controllers/actions), use the `LinkGenerator` API internally to provide link generating capabilities.</span></span>

<span data-ttu-id="8f156-368">Bağlantı jeneratörü bir **adres** ve adres **şemaları**kavramı tarafından desteklenen.</span><span class="sxs-lookup"><span data-stu-id="8f156-368">The link generator is backed by the concept of an **address** and **address schemes**.</span></span> <span data-ttu-id="8f156-369">Adres düzeni, bağlantı oluşturma için göz önünde bulundurulması gereken uç noktaları belirlemenin bir yoludur.</span><span class="sxs-lookup"><span data-stu-id="8f156-369">An address scheme is a way of determining the endpoints that should be considered for link generation.</span></span> <span data-ttu-id="8f156-370">Örneğin, birçok kullanıcının denetleyicilerden aşina olduğu rota adı ve rota değerleri senaryoları ve Ustura Sayfaları adres düzeni olarak uygulanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-370">For example, the route name and route values scenarios many users are familiar with from controllers and Razor Pages are implemented as an address scheme.</span></span>

<span data-ttu-id="8f156-371">Bağlantı jeneratörü aşağıdaki uzatma yöntemleri ile denetleyicilere ve Razor Pages'e bağlanabilir:</span><span class="sxs-lookup"><span data-stu-id="8f156-371">The link generator can link to controllers and Razor Pages via the following extension methods:</span></span>

* <xref:Microsoft.AspNetCore.Routing.ControllerLinkGeneratorExtensions.GetPathByAction*>
* <xref:Microsoft.AspNetCore.Routing.ControllerLinkGeneratorExtensions.GetUriByAction*>
* <xref:Microsoft.AspNetCore.Routing.PageLinkGeneratorExtensions.GetPathByPage*>
* <xref:Microsoft.AspNetCore.Routing.PageLinkGeneratorExtensions.GetUriByPage*>

<span data-ttu-id="8f156-372">Bu yöntemlerin aşırı yükleri `HttpContext`içeren bağımsız değişkenleri kabul eder.</span><span class="sxs-lookup"><span data-stu-id="8f156-372">Overloads of these methods accept arguments that include the `HttpContext`.</span></span> <span data-ttu-id="8f156-373">Bu yöntemler işlevsel olarak [Url.Action](xref:System.Web.Mvc.UrlHelper.Action*) ve [Url.Page'e](xref:Microsoft.AspNetCore.Mvc.UrlHelperExtensions.Page*)eşdeğerdir, ancak ek esneklik ve seçenekler sunar.</span><span class="sxs-lookup"><span data-stu-id="8f156-373">These methods are functionally equivalent to [Url.Action](xref:System.Web.Mvc.UrlHelper.Action*) and [Url.Page](xref:Microsoft.AspNetCore.Mvc.UrlHelperExtensions.Page*), but offer additional flexibility and options.</span></span>

<span data-ttu-id="8f156-374">Yöntemler `GetPath*` en çok `Url.Action` benzer `Url.Page`ve , onlar mutlak bir yol içeren bir URI oluşturmak.</span><span class="sxs-lookup"><span data-stu-id="8f156-374">The `GetPath*` methods are most similar to `Url.Action` and `Url.Page`, in that they generate a URI containing an absolute path.</span></span> <span data-ttu-id="8f156-375">Yöntemler `GetUri*` her zaman bir şema ve ana bilgisayar içeren mutlak bir URI oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8f156-375">The `GetUri*` methods always generate an absolute URI containing a scheme and host.</span></span> <span data-ttu-id="8f156-376">Yürütme isteği bağlamında `HttpContext` bir URI oluşturmayı kabul eden yöntemler.</span><span class="sxs-lookup"><span data-stu-id="8f156-376">The methods that accept an `HttpContext` generate a URI in the context of the executing request.</span></span> <span data-ttu-id="8f156-377">Ortam [ambient](#ambient) rotası değerleri, URL temel yolu, düzen ve yürütme isteğinden ana bilgisayar geçersiz kılınmadığı sürece kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-377">The [ambient](#ambient) route values, URL base path, scheme, and host from the executing request are used unless overridden.</span></span>

<span data-ttu-id="8f156-378"><xref:Microsoft.AspNetCore.Routing.LinkGenerator>bir adresle çağrılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-378"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> is called with an address.</span></span> <span data-ttu-id="8f156-379">URI oluşturma iki adımda gerçekleşir:</span><span class="sxs-lookup"><span data-stu-id="8f156-379">Generating a URI occurs in two steps:</span></span>

1. <span data-ttu-id="8f156-380">Adres, adresle eşleşen uç noktaların listesine bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-380">An address is bound to a list of endpoints that match the address.</span></span>
1. <span data-ttu-id="8f156-381">Her uç nokta, <xref:Microsoft.AspNetCore.Routing.RouteEndpoint.RoutePattern> sağlanan değerlerle eşleşen bir rota deseni bulunana kadar değerlendirilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-381">Each endpoint's <xref:Microsoft.AspNetCore.Routing.RouteEndpoint.RoutePattern> is evaluated until a route pattern that matches the supplied values is found.</span></span> <span data-ttu-id="8f156-382">Elde edilen çıkış, bağlantı jeneratörüne verilen diğer URI parçalarıyla birleştirilir ve döndürülür.</span><span class="sxs-lookup"><span data-stu-id="8f156-382">The resulting output is combined with the other URI parts supplied to the link generator and returned.</span></span>

<span data-ttu-id="8f156-383">Her tür <xref:Microsoft.AspNetCore.Routing.LinkGenerator> adres için standart bağlantı oluşturma yeteneklerini destekleyerek sağlanan yöntemler.</span><span class="sxs-lookup"><span data-stu-id="8f156-383">The methods provided by <xref:Microsoft.AspNetCore.Routing.LinkGenerator> support standard link generation capabilities for any type of address.</span></span> <span data-ttu-id="8f156-384">Bağlantı jeneratörü kullanmak için en uygun yolu belirli bir adres türü için işlemleri gerçekleştirmek uzantısı yöntemleri geçer:</span><span class="sxs-lookup"><span data-stu-id="8f156-384">The most convenient way to use the link generator is through extension methods that perform operations for a specific address type:</span></span>

| <span data-ttu-id="8f156-385">Uzatma Yöntemi</span><span class="sxs-lookup"><span data-stu-id="8f156-385">Extension Method</span></span> | <span data-ttu-id="8f156-386">Açıklama</span><span class="sxs-lookup"><span data-stu-id="8f156-386">Description</span></span> |
| ---------------- | ----------- |
| <xref:Microsoft.AspNetCore.Routing.LinkGenerator.GetPathByAddress*> | <span data-ttu-id="8f156-387">Sağlanan değerlere dayalı mutlak bir yol ile bir URI oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8f156-387">Generates a URI with an absolute path based on the provided values.</span></span> |
| <xref:Microsoft.AspNetCore.Routing.LinkGenerator.GetUriByAddress*> | <span data-ttu-id="8f156-388">Sağlanan değerlere dayalı mutlak bir URI oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8f156-388">Generates an absolute URI based on the provided values.</span></span>             |

> [!WARNING]
> <span data-ttu-id="8f156-389">Arama <xref:Microsoft.AspNetCore.Routing.LinkGenerator> yöntemlerinin aşağıdaki etkilerine dikkat edin:</span><span class="sxs-lookup"><span data-stu-id="8f156-389">Pay attention to the following implications of calling <xref:Microsoft.AspNetCore.Routing.LinkGenerator> methods:</span></span>
>
> * <span data-ttu-id="8f156-390">Gelen `GetUri*` isteklerin üstbilgisini `Host` doğrulamayan bir uygulama yapılandırmasında uzantı yöntemlerini dikkatli kullanın.</span><span class="sxs-lookup"><span data-stu-id="8f156-390">Use `GetUri*` extension methods with caution in an app configuration that doesn't validate the `Host` header of incoming requests.</span></span> <span data-ttu-id="8f156-391">Gelen `Host` isteklerin üstbilgisi doğrulanmazsa, güvenilmeyen istek girişi bir görünüm veya sayfada UrI'lerde istemciye geri gönderilebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-391">If the `Host` header of incoming requests isn't validated, untrusted request input can be sent back to the client in URIs in a view or page.</span></span> <span data-ttu-id="8f156-392">Tüm üretim uygulamalarının üstbilgiyi `Host` bilinen geçerli değerlere göre doğrulamak için sunucularını yapılandırmalarını öneririz.</span><span class="sxs-lookup"><span data-stu-id="8f156-392">We recommend that all production apps configure their server to validate the `Host` header against known valid values.</span></span>
>
> * <span data-ttu-id="8f156-393">Middleware'de dikkatli <xref:Microsoft.AspNetCore.Routing.LinkGenerator> kullanın `Map` veya `MapWhen`.</span><span class="sxs-lookup"><span data-stu-id="8f156-393">Use <xref:Microsoft.AspNetCore.Routing.LinkGenerator> with caution in middleware in combination with `Map` or `MapWhen`.</span></span> <span data-ttu-id="8f156-394">`Map*`bağlantı oluşturma çıktısını etkileyen yürütme isteğinin temel yolunu değiştirir.</span><span class="sxs-lookup"><span data-stu-id="8f156-394">`Map*` changes the base path of the executing request, which affects the output of link generation.</span></span> <span data-ttu-id="8f156-395">Tüm API'ler <xref:Microsoft.AspNetCore.Routing.LinkGenerator> bir temel yol belirtmeye izin verir.</span><span class="sxs-lookup"><span data-stu-id="8f156-395">All of the <xref:Microsoft.AspNetCore.Routing.LinkGenerator> APIs allow specifying a base path.</span></span> <span data-ttu-id="8f156-396">Bağlantı oluşturma üzerindeki etkiyi `Map*` geri almak için boş bir temel yol belirtin.</span><span class="sxs-lookup"><span data-stu-id="8f156-396">Specify an empty base path to undo the `Map*` affect on link generation.</span></span>

### <a name="middleware-example"></a><span data-ttu-id="8f156-397">Middleware örneği</span><span class="sxs-lookup"><span data-stu-id="8f156-397">Middleware example</span></span>

<span data-ttu-id="8f156-398">Aşağıdaki örnekte, ara yazılım, <xref:Microsoft.AspNetCore.Routing.LinkGenerator> depo ürünlerini listeleyen bir eylem yöntemine bağlantı oluşturmak için API'yi kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-398">In the following example, a middleware uses the <xref:Microsoft.AspNetCore.Routing.LinkGenerator> API to create a link to an action method that lists store products.</span></span> <span data-ttu-id="8f156-399">Bağlantı jeneratörü bir sınıfa enjekte ederek `GenerateLink` kullanma ve bir uygulamadaki herhangi bir sınıf için arama kullanılabilir:</span><span class="sxs-lookup"><span data-stu-id="8f156-399">Using the link generator by injecting it into a class and calling `GenerateLink` is available to any class in an app:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/Middleware/ProductsLinkMiddleware.cs?name=snippet)]

<a name="rtr"></a>

## <a name="route-template-reference"></a><span data-ttu-id="8f156-400">Rota şablonu başvurusu</span><span class="sxs-lookup"><span data-stu-id="8f156-400">Route template reference</span></span>

<span data-ttu-id="8f156-401">Yol eşleştirilirse bağlanan rota parametrelerini `{}` tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-401">Tokens within `{}` define route parameters that are bound if the route is matched.</span></span> <span data-ttu-id="8f156-402">Bir rota segmentinde birden fazla rota parametresi tanımlanabilir, ancak rota parametreleri gerçek bir değerle ayrılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-402">More than one route parameter can be defined in a route segment, but route parameters  must be separated by a literal value.</span></span> <span data-ttu-id="8f156-403">Örneğin, `{controller=Home}{action=Index}` geçerli bir yol değildir, çünkü ile `{controller}` . `{action}`</span><span class="sxs-lookup"><span data-stu-id="8f156-403">For example, `{controller=Home}{action=Index}` isn't a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span>  <span data-ttu-id="8f156-404">Rota parametrelerinin bir adı olmalıdır ve ek öznitelikler belirtilmiş olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-404">Route parameters must have a name and may have additional attributes specified.</span></span>

<span data-ttu-id="8f156-405">Rota parametreleri dışındaki gerçek metin `{id}`(örneğin, ) `/` ve yol ayırıcısı URL'deki metyle eşleşmelidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-405">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="8f156-406">Metin eşleştirme büyük/küçük harf duyarsız ve URL'ler yolunun deşifre gösterimine dayanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-406">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="8f156-407">Bir literal rota parametresi `{` delimiter maç veya `}`, karakteri yineleyerek delimiter kaçış.</span><span class="sxs-lookup"><span data-stu-id="8f156-407">To match a literal route parameter delimiter `{` or `}`, escape the delimiter by repeating the character.</span></span> <span data-ttu-id="8f156-408">Örneğin `{{` ya `}}`da .</span><span class="sxs-lookup"><span data-stu-id="8f156-408">For example `{{` or `}}`.</span></span>

<span data-ttu-id="8f156-409">Yıldız veya `*` çift yıldız `**`işareti :</span><span class="sxs-lookup"><span data-stu-id="8f156-409">Asterisk `*` or double asterisk `**`:</span></span>

* <span data-ttu-id="8f156-410">URI'nin geri kalanına bağlamak için rota parametresine önek olarak kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-410">Can be used as a prefix to a route parameter to bind to the rest of the URI.</span></span>
* <span data-ttu-id="8f156-411">**Catch-all** parametreleri denir.</span><span class="sxs-lookup"><span data-stu-id="8f156-411">Are called a **catch-all** parameters.</span></span> <span data-ttu-id="8f156-412">Örneğin, `blog/{**slug}`:</span><span class="sxs-lookup"><span data-stu-id="8f156-412">For example, `blog/{**slug}`:</span></span>
  * <span data-ttu-id="8f156-413">Ile başlayan ve `/blog` onu izleyen herhangi bir değere sahip herhangi bir URI eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-413">Matches any URI that starts with `/blog` and has any value following it.</span></span>
  * <span data-ttu-id="8f156-414">Aşağıdaki `/blog` değer [sümüklü böcek](https://developer.mozilla.org/docs/Glossary/Slug) rota değerine atanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-414">The value following `/blog` is assigned to the [slug](https://developer.mozilla.org/docs/Glossary/Slug) route value.</span></span>

<span data-ttu-id="8f156-415">Tümlerini yakalama parametreleri boş dizeyle de eşleşebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-415">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="8f156-416">Tümlerini yakalama parametresi, yol ayırıcı `/` karakterleri de dahil olmak üzere bir URL oluşturmak için kullanıldığında uygun karakterlerden kaçar.</span><span class="sxs-lookup"><span data-stu-id="8f156-416">The catch-all parameter escapes the appropriate characters when the route is used to generate a URL, including path separator `/` characters.</span></span> <span data-ttu-id="8f156-417">Örneğin, rota `foo/{*path}` değerleri `{ path = "my/path" }` ile rota `foo/my%2Fpath`oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8f156-417">For example, the route `foo/{*path}` with route values `{ path = "my/path" }` generates `foo/my%2Fpath`.</span></span> <span data-ttu-id="8f156-418">Kaçan ileri eğik çizgiye dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="8f156-418">Note the escaped forward slash.</span></span> <span data-ttu-id="8f156-419">Gidiş-dönüş yol ayırıcı karakterleri için `**` rota parametresi önekini kullanın.</span><span class="sxs-lookup"><span data-stu-id="8f156-419">To round-trip path separator characters, use the `**` route parameter prefix.</span></span> <span data-ttu-id="8f156-420">Üreten `foo/{**path}` `{ path = "my/path" }` `foo/my/path`rota.</span><span class="sxs-lookup"><span data-stu-id="8f156-420">The route `foo/{**path}` with `{ path = "my/path" }` generates `foo/my/path`.</span></span>

<span data-ttu-id="8f156-421">İsteğe bağlı dosya uzantısı ile bir dosya adını yakalamaya çalışan URL desenleri ek hususlar vardır.</span><span class="sxs-lookup"><span data-stu-id="8f156-421">URL patterns that attempt to capture a file name with an optional file extension have additional considerations.</span></span> <span data-ttu-id="8f156-422">Örneğin, şablonu `files/{filename}.{ext?}`göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="8f156-422">For example, consider the template `files/{filename}.{ext?}`.</span></span> <span data-ttu-id="8f156-423">Her ikisi `filename` için `ext` değerler ve var olduğunda, her iki değer de doldurulur.</span><span class="sxs-lookup"><span data-stu-id="8f156-423">When values for both `filename` and `ext` exist, both values are populated.</span></span> <span data-ttu-id="8f156-424">URL'de yalnızca `filename` bir değer varsa, rota eşleşir, `.` çünkü izleme isteğe bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-424">If only a value for `filename` exists in the URL, the route matches because the trailing `.` is  optional.</span></span> <span data-ttu-id="8f156-425">Aşağıdaki URL'ler bu rotayla eşleşir:</span><span class="sxs-lookup"><span data-stu-id="8f156-425">The following URLs match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile`

<span data-ttu-id="8f156-426">Rota parametreleri, eşitler işaretiyle ayrılan parametre adı ()`=`ile ayrıldıktan sonra varsayılan değeri belirterek varsayılan **değerlere** sahip olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-426">Route parameters may have **default values** designated by specifying the default value after the parameter name separated by an equals sign (`=`).</span></span> <span data-ttu-id="8f156-427">Örneğin, `{controller=Home}` varsayılan `Home` değer olarak `controller`tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-427">For example, `{controller=Home}` defines `Home` as the default value for `controller`.</span></span> <span data-ttu-id="8f156-428">Parametrenin URL'sinde değer yoksa varsayılan değer kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-428">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="8f156-429">Rota parametreleri, parametre adının sonuna`?`bir soru işareti ( ) ekleyerek isteğe bağlı hale getirilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-429">Route parameters are made optional by appending a question mark (`?`) to the end of the parameter name.</span></span> <span data-ttu-id="8f156-430">Örneğin, `id?`.</span><span class="sxs-lookup"><span data-stu-id="8f156-430">For example, `id?`.</span></span> <span data-ttu-id="8f156-431">İsteğe bağlı değerler ve varsayılan rota parametreleri arasındaki fark:</span><span class="sxs-lookup"><span data-stu-id="8f156-431">The difference between optional values and default route parameters is:</span></span>

* <span data-ttu-id="8f156-432">Varsayılan değeri olan bir rota parametresi her zaman bir değer üretir.</span><span class="sxs-lookup"><span data-stu-id="8f156-432">A route parameter with a default value always produces a value.</span></span>
* <span data-ttu-id="8f156-433">İsteğe bağlı parametrenin değeri yalnızca istek URL'si tarafından bir değer sağlandığında yapılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-433">An optional parameter has a value only when a value is provided by the request URL.</span></span>

<span data-ttu-id="8f156-434">Rota parametrelerinde URL'den bağlanan rota değeriyle eşleşmesi gereken kısıtlamalar olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-434">Route parameters may have constraints that must match the route value bound from the URL.</span></span> <span data-ttu-id="8f156-435">Rota `:` parametre adı sonra ekleme ve kısıtlama adı bir rota parametresi üzerinde satır içinde kısıtlama belirtir.</span><span class="sxs-lookup"><span data-stu-id="8f156-435">Adding `:` and constraint name after the route parameter name specifies an inline constraint on a route parameter.</span></span> <span data-ttu-id="8f156-436">Kısıtlama bağımsız değişkenler gerektiriyorsa, kısıtlama adından `(...)` sonra parantez içinde direnir.</span><span class="sxs-lookup"><span data-stu-id="8f156-436">If the constraint requires arguments, they're enclosed in parentheses `(...)` after the constraint name.</span></span> <span data-ttu-id="8f156-437">Birden çok *satır içi kısıtlamalar* başka `:` bir ve kısıtlama adı ekleyerek belirtilebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-437">Multiple *inline constraints* can be specified by appending another `:` and constraint name.</span></span>

<span data-ttu-id="8f156-438">Kısıtlama adı ve bağımsız değişkenler, URL işlemede kullanılacak bir örnek oluşturmak için <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> hizmete aktarılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-438">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="8f156-439">Örneğin, rota şablonu `blog/{article:minlength(10)}` bağımsız `minlength` değişkenile `10`bir kısıtlama belirtir.</span><span class="sxs-lookup"><span data-stu-id="8f156-439">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="8f156-440">Rota kısıtlamaları ve çerçeve tarafından sağlanan kısıtlamaların listesi hakkında daha fazla bilgi için [Rota kısıtlaması başvuru](#route-constraint-reference) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-440">For more information on route constraints and a list of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

<span data-ttu-id="8f156-441">Rota parametrelerinde parametre transformatörleri de olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-441">Route parameters may also have parameter transformers.</span></span> <span data-ttu-id="8f156-442">Parametre transformatörleri bağlantılar oluştururken ve eylemleri ve sayfaları URL'lere eşleştirirken bir parametrenin değerini dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="8f156-442">Parameter transformers transform a parameter's value when generating links and matching actions and pages to URLs.</span></span> <span data-ttu-id="8f156-443">Kısıtlamalar gibi, parametre transformatörleri de rota parametresi adından sonra bir `:` ve transformatör adı eklenerek rota parametresine satır satır eklenebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-443">Like constraints, parameter transformers can be added inline to a route parameter by adding a `:` and transformer name after the route parameter name.</span></span> <span data-ttu-id="8f156-444">Örneğin, rota şablonu `blog/{article:slugify}` bir `slugify` transformatör belirtir.</span><span class="sxs-lookup"><span data-stu-id="8f156-444">For example, the route template `blog/{article:slugify}` specifies a `slugify` transformer.</span></span> <span data-ttu-id="8f156-445">Parametre transformatörleri hakkında daha fazla bilgi için [Parametre transformatör referans](#parameter-transformer-reference) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-445">For more information on parameter transformers, see the [Parameter transformer reference](#parameter-transformer-reference) section.</span></span>

<span data-ttu-id="8f156-446">Aşağıdaki tabloörnek rota şablonlarını ve davranışlarını gösterir:</span><span class="sxs-lookup"><span data-stu-id="8f156-446">The following table demonstrates example route templates and their behavior:</span></span>

| <span data-ttu-id="8f156-447">Rota Şablonu</span><span class="sxs-lookup"><span data-stu-id="8f156-447">Route Template</span></span>                           | <span data-ttu-id="8f156-448">Örnek Eşleşen URI</span><span class="sxs-lookup"><span data-stu-id="8f156-448">Example Matching URI</span></span>    | <span data-ttu-id="8f156-449">İstek URI&hellip;</span><span class="sxs-lookup"><span data-stu-id="8f156-449">The request URI&hellip;</span></span>                                                    |
| ---------------------------------------- | ----------------------- | -------------------------------------------------------------------------- |
| `hello`                                  | `/hello`                | <span data-ttu-id="8f156-450">Sadece tek yol `/hello`eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-450">Only matches the single path `/hello`.</span></span>                                     |
| `{Page=Home}`                            | `/`                     | <span data-ttu-id="8f156-451">Maçlar ve `Page` `Home`ayarlar .</span><span class="sxs-lookup"><span data-stu-id="8f156-451">Matches and sets `Page` to `Home`.</span></span>                                         |
| `{Page=Home}`                            | `/Contact`              | <span data-ttu-id="8f156-452">Maçlar ve `Page` `Contact`ayarlar .</span><span class="sxs-lookup"><span data-stu-id="8f156-452">Matches and sets `Page` to `Contact`.</span></span>                                      |
| `{controller}/{action}/{id?}`            | `/Products/List`        | <span data-ttu-id="8f156-453">`Products` Denetleyici ve `List` eylem haritaları.</span><span class="sxs-lookup"><span data-stu-id="8f156-453">Maps to the `Products` controller and `List` action.</span></span>                       |
| `{controller}/{action}/{id?}`            | `/Products/Details/123` | <span data-ttu-id="8f156-454">123'e ayarlanmış `Products` denetleyicive `Details` eyleme eşler.`id`</span><span class="sxs-lookup"><span data-stu-id="8f156-454">Maps to the `Products` controller and  `Details` action with`id` set to 123.</span></span> |
| `{controller=Home}/{action=Index}/{id?}` | `/`                     | <span data-ttu-id="8f156-455">`Home` Denetleyici ve `Index` yönteme eşler.</span><span class="sxs-lookup"><span data-stu-id="8f156-455">Maps to the `Home` controller and `Index` method.</span></span> <span data-ttu-id="8f156-456">`id` yoksayılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-456">`id` is ignored.</span></span>        |
| `{controller=Home}/{action=Index}/{id?}` | `/Products`         | <span data-ttu-id="8f156-457">`Products` Denetleyici ve `Index` yönteme eşler.</span><span class="sxs-lookup"><span data-stu-id="8f156-457">Maps to the `Products` controller and `Index` method.</span></span> <span data-ttu-id="8f156-458">`id` yoksayılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-458">`id` is ignored.</span></span>        |

<span data-ttu-id="8f156-459">Şablon kullanmak genellikle yönlendirmeye en basit yaklaşımdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-459">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="8f156-460">Kısıtlamalar ve varsayılanlar da rota şablonu dışında belirtilebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-460">Constraints and defaults can also be specified outside the route template.</span></span>

### <a name="complex-segments"></a><span data-ttu-id="8f156-461">Karmaşık segmentler</span><span class="sxs-lookup"><span data-stu-id="8f156-461">Complex segments</span></span>

<span data-ttu-id="8f156-462">Karmaşık [segmentler, açgözlü olmayan](#greedy) bir şekilde sağdan sola doğru gerçek sınırlayıcılar eşleştirilerek işlenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-462">Complex segments are processed by matching up literal delimiters from right to left in a [non-greedy](#greedy) way.</span></span> <span data-ttu-id="8f156-463">Örneğin, `[Route("/a{b}c{d}")]` karmaşık bir segmenttir.</span><span class="sxs-lookup"><span data-stu-id="8f156-463">For example, `[Route("/a{b}c{d}")]` is a complex segment.</span></span>
<span data-ttu-id="8f156-464">Karmaşık segmentler, bunları başarıyla kullanabilmek için anlaşılması gereken belirli bir şekilde çalışır.</span><span class="sxs-lookup"><span data-stu-id="8f156-464">Complex segments work in a particular way that must be understood to use them successfully.</span></span> <span data-ttu-id="8f156-465">Bu bölümdeki örnek, karmaşık kesimlerin yalnızca sınırlayıcı metin parametre değerlerinin içinde görünmediğinde neden gerçekten iyi çalıştığını göstermektedir.</span><span class="sxs-lookup"><span data-stu-id="8f156-465">The example in this section demonstrates why complex segments only really work well when the delimiter text doesn't appear inside the parameter values.</span></span> <span data-ttu-id="8f156-466">Bir [regex](/dotnet/standard/base-types/regular-expressions) kullanarak ve daha sonra değerleri el ile ayıklama daha karmaşık durumlarda için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-466">Using a [regex](/dotnet/standard/base-types/regular-expressions) and then manually extracting the values is needed for more complex cases.</span></span>

<span data-ttu-id="8f156-467">Bu, yönlendirmenin şablon `/a{b}c{d}` ve URL yolu `/abcd`ile gerçekleştirdiği adımların bir özetidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-467">This is a summary of the steps that routing performs with the template `/a{b}c{d}` and the URL path `/abcd`.</span></span> <span data-ttu-id="8f156-468">Algoritmanın `|` nasıl çalıştığını görselleştirmeye yardımcı olmak için kullanılır:</span><span class="sxs-lookup"><span data-stu-id="8f156-468">The `|` is used to help visualize how the algorithm works:</span></span>

* <span data-ttu-id="8f156-469">İlk edebi, sağdan sola, `c`.</span><span class="sxs-lookup"><span data-stu-id="8f156-469">The first literal, right to left, is `c`.</span></span> <span data-ttu-id="8f156-470">Yani `/abcd` sağdan aranır `/ab|c|d`ve bulur .</span><span class="sxs-lookup"><span data-stu-id="8f156-470">So `/abcd` is searched from right and finds `/ab|c|d`.</span></span>
* <span data-ttu-id="8f156-471">Sağdaki her`d`şey ( ) şimdi rota `{d}`parametresi ile eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-471">Everything to the right (`d`) is now matched to the route parameter `{d}`.</span></span>
* <span data-ttu-id="8f156-472">Bir sonraki gerçek, sağdan `a`sola, .</span><span class="sxs-lookup"><span data-stu-id="8f156-472">The next literal, right to left, is `a`.</span></span> <span data-ttu-id="8f156-473">Kaldığımız `/ab|c|d` yerden başlayarak arandı, sonra `a` bulundu. `/|a|b|c|d`</span><span class="sxs-lookup"><span data-stu-id="8f156-473">So `/ab|c|d` is searched starting where we left off, then `a` is found `/|a|b|c|d`.</span></span>
* <span data-ttu-id="8f156-474">Sağdaki değer (`b`) şimdi rota parametresi `{b}`ile eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-474">The value to the right (`b`) is now matched to the route parameter `{b}`.</span></span>
* <span data-ttu-id="8f156-475">Kalan metin ve kalan rota şablonu yoktur, bu nedenle bu bir eşleşmedir.</span><span class="sxs-lookup"><span data-stu-id="8f156-475">There is no remaining text and no remaining route template, so this is a match.</span></span>

<span data-ttu-id="8f156-476">Aşağıda, aynı şablonu `/a{b}c{d}` ve URL yolunu `/aabcd`kullanan olumsuz bir durum örneği verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="8f156-476">Here's an example of a negative case using the same template `/a{b}c{d}` and the URL path `/aabcd`.</span></span> <span data-ttu-id="8f156-477">Algoritmanın `|` nasıl çalıştığını görselleştirmeye yardımcı olmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-477">The `|` is used to help visualize how the algorithm works.</span></span> <span data-ttu-id="8f156-478">Bu durum aynı algoritma ile açıklanan bir eşleşme değildir:</span><span class="sxs-lookup"><span data-stu-id="8f156-478">This case isn't a match, which is explained by the same algorithm:</span></span>
* <span data-ttu-id="8f156-479">İlk edebi, sağdan sola, `c`.</span><span class="sxs-lookup"><span data-stu-id="8f156-479">The first literal, right to left, is `c`.</span></span> <span data-ttu-id="8f156-480">Yani `/aabcd` sağdan aranır `/aab|c|d`ve bulur .</span><span class="sxs-lookup"><span data-stu-id="8f156-480">So `/aabcd` is searched from right and finds `/aab|c|d`.</span></span>
* <span data-ttu-id="8f156-481">Sağdaki her`d`şey ( ) şimdi rota `{d}`parametresi ile eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-481">Everything to the right (`d`) is now matched to the route parameter `{d}`.</span></span>
* <span data-ttu-id="8f156-482">Bir sonraki gerçek, sağdan `a`sola, .</span><span class="sxs-lookup"><span data-stu-id="8f156-482">The next literal, right to left, is `a`.</span></span> <span data-ttu-id="8f156-483">Kaldığımız `/aab|c|d` yerden başlayarak arandı, sonra `a` bulundu. `/a|a|b|c|d`</span><span class="sxs-lookup"><span data-stu-id="8f156-483">So `/aab|c|d` is searched starting where we left off, then `a` is found `/a|a|b|c|d`.</span></span>
* <span data-ttu-id="8f156-484">Sağdaki değer (`b`) şimdi rota parametresi `{b}`ile eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-484">The value to the right (`b`) is now matched to the route parameter `{b}`.</span></span>
* <span data-ttu-id="8f156-485">Bu noktada kalan metin, `a`ancak algoritma ayrıştırmak için rota şablonu tükendi, bu yüzden bu bir eşleşme değildir.</span><span class="sxs-lookup"><span data-stu-id="8f156-485">At this point there is remaining text `a`, but the algorithm has run out of route template to parse, so this is not a match.</span></span>

<span data-ttu-id="8f156-486">Eşleşen algoritma [açgözlü olmayan](#greedy)olduğundan:</span><span class="sxs-lookup"><span data-stu-id="8f156-486">Since the matching algorithm is [non-greedy](#greedy):</span></span>

* <span data-ttu-id="8f156-487">Her adımda mümkün olan en küçük metin miktarıyla eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-487">It matches the smallest amount of text possible in each step.</span></span>
* <span data-ttu-id="8f156-488">Parametre değerlerinin içinde delimiter değerinin göründüğü herhangi bir durum eşleşmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-488">Any case where the delimiter value appears inside the parameter values results in not matching.</span></span>

<span data-ttu-id="8f156-489">Normal ifadeler eşleşen davranışları üzerinde çok daha fazla denetim sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-489">Regular expressions provide much more control over their matching behavior.</span></span>

<a name="greedy"></a>

<span data-ttu-id="8f156-490">Açgözlü eşleştirme, aynı zamanda [tembel eşleştirme](https://wikipedia.org/wiki/Regular_expression#Lazy_matching)olarak bilinen, mümkün olan en büyük dize eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-490">Greedy matching, also know as [lazy matching](https://wikipedia.org/wiki/Regular_expression#Lazy_matching), matches the largest possible string.</span></span> <span data-ttu-id="8f156-491">Açgözlü olmayan, mümkün olan en küçük dizeyle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-491">Non-greedy matches the smallest possible string.</span></span>

## <a name="route-constraint-reference"></a><span data-ttu-id="8f156-492">Rota kısıtlaması başvurusu</span><span class="sxs-lookup"><span data-stu-id="8f156-492">Route constraint reference</span></span>

<span data-ttu-id="8f156-493">Gelen URL'de bir eşleşme oluştuğunda ve URL yolu rota değerlerine belirtildiğinde rota kısıtlamaları yürütülür.</span><span class="sxs-lookup"><span data-stu-id="8f156-493">Route constraints execute when a match has occurred to the incoming URL and the URL path is tokenized into route values.</span></span> <span data-ttu-id="8f156-494">Rota kısıtlamaları genellikle rota şablonu aracılığıyla ilişkili rota değerini inceler ve değerin kabul edilebilir olup olmadığı konusunda doğru veya yanlış bir karar verir.</span><span class="sxs-lookup"><span data-stu-id="8f156-494">Route constraints generally inspect the route value associated via the route template and make a true or false decision about whether the value is acceptable.</span></span> <span data-ttu-id="8f156-495">Bazı rota kısıtlamaları, isteğin yönlendirilip yönlendirilemeyeceğini değerlendirmek için rota değerinin dışındaki verileri kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-495">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="8f156-496">Örneğin, http <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> fiiline dayalı bir isteği kabul edebilir veya reddedebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-496">For example, the <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> can accept or reject a request based on its HTTP verb.</span></span> <span data-ttu-id="8f156-497">Kısıtlamalar yönlendirme istekleri ve bağlantı oluşturma kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-497">Constraints are used in routing requests and link generation.</span></span>

> [!WARNING]
> <span data-ttu-id="8f156-498">Giriş doğrulama için kısıtlamalar kullanmayın.</span><span class="sxs-lookup"><span data-stu-id="8f156-498">Don't use constraints for input validation.</span></span> <span data-ttu-id="8f156-499">Giriş doğrulaması için kısıtlamalar kullanılıyorsa, geçersiz giriş `404` bulunamadı yanıtıyla sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-499">If constraints are used for input validation, invalid input results in a `404` Not Found response.</span></span> <span data-ttu-id="8f156-500">Geçersiz giriş, uygun `400` bir hata iletisi içeren bir Kötü İstek oluşturmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-500">Invalid input should produce a `400` Bad Request with an appropriate error message.</span></span> <span data-ttu-id="8f156-501">Rota kısıtlamaları, belirli bir rotanın girdilerini doğrulamak için değil, benzer yolları ayrıştırmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-501">Route constraints are used to disambiguate similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="8f156-502">Aşağıdaki tabloörnek rota kısıtlamaları ve bunların beklenen davranışlarını gösterir:</span><span class="sxs-lookup"><span data-stu-id="8f156-502">The following table demonstrates example route constraints and their expected behavior:</span></span>

| <span data-ttu-id="8f156-503">kısıtlama</span><span class="sxs-lookup"><span data-stu-id="8f156-503">constraint</span></span> | <span data-ttu-id="8f156-504">Örnek</span><span class="sxs-lookup"><span data-stu-id="8f156-504">Example</span></span> | <span data-ttu-id="8f156-505">Örnek Eşleşmeler</span><span class="sxs-lookup"><span data-stu-id="8f156-505">Example Matches</span></span> | <span data-ttu-id="8f156-506">Notlar</span><span class="sxs-lookup"><span data-stu-id="8f156-506">Notes</span></span> |
| ---------- | ------- | --------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="8f156-507">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="8f156-507">`123456789`, `-123456789`</span></span> | <span data-ttu-id="8f156-508">Herhangi bir karşıcıyla eşleşir</span><span class="sxs-lookup"><span data-stu-id="8f156-508">Matches any integer</span></span> |
| `bool` | `{active:bool}` | <span data-ttu-id="8f156-509">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="8f156-509">`true`, `FALSE`</span></span> | <span data-ttu-id="8f156-510">`true` Kibrit `false`ler ya da .</span><span class="sxs-lookup"><span data-stu-id="8f156-510">Matches `true` or `false`.</span></span> <span data-ttu-id="8f156-511">Duyarlı</span><span class="sxs-lookup"><span data-stu-id="8f156-511">Case-insensitive</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="8f156-512">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="8f156-512">`2016-12-31`, `2016-12-31 7:32pm`</span></span> | <span data-ttu-id="8f156-513">Değişmez kültürdeki geçerli `DateTime` bir değerle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-513">Matches a valid `DateTime` value in the invariant culture.</span></span> <span data-ttu-id="8f156-514">Önceki uyarıya bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-514">See preceding warning.</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="8f156-515">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="8f156-515">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="8f156-516">Değişmez kültürdeki geçerli `decimal` bir değerle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-516">Matches a valid `decimal` value in the invariant culture.</span></span> <span data-ttu-id="8f156-517">Önceki uyarıya bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-517">See preceding warning.</span></span>|
| `double` | `{weight:double}` | <span data-ttu-id="8f156-518">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="8f156-518">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="8f156-519">Değişmez kültürdeki geçerli `double` bir değerle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-519">Matches a valid `double` value in the invariant culture.</span></span> <span data-ttu-id="8f156-520">Önceki uyarıya bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-520">See preceding warning.</span></span>|
| `float` | `{weight:float}` | <span data-ttu-id="8f156-521">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="8f156-521">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="8f156-522">Değişmez kültürdeki geçerli `float` bir değerle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-522">Matches a valid `float` value in the invariant culture.</span></span> <span data-ttu-id="8f156-523">Önceki uyarıya bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-523">See preceding warning.</span></span>|
| `guid` | `{id:guid}` | `CD2C1638-1638-72D5-1638-DEADBEEF1638` | <span data-ttu-id="8f156-524">Geçerli `Guid` bir değerle eşleşir</span><span class="sxs-lookup"><span data-stu-id="8f156-524">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="8f156-525">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="8f156-525">`123456789`, `-123456789`</span></span> | <span data-ttu-id="8f156-526">Geçerli `long` bir değerle eşleşir</span><span class="sxs-lookup"><span data-stu-id="8f156-526">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="8f156-527">String en az 4 karakter olmalıdır</span><span class="sxs-lookup"><span data-stu-id="8f156-527">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `MyFile` | <span data-ttu-id="8f156-528">Dize en fazla 8 karakter olmalıdır</span><span class="sxs-lookup"><span data-stu-id="8f156-528">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="8f156-529">String tam olarak 12 karakter uzunluğunda olmalıdır</span><span class="sxs-lookup"><span data-stu-id="8f156-529">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="8f156-530">String en az 8 ve en fazla 16 karakter uzunluğunda olmalıdır</span><span class="sxs-lookup"><span data-stu-id="8f156-530">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="8f156-531">İntesayı değeri en az 18 olmalıdır</span><span class="sxs-lookup"><span data-stu-id="8f156-531">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` | `91` | <span data-ttu-id="8f156-532">Tümsek değeri 120'den fazla olmamalıdır</span><span class="sxs-lookup"><span data-stu-id="8f156-532">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="8f156-533">İntesayı değeri en az 18 olmalı, ancak en fazla 120</span><span class="sxs-lookup"><span data-stu-id="8f156-533">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="8f156-534">String bir veya daha fazla alfabetik karakter `a` - `z` ve büyük/küçük harf duyarsız oluşmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-534">String must consist of one or more alphabetical characters, `a`-`z` and case-insensitive.</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="8f156-535">String normal ifadeyle eşleşmelidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-535">String must match the regular expression.</span></span> <span data-ttu-id="8f156-536">Normal bir ifade tanımlama yla ilgili ipuçlarına bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-536">See tips about defining a regular expression.</span></span> |
| `required` | `{name:required}` | `Rick` | <span data-ttu-id="8f156-537">URL oluşturma sırasında parametre dışı bir değerin mevcut olduğunu zorlamak için kullanılır</span><span class="sxs-lookup"><span data-stu-id="8f156-537">Used to enforce that a non-parameter value is present during URL generation</span></span> |

[!INCLUDE[](~/includes/regex.md)]

<span data-ttu-id="8f156-538">Birden çok, kolon sınırlı kısıtlamalar tek bir parametre uygulanabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-538">Multiple, colon delimited constraints can be applied to a single parameter.</span></span> <span data-ttu-id="8f156-539">Örneğin, aşağıdaki kısıtlama bir parametreyi 1 veya daha büyük bir tamsayı değeriyle sınırlandırMaz:</span><span class="sxs-lookup"><span data-stu-id="8f156-539">For example, the following constraint restricts a parameter to an integer value of 1 or greater:</span></span>

```csharp
[Route("users/{id:int:min(1)}")]
public User GetUserById(int id) { }
```

> [!WARNING]
> <span data-ttu-id="8f156-540">URL'yi doğrulayan ve CLR türüne dönüştürülen rota kısıtlamaları her zaman değişmez kültürü kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-540">Route constraints that verify the URL and are converted to a CLR type always use the invariant culture.</span></span> <span data-ttu-id="8f156-541">Örneğin, CLR türüne `int` dönüştürme `DateTime`veya .</span><span class="sxs-lookup"><span data-stu-id="8f156-541">For example, conversion to the CLR type `int` or `DateTime`.</span></span> <span data-ttu-id="8f156-542">Bu kısıtlamalar, URL'nin yerelleştirilebilir olmadığını varsayar.</span><span class="sxs-lookup"><span data-stu-id="8f156-542">These constraints assume that the URL is not localizable.</span></span> <span data-ttu-id="8f156-543">Çerçeve tarafından sağlanan rota kısıtlamaları, rota değerlerinde depolanan değerleri değiştirmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-543">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="8f156-544">URL'den ayrıştırılan tüm rota değerleri dizeleri olarak depolanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-544">All route values parsed from the URL are stored as strings.</span></span> <span data-ttu-id="8f156-545">Örneğin, `float` kısıtlama rota değerini bir yüzer'e dönüştürmeyi dener, ancak dönüştürülen değer yalnızca bir şamandıraya dönüştürülebileceğini doğrulamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-545">For example, the `float` constraint attempts to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

### <a name="regular-expressions-in-constraints"></a><span data-ttu-id="8f156-546">Kısıtlamalardaki normal ifadeler</span><span class="sxs-lookup"><span data-stu-id="8f156-546">Regular expressions in constraints</span></span>

[!INCLUDE[](~/includes/regex.md)]

<span data-ttu-id="8f156-547">Normal ifadeler, rota kısıtlamasını `regex(...)` kullanarak satır içinde kısıtlamalar olarak belirtilebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-547">Regular expressions can be specified as inline constraints using the `regex(...)` route constraint.</span></span> <span data-ttu-id="8f156-548"><xref:Microsoft.AspNetCore.Builder.ControllerEndpointRouteBuilderExtensions.MapControllerRoute*> Ailedeki yöntemler de kısıtlamaların bir nesne edebi kabul eder.</span><span class="sxs-lookup"><span data-stu-id="8f156-548">Methods in the <xref:Microsoft.AspNetCore.Builder.ControllerEndpointRouteBuilderExtensions.MapControllerRoute*> family also accept an object literal of constraints.</span></span> <span data-ttu-id="8f156-549">Bu form kullanılırsa, dize değerleri normal ifadeler olarak yorumlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-549">If that form is used, string values are interpreted as regular expressions.</span></span>

<span data-ttu-id="8f156-550">Aşağıdaki kod satır içinde regex kısıtlaması kullanır:</span><span class="sxs-lookup"><span data-stu-id="8f156-550">The following code uses an inline regex constraint:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/StartupRegex.cs?name=snippet)]

<span data-ttu-id="8f156-551">Aşağıdaki kod, bir regex kısıtlaması belirtmek için bir nesne literal kullanır:</span><span class="sxs-lookup"><span data-stu-id="8f156-551">The following code uses an object literal to specify a regex constraint:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/StartupRegex2.cs?name=snippet)]

<span data-ttu-id="8f156-552">ASP.NET Core çerçevesi `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` düzenli ifade oluşturucuekler.</span><span class="sxs-lookup"><span data-stu-id="8f156-552">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="8f156-553">Bu <xref:System.Text.RegularExpressions.RegexOptions> üyelerin tanımı için bkz.</span><span class="sxs-lookup"><span data-stu-id="8f156-553">See <xref:System.Text.RegularExpressions.RegexOptions> for a description of these members.</span></span>

<span data-ttu-id="8f156-554">Normal ifadeler, yönlendirme ve C# dili tarafından kullanılanlara benzer sınır dışı layıcılar ve belirteçler kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-554">Regular expressions use delimiters and tokens similar to those used by routing and the C# language.</span></span> <span data-ttu-id="8f156-555">Normal ifade belirteçleri kaçmış olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-555">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="8f156-556">Satır satır kısıtlamasında normal ifadeyi `^\d{3}-\d{2}-\d{4}$` kullanmak için aşağıdakilerden birini kullanın:</span><span class="sxs-lookup"><span data-stu-id="8f156-556">To use the regular expression `^\d{3}-\d{2}-\d{4}$` in an inline constraint, use one of the following:</span></span>

* <span data-ttu-id="8f156-557">Dize kaçış karakterinden `\\` kaçmak için dizede sağlanan karakterleri C# kaynak dosyasında karakter olarak değiştirin. `\` `\`</span><span class="sxs-lookup"><span data-stu-id="8f156-557">Replace `\` characters provided in the string as `\\` characters in the C# source file in order to escape the `\` string escape character.</span></span>
* <span data-ttu-id="8f156-558">[Verbatim dize literals](/dotnet/csharp/language-reference/keywords/string).</span><span class="sxs-lookup"><span data-stu-id="8f156-558">[Verbatim string literals](/dotnet/csharp/language-reference/keywords/string).</span></span>

<span data-ttu-id="8f156-559">Yönlendirme parametre delimiter karakterleri kaçmak `{` `}`için `[` `]`, , , , ifade karakterleri `{{`çift, `[[` `]]`örneğin, , , `}}`, .</span><span class="sxs-lookup"><span data-stu-id="8f156-559">To escape routing parameter delimiter characters `{`, `}`, `[`, `]`, double the characters in the expression, for example, `{{`, `}}`, `[[`, `]]`.</span></span> <span data-ttu-id="8f156-560">Aşağıdaki tablo düzenli bir ifade ve onun kaçan sürümünü gösterir:</span><span class="sxs-lookup"><span data-stu-id="8f156-560">The following table shows a regular expression and its escaped version:</span></span>

| <span data-ttu-id="8f156-561">Normal ifade</span><span class="sxs-lookup"><span data-stu-id="8f156-561">Regular expression</span></span>    | <span data-ttu-id="8f156-562">Kaçan normal ifade</span><span class="sxs-lookup"><span data-stu-id="8f156-562">Escaped regular expression</span></span>     |
| --------------------- | ------------------------------ |
| `^\d{3}-\d{2}-\d{4}$` | `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` |
| `^[a-z]{2}$`          | `^[[a-z]]{{2}}$`               |

<span data-ttu-id="8f156-563">Yönlendirmede kullanılan normal ifadeler genellikle `^` karakterle başlar ve dizebaşlangıç konumuyla eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-563">Regular expressions used in routing often start with the `^` character and match the starting position of the string.</span></span> <span data-ttu-id="8f156-564">İfadeler genellikle `$` karakterle sona erer ve dize sonuyla eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-564">The expressions often end with the `$` character and match the end of the string.</span></span> <span data-ttu-id="8f156-565">Ve `^` `$` karakterler, normal ifadenin tüm rota parametre değeriyle eşleşmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-565">The `^` and `$` characters ensure that the regular expression matches the entire route parameter value.</span></span> <span data-ttu-id="8f156-566">`^` Ve `$` karakterler olmadan, normal ifade genellikle istenmeyen dize içinde herhangi bir alt dize eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-566">Without the `^` and `$` characters, the regular expression matches any substring within the string, which is often undesirable.</span></span> <span data-ttu-id="8f156-567">Aşağıdaki tablo örnekler sağlar ve neden eşleştiklerini veya eşleşmediklerini açıklar:</span><span class="sxs-lookup"><span data-stu-id="8f156-567">The following table provides examples and explains why they match or fail to match:</span></span>

| <span data-ttu-id="8f156-568">İfadeler</span><span class="sxs-lookup"><span data-stu-id="8f156-568">Expression</span></span>   | <span data-ttu-id="8f156-569">Dize</span><span class="sxs-lookup"><span data-stu-id="8f156-569">String</span></span>    | <span data-ttu-id="8f156-570">Eşleştirme</span><span class="sxs-lookup"><span data-stu-id="8f156-570">Match</span></span> | <span data-ttu-id="8f156-571">Açıklama</span><span class="sxs-lookup"><span data-stu-id="8f156-571">Comment</span></span>               |
| ------------ | --------- | :---: |  -------------------- |
| `[a-z]{2}`   | <span data-ttu-id="8f156-572">hello</span><span class="sxs-lookup"><span data-stu-id="8f156-572">hello</span></span>     | <span data-ttu-id="8f156-573">Evet</span><span class="sxs-lookup"><span data-stu-id="8f156-573">Yes</span></span>   | <span data-ttu-id="8f156-574">Substring eşleşmeleri</span><span class="sxs-lookup"><span data-stu-id="8f156-574">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="8f156-575">123abc456</span><span class="sxs-lookup"><span data-stu-id="8f156-575">123abc456</span></span> | <span data-ttu-id="8f156-576">Evet</span><span class="sxs-lookup"><span data-stu-id="8f156-576">Yes</span></span>   | <span data-ttu-id="8f156-577">Substring eşleşmeleri</span><span class="sxs-lookup"><span data-stu-id="8f156-577">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="8f156-578">Mz</span><span class="sxs-lookup"><span data-stu-id="8f156-578">mz</span></span>        | <span data-ttu-id="8f156-579">Evet</span><span class="sxs-lookup"><span data-stu-id="8f156-579">Yes</span></span>   | <span data-ttu-id="8f156-580">İfadeyle eşleşir</span><span class="sxs-lookup"><span data-stu-id="8f156-580">Matches expression</span></span>    |
| `[a-z]{2}`   | <span data-ttu-id="8f156-581">MZ</span><span class="sxs-lookup"><span data-stu-id="8f156-581">MZ</span></span>        | <span data-ttu-id="8f156-582">Evet</span><span class="sxs-lookup"><span data-stu-id="8f156-582">Yes</span></span>   | <span data-ttu-id="8f156-583">Servis talebine duyarlı değil</span><span class="sxs-lookup"><span data-stu-id="8f156-583">Not case sensitive</span></span>    |
| `^[a-z]{2}$` | <span data-ttu-id="8f156-584">hello</span><span class="sxs-lookup"><span data-stu-id="8f156-584">hello</span></span>     | <span data-ttu-id="8f156-585">Hayır</span><span class="sxs-lookup"><span data-stu-id="8f156-585">No</span></span>    | <span data-ttu-id="8f156-586">`^` Bkz. `$` ve üzeri</span><span class="sxs-lookup"><span data-stu-id="8f156-586">See `^` and `$` above</span></span> |
| `^[a-z]{2}$` | <span data-ttu-id="8f156-587">123abc456</span><span class="sxs-lookup"><span data-stu-id="8f156-587">123abc456</span></span> | <span data-ttu-id="8f156-588">Hayır</span><span class="sxs-lookup"><span data-stu-id="8f156-588">No</span></span>    | <span data-ttu-id="8f156-589">`^` Bkz. `$` ve üzeri</span><span class="sxs-lookup"><span data-stu-id="8f156-589">See `^` and `$` above</span></span> |

<span data-ttu-id="8f156-590">Normal ifade sözdizimi hakkında daha fazla bilgi için [bkz.](/dotnet/standard/base-types/regular-expression-language-quick-reference)</span><span class="sxs-lookup"><span data-stu-id="8f156-590">For more information on regular expression syntax, see [.NET Framework Regular Expressions](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span></span>

<span data-ttu-id="8f156-591">Bir parametreyi bilinen olası değerler kümesiyle kısıtlamak için normal bir ifade kullanın.</span><span class="sxs-lookup"><span data-stu-id="8f156-591">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="8f156-592">Örneğin, `{action:regex(^(list|get|create)$)}` `action` yalnızca rota değeri `list`ile `get`eşleşir . `create`</span><span class="sxs-lookup"><span data-stu-id="8f156-592">For example, `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="8f156-593">Kısıtlamalar sözlüğüne aktarılırsa, `^(list|get|create)$` dize eşdeğerdir.</span><span class="sxs-lookup"><span data-stu-id="8f156-593">If passed into the constraints dictionary, the string `^(list|get|create)$` is equivalent.</span></span> <span data-ttu-id="8f156-594">Bilinen kısıtlamalardan biriyle eşleşmeyan kısıtlamalar sözlüğünde geçirilen kısıtlamalar da normal ifadeler olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-594">Constraints that are passed in the constraints dictionary that don't match one of the known constraints are also treated as regular expressions.</span></span> <span data-ttu-id="8f156-595">Bilinen kısıtlamalardan biriyle eşleşmeyan bir şablon içinde geçirilen kısıtlamalar normal ifadeler olarak kabul edilmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-595">Constraints that are passed  within a template that don't match one of the known constraints are not treated as regular expressions.</span></span>

### <a name="custom-route-constraints"></a><span data-ttu-id="8f156-596">Özel rota kısıtlamaları</span><span class="sxs-lookup"><span data-stu-id="8f156-596">Custom route constraints</span></span>

<span data-ttu-id="8f156-597"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint> Arayüz uygulanarak özel rota kısıtlamaları oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-597">Custom route constraints can be created by implementing the <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interface.</span></span> <span data-ttu-id="8f156-598">`IRouteConstraint` Arabirim, <xref:System.Web.Routing.IRouteConstraint.Match*>kısıtlama `true` memnun veya `false` aksi takdirde döndürür içerir.</span><span class="sxs-lookup"><span data-stu-id="8f156-598">The `IRouteConstraint` interface contains <xref:System.Web.Routing.IRouteConstraint.Match*>, which returns `true` if the constraint is satisfied and `false` otherwise.</span></span>

<span data-ttu-id="8f156-599">Özel rota kısıtlamalarına nadiren ihtiyaç duyular.</span><span class="sxs-lookup"><span data-stu-id="8f156-599">Custom route constraints are rarely needed.</span></span> <span data-ttu-id="8f156-600">Özel bir rota kısıtlaması uygulamadan önce, model bağlama gibi alternatifleri göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="8f156-600">Before implementing a custom route constraint, consider alternatives, such as model binding.</span></span>

<span data-ttu-id="8f156-601">Özel `IRouteConstraint`bir kullanım için, rota kısıtlaması türü servis <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> kapsayıcısında uygulamanın kine kaydedilmelidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-601">To use a custom `IRouteConstraint`, the route constraint type must be registered with the app's <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> in the service container.</span></span> <span data-ttu-id="8f156-602">A, `ConstraintMap` kısıtlama anahtarlarını bu `IRouteConstraint` kısıtlamaları doğrulayan uygulamalara yönlendiren bir sözlüktür.</span><span class="sxs-lookup"><span data-stu-id="8f156-602">A `ConstraintMap` is a dictionary that maps route constraint keys to `IRouteConstraint` implementations that validate those constraints.</span></span> <span data-ttu-id="8f156-603">Bir uygulama, `ConstraintMap` hizmetlerin bir `Startup.ConfigureServices` parçası olarak [güncellenebilir. Çağrı ekleme](xref:Microsoft.Extensions.DependencyInjection.RoutingServiceCollectionExtensions.AddRouting*) veya <xref:Microsoft.AspNetCore.Routing.RouteOptions> doğrudan . `services.Configure<RouteOptions>`</span><span class="sxs-lookup"><span data-stu-id="8f156-603">An app's `ConstraintMap` can be updated in `Startup.ConfigureServices` either as part of a [services.AddRouting](xref:Microsoft.Extensions.DependencyInjection.RoutingServiceCollectionExtensions.AddRouting*) call or by configuring <xref:Microsoft.AspNetCore.Routing.RouteOptions> directly with `services.Configure<RouteOptions>`.</span></span> <span data-ttu-id="8f156-604">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="8f156-604">For example:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/StartupConstraint.cs?name=snippet)]

<span data-ttu-id="8f156-605">Önceki kısıtlama aşağıdaki kodda uygulanır:</span><span class="sxs-lookup"><span data-stu-id="8f156-605">The preceding constraint is applied in the following code:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/Controllers/TestController.cs?name=snippet&highlight=6,13)]

[!INCLUDE[](~/includes/MyDisplayRouteInfo.md)]

<span data-ttu-id="8f156-606">Rota parametresine uygulanmasını `MyCustomConstraint` engeller: `0`</span><span class="sxs-lookup"><span data-stu-id="8f156-606">The implementation of `MyCustomConstraint` prevents `0` being applied to a route parameter:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/StartupConstraint.cs?name=snippet2)]

[!INCLUDE[](~/includes/regex.md)]

<span data-ttu-id="8f156-607">Yukarıdaki kod:</span><span class="sxs-lookup"><span data-stu-id="8f156-607">The preceding code:</span></span>

* <span data-ttu-id="8f156-608">Rotanın `0` segmentinde `{id}` önler.</span><span class="sxs-lookup"><span data-stu-id="8f156-608">Prevents `0` in the `{id}` segment of the route.</span></span>
* <span data-ttu-id="8f156-609">Özel bir kısıtlama uygulamanın temel bir örneğini sağlamak için gösterilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-609">Is shown to provide a basic example of implementing a custom constraint.</span></span> <span data-ttu-id="8f156-610">Bir üretim uygulamasında kullanılmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-610">It should not be used in a production app.</span></span>

<span data-ttu-id="8f156-611">Aşağıdaki kod, bir içeren bir `id` `0` işlenmeyi önlemek için daha iyi bir yaklaşımdır:</span><span class="sxs-lookup"><span data-stu-id="8f156-611">The following code is a better approach to preventing an `id` containing a `0` from being processed:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/Controllers/TestController.cs?name=snippet2)]

<span data-ttu-id="8f156-612">Önceki kod yaklaşım üzerinde aşağıdaki `MyCustomConstraint` avantajlara sahiptir:</span><span class="sxs-lookup"><span data-stu-id="8f156-612">The preceding code has the following advantages over the `MyCustomConstraint` approach:</span></span>

* <span data-ttu-id="8f156-613">Özel bir kısıtlama gerektirmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-613">It doesn't require a custom constraint.</span></span>
* <span data-ttu-id="8f156-614">Rota parametresi . `0`</span><span class="sxs-lookup"><span data-stu-id="8f156-614">It returns a more descriptive error when the route parameter includes `0`.</span></span>

## <a name="parameter-transformer-reference"></a><span data-ttu-id="8f156-615">Parametre transformatör referansı</span><span class="sxs-lookup"><span data-stu-id="8f156-615">Parameter transformer reference</span></span>

<span data-ttu-id="8f156-616">Parametre transformatörleri:</span><span class="sxs-lookup"><span data-stu-id="8f156-616">Parameter transformers:</span></span>

* <span data-ttu-id="8f156-617">Kullanarak bir bağlantı oluştururken çalıştırın. <xref:Microsoft.AspNetCore.Routing.LinkGenerator></span><span class="sxs-lookup"><span data-stu-id="8f156-617">Execute when generating a link using <xref:Microsoft.AspNetCore.Routing.LinkGenerator>.</span></span>
* <span data-ttu-id="8f156-618">Uygulayın. <xref:Microsoft.AspNetCore.Routing.IOutboundParameterTransformer?displayProperty=fullName></span><span class="sxs-lookup"><span data-stu-id="8f156-618">Implement <xref:Microsoft.AspNetCore.Routing.IOutboundParameterTransformer?displayProperty=fullName>.</span></span>
* <span data-ttu-id="8f156-619">'yi kullanarak <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-619">Are configured using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span></span>
* <span data-ttu-id="8f156-620">Parametrenin rota değerini alın ve yeni bir dize değerine dönüştürün.</span><span class="sxs-lookup"><span data-stu-id="8f156-620">Take the parameter's route value and transform it to a new string value.</span></span>
* <span data-ttu-id="8f156-621">Oluşturulan bağlantıda dönüştürülen değeri kullanarak sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-621">Result in using the transformed value in the generated link.</span></span>

<span data-ttu-id="8f156-622">Örneğin, rota `slugify` deseni `blog\{article:slugify}` özel `Url.Action(new { article = "MyTestArticle" })` bir parametre `blog\my-test-article`transformatörü üretir.</span><span class="sxs-lookup"><span data-stu-id="8f156-622">For example, a custom `slugify` parameter transformer in route pattern `blog\{article:slugify}` with `Url.Action(new { article = "MyTestArticle" })` generates `blog\my-test-article`.</span></span>

<span data-ttu-id="8f156-623">Aşağıdaki `IOutboundParameterTransformer` uygulamayı göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="8f156-623">Consider the following `IOutboundParameterTransformer` implementation:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/StartupConstraint2.cs?name=snippet2)]

<span data-ttu-id="8f156-624">Bir rota deseninde bir parametre transformatörü `Startup.ConfigureServices`kullanmak için, şu şekilde kullanarak <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> yapılandırın:</span><span class="sxs-lookup"><span data-stu-id="8f156-624">To use a parameter transformer in a route pattern, configure it using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> in `Startup.ConfigureServices`:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/StartupConstraint2.cs?name=snippet)]

<span data-ttu-id="8f156-625">ASP.NET Core çerçevesi, bitiş noktasının çözüldüğü yerlerde URI'yi dönüştürmek için parametre transformatörleri kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-625">The ASP.NET Core framework uses parameter transformers to transform the URI where an endpoint resolves.</span></span> <span data-ttu-id="8f156-626">`area`Örneğin, parametre transformatörleri , , `controller` `action`, ve `page`.</span><span class="sxs-lookup"><span data-stu-id="8f156-626">For example, parameter transformers transform the route values used to match an `area`, `controller`, `action`, and `page`.</span></span>

```csharp
routes.MapControllerRoute(
    name: "default",
    template: "{controller:slugify=Home}/{action:slugify=Index}/{id?}");
```

<span data-ttu-id="8f156-627">Önceki rota şablonuyla, `SubscriptionManagementController.GetAll` eylem URI `/subscription-management/get-all`ile eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-627">With the preceding route template, the action `SubscriptionManagementController.GetAll` is matched with the URI `/subscription-management/get-all`.</span></span> <span data-ttu-id="8f156-628">Parametre transformatörü, bağlantı oluşturmak için kullanılan rota değerlerini değiştirmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-628">A parameter transformer doesn't change the route values used to generate a link.</span></span> <span data-ttu-id="8f156-629">Örneğin, `Url.Action("GetAll", "SubscriptionManagement")` `/subscription-management/get-all`çıktılar.</span><span class="sxs-lookup"><span data-stu-id="8f156-629">For example, `Url.Action("GetAll", "SubscriptionManagement")` outputs `/subscription-management/get-all`.</span></span>

<span data-ttu-id="8f156-630">ASP.NET Core, oluşturulan rotalarla parametre transformatörleri kullanmak için API kuralları sağlar:</span><span class="sxs-lookup"><span data-stu-id="8f156-630">ASP.NET Core provides API conventions for using parameter transformers with generated routes:</span></span>

* <span data-ttu-id="8f156-631"><xref:Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention?displayProperty=fullName> MVC kuralı, uygulamadaki tüm öznitelik rotalarına belirli bir parametre transformatörü uygular.</span><span class="sxs-lookup"><span data-stu-id="8f156-631">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention?displayProperty=fullName> MVC convention applies a specified parameter transformer to all attribute routes in the app.</span></span> <span data-ttu-id="8f156-632">Parametre transformatörü, bağlantı yolu belirteçlerini değiştirildikleri gibi dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="8f156-632">The parameter transformer transforms attribute route tokens as they are replaced.</span></span> <span data-ttu-id="8f156-633">Daha fazla bilgi için bkz: [Belirteç değiştirmesini özelleştirmek için bir parametre transformatörü kullanın.](xref:mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement)</span><span class="sxs-lookup"><span data-stu-id="8f156-633">For more information, see [Use a parameter transformer to customize token replacement](xref:mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span></span>
* <span data-ttu-id="8f156-634">Razor Pages <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention> API kuralını kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-634">Razor Pages uses the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention> API convention.</span></span> <span data-ttu-id="8f156-635">Bu kural, otomatik olarak keşfedilen tüm Razor Sayfalar için belirtilen bir parametre transformatörü uygular.</span><span class="sxs-lookup"><span data-stu-id="8f156-635">This convention applies a specified parameter transformer to all automatically discovered Razor Pages.</span></span> <span data-ttu-id="8f156-636">Parametre transformatörü, Razor Pages yollarının klasör ve dosya adı bölümlerini dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="8f156-636">The parameter transformer transforms the folder and file name segments of Razor Pages routes.</span></span> <span data-ttu-id="8f156-637">Daha fazla bilgi için bkz. [Sayfa rotalarını özelleştirmek için bir parametre transformatörü kullanın.](xref:razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes)</span><span class="sxs-lookup"><span data-stu-id="8f156-637">For more information, see [Use a parameter transformer to customize page routes](xref:razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span></span>

<a name="ugr"></a>

## <a name="url-generation-reference"></a><span data-ttu-id="8f156-638">URL oluşturma başvurusu</span><span class="sxs-lookup"><span data-stu-id="8f156-638">URL generation reference</span></span>

<span data-ttu-id="8f156-639">Bu bölümde, URL oluşturma tarafından uygulanan algoritma için bir başvuru içerir.</span><span class="sxs-lookup"><span data-stu-id="8f156-639">This section contains a reference for the algorithm implemented by URL generation.</span></span> <span data-ttu-id="8f156-640">Uygulamada, URL oluşturmanın en karmaşık örnekleri denetleyicileri veya Razor Pages kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-640">In practice, most complex examples of URL generation use controllers or Razor Pages.</span></span> <span data-ttu-id="8f156-641">Ek bilgi için [denetleyicilerde yönlendirmeye](xref:mvc/controllers/routing) bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-641">See  [routing in controllers](xref:mvc/controllers/routing) for additional information.</span></span>

<span data-ttu-id="8f156-642">URL oluşturma işlemi [LinkGenerator.GetPathByAddress](xref:Microsoft.AspNetCore.Routing.LinkGenerator.GetPathByAddress*) veya benzer bir yöntem için bir çağrı ile başlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-642">The URL generation process begins with a call to [LinkGenerator.GetPathByAddress](xref:Microsoft.AspNetCore.Routing.LinkGenerator.GetPathByAddress*) or a similar method.</span></span> <span data-ttu-id="8f156-643">Yöntem, bir adres, bir rota değerleri kümesi ve isteğe bağlı `HttpContext`olarak geçerli istek hakkında bilgi ile sağlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-643">The method is provided with an address, a set of route values, and optionally information about the current request from `HttpContext`.</span></span>

<span data-ttu-id="8f156-644">İlk adım, adresin türüyle eşleşen bir sözcük [`IEndpointAddressScheme<TAddress>`](xref:Microsoft.AspNetCore.Routing.IEndpointAddressScheme`1) kullanarak bir aday bitiş noktası kümesini çözmek için adresi kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="8f156-644">The first step is to use the address to resolve a set of candidate endpoints using an [`IEndpointAddressScheme<TAddress>`](xref:Microsoft.AspNetCore.Routing.IEndpointAddressScheme`1) that matches the address's type.</span></span>

<span data-ttu-id="8f156-645">Bir url oluşturma işlemi başarılı olana kadar, aday kümesi adres şeması tarafından bulunduktan sonra, uç noktalar sıralanır ve yinelemeli olarak işlenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-645">Once of set of candidates is found by the address scheme, the endpoints are ordered and processed iteratively until a URL generation operation succeeds.</span></span> <span data-ttu-id="8f156-646">URL oluşturma belirsizlikleri kontrol **etmez,** ilk sonuç nihai sonuç döndü.</span><span class="sxs-lookup"><span data-stu-id="8f156-646">URL generation does **not** check for ambiguities, the first result returned is the final result.</span></span>

### <a name="troubleshooting-url-generation-with-logging"></a><span data-ttu-id="8f156-647">Günlük ile URL oluşturma sorun giderme</span><span class="sxs-lookup"><span data-stu-id="8f156-647">Troubleshooting URL generation with logging</span></span>

<span data-ttu-id="8f156-648">Sorun giderme URL oluşturmanın ilk adımı, `Microsoft.AspNetCore.Routing` `TRACE`günlük düzeyini .</span><span class="sxs-lookup"><span data-stu-id="8f156-648">The first step in troubleshooting URL generation is setting the logging level of `Microsoft.AspNetCore.Routing` to `TRACE`.</span></span> <span data-ttu-id="8f156-649">`LinkGenerator`sorunları gidermek için yararlı olabilecek işleme hakkında birçok ayrıntı kaydeder.</span><span class="sxs-lookup"><span data-stu-id="8f156-649">`LinkGenerator` logs many details about its processing which can be useful to troubleshoot problems.</span></span>

<span data-ttu-id="8f156-650">URL oluşturma yla ilgili ayrıntılar için [URL oluşturma başvurusuna](#ugr) bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-650">See [URL generation reference](#ugr) for details on URL generation.</span></span>

### <a name="addresses"></a><span data-ttu-id="8f156-651">Adresler</span><span class="sxs-lookup"><span data-stu-id="8f156-651">Addresses</span></span>

<span data-ttu-id="8f156-652">Adresler, bir aramayı bir dizi aday uç noktaya bağlamak için kullanılan URL oluşturma kavramıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-652">Addresses are the concept in URL generation used to bind a call into the link generator to a set of candidate endpoints.</span></span>

<span data-ttu-id="8f156-653">Adresler varsayılan olarak iki uygulamayla birlikte gelen genişletilebilir bir kavramdır:</span><span class="sxs-lookup"><span data-stu-id="8f156-653">Addresses are an extensible concept that come with two implementations by default:</span></span>

* <span data-ttu-id="8f156-654">Adres olarak uç`string`nokta *adı* ( ) kullanma:</span><span class="sxs-lookup"><span data-stu-id="8f156-654">Using *endpoint name* (`string`) as the address:</span></span>
    * <span data-ttu-id="8f156-655">MVC'nin rota adına benzer işlevsellik sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-655">Provides similar functionality to MVC's route name.</span></span>
    * <span data-ttu-id="8f156-656"><xref:Microsoft.AspNetCore.Routing.IEndpointNameMetadata> Meta veri türünü kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-656">Uses the <xref:Microsoft.AspNetCore.Routing.IEndpointNameMetadata> metadata type.</span></span>
    * <span data-ttu-id="8f156-657">Sağlanan dizeyi, tüm kayıtlı uç noktaların meta verilerine göre çözer.</span><span class="sxs-lookup"><span data-stu-id="8f156-657">Resolves the provided string against the metadata of all registered endpoints.</span></span>
    * <span data-ttu-id="8f156-658">Birden çok uç nokta aynı adı kullanıyorsa, başlangıç için bir özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8f156-658">Throws an exception on startup if multiple endpoints use the same name.</span></span>
    * <span data-ttu-id="8f156-659">Denetleyiciler ve Jilet Sayfaları dışında genel amaçlı kullanım için önerilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-659">Recommended for general-purpose use outside of controllers and Razor Pages.</span></span>
* <span data-ttu-id="8f156-660">Adres olarak<xref:Microsoft.AspNetCore.Routing.RouteValuesAddress>rota *değerlerini* ( ) kullanma:</span><span class="sxs-lookup"><span data-stu-id="8f156-660">Using *route values* (<xref:Microsoft.AspNetCore.Routing.RouteValuesAddress>) as the address:</span></span>
    * <span data-ttu-id="8f156-661">Denetleyicilere ve Razor Pages eski URL üretimine benzer işlevler sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-661">Provides similar functionality to controllers and Razor Pages legacy URL generation.</span></span>
    * <span data-ttu-id="8f156-662">Uzatmak ve hata ayıklamak için çok karmaşık.</span><span class="sxs-lookup"><span data-stu-id="8f156-662">Very complex to extend and debug.</span></span>
    * <span data-ttu-id="8f156-663">, Tag Helpers, HTML Yardımcıları, Eylem Sonuçları, vb. tarafından `IUrlHelper`kullanılan uygulamayı sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-663">Provides the implementation used by `IUrlHelper`, Tag Helpers, HTML Helpers, Action Results, etc.</span></span>

<span data-ttu-id="8f156-664">Adres şemasının rolü, adres ve eşleşen uç noktalar arasındaki ilişkiyi rasgele ölçütlere göre yapmaktır:</span><span class="sxs-lookup"><span data-stu-id="8f156-664">The role of the address scheme is to make the association between the address and matching endpoints by arbitrary criteria:</span></span>

* <span data-ttu-id="8f156-665">Bitiş noktası adı düzeni temel sözlük araması gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="8f156-665">The endpoint name scheme performs a basic dictionary lookup.</span></span>
* <span data-ttu-id="8f156-666">Rota değerleri düzeni, küme algoritmasının karmaşık en iyi alt kümesine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="8f156-666">The route values scheme has a complex best subset of set algorithm.</span></span>

<a name="ambient"></a>

### <a name="ambient-values-and-explicit-values"></a><span data-ttu-id="8f156-667">Ortam değerleri ve açık değerler</span><span class="sxs-lookup"><span data-stu-id="8f156-667">Ambient values and explicit values</span></span>

<span data-ttu-id="8f156-668">Geçerli istekten yönlendirme, geçerli isteğin `HttpContext.Request.RouteValues`rota değerlerine erişiyor.</span><span class="sxs-lookup"><span data-stu-id="8f156-668">From the current request, routing accesses the route values of the current request `HttpContext.Request.RouteValues`.</span></span> <span data-ttu-id="8f156-669">Geçerli istekle ilişkili değerler **ortam değerleri**olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-669">The values associated with the current request are referred to as the **ambient values**.</span></span> <span data-ttu-id="8f156-670">Açıklık amacıyla, dokümantasyon açık **değerler**olarak yöntemlere geçirilen rota değerlerini ifade eder.</span><span class="sxs-lookup"><span data-stu-id="8f156-670">For the purpose of clarity, the documentation refers to the route values passed in to methods as **explicit values**.</span></span>

<span data-ttu-id="8f156-671">Aşağıdaki örnekte ortam değerleri ve açık değerler gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="8f156-671">The following example shows ambient values and explicit values.</span></span> <span data-ttu-id="8f156-672">Geçerli istek ve açık değerlerden ortam değerleri `{ id = 17, }`sağlar: :</span><span class="sxs-lookup"><span data-stu-id="8f156-672">It provides ambient values from the current request and explicit values: `{ id = 17, }`:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/Controllers/WidgetController.cs?name=snippet)]

<span data-ttu-id="8f156-673">Yukarıdaki kod:</span><span class="sxs-lookup"><span data-stu-id="8f156-673">The preceding code:</span></span>

* <span data-ttu-id="8f156-674">Döndürür`/Widget/Index/17`</span><span class="sxs-lookup"><span data-stu-id="8f156-674">Returns `/Widget/Index/17`</span></span>
* <span data-ttu-id="8f156-675">DI <xref:Microsoft.AspNetCore.Routing.LinkGenerator> [DI](xref:fundamentals/dependency-injection)üzerinden alır .</span><span class="sxs-lookup"><span data-stu-id="8f156-675">Gets <xref:Microsoft.AspNetCore.Routing.LinkGenerator> via [DI](xref:fundamentals/dependency-injection).</span></span>

<span data-ttu-id="8f156-676">Aşağıdaki kod hiçbir ortam değerleri ve açık `{ controller = "Home", action = "Subscribe", id = 17, }`değerler sağlar::</span><span class="sxs-lookup"><span data-stu-id="8f156-676">The following code provides no ambient values and explicit values: `{ controller = "Home", action = "Subscribe", id = 17, }`:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/Controllers/WidgetController.cs?name=snippet2)]

<span data-ttu-id="8f156-677">Önceki yöntem döndürür`/Home/Subscribe/17`</span><span class="sxs-lookup"><span data-stu-id="8f156-677">The preceding  method returns `/Home/Subscribe/17`</span></span>

<span data-ttu-id="8f156-678">İadelerde `WidgetController` `/Widget/Subscribe/17`aşağıdaki kod:</span><span class="sxs-lookup"><span data-stu-id="8f156-678">The following code in the `WidgetController` returns `/Widget/Subscribe/17`:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/Controllers/WidgetController.cs?name=snippet3)]

<span data-ttu-id="8f156-679">Aşağıdaki kod, denetleyiciyi geçerli istekteki ortam değerlerinden ve `{ action = "Edit", id = 17, }`açık değerlerden sağlar: :</span><span class="sxs-lookup"><span data-stu-id="8f156-679">The following code provides the controller from ambient values in the current request and explicit values: `{ action = "Edit", id = 17, }`:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/Controllers/GadgetController.cs?name=snippet)]

<span data-ttu-id="8f156-680">Yukarıdaki kodda:</span><span class="sxs-lookup"><span data-stu-id="8f156-680">In the preceding code:</span></span>

* <span data-ttu-id="8f156-681">`/Gadget/Edit/17`döndürülür.</span><span class="sxs-lookup"><span data-stu-id="8f156-681">`/Gadget/Edit/17` is returned.</span></span>
* <span data-ttu-id="8f156-682"><xref:Microsoft.AspNetCore.Mvc.ControllerBase.Url>alır <xref:Microsoft.AspNetCore.Mvc.IUrlHelper>.</span><span class="sxs-lookup"><span data-stu-id="8f156-682"><xref:Microsoft.AspNetCore.Mvc.ControllerBase.Url> gets the <xref:Microsoft.AspNetCore.Mvc.IUrlHelper>.</span></span>
* <xref:Microsoft.AspNetCore.Mvc.UrlHelperExtensions.Action*>   
<span data-ttu-id="8f156-683">eylem yöntemi için mutlak bir yol olan bir URL oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8f156-683">generates a URL with an absolute path for an action method.</span></span> <span data-ttu-id="8f156-684">URL belirtilen `action` adı ve `route` değerleri içerir.</span><span class="sxs-lookup"><span data-stu-id="8f156-684">The URL contains the specified `action` name and `route` values.</span></span>

<span data-ttu-id="8f156-685">Aşağıdaki kod, geçerli istek ve açık değerlerden `{ page = "./Edit, id = 17, }`ortam değerleri sağlar: :</span><span class="sxs-lookup"><span data-stu-id="8f156-685">The following code provides ambient values from the current request and explicit values: `{ page = "./Edit, id = 17, }`:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/Pages/Index.cshtml.cs?name=snippet)]

<span data-ttu-id="8f156-686">Önceki kod, `url` Razor `/Edit/17` Sayfasını Edit Sayfası'nın aşağıdaki sayfa yönergesini içerdiği zamana göre belirlenir:</span><span class="sxs-lookup"><span data-stu-id="8f156-686">The preceding code sets `url` to  `/Edit/17` when the Edit Razor Page contains the following page directive:</span></span>

 `@page "{id:int}"`

<span data-ttu-id="8f156-687">Edit sayfası rota şablonu `"{id:int}"` içermiyorsa. `url` `/Edit?id=17`</span><span class="sxs-lookup"><span data-stu-id="8f156-687">If the Edit page doesn't contain the `"{id:int}"` route template, `url` is `/Edit?id=17`.</span></span>

<span data-ttu-id="8f156-688">MVC'nin <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> davranışı, burada açıklanan kurallara ek olarak bir karmaşıklık katmanı ekler:</span><span class="sxs-lookup"><span data-stu-id="8f156-688">The behavior of MVC's <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> adds a layer of complexity in addition to the rules described here:</span></span>

* <span data-ttu-id="8f156-689">`IUrlHelper`her zaman ortam değerleri olarak geçerli istek ten rota değerlerini sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-689">`IUrlHelper` always provides the route values from the current request as ambient values.</span></span>
* <span data-ttu-id="8f156-690">[iUrlHelper.Action,](xref:Microsoft.AspNetCore.Mvc.UrlHelperExtensions.Action*) geliştirici tarafından `action` `controller` geçersiz kılınmadığı sürece geçerli ve rota değerlerini her zaman açık değerler olarak kopyalar.</span><span class="sxs-lookup"><span data-stu-id="8f156-690">[IUrlHelper.Action](xref:Microsoft.AspNetCore.Mvc.UrlHelperExtensions.Action*) always copies the current `action` and `controller` route values as explicit values unless overridden by the developer.</span></span>
* <span data-ttu-id="8f156-691">[iUrlHelper.Page](xref:Microsoft.AspNetCore.Mvc.UrlHelperExtensions.Page*) geçersiz kılınmadığı `page` sürece geçerli rota değerini her zaman açık bir değer olarak kopyalar.</span><span class="sxs-lookup"><span data-stu-id="8f156-691">[IUrlHelper.Page](xref:Microsoft.AspNetCore.Mvc.UrlHelperExtensions.Page*) always copies the current `page` route value as an explicit value unless overridden.</span></span> <!--by the user-->
* <span data-ttu-id="8f156-692">`IUrlHelper.Page`geçersiz kılınmadığı `handler` sürece, `null` geçerli rota değerini açık değerlerle her zaman geçersiz kılar.</span><span class="sxs-lookup"><span data-stu-id="8f156-692">`IUrlHelper.Page` always overrides the current `handler` route value with `null` as an explicit values unless overridden.</span></span>

<span data-ttu-id="8f156-693">MVC kendi kurallarına uymak gibi görünmüyor, çünkü kullanıcılar genellikle ortam değerlerinin davranış ayrıntıları tarafından şaşırır.</span><span class="sxs-lookup"><span data-stu-id="8f156-693">Users are often surprised by the behavioral details of ambient values, because MVC doesn't seem to follow its own rules.</span></span> <span data-ttu-id="8f156-694">Tarihsel ve uyumluluk nedenleriyle, bazı `action`rota `controller` `page`değerleri `handler` gibi , , , ve kendi özel durum davranışı var.</span><span class="sxs-lookup"><span data-stu-id="8f156-694">For historical and compatibility reasons, certain route values such as `action`, `controller`, `page`, and `handler` have their own special-case behavior.</span></span>

<span data-ttu-id="8f156-695">Uyumluluk `IUrlHelper` için bu `LinkGenerator.GetPathByAction` `LinkGenerator.GetPathByPage` anormallikleri sağlayan ve yineler eşdeğer işlevsellik.</span><span class="sxs-lookup"><span data-stu-id="8f156-695">The equivalent functionality provided by `LinkGenerator.GetPathByAction` and `LinkGenerator.GetPathByPage` duplicates these anomalies of `IUrlHelper` for compatibility.</span></span>

### <a name="url-generation-process"></a><span data-ttu-id="8f156-696">URL oluşturma süreci</span><span class="sxs-lookup"><span data-stu-id="8f156-696">URL generation process</span></span>

<span data-ttu-id="8f156-697">Aday uç noktaları kümesi bulunduktan sonra, URL oluşturma algoritması:</span><span class="sxs-lookup"><span data-stu-id="8f156-697">Once the set of candidate endpoints are found, the URL generation algorithm:</span></span>

* <span data-ttu-id="8f156-698">Uç noktaları yinelemeli olarak işler.</span><span class="sxs-lookup"><span data-stu-id="8f156-698">Processes the endpoints iteratively.</span></span>
* <span data-ttu-id="8f156-699">İlk başarılı sonucu verir.</span><span class="sxs-lookup"><span data-stu-id="8f156-699">Returns the first successful result.</span></span>

<span data-ttu-id="8f156-700">Bu işlemin ilk adımı **rota değeri geçersiz liği**olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-700">The first step in this process is called **route value invalidation**.</span></span>  <span data-ttu-id="8f156-701">Rota değeri geçersiz liği, yönlendirmenin ortam değerlerinden hangi rota değerlerinin kullanılması na karar verdiği ve hangisini yoksayması gerektiğine karar verdiği işlemdir.</span><span class="sxs-lookup"><span data-stu-id="8f156-701">Route value invalidation is the process by which routing decides which route values from the ambient values should be used and which should be ignored.</span></span> <span data-ttu-id="8f156-702">Her ortam değeri kabul edilir ve açık değerlerle birlikte veya yoksayılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-702">Each ambient value is considered and either combined with the explicit values, or ignored.</span></span>

<span data-ttu-id="8f156-703">Ortam değerlerinin rolünü düşünmenin en iyi yolu, bazı genel durumlarda uygulama geliştiricileri yazarak kaydetmeye çalışmalarıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-703">The best way to think about the role of ambient values is that they attempt to save application developers typing, in some common cases.</span></span> <span data-ttu-id="8f156-704">Geleneksel olarak, ortam değerlerinin yararlı olduğu senaryolar MVC ile ilgilidir:</span><span class="sxs-lookup"><span data-stu-id="8f156-704">Traditionally, the scenarios where ambient values are helpful are related to MVC:</span></span>

* <span data-ttu-id="8f156-705">Aynı denetleyicideki başka bir eyleme bağlanırken denetleyici adının belirtilmesi gerekmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-705">When linking to another action in the same controller, the controller name doesn't need to be specified.</span></span>
* <span data-ttu-id="8f156-706">Aynı alandaki başka bir denetleyiciye bağlanırken, alan adının belirtilmesi gerekmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-706">When linking to another controller in the same area, the area name doesn't need to be specified.</span></span>
* <span data-ttu-id="8f156-707">Aynı eylem yöntemine bağlantı verirken, rota değerlerinin belirtilmesi gerekmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-707">When linking to the same action method, route values don't need to be specified.</span></span>
* <span data-ttu-id="8f156-708">Uygulamanın başka bir bölümüne bağlantı verirken, uygulamanın o bölümünde hiçbir anlamı olmayan rota değerlerini taşımak istemezsinüz.</span><span class="sxs-lookup"><span data-stu-id="8f156-708">When linking to another part of the app, you don't want to carry over route values that have no meaning in that part of the app.</span></span>

<span data-ttu-id="8f156-709">Aramalar `LinkGenerator` veya `IUrlHelper` bu `null` dönüş genellikle rota değeri geçersizliği anlamama neden olur.</span><span class="sxs-lookup"><span data-stu-id="8f156-709">Calls to `LinkGenerator` or `IUrlHelper` that return `null` are usually caused by not understanding route value invalidation.</span></span> <span data-ttu-id="8f156-710">Sorunu çözüp çözmediğini görmek için rota değerlerinden daha fazlasını açıkça belirterek yol değeri geçersizliğini giderin.</span><span class="sxs-lookup"><span data-stu-id="8f156-710">Troubleshoot route value invalidation by explicitly specifying more of the route values to see if that solves the problem.</span></span>

<span data-ttu-id="8f156-711">Rota değeri geçersizliği, uygulamanın URL düzeninin soldan sağa bir hiyerarşiyle hiyerarşik olduğu varsayımıyla çalışır.</span><span class="sxs-lookup"><span data-stu-id="8f156-711">Route value invalidation works on the assumption that the app's URL scheme is hierarchical, with a hierarchy formed from left-to-right.</span></span> <span data-ttu-id="8f156-712">Uygulamada nasıl çalıştığına `{controller}/{action}/{id?}` dair sezgisel bir fikir elde etmek için temel denetleyici rota şablonuna göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="8f156-712">Consider the basic controller route template `{controller}/{action}/{id?}` to get an intuitive sense of how this works in practice.</span></span> <span data-ttu-id="8f156-713">Değer **change** değişikliği, sağa görünen tüm rota değerlerini **geçersiz k.**</span><span class="sxs-lookup"><span data-stu-id="8f156-713">A **change** to a value **invalidates** all of the route values that appear to the right.</span></span> <span data-ttu-id="8f156-714">Bu hiyerarşi hakkında varsayımı yansıtır.</span><span class="sxs-lookup"><span data-stu-id="8f156-714">This reflects the assumption about hierarchy.</span></span> <span data-ttu-id="8f156-715">Uygulama için `id`bir ortam değeri varsa ve işlem için farklı bir `controller`değer belirtir:</span><span class="sxs-lookup"><span data-stu-id="8f156-715">If the app has an ambient value for `id`, and the operation specifies a different value for the `controller`:</span></span>

* <span data-ttu-id="8f156-716">`id`'nin solunda `{controller}` olduğu için `{id?}`yeniden kullanılmaz.</span><span class="sxs-lookup"><span data-stu-id="8f156-716">`id` won't be reused because `{controller}` is to the left of `{id?}`.</span></span>

<span data-ttu-id="8f156-717">Bu ilkeyi gösteren bazı örnekler:</span><span class="sxs-lookup"><span data-stu-id="8f156-717">Some examples demonstrating this principle:</span></span>

* <span data-ttu-id="8f156-718">Açık değerler için `id`bir değer içeriyorsa, `id` ortam değeri yoksayılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-718">If the explicit values contain a value for `id`, the ambient value for `id` is ignored.</span></span> <span data-ttu-id="8f156-719">Ortam değerleri için `controller` ve `action` kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-719">The ambient values for `controller` and `action` can be used.</span></span>
* <span data-ttu-id="8f156-720">Açık değerler için `action`bir değer `action` içeriyorsa, herhangi bir ortam değeri yoksayılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-720">If the explicit values contain a value for `action`, any ambient value for `action` is ignored.</span></span> <span data-ttu-id="8f156-721">Ortam değerleri `controller` kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-721">The ambient values for `controller` can be used.</span></span> <span data-ttu-id="8f156-722">Açık değer için `action` ortam değeri `action`farklıise, `id` değer kullanılmaz.</span><span class="sxs-lookup"><span data-stu-id="8f156-722">If the explicit value for `action` is different from the ambient value for `action`, the `id` value won't be used.</span></span>  <span data-ttu-id="8f156-723">Açık `action` değer için ortam değeri ile `action`aynıise, `id` değer kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-723">If the explicit value for `action` is the same as the ambient value for `action`, the `id` value can be used.</span></span>
* <span data-ttu-id="8f156-724">Açık değerler için `controller`bir değer `controller` içeriyorsa, herhangi bir ortam değeri yoksayılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-724">If the explicit values contain a value for `controller`, any ambient value for `controller` is ignored.</span></span> <span data-ttu-id="8f156-725">Açık değer ortam `controller` değerinden `controller`farklıysa, `action` ve `id` değerleri kullanılmaz.</span><span class="sxs-lookup"><span data-stu-id="8f156-725">If the explicit value for `controller` is different from the ambient value for `controller`, the `action` and `id` values won't be used.</span></span> <span data-ttu-id="8f156-726">Açık `controller` değer için ortam değeri ile aynı `controller`ise, `action` ve `id` değerleri kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-726">If the explicit value for `controller` is the same as the ambient value for `controller`, the `action` and `id` values can be used.</span></span>

<span data-ttu-id="8f156-727">Bu süreç, öznitelik yollarının ve özel konvansiyonel yolların varlığı yla daha da karmaşık hale gelen bir süreçtir.</span><span class="sxs-lookup"><span data-stu-id="8f156-727">This process is further complicated by the existence of attribute routes and dedicated conventional routes.</span></span> <span data-ttu-id="8f156-728">Rota parametrelerini `{controller}/{action}/{id?}` kullanarak bir hiyerarşi belirtin gibi geleneksel yolları denetle.</span><span class="sxs-lookup"><span data-stu-id="8f156-728">Controller conventional routes such as `{controller}/{action}/{id?}` specify a hierarchy using route parameters.</span></span> <span data-ttu-id="8f156-729">Özel [konvansiyonel rotalar](xref:mvc/controllers/routing#dcr) ve denetleyicilere ve Razor Pages'e [öznitelik rotaları](xref:mvc/controllers/routing#ar) için:</span><span class="sxs-lookup"><span data-stu-id="8f156-729">For [dedicated conventional routes](xref:mvc/controllers/routing#dcr) and [attribute routes](xref:mvc/controllers/routing#ar) to controllers and Razor Pages:</span></span>

* <span data-ttu-id="8f156-730">Rota değerleri hiyerarşisi vardır.</span><span class="sxs-lookup"><span data-stu-id="8f156-730">There is a hierarchy of route values.</span></span>
* <span data-ttu-id="8f156-731">Şablonda görünmezler.</span><span class="sxs-lookup"><span data-stu-id="8f156-731">They don't appear in the template.</span></span>

<span data-ttu-id="8f156-732">Bu gibi durumlarda, URL oluşturma **gerekli değerler** kavramını tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-732">For these cases, URL generation defines the **required values** concept.</span></span> <span data-ttu-id="8f156-733">Denetleyiciler ve Razor Pages tarafından oluşturulan uç noktalar, rota değeri geçersiz liği çalışmasına izin veren değerleri belirtmiştir.</span><span class="sxs-lookup"><span data-stu-id="8f156-733">Endpoints created by controllers and Razor Pages have required values specified that allow route value invalidation to work.</span></span>

<span data-ttu-id="8f156-734">Rota değeri geçersizleştirme algoritması ayrıntılı olarak:</span><span class="sxs-lookup"><span data-stu-id="8f156-734">The route value invalidation algorithm in detail:</span></span>

* <span data-ttu-id="8f156-735">Gerekli değer adları rota parametreleri ile birleştirilir ve daha sonra soldan sağa doğru işlenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-735">The required value names are combined with the route parameters, then processed from left-to-right.</span></span>
* <span data-ttu-id="8f156-736">Her parametre için ortam değeri ve açık değer karşılaştırılır:</span><span class="sxs-lookup"><span data-stu-id="8f156-736">For each parameter, the ambient value and explicit value are compared:</span></span>
    * <span data-ttu-id="8f156-737">Ortam değeri ve açık değer aynıysa, işlem devam ediyor.</span><span class="sxs-lookup"><span data-stu-id="8f156-737">If the ambient value and explicit value are the same, the process continues.</span></span>
    * <span data-ttu-id="8f156-738">Ortam değeri varsa ve açık değer yoksa, URL oluştururken ortam değeri kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-738">If the ambient value is present and the explicit value isn't, the ambient value is used when generating the URL.</span></span>
    * <span data-ttu-id="8f156-739">Ortam değeri yoksa ve açık değer varsa, ortam değerini ve sonraki tüm ortam değerlerini reddedin.</span><span class="sxs-lookup"><span data-stu-id="8f156-739">If the ambient value isn't present and the explicit value is, reject the ambient value and all subsequent ambient values.</span></span>
    * <span data-ttu-id="8f156-740">Ortam değeri ve açık değer varsa ve iki değer farklıysa, ortam değerini ve sonraki tüm ortam değerlerini reddedin.</span><span class="sxs-lookup"><span data-stu-id="8f156-740">If the ambient value and the explicit value are present, and the two values are different, reject the ambient value and all subsequent ambient values.</span></span>

<span data-ttu-id="8f156-741">Bu noktada, URL oluşturma işlemi rota kısıtlamalarını değerlendirmeye hazırdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-741">At this point, the URL generation operation is ready to evaluate route constraints.</span></span> <span data-ttu-id="8f156-742">Kabul edilen değerler kümesi, kısıtlamalara sağlanan parametre varsayılan değerleriyle birleştirilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-742">The set of accepted values is combined with the parameter default values, which is provided to constraints.</span></span> <span data-ttu-id="8f156-743">Kısıtlamaların tümü geçerse, işlem devam eder.</span><span class="sxs-lookup"><span data-stu-id="8f156-743">If the constraints all pass, the operation continues.</span></span>

<span data-ttu-id="8f156-744">Ardından, **kabul edilen değerler** rota şablonu genişletmek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-744">Next, the **accepted values** can be used to expand the route template.</span></span> <span data-ttu-id="8f156-745">Rota şablonu işlenir:</span><span class="sxs-lookup"><span data-stu-id="8f156-745">The route template is processed:</span></span>

* <span data-ttu-id="8f156-746">Soldan sağa.</span><span class="sxs-lookup"><span data-stu-id="8f156-746">From left-to-right.</span></span>
* <span data-ttu-id="8f156-747">Her parametrenin kabul edilen değeri yerine geçer.</span><span class="sxs-lookup"><span data-stu-id="8f156-747">Each parameter has its accepted value substituted.</span></span>
* <span data-ttu-id="8f156-748">Aşağıdaki özel durumlarda:</span><span class="sxs-lookup"><span data-stu-id="8f156-748">With the following special cases:</span></span>
  * <span data-ttu-id="8f156-749">Kabul edilen değer bir değer eksikse ve parametrenin varsayılan değeri varsa, varsayılan değer kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-749">If the accepted values is missing a value and the parameter has a default value, the default value is used.</span></span>
  * <span data-ttu-id="8f156-750">Kabul edilen değerler bir değer eksikse ve parametre isteğe bağlıysa, işleme devam edilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-750">If the accepted values is missing a value and the parameter is optional, processing continues.</span></span>
  * <span data-ttu-id="8f156-751">Eksik isteğe bağlı parametrenin sağındaki herhangi bir rota parametresi bir değere sahipse, işlem başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="8f156-751">If any route parameter to the right of a missing optional parameter has a value, the operation fails.</span></span>
  * <!-- review default-valued parameters optional parameters --> <span data-ttu-id="8f156-752">Bitişik varsayılan değerli parametreler ve isteğe bağlı parametreler mümkün olduğunda daraltılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-752">Contiguous default-valued parameters and optional parameters are collapsed where possible.</span></span>

<span data-ttu-id="8f156-753">Rotanın bir kesimiyle eşleşmeyecek şekilde sağlanan değerler sorgu dizesine eklenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-753">Values explicitly provided that don't match a segment of the route are added to the query string.</span></span> <span data-ttu-id="8f156-754">Aşağıdaki tablo, rota şablonu `{controller}/{action}/{id?}`kullanırken sonucu gösterir.</span><span class="sxs-lookup"><span data-stu-id="8f156-754">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="8f156-755">Ortam Değerleri</span><span class="sxs-lookup"><span data-stu-id="8f156-755">Ambient Values</span></span>                     | <span data-ttu-id="8f156-756">Açık Değerler</span><span class="sxs-lookup"><span data-stu-id="8f156-756">Explicit Values</span></span>                        | <span data-ttu-id="8f156-757">Sonuç</span><span class="sxs-lookup"><span data-stu-id="8f156-757">Result</span></span>                  |
| ---------------------------------- | -------------------------------------- | ----------------------- |
| <span data-ttu-id="8f156-758">denetleyici = "Ana Sayfa"</span><span class="sxs-lookup"><span data-stu-id="8f156-758">controller = "Home"</span></span>                | <span data-ttu-id="8f156-759">action = "Hakkında"</span><span class="sxs-lookup"><span data-stu-id="8f156-759">action = "About"</span></span>                       | `/Home/About`           |
| <span data-ttu-id="8f156-760">denetleyici = "Ana Sayfa"</span><span class="sxs-lookup"><span data-stu-id="8f156-760">controller = "Home"</span></span>                | <span data-ttu-id="8f156-761">controller = "Order", action = "About"</span><span class="sxs-lookup"><span data-stu-id="8f156-761">controller = "Order", action = "About"</span></span> | `/Order/About`          |
| <span data-ttu-id="8f156-762">denetleyici = "Ev", renk = "Kırmızı"</span><span class="sxs-lookup"><span data-stu-id="8f156-762">controller = "Home", color = "Red"</span></span> | <span data-ttu-id="8f156-763">action = "Hakkında"</span><span class="sxs-lookup"><span data-stu-id="8f156-763">action = "About"</span></span>                       | `/Home/About`           |
| <span data-ttu-id="8f156-764">denetleyici = "Ana Sayfa"</span><span class="sxs-lookup"><span data-stu-id="8f156-764">controller = "Home"</span></span>                | <span data-ttu-id="8f156-765">action = "About", color = "Red"</span><span class="sxs-lookup"><span data-stu-id="8f156-765">action = "About", color = "Red"</span></span>        | `/Home/About?color=Red` |

### <a name="problems-with-route-value-invalidation"></a><span data-ttu-id="8f156-766">Rota değeri geçersiz liği ile ilgili sorunlar</span><span class="sxs-lookup"><span data-stu-id="8f156-766">Problems with route value invalidation</span></span>

<span data-ttu-id="8f156-767">Core 3.0ASP.NET itibariyle, daha önceki ASP.NET Core sürümlerinde kullanılan bazı URL oluşturma şemaları URL oluşturma yla iyi çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="8f156-767">As of ASP.NET Core 3.0, some URL generation schemes used in earlier ASP.NET Core versions don't work well with URL generation.</span></span> <span data-ttu-id="8f156-768">ASP.NET Core ekibi, bu gereksinimleri gelecekteki bir sürümde gidermek için özellikler eklemeyi planlıyor.</span><span class="sxs-lookup"><span data-stu-id="8f156-768">The ASP.NET Core team plans to add features to address these needs in a future release.</span></span> <span data-ttu-id="8f156-769">Şimdilik en iyi çözüm eski yönlendirme kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="8f156-769">For now the best solution is to use legacy routing.</span></span>

<span data-ttu-id="8f156-770">Aşağıdaki kod, yönlendirme tarafından desteklenmeyen bir URL oluşturma düzeninin bir örneğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="8f156-770">The following code shows an example of a URL generation scheme that's not supported by routing.</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/StartupUnsupported.cs?name=snippet)]

<span data-ttu-id="8f156-771">Önceki kodda, `culture` rota parametresi yerelleştirme için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-771">In the preceding code, the `culture` route parameter is used for localization.</span></span> <span data-ttu-id="8f156-772">Arzu, parametrenin `culture` her zaman ortam değeri olarak kabul edilmesidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-772">The desire is to have the `culture` parameter always accepted as an ambient value.</span></span> <span data-ttu-id="8f156-773">Ancak, `culture` parametre gerekli değerlerin çalışma şekli nedeniyle ortam değeri olarak kabul edilmez:</span><span class="sxs-lookup"><span data-stu-id="8f156-773">However, the `culture` parameter is not accepted as an ambient value because of the way required values work:</span></span>

* <span data-ttu-id="8f156-774">Rota `"default"` `culture` şablonunda, rota parametresi sola, `controller`bu `controller` nedenle değişiklikler `culture`geçersiz kılmaz.</span><span class="sxs-lookup"><span data-stu-id="8f156-774">In the `"default"` route template, the `culture` route parameter is to the left of `controller`, so changes to `controller` won't invalidate `culture`.</span></span>
* <span data-ttu-id="8f156-775">Rota `"blog"` şablonunda, `culture` rota parametresi, gerekli değerlerde görünen `controller`, sağında olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-775">In the `"blog"` route template, the `culture` route parameter is considered to be to the right of `controller`, which appears in the required values.</span></span>

## <a name="configuring-endpoint-metadata"></a><span data-ttu-id="8f156-776">Uç nokta meta verilerini yapılandırma</span><span class="sxs-lookup"><span data-stu-id="8f156-776">Configuring endpoint metadata</span></span>

<span data-ttu-id="8f156-777">Aşağıdaki bağlantılar uç nokta meta verilerini yapılandırma hakkında bilgi sağlar:</span><span class="sxs-lookup"><span data-stu-id="8f156-777">The following links provide information on configuring endpoint metadata:</span></span>

* [<span data-ttu-id="8f156-778">Uç nokta yönlendirme ile Kors'u etkinleştirme</span><span class="sxs-lookup"><span data-stu-id="8f156-778">Enable Cors with endpoint routing</span></span>](xref:security/cors#enable-cors-with-endpoint-routing)
* <span data-ttu-id="8f156-779">Özel `[MinimumAgeAuthorize]` bir öznitelik kullanarak [IAuthorizationPolicyProvider örneği](https://github.com/dotnet/AspNetCore/tree/release/3.0/src/Security/samples/CustomPolicyProvider)</span><span class="sxs-lookup"><span data-stu-id="8f156-779">[IAuthorizationPolicyProvider sample](https://github.com/dotnet/AspNetCore/tree/release/3.0/src/Security/samples/CustomPolicyProvider) using a custom `[MinimumAgeAuthorize]` attribute</span></span>
* <span data-ttu-id="8f156-780">[[Authorize] özniteliği ile kimlik doğrulaması test edin](xref:security/authentication/identity#test-identity)</span><span class="sxs-lookup"><span data-stu-id="8f156-780">[Test authentication with the [Authorize] attribute](xref:security/authentication/identity#test-identity)</span></span>
* <xref:Microsoft.AspNetCore.Builder.AuthorizationEndpointConventionBuilderExtensions.RequireAuthorization*>
* <span data-ttu-id="8f156-781">[[Authorize] özniteliği ile düzeni seçme](xref:security/authorization/limitingidentitybyscheme#selecting-the-scheme-with-the-authorize-attribute)</span><span class="sxs-lookup"><span data-stu-id="8f156-781">[Selecting the scheme with the [Authorize] attribute](xref:security/authorization/limitingidentitybyscheme#selecting-the-scheme-with-the-authorize-attribute)</span></span>
* <span data-ttu-id="8f156-782">[[Authorize] özniteliğini kullanarak ilkeler uygulama](xref:security/authorization/policies#applying-policies-to-mvc-controllers)</span><span class="sxs-lookup"><span data-stu-id="8f156-782">[Applying policies using the [Authorize] attribute](xref:security/authorization/policies#applying-policies-to-mvc-controllers)</span></span>
* <xref:security/authorization/roles>

<a name="hostmatch"></a>

## <a name="host-matching-in-routes-with-requirehost"></a><span data-ttu-id="8f156-783">RequireHost ile rotalarda eşleşen ana bilgisayar</span><span class="sxs-lookup"><span data-stu-id="8f156-783">Host matching in routes with RequireHost</span></span>

<span data-ttu-id="8f156-784"><xref:Microsoft.AspNetCore.Builder.RoutingEndpointConventionBuilderExtensions.RequireHost*>belirtilen ana bilgisayar gerektiren rotaya bir kısıtlama uygular.</span><span class="sxs-lookup"><span data-stu-id="8f156-784"><xref:Microsoft.AspNetCore.Builder.RoutingEndpointConventionBuilderExtensions.RequireHost*> applies a constraint to the route which requires the specified host.</span></span> <span data-ttu-id="8f156-785">Veya `RequireHost` [[Ana Bilgisayar]](xref:Microsoft.AspNetCore.Routing.HostAttribute) parametresi şu olabilir:</span><span class="sxs-lookup"><span data-stu-id="8f156-785">The `RequireHost` or [[Host]](xref:Microsoft.AspNetCore.Routing.HostAttribute) parameter can be:</span></span>

* <span data-ttu-id="8f156-786">Ana `www.domain.com`bilgisayar: `www.domain.com` , herhangi bir bağlantı noktası ile eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-786">Host: `www.domain.com`, matches `www.domain.com` with any port.</span></span>
* <span data-ttu-id="8f156-787">Joker karakterli `*.domain.com`ana `www.domain.com`bilgisayar: , maçlar , `subdomain.domain.com`veya `www.subdomain.domain.com` herhangi bir bağlantı noktasında.</span><span class="sxs-lookup"><span data-stu-id="8f156-787">Host with wildcard: `*.domain.com`, matches `www.domain.com`, `subdomain.domain.com`, or `www.subdomain.domain.com` on any port.</span></span>
* <span data-ttu-id="8f156-788">Bağlantı `*:5000`noktası: , herhangi bir ana bilgisayar ile port 5000 eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-788">Port: `*:5000`, matches port 5000 with any host.</span></span>
* <span data-ttu-id="8f156-789">Ana bilgisayar `www.domain.com:5000` ve `*.domain.com:5000`bağlantı noktası: veya, ev sahibi ve bağlantı noktası eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-789">Host and port: `www.domain.com:5000` or `*.domain.com:5000`, matches host and port.</span></span>

<span data-ttu-id="8f156-790">Birden çok parametre `RequireHost` `[Host]`kullanılarak belirtilebilir veya .</span><span class="sxs-lookup"><span data-stu-id="8f156-790">Multiple parameters can be specified using `RequireHost` or `[Host]`.</span></span> <span data-ttu-id="8f156-791">Kısıtlama, parametrelerden herhangi biri için geçerli olan ana bilgisayarları eşler.</span><span class="sxs-lookup"><span data-stu-id="8f156-791">The constraint  matches hosts valid for any of the parameters.</span></span> <span data-ttu-id="8f156-792">Örneğin, `[Host("domain.com", "*.domain.com")]` `domain.com`eşleşmeler `www.domain.com`, `subdomain.domain.com`ve .</span><span class="sxs-lookup"><span data-stu-id="8f156-792">For example, `[Host("domain.com", "*.domain.com")]` matches `domain.com`, `www.domain.com`, and `subdomain.domain.com`.</span></span>

<span data-ttu-id="8f156-793">Aşağıdaki kod, `RequireHost` rotada belirtilen ana bilgisayarı gerektiren kullanır:</span><span class="sxs-lookup"><span data-stu-id="8f156-793">The following code uses `RequireHost` to require the specified host on the route:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/StartupRequireHost.cs?name=snippet)]

<span data-ttu-id="8f156-794">Aşağıdaki kod, `[Host]` belirtilen ana bilgisayarlardan herhangi birini gerektirecek şekilde denetleyicideki özniteliği kullanır:</span><span class="sxs-lookup"><span data-stu-id="8f156-794">The following code uses the `[Host]` attribute on the controller to require any of the specified hosts:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/Controllers/ProductController.cs?name=snippet)]

<span data-ttu-id="8f156-795">`[Host]` Öznitelik hem denetleyiciye hem de eylem yöntemine uygulandığında:</span><span class="sxs-lookup"><span data-stu-id="8f156-795">When the `[Host]` attribute is applied to both the controller and action method:</span></span>

* <span data-ttu-id="8f156-796">Eylemdeki öznitelik kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-796">The attribute on the action is used.</span></span>
* <span data-ttu-id="8f156-797">Denetleyici özniteliği yoksayılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-797">The controller attribute is ignored.</span></span>

## <a name="performance-guidance-for-routing"></a><span data-ttu-id="8f156-798">Yönlendirme için performans kılavuzu</span><span class="sxs-lookup"><span data-stu-id="8f156-798">Performance guidance for routing</span></span>

<span data-ttu-id="8f156-799">Yönlendirmenin çoğu, performansı artırmak için Core 3.0 ASP.NET güncelleştirildi.</span><span class="sxs-lookup"><span data-stu-id="8f156-799">Most of routing was updated in ASP.NET Core 3.0 to increase performance.</span></span>

<span data-ttu-id="8f156-800">Bir uygulamanın performans sorunları olduğunda, yönlendirmenin sorun olduğundan sık sık şüphelenilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-800">When an app has performance problems, routing is often suspected as the problem.</span></span> <span data-ttu-id="8f156-801">Yönlendirmenin şüphelenilmesinin nedeni, denetleyiciler ve Razor Pages gibi çerçevelerin günlük iletilerinde çerçeve içinde harcanan süreyi bildirmesidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-801">The reason routing is suspected is that frameworks like controllers and Razor Pages report the amount of time spent inside the framework in their logging messages.</span></span> <span data-ttu-id="8f156-802">Denetleyiciler tarafından bildirilen süre ile isteğin toplam süresi arasında önemli bir fark olduğunda:</span><span class="sxs-lookup"><span data-stu-id="8f156-802">When there's a significant difference between the time reported by controllers and the total time of the request:</span></span>

* <span data-ttu-id="8f156-803">Geliştiriciler sorunun kaynağı olarak uygulama kodlarını ortadan kaldırır.</span><span class="sxs-lookup"><span data-stu-id="8f156-803">Developers eliminate their app code as the source of the problem.</span></span>
* <span data-ttu-id="8f156-804">Yönlendirmenin neden olduğunu varsaymak yaygındır.</span><span class="sxs-lookup"><span data-stu-id="8f156-804">It's common to assume routing is the cause.</span></span>

<span data-ttu-id="8f156-805">Yönlendirme, binlerce uç nokta kullanılarak performans testine tabi dir.</span><span class="sxs-lookup"><span data-stu-id="8f156-805">Routing is performance tested using thousands of endpoints.</span></span> <span data-ttu-id="8f156-806">Tipik bir uygulamanın çok büyük olarak bir performans sorunuyla karşılaşması olası değildir.</span><span class="sxs-lookup"><span data-stu-id="8f156-806">It's unlikely that a typical app will encounter a performance problem just by being too large.</span></span> <span data-ttu-id="8f156-807">Yavaş yönlendirme performansının en yaygın temel nedeni genellikle kötü davranan özel bir ara yazılımdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-807">The most common root cause of slow routing performance is usually a badly-behaving custom middleware.</span></span>

<span data-ttu-id="8f156-808">Aşağıdaki kod örneği, gecikme kaynağını daraltma için temel bir teknik gösterir:</span><span class="sxs-lookup"><span data-stu-id="8f156-808">This following code sample demonstrates a basic technique for narrowing down the source of delay:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/StartupDelay.cs?name=snippet)]

<span data-ttu-id="8f156-809">Zaman yönlendirmesi için:</span><span class="sxs-lookup"><span data-stu-id="8f156-809">To time routing:</span></span>

* <span data-ttu-id="8f156-810">Her ara yazılımı, önceki kodda gösterilen zamanlama ara yazılımının bir kopyasıyla birbirinden ayrılın.</span><span class="sxs-lookup"><span data-stu-id="8f156-810">Interleave each middleware with a copy of the timing middleware shown in the preceding code.</span></span>
* <span data-ttu-id="8f156-811">Zamanlama verilerini kodla ilişkilendirmek için benzersiz bir tanımlayıcı ekleyin.</span><span class="sxs-lookup"><span data-stu-id="8f156-811">Add a unique identifier to correlate the timing data with the code.</span></span>

<span data-ttu-id="8f156-812">Bu, `10ms`örneğin.</span><span class="sxs-lookup"><span data-stu-id="8f156-812">This is a basic way to narrow down the delay when it's significant, for example, more than `10ms`.</span></span>  <span data-ttu-id="8f156-813">Ara yazılım `Time 2` `Time 1` içinde `UseRouting` harcanan zamanı raporlardan çıkarma.</span><span class="sxs-lookup"><span data-stu-id="8f156-813">Subtracting `Time 2` from `Time 1` reports the time spent inside the `UseRouting` middleware.</span></span>

<span data-ttu-id="8f156-814">Aşağıdaki kod, önceki zamanlama koduna daha kompakt bir yaklaşım kullanır:</span><span class="sxs-lookup"><span data-stu-id="8f156-814">The following code uses a more compact approach to the preceding timing code:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/StartupSW.cs?name=snippetSW)]

[!code-csharp[](routing/samples/3.x/RoutingSample/StartupSW.cs?name=snippet)]

### <a name="potentially-expensive-routing-features"></a><span data-ttu-id="8f156-815">Pahalı yönlendirme özellikleri</span><span class="sxs-lookup"><span data-stu-id="8f156-815">Potentially expensive routing features</span></span>

<span data-ttu-id="8f156-816">Aşağıdaki liste, temel rota şablonlarıyla karşılaştırıldığında nispeten pahalı olan yönlendirme özelliklerine ilişkin bazı bilgiler sağlar:</span><span class="sxs-lookup"><span data-stu-id="8f156-816">The following list provides some insight into routing features that are relatively expensive compared with basic route templates:</span></span>

* <span data-ttu-id="8f156-817">Normal ifadeler: Karmaşık veya az miktarda girişle uzun süre çalışan normal ifadeler yazmak mümkündür.</span><span class="sxs-lookup"><span data-stu-id="8f156-817">Regular expressions: It's possible to write regular expressions that are complex, or have long running time with a small amount of input.</span></span>

* <span data-ttu-id="8f156-818">Karmaşık segmentler`{x}-{y}-{z}`( ):</span><span class="sxs-lookup"><span data-stu-id="8f156-818">Complex segments (`{x}-{y}-{z}`):</span></span> 
  * <span data-ttu-id="8f156-819">Normal bir URL yolu kesimini ayrıştırmaktan çok daha pahalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-819">Are significantly more expensive than parsing a regular URL path segment.</span></span>
  * <span data-ttu-id="8f156-820">Çok daha fazla alt dizeleri tahsis neden.</span><span class="sxs-lookup"><span data-stu-id="8f156-820">Result in many more substrings being allocated.</span></span>
  * <span data-ttu-id="8f156-821">Karmaşık segment mantığı, Core 3.0 yönlendirme performans güncelleştirmesi ASP.NET güncelleştirilemedi.</span><span class="sxs-lookup"><span data-stu-id="8f156-821">The complex segment logic was not updated in ASP.NET Core 3.0 routing performance update.</span></span>

* <span data-ttu-id="8f156-822">Eşzamanlı veri erişimi: Birçok karmaşık uygulama yönlendirmelerinin bir parçası olarak veritabanıerişimine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="8f156-822">Synchronous data access: Many complex apps have database access as part of their routing.</span></span> <span data-ttu-id="8f156-823">ASP.NET Core 2.2 ve önceki yönlendirme veritabanı erişim yönlendirmedesteklemek için doğru genişletilebilirlik noktaları sağlamayabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-823">ASP.NET Core 2.2 and earlier routing might not provide the right extensibility points to support database access routing.</span></span> <span data-ttu-id="8f156-824">Örneğin, <xref:Microsoft.AspNetCore.Routing.IRouteConstraint>ve <xref:Microsoft.AspNetCore.Mvc.ActionConstraints.IActionConstraint> senkron.</span><span class="sxs-lookup"><span data-stu-id="8f156-824">For example, <xref:Microsoft.AspNetCore.Routing.IRouteConstraint>, and <xref:Microsoft.AspNetCore.Mvc.ActionConstraints.IActionConstraint> are synchronous.</span></span> <span data-ttu-id="8f156-825">Gibi ekstensibilite noktaları <xref:Microsoft.AspNetCore.Routing.MatcherPolicy> ve <xref:Microsoft.AspNetCore.Routing.EndpointSelectorContext> asynchronous vardır.</span><span class="sxs-lookup"><span data-stu-id="8f156-825">Extensibility points such as <xref:Microsoft.AspNetCore.Routing.MatcherPolicy> and <xref:Microsoft.AspNetCore.Routing.EndpointSelectorContext> are asynchronous.</span></span>

## <a name="guidance-for-library-authors"></a><span data-ttu-id="8f156-826">Kütüphane yazarları için rehberlik</span><span class="sxs-lookup"><span data-stu-id="8f156-826">Guidance for library authors</span></span>

<span data-ttu-id="8f156-827">Bu bölümde, yönlendirmenin üzerine bina kitaplık yazarları için kılavuz içerir.</span><span class="sxs-lookup"><span data-stu-id="8f156-827">This section contains guidance for library authors building on top of routing.</span></span> <span data-ttu-id="8f156-828">Bu ayrıntılar, uygulama geliştiricilerin yönlendirmeyi genişleten kitaplıkları ve çerçeveleri kullanarak iyi bir deneyim yaşamalarını sağlamak için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="8f156-828">These details are intended to ensure that app developers have a good experience using libraries and frameworks that extend routing.</span></span>

### <a name="define-endpoints"></a><span data-ttu-id="8f156-829">Uç noktaları tanımlama</span><span class="sxs-lookup"><span data-stu-id="8f156-829">Define endpoints</span></span>

<span data-ttu-id="8f156-830">URL eşlemi için yönlendirme kullanan bir çerçeve oluşturmak için, üstüne inşa edilen <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseEndpoints*>bir kullanıcı deneyimi tanımlayarak başlayın.</span><span class="sxs-lookup"><span data-stu-id="8f156-830">To create a framework that uses routing for URL matching, start by defining a user experience that builds on top of <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseEndpoints*>.</span></span>

<span data-ttu-id="8f156-831">**DO** üstüne inşa <xref:Microsoft.AspNetCore.Routing.IEndpointRouteBuilder>.</span><span class="sxs-lookup"><span data-stu-id="8f156-831">**DO** build on top of <xref:Microsoft.AspNetCore.Routing.IEndpointRouteBuilder>.</span></span> <span data-ttu-id="8f156-832">Bu, kullanıcıların diğer ASP.NET Core özellikleriyle birlikte çerçevenizi karışıklık olmadan oluşturmalarına olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-832">This allows users to compose your framework with other ASP.NET Core features without confusion.</span></span> <span data-ttu-id="8f156-833">Her ASP.NET Core şablonu yönlendirme içerir.</span><span class="sxs-lookup"><span data-stu-id="8f156-833">Every ASP.NET Core template includes routing.</span></span> <span data-ttu-id="8f156-834">Yönlendirmenin kullanıcılar için mevcut ve tanıdık olduğunu varsayalım.</span><span class="sxs-lookup"><span data-stu-id="8f156-834">Assume routing is present and familiar for users.</span></span>

```csharp
app.UseEndpoints(endpoints =>
{
    // Your framework
    endpoints.MapMyFramework(...);

    endpoints.MapHealthChecks("/healthz");
});
```

<span data-ttu-id="8f156-835">**Do** bu uygular bir `MapMyFramework(...)` çağrıdan mühürlü <xref:Microsoft.AspNetCore.Builder.IEndpointConventionBuilder>bir beton türü döndürün.</span><span class="sxs-lookup"><span data-stu-id="8f156-835">**DO** return a sealed concrete type from a call to `MapMyFramework(...)` that implements <xref:Microsoft.AspNetCore.Builder.IEndpointConventionBuilder>.</span></span> <span data-ttu-id="8f156-836">Çoğu `Map...` çerçeve yöntemi bu deseni izler.</span><span class="sxs-lookup"><span data-stu-id="8f156-836">Most framework `Map...` methods follow this pattern.</span></span> <span data-ttu-id="8f156-837">Arayüz: `IEndpointConventionBuilder`</span><span class="sxs-lookup"><span data-stu-id="8f156-837">The `IEndpointConventionBuilder` interface:</span></span>

* <span data-ttu-id="8f156-838">Meta verilerin birliğe uygunluğunu sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-838">Allows composability of metadata.</span></span>
* <span data-ttu-id="8f156-839">Çeşitli uzatma yöntemleri ile hedeflenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-839">Is targeted by a variety of extension methods.</span></span>

<span data-ttu-id="8f156-840">Kendi türünüzü bildirmek, oluşturucuya kendi çerçeveye özgü işlevselliğinizi eklemenize olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-840">Declaring your own type allows you to add your own framework-specific functionality to the builder.</span></span> <span data-ttu-id="8f156-841">Bir çerçeve beyan oluşturucu sarın ve ona aramaları iletmek için ok.</span><span class="sxs-lookup"><span data-stu-id="8f156-841">It's ok to wrap a framework-declared builder and forward calls to it.</span></span>

```csharp
app.UseEndpoints(endpoints =>
{
    // Your framework
    endpoints.MapMyFramework(...).RequrireAuthorization()
                                 .WithMyFrameworkFeature(awesome: true);

    endpoints.MapHealthChecks("/healthz");
});
```

<span data-ttu-id="8f156-842">**CONSIDER** Kendi <xref:Microsoft.AspNetCore.Routing.EndpointDataSource>yazma düşünün .</span><span class="sxs-lookup"><span data-stu-id="8f156-842">**CONSIDER** writing your own <xref:Microsoft.AspNetCore.Routing.EndpointDataSource>.</span></span> <span data-ttu-id="8f156-843">`EndpointDataSource`uç nokta koleksiyonunu bildirmek ve güncelleştirmek için düşük düzeyli ilkel dir.</span><span class="sxs-lookup"><span data-stu-id="8f156-843">`EndpointDataSource` is the low-level primitive for declaring and updating a collection of endpoints.</span></span> <span data-ttu-id="8f156-844">`EndpointDataSource`denetleyiciler ve Razor Pages tarafından kullanılan güçlü bir API'dir.</span><span class="sxs-lookup"><span data-stu-id="8f156-844">`EndpointDataSource` is a powerful API used by controllers and Razor Pages.</span></span>

<span data-ttu-id="8f156-845">Yönlendirme testleri, güncelleştirilmeyen bir veri kaynağının temel bir [örneğine](https://github.com/aspnet/AspNetCore/blob/master/src/Http/Routing/test/testassets/RoutingSandbox/Framework/FrameworkEndpointDataSource.cs#L17) sahiptir.</span><span class="sxs-lookup"><span data-stu-id="8f156-845">The routing tests have a [basic example](https://github.com/aspnet/AspNetCore/blob/master/src/Http/Routing/test/testassets/RoutingSandbox/Framework/FrameworkEndpointDataSource.cs#L17) of a non-updating data source.</span></span>

<span data-ttu-id="8f156-846">Varsayılan olarak bir `EndpointDataSource` kayıt girişiminde **BULUNMAYıN.**</span><span class="sxs-lookup"><span data-stu-id="8f156-846">**DO NOT** attempt to register an `EndpointDataSource` by default.</span></span> <span data-ttu-id="8f156-847">Kullanıcıların çerçevenizi <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseEndpoints*>'de kaydettirmelerini zorunlu kılmaktadır.</span><span class="sxs-lookup"><span data-stu-id="8f156-847">Require users to register your framework in <xref:Microsoft.AspNetCore.Builder.EndpointRoutingApplicationBuilderExtensions.UseEndpoints*>.</span></span> <span data-ttu-id="8f156-848">Yönlendirme felsefesi hiçbir şey varsayılan olarak dahil olmasıdır `UseEndpoints` ve bu uç noktaları kaydetmek için yerdir.</span><span class="sxs-lookup"><span data-stu-id="8f156-848">The philosophy of routing is that nothing is included by default, and that `UseEndpoints` is the place to register endpoints.</span></span>

### <a name="creating-routing-integrated-middleware"></a><span data-ttu-id="8f156-849">Yönlendirme entegreli ara yazılım oluşturma</span><span class="sxs-lookup"><span data-stu-id="8f156-849">Creating routing-integrated middleware</span></span>

<span data-ttu-id="8f156-850">Meta veri türlerini arabirim olarak tanımlamayı **düşünün.**</span><span class="sxs-lookup"><span data-stu-id="8f156-850">**CONSIDER** defining metadata types as an interface.</span></span>

<span data-ttu-id="8f156-851">**DO,** sınıflar ve yöntemler üzerinde bir öznitelik olarak meta veri türlerini kullanmayı mümkün kılar.</span><span class="sxs-lookup"><span data-stu-id="8f156-851">**DO** make it possible to use metadata types as an attribute on classes and methods.</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/ICoolMetadata.cs?name=snippet2)]

<span data-ttu-id="8f156-852">Denetleyiciler ve Razor Pages gibi çerçeveler, meta veri özniteliklerini türleri ve yöntemleri uygulayarak destekler.</span><span class="sxs-lookup"><span data-stu-id="8f156-852">Frameworks like controllers and Razor Pages support applying metadata attributes to types and methods.</span></span> <span data-ttu-id="8f156-853">Meta veri türlerini bildirirseniz:</span><span class="sxs-lookup"><span data-stu-id="8f156-853">If you declare metadata types:</span></span>

* <span data-ttu-id="8f156-854">Onları öznitelik olarak erişilebilir hale [getirin.](/dotnet/csharp/programming-guide/concepts/attributes/)</span><span class="sxs-lookup"><span data-stu-id="8f156-854">Make them accessible as [attributes](/dotnet/csharp/programming-guide/concepts/attributes/).</span></span>
* <span data-ttu-id="8f156-855">Çoğu kullanıcı öznitelikleri uygulama konusunda bilgindir.</span><span class="sxs-lookup"><span data-stu-id="8f156-855">Most users are familiar with applying attributes.</span></span>

<span data-ttu-id="8f156-856">Bir meta veri türünü arabirim olarak bildirmek başka bir esneklik katmanı ekler:</span><span class="sxs-lookup"><span data-stu-id="8f156-856">Declaring a metadata type as an interface adds another layer of flexibility:</span></span>

* <span data-ttu-id="8f156-857">Arayüzler birleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-857">Interfaces are composable.</span></span>
* <span data-ttu-id="8f156-858">Geliştiriciler, birden çok ilkeyi birleştiren kendi türlerini bildirebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-858">Developers can declare their own types that combine multiple policies.</span></span>

<span data-ttu-id="8f156-859">**DO,** aşağıdaki örnekte gösterildiği gibi meta verileri geçersiz kılmayı mümkün kılar:</span><span class="sxs-lookup"><span data-stu-id="8f156-859">**DO** make it possible to override metadata, as shown in the following example:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/ICoolMetadata.cs?name=snippet)]

<span data-ttu-id="8f156-860">Bu yönergeleri izlemenin en iyi yolu **işaretçi meta verileri**tanımlamaktan kaçınmaktır:</span><span class="sxs-lookup"><span data-stu-id="8f156-860">The best way to follow these guidelines is to avoid defining **marker metadata**:</span></span>

* <span data-ttu-id="8f156-861">Yalnızca bir meta veri türünün varlığını aramayın.</span><span class="sxs-lookup"><span data-stu-id="8f156-861">Don't just look for the presence of a metadata type.</span></span>
* <span data-ttu-id="8f156-862">Meta verilerde bir özellik tanımlayın ve özelliği denetleyin.</span><span class="sxs-lookup"><span data-stu-id="8f156-862">Define a property on the metadata and check the property.</span></span>

<span data-ttu-id="8f156-863">Meta veri toplama sıralanır ve öncelik tarafından geçersiz kılmayı destekler.</span><span class="sxs-lookup"><span data-stu-id="8f156-863">The metadata collection is ordered and supports overriding by priority.</span></span> <span data-ttu-id="8f156-864">Denetleyiciler söz konusu olduğunda, eylem yöntemine ilişkin meta veriler en belirgindir.</span><span class="sxs-lookup"><span data-stu-id="8f156-864">In the case of controllers, metadata on the action method is most specific.</span></span>

<span data-ttu-id="8f156-865">**Ara** ware ile ve yönlendirme olmadan yararlı olun.</span><span class="sxs-lookup"><span data-stu-id="8f156-865">**DO** make middleware useful with and without routing.</span></span>

```csharp
app.UseRouting();

app.UseAuthorization(new AuthorizationPolicy() { ... });

app.UseEndpoints(endpoints =>
{
    // Your framework
    endpoints.MapMyFramework(...).RequrireAuthorization();
});
```

<span data-ttu-id="8f156-866">Bu kılavuza bir örnek olarak, `UseAuthorization` ara yazılımı göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="8f156-866">As an example of this guideline, consider the `UseAuthorization` middleware.</span></span> <span data-ttu-id="8f156-867">Yetkilendirme ara ware bir geri dönüş ilkesi geçmek için izin verir.</span><span class="sxs-lookup"><span data-stu-id="8f156-867">The authorization middleware allows you to pass in a fallback policy.</span></span> <!-- shown where?  (shown here) --> <span data-ttu-id="8f156-868">Geri dönüş ilkesi, belirtildiği takdirde, her ikisi için de geçerlidir:</span><span class="sxs-lookup"><span data-stu-id="8f156-868">The fallback policy, if specified, applies to both:</span></span>

* <span data-ttu-id="8f156-869">Belirtilmeyen bir ilke olmadan uç noktalar.</span><span class="sxs-lookup"><span data-stu-id="8f156-869">Endpoints without a specified policy.</span></span>
* <span data-ttu-id="8f156-870">Bitiş noktasıyla eşleşmeyen istekler.</span><span class="sxs-lookup"><span data-stu-id="8f156-870">Requests that don't match an endpoint.</span></span>

<span data-ttu-id="8f156-871">Bu, yetkilendirme ara ware yönlendirme bağlamı dışında yararlı hale getirir.</span><span class="sxs-lookup"><span data-stu-id="8f156-871">This makes the authorization middleware useful outside of the context of routing.</span></span> <span data-ttu-id="8f156-872">Yetkilendirme middleware geleneksel middleware programlama için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-872">The authorization middleware can be used for traditional middleware programming.</span></span>

[!INCLUDE[](~/includes/dbg-route.md)]

::: moniker-end

::: moniker range="= aspnetcore-2.2"

<span data-ttu-id="8f156-873">Yönlendirme, istek URI'lerini uç noktalara eşlemekten ve gelen istekleri bu uç noktalara göndermekten sorumludur.</span><span class="sxs-lookup"><span data-stu-id="8f156-873">Routing is responsible for mapping request URIs to endpoints and dispatching incoming requests to those endpoints.</span></span> <span data-ttu-id="8f156-874">Rotalar uygulamada tanımlanır ve uygulama başladığında yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-874">Routes are defined in the app and configured when the app starts.</span></span> <span data-ttu-id="8f156-875">Bir rota isteğe bağlı olarak istekte bulunan URL'den değerleri ayıklayabilir ve bu değerler daha sonra istek işleme için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-875">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="8f156-876">Uygulamadaki rota bilgilerini kullanarak yönlendirme, uç noktalara eşlenen URL'ler de oluşturabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-876">Using route information from the app, routing is also able to generate URLs that map to endpoints.</span></span>

<span data-ttu-id="8f156-877">Core 2.2ASP.NET en son yönlendirme senaryolarını kullanmak için, Aşağıdaki lerde MVC `Startup.ConfigureServices`hizmetleri kaydına uyumluluk [sürümünü](xref:mvc/compatibility-version) belirtin:</span><span class="sxs-lookup"><span data-stu-id="8f156-877">To use the latest routing scenarios in ASP.NET Core 2.2, specify the [compatibility version](xref:mvc/compatibility-version) to the MVC services registration in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddMvc()
    .SetCompatibilityVersion(CompatibilityVersion.Version_2_2);
```

<span data-ttu-id="8f156-878">Seçenek, <xref:Microsoft.AspNetCore.Mvc.MvcOptions.EnableEndpointRouting> yönlendirmenin uç nokta tabanlı mantığı mı yoksa ASP.NET <xref:Microsoft.AspNetCore.Routing.IRouter>Core 2.1 veya daha önceki ASP.NET tabanlı mantığını içsel olarak kullanıp kullanmaması gerektiğini belirler.</span><span class="sxs-lookup"><span data-stu-id="8f156-878">The <xref:Microsoft.AspNetCore.Mvc.MvcOptions.EnableEndpointRouting> option determines if routing should internally use endpoint-based logic or the <xref:Microsoft.AspNetCore.Routing.IRouter>-based logic of ASP.NET Core 2.1 or earlier.</span></span> <span data-ttu-id="8f156-879">Uyumluluk sürümü 2.2 veya daha sonra olarak ayarlandığında, varsayılan değer `true`.</span><span class="sxs-lookup"><span data-stu-id="8f156-879">When the compatibility version is set to 2.2 or later, the default value is `true`.</span></span> <span data-ttu-id="8f156-880">Önceki yönlendirme `false` mantığını kullanmak için değeri ayarlayın:</span><span class="sxs-lookup"><span data-stu-id="8f156-880">Set the value to `false` to use the prior routing logic:</span></span>

```csharp
// Use the routing logic of ASP.NET Core 2.1 or earlier:
services.AddMvc(options => options.EnableEndpointRouting = false)
    .SetCompatibilityVersion(CompatibilityVersion.Version_2_2);
```

<span data-ttu-id="8f156-881">Tabanlı yönlendirme <xref:Microsoft.AspNetCore.Routing.IRouter>hakkında daha fazla bilgi [için, bu konunun ASP.NET Core 2.1 sürümüne](/aspnet/core/fundamentals/routing?view=aspnetcore-2.1)bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-881">For more information on <xref:Microsoft.AspNetCore.Routing.IRouter>-based routing, see the [ASP.NET Core 2.1 version of this topic](/aspnet/core/fundamentals/routing?view=aspnetcore-2.1).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8f156-882">Bu belge, düşük düzeyli ASP.NET Çekirdek yönlendirmeyi kapsar.</span><span class="sxs-lookup"><span data-stu-id="8f156-882">This document covers low-level ASP.NET Core routing.</span></span> <span data-ttu-id="8f156-883">ASP.NET Core MVC yönlendirmesi hakkında <xref:mvc/controllers/routing>bilgi için bkz.</span><span class="sxs-lookup"><span data-stu-id="8f156-883">For information on ASP.NET Core MVC routing, see <xref:mvc/controllers/routing>.</span></span> <span data-ttu-id="8f156-884">Razor Pages'deki yönlendirme kuralları hakkında daha <xref:razor-pages/razor-pages-conventions>fazla bilgi için bkz.</span><span class="sxs-lookup"><span data-stu-id="8f156-884">For information on routing conventions in Razor Pages, see <xref:razor-pages/razor-pages-conventions>.</span></span>

<span data-ttu-id="8f156-885">[Örnek kodu görüntüleme veya indirme](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples) ( nasıl[indirilir](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="8f156-885">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="8f156-886">Yönlendirme temelleri</span><span class="sxs-lookup"><span data-stu-id="8f156-886">Routing basics</span></span>

<span data-ttu-id="8f156-887">Çoğu uygulama, URL'lerin okunabilir ve anlamlı olması için temel ve açıklayıcı bir yönlendirme şeması seçmelidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-887">Most apps should choose a basic and descriptive routing scheme so that URLs are readable and meaningful.</span></span> <span data-ttu-id="8f156-888">Varsayılan geleneksel `{controller=Home}/{action=Index}/{id?}`rota:</span><span class="sxs-lookup"><span data-stu-id="8f156-888">The default conventional route `{controller=Home}/{action=Index}/{id?}`:</span></span>

* <span data-ttu-id="8f156-889">Temel ve açıklayıcı yönlendirme düzenini destekler.</span><span class="sxs-lookup"><span data-stu-id="8f156-889">Supports a basic and descriptive routing scheme.</span></span>
* <span data-ttu-id="8f156-890">UI tabanlı uygulamalar için yararlı bir başlangıç noktasıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-890">Is a useful starting point for UI-based apps.</span></span>

<span data-ttu-id="8f156-891">Geliştiriciler genellikle [öznitelik yönlendirme](xref:mvc/controllers/routing#attribute-routing) veya özel geleneksel rotalar kullanarak özel durumlarda bir uygulamanın yüksek trafik alanlarına ek kısa yollar ekleyin.</span><span class="sxs-lookup"><span data-stu-id="8f156-891">Developers commonly add additional terse routes to high-traffic areas of an app in specialized situations using [attribute routing](xref:mvc/controllers/routing#attribute-routing) or dedicated conventional routes.</span></span> <span data-ttu-id="8f156-892">Özel durumlar örnekleri, blog ve e-ticaret uç noktaları içerir.</span><span class="sxs-lookup"><span data-stu-id="8f156-892">Specialized situations examples include, blog and ecommerce endpoints.</span></span>

<span data-ttu-id="8f156-893">Web API'leri, uygulamanın işlevselliğini işlemlerin HTTP fiilleri tarafından temsil edildiği bir kaynak kümesi olarak modellemek için öznitelik yönlendirmesini kullanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-893">Web APIs should use attribute routing to model the app's functionality as a set of resources where operations are represented by HTTP verbs.</span></span> <span data-ttu-id="8f156-894">Bu, aynı mantıksal kaynak üzerinde, get ve POST gibi birçok işlemin aynı URL'yi kullandığı anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="8f156-894">This means that many operations, for example, GET, and POST, on the same logical resource use the same URL.</span></span> <span data-ttu-id="8f156-895">Öznitelik yönlendirme, bir API'nin genel uç nokta düzenini dikkatle tasarlamak için gereken bir denetim düzeyi sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-895">Attribute routing provides a level of control that's needed to carefully design an API's public endpoint layout.</span></span>

<span data-ttu-id="8f156-896">Razor Pages uygulamaları, bir uygulamanın *Sayfalar* klasöründe adlandırılmış kaynaklara hizmet etmek için varsayılan geleneksel yönlendirmeyi kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-896">Razor Pages apps use default conventional routing to serve named resources in the *Pages* folder of an app.</span></span> <span data-ttu-id="8f156-897">Razor Pages yönlendirme davranışını özelleştirmenize olanak tanıyan ek kurallar mevcuttur.</span><span class="sxs-lookup"><span data-stu-id="8f156-897">Additional conventions are available that allow you to customize Razor Pages routing behavior.</span></span> <span data-ttu-id="8f156-898">Daha fazla bilgi için <xref:razor-pages/index> ve <xref:razor-pages/razor-pages-conventions> bölümlerine bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-898">For more information, see <xref:razor-pages/index> and <xref:razor-pages/razor-pages-conventions>.</span></span>

<span data-ttu-id="8f156-899">URL oluşturma desteği, uygulamanın sıkı kodlama URL'leri olmadan geliştirilen uygulamanın birbirine bağlanmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-899">URL generation support allows the app to be developed without hard-coding URLs to link the app together.</span></span> <span data-ttu-id="8f156-900">Bu destek, temel bir yönlendirme yapılandırmasıyla başlayıp uygulamanın kaynak düzeni belirlendikten sonra rotaların değiştirilmesine olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-900">This support allows for starting with a basic routing configuration and modifying the routes after the app's resource layout is determined.</span></span>

<span data-ttu-id="8f156-901">Yönlendirme, bir uygulamadaki`Endpoint`mantıksal uç noktaları temsil etmek için uç *noktaları* ( ) kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-901">Routing uses *endpoints* (`Endpoint`) to represent logical endpoints in an app.</span></span>

<span data-ttu-id="8f156-902">Bitiş noktası, istekleri işlemek için bir temsilci ve rasgele meta veri koleksiyonu tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-902">An endpoint defines a delegate to process requests and a collection of arbitrary metadata.</span></span> <span data-ttu-id="8f156-903">Meta veriler, her bitiş noktasına bağlı ilkelere ve yapılandırmaya dayalı çapraz kesme endişelerini uygulamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-903">The metadata is used implement cross-cutting concerns based on policies and configuration attached to each endpoint.</span></span>

<span data-ttu-id="8f156-904">Yönlendirme sistemi aşağıdaki özelliklere sahiptir:</span><span class="sxs-lookup"><span data-stu-id="8f156-904">The routing system has the following characteristics:</span></span>

* <span data-ttu-id="8f156-905">Rota şablonu sözdizimi, tokenize rota parametreleri ile yolları tanımlamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-905">Route template syntax is used to define routes with tokenized route parameters.</span></span>
* <span data-ttu-id="8f156-906">Geleneksel stil ve öznitelik tarzı uç nokta yapılandırması izin verilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-906">Conventional-style and attribute-style endpoint configuration is permitted.</span></span>
* <span data-ttu-id="8f156-907"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint>URL parametrenin belirli bir bitiş noktası kısıtlaması için geçerli bir değer bulunup içermediğini belirlemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-907"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint> is used to determine whether a URL parameter contains a valid value for a given endpoint constraint.</span></span>
* <span data-ttu-id="8f156-908">MVC/Razor Pages gibi uygulama modelleri, yönlendirme senaryolarının öngörülebilir bir uygulamasına sahip olan tüm uç noktalarını kaydeder.</span><span class="sxs-lookup"><span data-stu-id="8f156-908">App models, such as MVC/Razor Pages, register all of their endpoints, which have a predictable implementation of routing scenarios.</span></span>
* <span data-ttu-id="8f156-909">Yönlendirme uygulaması, ara yazılım boru hattında istenilen her yerde yönlendirme kararları verir.</span><span class="sxs-lookup"><span data-stu-id="8f156-909">The routing implementation makes routing decisions wherever desired in the middleware pipeline.</span></span>
* <span data-ttu-id="8f156-910">Bir Yönlendirme Middleware sonra görünen Middleware belirli bir istek URI için Yönlendirme Middleware's bitiş noktası kararının sonucunu inceleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8f156-910">Middleware that appears after a Routing Middleware can inspect the result of the Routing Middleware's endpoint decision for a given request URI.</span></span>
* <span data-ttu-id="8f156-911">Uygulamadaki tüm uç noktaları ara yazılım boru hattının herhangi bir yerinde sayısalhale getirmek mümkündür.</span><span class="sxs-lookup"><span data-stu-id="8f156-911">It's possible to enumerate all of the endpoints in the app anywhere in the middleware pipeline.</span></span>
* <span data-ttu-id="8f156-912">Bir uygulama, uç nokta bilgilerine dayalı URL'ler (örneğin, yeniden yönlendirme veya bağlantılar için) oluşturmak için yönlendirmeyi kullanabilir ve böylece sabit kodlanmış URL'lerden kaçınabilir ve bu da korunmaya yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="8f156-912">An app can use routing to generate URLs (for example, for redirection or links) based on endpoint information and thus avoid hard-coded URLs, which helps maintainability.</span></span>
* <span data-ttu-id="8f156-913">URL oluşturma rasgele genişletilebilirlik destekleyen adreslere dayanır:</span><span class="sxs-lookup"><span data-stu-id="8f156-913">URL generation is based on addresses, which support arbitrary extensibility:</span></span>

  * <span data-ttu-id="8f156-914">Bağlantı Jeneratörü API ' si (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>) URL'leri oluşturmak için bağımlılık [enjeksiyonu (DI)](xref:fundamentals/dependency-injection) kullanılarak her yerde çözülebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-914">The Link Generator API (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>) can be resolved anywhere using [dependency injection (DI)](xref:fundamentals/dependency-injection) to generate URLs.</span></span>
  * <span data-ttu-id="8f156-915">Bağlantı Jeneratörü API'sinin DI üzerinden <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> kullanılamadığı durumlarda, URL'ler oluşturmak için yöntemler sunar.</span><span class="sxs-lookup"><span data-stu-id="8f156-915">Where the Link Generator API isn't available via DI, <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> offers methods to build URLs.</span></span>

> [!NOTE]
> <span data-ttu-id="8f156-916">Core 2.2'ASP.NET uç nokta yönlendirmesinin serbest bırakılması ile, uç nokta bağlama MVC/Razor Pages eylemleri ve sayfaları ile sınırlıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-916">With the release of endpoint routing in ASP.NET Core 2.2, endpoint linking is limited to MVC/Razor Pages actions and pages.</span></span> <span data-ttu-id="8f156-917">Uç nokta bağlama yeteneklerinin genişletmeleri gelecekteki sürümler için planlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-917">The expansions of endpoint-linking capabilities is planned for future releases.</span></span>

<span data-ttu-id="8f156-918">Yönlendirme, sınıf tarafından [ara yazılım](xref:fundamentals/middleware/index) ardışık hattına <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> bağlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-918">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> class.</span></span> <span data-ttu-id="8f156-919">[ASP.NET Core MVC,](xref:mvc/overview) yapılandırmasının bir parçası olarak ara yazılım boru hattına yönlendirme ekler ve MVC ve Razor Pages uygulamalarında yönlendirmeyi işler.</span><span class="sxs-lookup"><span data-stu-id="8f156-919">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration and handles routing in MVC and Razor Pages apps.</span></span> <span data-ttu-id="8f156-920">Yönlendirmeyi bağımsız bir bileşen olarak nasıl kullanacağınızı öğrenmek için Yönlendirme [Ara ware'i Kullan](#use-routing-middleware) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-920">To learn how to use routing as a standalone component, see the [Use Routing Middleware](#use-routing-middleware) section.</span></span>

### <a name="url-matching"></a><span data-ttu-id="8f156-921">URL eşleştirme</span><span class="sxs-lookup"><span data-stu-id="8f156-921">URL matching</span></span>

<span data-ttu-id="8f156-922">URL eşleştirme, yönlendirmenin gelen isteği *bitiş noktasına*gönderme işlemidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-922">URL matching is the process by which routing dispatches an incoming request to an *endpoint*.</span></span> <span data-ttu-id="8f156-923">Bu işlem URL yolundaki verilere dayanır, ancak istekteki verileri dikkate almak için genişletilebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-923">This process is based on data in the URL path but can be extended to consider any data in the request.</span></span> <span data-ttu-id="8f156-924">İstekleri ayrı işleyicilere gönderme özelliği, bir uygulamanın boyutunu ve karmaşıklığını ölçeklemenin anahtarıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-924">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an app.</span></span>

<span data-ttu-id="8f156-925">Uç nokta yönlendirmedeki yönlendirme sistemi tüm sevk kararlarından sorumludur.</span><span class="sxs-lookup"><span data-stu-id="8f156-925">The routing system in endpoint routing is responsible for all dispatching decisions.</span></span> <span data-ttu-id="8f156-926">Ara yazılım, seçili bitiş noktasına dayalı ilkeler uyguladığından, yönlendirme sistemi içinde gönderme veya güvenlik ilkelerinin uygulanmasını etkileyebilecek herhangi bir kararın verliği etkilemesi önemlidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-926">Since the middleware applies policies based on the selected endpoint, it's important that any decision that can affect dispatching or the application of security policies is made inside the routing system.</span></span>

<span data-ttu-id="8f156-927">Bitiş noktası temsilcisi yürütüldüğünde, [RouteContext.RouteData'nın](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) özellikleri, şimdiye kadar gerçekleştirilen istek işlemedayalı uygun değerlere ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-927">When the endpoint delegate is executed, the properties of [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) are set to appropriate values based on the request processing performed thus far.</span></span>

<span data-ttu-id="8f156-928">[RouteData.Values,](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) rotadan üretilen *rota değerlerinin* sözlüğüdür.</span><span class="sxs-lookup"><span data-stu-id="8f156-928">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="8f156-929">Bu değerler genellikle URL'yi belirterek belirlenir ve kullanıcı girişini kabul etmek veya uygulama içinde daha fazla gönderme kararı almak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-929">These values are usually determined by tokenizing the URL and can be used to accept user input or to make further dispatching decisions inside the app.</span></span>

<span data-ttu-id="8f156-930">[RouteData.DataTokens,](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) eşleşen rotayla ilgili ek verilerin yer alan bir özellik torbasıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-930">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="8f156-931"><xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*>uygulamanın hangi rotayla eşleştiğine göre karar verebilmeleri için durum verilerinin her rotayla ilişkiye alinmasını desteklemek için sayılmısa.</span><span class="sxs-lookup"><span data-stu-id="8f156-931"><xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*> are provided to support associating state data with each route so that the app can make decisions based on which route matched.</span></span> <span data-ttu-id="8f156-932">Bu değerler geliştirici tarafından tanımlanır ve yönlendirme davranışını hiçbir şekilde **etkilemez.**</span><span class="sxs-lookup"><span data-stu-id="8f156-932">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="8f156-933">Ayrıca, [RouteData.DataTokens'de](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) saklanan değerler, string'lere dönüştürülebilen [RouteData.Values'in](xref:Microsoft.AspNetCore.Routing.RouteData.Values)aksine her türden olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-933">Additionally, values stashed in [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) can be of any type, in contrast to [RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values), which must be convertible to and from strings.</span></span>

<span data-ttu-id="8f156-934">[RouteData.Routers,](xref:Microsoft.AspNetCore.Routing.RouteData.Routers) isteğin başarıyla eşleşmesinde yer alan yolların listesidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-934">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers) is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="8f156-935">Rotalar birbirinin içine iç içe olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-935">Routes can be nested inside of one another.</span></span> <span data-ttu-id="8f156-936">Özellik, <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> eşleşmeyle sonuçlanan mantıksal rota lar ağacından geçen yolu yansıtır.</span><span class="sxs-lookup"><span data-stu-id="8f156-936">The <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="8f156-937">Genellikle, ilk öğe <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> rota koleksiyonudur ve URL oluşturma için kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-937">Generally, the first item in <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> is the route collection and should be used for URL generation.</span></span> <span data-ttu-id="8f156-938">Son öğe <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> eşleşen rota işleyicisi.</span><span class="sxs-lookup"><span data-stu-id="8f156-938">The last item in <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> is the route handler that matched.</span></span>

<a name="lg"></a>

### <a name="url-generation-with-linkgenerator"></a><span data-ttu-id="8f156-939">LinkGenerator ile URL üretimi</span><span class="sxs-lookup"><span data-stu-id="8f156-939">URL generation with LinkGenerator</span></span>

<span data-ttu-id="8f156-940">URL oluşturma, yönlendirmenin bir rota değerleri kümesine dayalı bir URL yolu oluşturabileceği işlemdir.</span><span class="sxs-lookup"><span data-stu-id="8f156-940">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="8f156-941">Bu, uç noktalarınızla bunlara erişen URL'ler arasında mantıksal bir ayrım yapılmasına olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-941">This allows for a logical separation between your endpoints and the URLs that access them.</span></span>

<span data-ttu-id="8f156-942">Endpoint yönlendirme Bağlantı Jeneratör API<xref:Microsoft.AspNetCore.Routing.LinkGenerator>içerir ( ).</span><span class="sxs-lookup"><span data-stu-id="8f156-942">Endpoint routing includes the Link Generator API (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>).</span></span> <span data-ttu-id="8f156-943"><xref:Microsoft.AspNetCore.Routing.LinkGenerator>[DI'den](xref:fundamentals/dependency-injection)alınabilen tek tonlu bir hizmettir.</span><span class="sxs-lookup"><span data-stu-id="8f156-943"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> is a singleton service that can be retrieved from [DI](xref:fundamentals/dependency-injection).</span></span> <span data-ttu-id="8f156-944">API, yürütme isteği bağlamının dışında kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-944">The API can be used outside of the context of an executing request.</span></span> <span data-ttu-id="8f156-945">MVC's <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> ve senaryolar <xref:Microsoft.AspNetCore.Mvc.IUrlHelper>, [Tag Helpers](xref:mvc/views/tag-helpers/intro), HTML Yardımcıları ve [Eylem Sonuçları](xref:mvc/controllers/actions)gibi , bağlantı oluşturma yetenekleri sağlamak için bağlantı jeneratör kullanın.</span><span class="sxs-lookup"><span data-stu-id="8f156-945">MVC's <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> and scenarios that rely on <xref:Microsoft.AspNetCore.Mvc.IUrlHelper>, such as [Tag Helpers](xref:mvc/views/tag-helpers/intro), HTML Helpers, and [Action Results](xref:mvc/controllers/actions), use the link generator to provide link generating capabilities.</span></span>

<span data-ttu-id="8f156-946">Bağlantı jeneratörü bir *adres* ve adres *şemaları*kavramı tarafından desteklenen.</span><span class="sxs-lookup"><span data-stu-id="8f156-946">The link generator is backed by the concept of an *address* and *address schemes*.</span></span> <span data-ttu-id="8f156-947">Adres düzeni, bağlantı oluşturma için göz önünde bulundurulması gereken uç noktaları belirlemenin bir yoludur.</span><span class="sxs-lookup"><span data-stu-id="8f156-947">An address scheme is a way of determining the endpoints that should be considered for link generation.</span></span> <span data-ttu-id="8f156-948">Örneğin, birçok kullanıcının MVC/Razor Sayfalarından aşina olduğu rota adı ve rota değerleri senaryoları adres düzeni olarak uygulanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-948">For example, the route name and route values scenarios many users are familiar with from MVC/Razor Pages are implemented as an address scheme.</span></span>

<span data-ttu-id="8f156-949">Bağlantı jeneratörü aşağıdaki uzantı yöntemleri ile MVC/Razor Pages eylemlerine ve sayfalarına bağlantı verebilir:</span><span class="sxs-lookup"><span data-stu-id="8f156-949">The link generator can link to MVC/Razor Pages actions and pages via the following extension methods:</span></span>

* <xref:Microsoft.AspNetCore.Routing.ControllerLinkGeneratorExtensions.GetPathByAction*>
* <xref:Microsoft.AspNetCore.Routing.ControllerLinkGeneratorExtensions.GetUriByAction*>
* <xref:Microsoft.AspNetCore.Routing.PageLinkGeneratorExtensions.GetPathByPage*>
* <xref:Microsoft.AspNetCore.Routing.PageLinkGeneratorExtensions.GetUriByPage*>

<span data-ttu-id="8f156-950">Bu yöntemlerin aşırı yüklenmesi, `HttpContext`..</span><span class="sxs-lookup"><span data-stu-id="8f156-950">An overload of these methods accepts arguments that include the `HttpContext`.</span></span> <span data-ttu-id="8f156-951">Bu yöntemler işlevsel olarak `Url.Action` `Url.Page` eşdeğerdir ve ancak ek esneklik ve seçenekler sunar.</span><span class="sxs-lookup"><span data-stu-id="8f156-951">These methods are functionally equivalent to `Url.Action` and `Url.Page` but offer additional flexibility and options.</span></span>

<span data-ttu-id="8f156-952">Yöntemler `GetPath*` en çok `Url.Action` benzer `Url.Page` ve mutlak bir yol içeren bir URI oluşturmak.</span><span class="sxs-lookup"><span data-stu-id="8f156-952">The `GetPath*` methods are most similar to `Url.Action` and `Url.Page` in that they generate a URI containing an absolute path.</span></span> <span data-ttu-id="8f156-953">Yöntemler `GetUri*` her zaman bir şema ve ana bilgisayar içeren mutlak bir URI oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8f156-953">The `GetUri*` methods always generate an absolute URI containing a scheme and host.</span></span> <span data-ttu-id="8f156-954">Yürütme isteği bağlamında `HttpContext` bir URI oluşturmayı kabul eden yöntemler.</span><span class="sxs-lookup"><span data-stu-id="8f156-954">The methods that accept an `HttpContext` generate a URI in the context of the executing request.</span></span> <span data-ttu-id="8f156-955">Ortam rotası değerleri, URL temel yolu, düzen ve yürütme isteğinden ana bilgisayar geçersiz kılınmadığı sürece kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-955">The ambient route values, URL base path, scheme, and host from the executing request are used unless overridden.</span></span>

<span data-ttu-id="8f156-956"><xref:Microsoft.AspNetCore.Routing.LinkGenerator>bir adresle çağrılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-956"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> is called with an address.</span></span> <span data-ttu-id="8f156-957">URI oluşturma iki adımda gerçekleşir:</span><span class="sxs-lookup"><span data-stu-id="8f156-957">Generating a URI occurs in two steps:</span></span>

1. <span data-ttu-id="8f156-958">Adres, adresle eşleşen uç noktaların listesine bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-958">An address is bound to a list of endpoints that match the address.</span></span>
1. <span data-ttu-id="8f156-959">Her uç nokta, `RoutePattern` sağlanan değerlerle eşleşen bir rota deseni bulunana kadar değerlendirilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-959">Each endpoint's `RoutePattern` is evaluated until a route pattern that matches the supplied values is found.</span></span> <span data-ttu-id="8f156-960">Elde edilen çıkış, bağlantı jeneratörüne verilen diğer URI parçalarıyla birleştirilir ve döndürülür.</span><span class="sxs-lookup"><span data-stu-id="8f156-960">The resulting output is combined with the other URI parts supplied to the link generator and returned.</span></span>

<span data-ttu-id="8f156-961">Her tür <xref:Microsoft.AspNetCore.Routing.LinkGenerator> adres için standart bağlantı oluşturma yeteneklerini destekleyerek sağlanan yöntemler.</span><span class="sxs-lookup"><span data-stu-id="8f156-961">The methods provided by <xref:Microsoft.AspNetCore.Routing.LinkGenerator> support standard link generation capabilities for any type of address.</span></span> <span data-ttu-id="8f156-962">Bağlantı jeneratörü kullanmak için en uygun yolu belirli bir adres türü için işlemleri gerçekleştirmek uzantısı yöntemleri geçer.</span><span class="sxs-lookup"><span data-stu-id="8f156-962">The most convenient way to use the link generator is through extension methods that perform operations for a specific address type.</span></span>

| <span data-ttu-id="8f156-963">Uzatma Yöntemi</span><span class="sxs-lookup"><span data-stu-id="8f156-963">Extension Method</span></span>   | <span data-ttu-id="8f156-964">Açıklama</span><span class="sxs-lookup"><span data-stu-id="8f156-964">Description</span></span>                                                         |
| ------------------ | ------------------------------------------------------------------- |
| <xref:Microsoft.AspNetCore.Routing.LinkGenerator.GetPathByAddress*> | <span data-ttu-id="8f156-965">Sağlanan değerlere dayalı mutlak bir yol ile bir URI oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8f156-965">Generates a URI with an absolute path based on the provided values.</span></span> |
| <xref:Microsoft.AspNetCore.Routing.LinkGenerator.GetUriByAddress*> | <span data-ttu-id="8f156-966">Sağlanan değerlere dayalı mutlak bir URI oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8f156-966">Generates an absolute URI based on the provided values.</span></span>             |

> [!WARNING]
> <span data-ttu-id="8f156-967">Arama <xref:Microsoft.AspNetCore.Routing.LinkGenerator> yöntemlerinin aşağıdaki etkilerine dikkat edin:</span><span class="sxs-lookup"><span data-stu-id="8f156-967">Pay attention to the following implications of calling <xref:Microsoft.AspNetCore.Routing.LinkGenerator> methods:</span></span>
>
> * <span data-ttu-id="8f156-968">Gelen `GetUri*` isteklerin üstbilgisini `Host` doğrulamayan bir uygulama yapılandırmasında uzantı yöntemlerini dikkatli kullanın.</span><span class="sxs-lookup"><span data-stu-id="8f156-968">Use `GetUri*` extension methods with caution in an app configuration that doesn't validate the `Host` header of incoming requests.</span></span> <span data-ttu-id="8f156-969">Gelen `Host` isteklerin üstbilgisi doğrulanmazsa, güvenilmeyen istek girişi bir görünüm/sayfa olarak URI'deki istemciye geri gönderilebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-969">If the `Host` header of incoming requests isn't validated, untrusted request input can be sent back to the client in URIs in a view/page.</span></span> <span data-ttu-id="8f156-970">Tüm üretim uygulamalarının üstbilgiyi `Host` bilinen geçerli değerlere göre doğrulamak için sunucularını yapılandırmalarını öneririz.</span><span class="sxs-lookup"><span data-stu-id="8f156-970">We recommend that all production apps configure their server to validate the `Host` header against known valid values.</span></span>
>
> * <span data-ttu-id="8f156-971">Middleware'de dikkatli <xref:Microsoft.AspNetCore.Routing.LinkGenerator> kullanın `Map` veya `MapWhen`.</span><span class="sxs-lookup"><span data-stu-id="8f156-971">Use <xref:Microsoft.AspNetCore.Routing.LinkGenerator> with caution in middleware in combination with `Map` or `MapWhen`.</span></span> <span data-ttu-id="8f156-972">`Map*`bağlantı oluşturma çıktısını etkileyen yürütme isteğinin temel yolunu değiştirir.</span><span class="sxs-lookup"><span data-stu-id="8f156-972">`Map*` changes the base path of the executing request, which affects the output of link generation.</span></span> <span data-ttu-id="8f156-973">Tüm API'ler <xref:Microsoft.AspNetCore.Routing.LinkGenerator> bir temel yol belirtmeye izin verir.</span><span class="sxs-lookup"><span data-stu-id="8f156-973">All of the <xref:Microsoft.AspNetCore.Routing.LinkGenerator> APIs allow specifying a base path.</span></span> <span data-ttu-id="8f156-974">Bağlantı oluşturma üzerindeki etkisini geri `Map*`almak için her zaman boş bir temel yol belirtin.</span><span class="sxs-lookup"><span data-stu-id="8f156-974">Always specify an empty base path to undo `Map*`'s affect on link generation.</span></span>

## <a name="differences-from-earlier-versions-of-routing"></a><span data-ttu-id="8f156-975">Yönlendirmenin önceki sürümlerinden farklar</span><span class="sxs-lookup"><span data-stu-id="8f156-975">Differences from earlier versions of routing</span></span>

<span data-ttu-id="8f156-976">core 2.2 veya daha sonraki ASP.NET ve ASP.NET Core yönlendirme önceki sürümlerinde bitiş noktası yönlendirme arasında birkaç fark vardır:</span><span class="sxs-lookup"><span data-stu-id="8f156-976">A few differences exist between endpoint routing in ASP.NET Core 2.2 or later and earlier versions of routing in ASP.NET Core:</span></span>

* <span data-ttu-id="8f156-977">Uç nokta yönlendirme sistemi, 'den <xref:Microsoft.AspNetCore.Routing.IRouter> <xref:Microsoft.AspNetCore.Routing.Route>devralma dahil olmak üzere tabanlı genişletilebilirliği desteklemez.</span><span class="sxs-lookup"><span data-stu-id="8f156-977">The endpoint routing system doesn't support <xref:Microsoft.AspNetCore.Routing.IRouter>-based extensibility, including inheriting from <xref:Microsoft.AspNetCore.Routing.Route>.</span></span>

* <span data-ttu-id="8f156-978">Endpoint yönlendirme [WebApiCompatShim](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.WebApiCompatShim)desteklemez.</span><span class="sxs-lookup"><span data-stu-id="8f156-978">Endpoint routing doesn't support [WebApiCompatShim](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.WebApiCompatShim).</span></span> <span data-ttu-id="8f156-979">Uyumluluk şim'ini kullanmaya`.SetCompatibilityVersion(CompatibilityVersion.Version_2_1)`devam etmek için 2.1 uyumluluk [sürümünü](xref:mvc/compatibility-version) () kullanın.</span><span class="sxs-lookup"><span data-stu-id="8f156-979">Use the 2.1 [compatibility version](xref:mvc/compatibility-version) (`.SetCompatibilityVersion(CompatibilityVersion.Version_2_1)`) to continue using the compatibility shim.</span></span>

* <span data-ttu-id="8f156-980">Endpoint Yönlendirme, geleneksel yolları kullanırken oluşturulan ÜR'lerin kasası için farklı davranışlara sahiptir.</span><span class="sxs-lookup"><span data-stu-id="8f156-980">Endpoint Routing has different behavior for the casing of generated URIs when using conventional routes.</span></span>

  <span data-ttu-id="8f156-981">Aşağıdaki varsayılan rota şablonunu göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="8f156-981">Consider the following default route template:</span></span>

  ```csharp
  app.UseMvc(routes =>
  {
      routes.MapRoute("default", "{controller=Home}/{action=Index}/{id?}");
  });
  ```

  <span data-ttu-id="8f156-982">Aşağıdaki yolu kullanarak bir eyleme bağlantı oluşturduğunuzu varsayalım:</span><span class="sxs-lookup"><span data-stu-id="8f156-982">Suppose you generate a link to an action using the following route:</span></span>

  ```csharp
  var link = Url.Action("ReadPost", "blog", new { id = 17, });
  ```

  <span data-ttu-id="8f156-983">-tabanlı <xref:Microsoft.AspNetCore.Routing.IRouter>yönlendirme ile, bu kod, sağlanan `/blog/ReadPost/17`rota değerinin kasası saygı bir URI oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8f156-983">With <xref:Microsoft.AspNetCore.Routing.IRouter>-based routing, this code generates a URI of `/blog/ReadPost/17`, which respects the casing of the provided route value.</span></span> <span data-ttu-id="8f156-984">Core 2.2 veya daha sonra ASP.NET'da uç nokta yönlendirmesi ("Blog" büyük harfle) üretir. `/Blog/ReadPost/17`</span><span class="sxs-lookup"><span data-stu-id="8f156-984">Endpoint routing in ASP.NET Core 2.2 or later produces `/Blog/ReadPost/17` ("Blog" is capitalized).</span></span> <span data-ttu-id="8f156-985">Uç nokta yönlendirme, `IOutboundParameterTransformer` bu davranışı genel olarak özelleştirmek veya URL'leri eşleme için farklı kurallar uygulamak için kullanılabilecek arabirimi sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-985">Endpoint routing provides the `IOutboundParameterTransformer` interface that can be used to customize this behavior globally or to apply different conventions for mapping URLs.</span></span>

  <span data-ttu-id="8f156-986">Daha fazla bilgi için [Parametre transformatörü başvuru](#parameter-transformer-reference) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-986">For more information, see the [Parameter transformer reference](#parameter-transformer-reference) section.</span></span>

* <span data-ttu-id="8f156-987">MVC/Razor Pages tarafından geleneksel rotalara sahip kullanılan Bağlantı Oluşturma, var olmayan bir denetleyiciye/eyleme veya sayfaya bağlanmaya çalışırken farklı şekilde çalışır.</span><span class="sxs-lookup"><span data-stu-id="8f156-987">Link Generation used by MVC/Razor Pages with conventional routes behaves differently when attempting to link to an controller/action or page that doesn't exist.</span></span>

  <span data-ttu-id="8f156-988">Aşağıdaki varsayılan rota şablonunu göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="8f156-988">Consider the following default route template:</span></span>

  ```csharp
  app.UseMvc(routes =>
  {
      routes.MapRoute("default", "{controller=Home}/{action=Index}/{id?}");
  });
  ```

  <span data-ttu-id="8f156-989">Varsayılan şablonu kullanarak bir eyleme bağlantı oluşturduğunuzu varsayalım:</span><span class="sxs-lookup"><span data-stu-id="8f156-989">Suppose you generate a link to an action using the default template with the following:</span></span>

  ```csharp
  var link = Url.Action("ReadPost", "Blog", new { id = 17, });
  ```

  <span data-ttu-id="8f156-990">-tabanlı `IRouter`yönlendirme ile, sonuç her `/Blog/ReadPost/17`zaman , `BlogController` var olmasa veya bir `ReadPost` eylem yöntemi olmasa bile.</span><span class="sxs-lookup"><span data-stu-id="8f156-990">With `IRouter`-based routing, the result is always `/Blog/ReadPost/17`, even if the `BlogController` doesn't exist or doesn't have a `ReadPost` action method.</span></span> <span data-ttu-id="8f156-991">Beklendiği gibi, ASP.NET Core 2.2 veya daha `/Blog/ReadPost/17` sonra uç nokta yönlendirme eylem yöntemi varsa üretir.</span><span class="sxs-lookup"><span data-stu-id="8f156-991">As expected, endpoint routing in ASP.NET Core 2.2 or later produces `/Blog/ReadPost/17` if the action method exists.</span></span> <span data-ttu-id="8f156-992">*Ancak, eylem yoksa bitiş noktası yönlendirme boş bir dize üretir.*</span><span class="sxs-lookup"><span data-stu-id="8f156-992">*However, endpoint routing produces an empty string if the action doesn't exist.*</span></span> <span data-ttu-id="8f156-993">Kavramsal olarak, uç nokta yönlendirme, eylem yoksa bitiş noktasının var olduğunu varsaymaz.</span><span class="sxs-lookup"><span data-stu-id="8f156-993">Conceptually, endpoint routing doesn't assume that the endpoint exists if the action doesn't exist.</span></span>

* <span data-ttu-id="8f156-994">Bağlantı oluşturma *ortam değeri geçersiz leştirme algoritması,* uç nokta yönlendirmeile kullanıldığında farklı şekilde çalışır.</span><span class="sxs-lookup"><span data-stu-id="8f156-994">The link generation *ambient value invalidation algorithm* behaves differently when used with endpoint routing.</span></span>

  <span data-ttu-id="8f156-995">*Ortam değeri geçersiz liği,* şu anda yürütülen istekten (ortam değerleri) hangi rota değerlerinin bağlantı oluşturma işlemlerinde kullanılabileceğini belirleyen algoritmadır.</span><span class="sxs-lookup"><span data-stu-id="8f156-995">*Ambient value invalidation* is the algorithm that decides which route values from the currently executing request (the ambient values) can be used in link generation operations.</span></span> <span data-ttu-id="8f156-996">Geleneksel yönlendirme, farklı bir eyleme bağlantı verirken her zaman geçersiz kılınan ek rota değerlerini.</span><span class="sxs-lookup"><span data-stu-id="8f156-996">Conventional routing always invalidated extra route values when linking to a different action.</span></span> <span data-ttu-id="8f156-997">Öznitelik yönlendirmesi, ASP.NET Core 2.2 yayımlanmasından önce bu davranışa sahip değildi.</span><span class="sxs-lookup"><span data-stu-id="8f156-997">Attribute routing didn't have this behavior prior to the release of ASP.NET Core 2.2.</span></span> <span data-ttu-id="8f156-998">ASP.NET Core'un önceki sürümlerinde, aynı rota parametre adlarını kullanan başka bir eyleme bağlantılar bağlantı oluşturma hatalarıyla sonuçlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="8f156-998">In earlier versions of ASP.NET Core, links to another action that use the same route parameter names resulted in link generation errors.</span></span> <span data-ttu-id="8f156-999">Core 2.2 veya daha sonraki ASP.NET, yönlendirmenin her iki biçimi de başka bir eyleme bağlantı verirken değerleri geçersiz kılın.</span><span class="sxs-lookup"><span data-stu-id="8f156-999">In ASP.NET Core 2.2 or later, both forms of routing invalidate values when linking to another action.</span></span>

  <span data-ttu-id="8f156-1000">Core 2.1 veya daha önce ASP.NET aşağıdaki örneği göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="8f156-1000">Consider the following example in ASP.NET Core 2.1 or earlier.</span></span> <span data-ttu-id="8f156-1001">Başka bir eyleme (veya başka bir sayfaya) bağlantı verirken, rota değerleri istenmeyen yollarla yeniden kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1001">When linking to another action (or another page), route values can be reused in undesirable ways.</span></span>

  <span data-ttu-id="8f156-1002">*/Pages/Store/Product.cshtml*olarak :</span><span class="sxs-lookup"><span data-stu-id="8f156-1002">In */Pages/Store/Product.cshtml*:</span></span>

  ```cshtml
  @page "{id}"
  @Url.Page("/Login")
  ```

  <span data-ttu-id="8f156-1003">In */Pages/Login.cshtml*:</span><span class="sxs-lookup"><span data-stu-id="8f156-1003">In */Pages/Login.cshtml*:</span></span>

  ```cshtml
  @page "{id?}"
  ```

  <span data-ttu-id="8f156-1004">URI Core `/Store/Product/18` 2.1 veya daha önce ASP.NET ise, Store/Info `@Url.Page("/Login")` sayfasında `/Login/18`oluşturulan bağlantı .</span><span class="sxs-lookup"><span data-stu-id="8f156-1004">If the URI is `/Store/Product/18` in ASP.NET Core 2.1 or earlier, the link generated on the Store/Info page by `@Url.Page("/Login")` is `/Login/18`.</span></span> <span data-ttu-id="8f156-1005">Bağlantı `id` hedefi tamamen uygulamanın farklı bir parçası olsa da, 18 değeri yeniden kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1005">The `id` value of 18 is reused, even though the link destination is different part of the app entirely.</span></span> <span data-ttu-id="8f156-1006">`/Login` Sayfa bağlamında `id` rota değeri büyük olasılıkla bir kullanıcı kimliği değeridir, mağaza ürün kimliği değeri değil.</span><span class="sxs-lookup"><span data-stu-id="8f156-1006">The `id` route value in the context of the `/Login` page is probably a user ID value, not a store product ID value.</span></span>

  <span data-ttu-id="8f156-1007">Core 2.2 veya daha sonra ASP.NET ile bitiş `/Login`noktası yönlendirmesinde, sonuç .</span><span class="sxs-lookup"><span data-stu-id="8f156-1007">In endpoint routing with ASP.NET Core 2.2 or later, the result is `/Login`.</span></span> <span data-ttu-id="8f156-1008">Ortam değerleri, bağlı hedef farklı bir eylem veya sayfa olduğunda yeniden kullanılmaz.</span><span class="sxs-lookup"><span data-stu-id="8f156-1008">Ambient values aren't reused when the linked destination is a different action or page.</span></span>

* <span data-ttu-id="8f156-1009">Yuvarlama rota parametresi sözdizimi: Çift yıldız işareti (`**`) catch-all parametre sözdizimi kullanırken iletme çizgileri kodlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1009">Round-tripping route parameter syntax: Forward slashes aren't encoded when using a double-asterisk (`**`) catch-all parameter syntax.</span></span>

  <span data-ttu-id="8f156-1010">Bağlantı oluşturma sırasında yönlendirme sistemi, ileri eğik çizgiler dışında çift`**`yıldız () catch-all parametresi (örneğin, `{**myparametername}`) yakalanan değeri kodlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1010">During link generation, the routing system encodes the value captured in a double-asterisk (`**`) catch-all parameter (for example, `{**myparametername}`) except the forward slashes.</span></span> <span data-ttu-id="8f156-1011">Çift yıldız lı catch-all core 2.2 veya daha sonra ASP.NET tabanlı yönlendirme ile `IRouter`desteklenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1011">The double-asterisk catch-all is supported with `IRouter`-based routing in ASP.NET Core 2.2 or later.</span></span>

  <span data-ttu-id="8f156-1012">ASP.NET Core () önceki`{*myparametername}`sürümlerinde tek yıldız catch-all parametre sözdizimi desteklenmeye devam kalır ve ileri eğik çizgiler kodlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1012">The single asterisk catch-all parameter syntax in prior versions of ASP.NET Core (`{*myparametername}`) remains supported, and forward slashes are encoded.</span></span>

  | <span data-ttu-id="8f156-1013">Yol</span><span class="sxs-lookup"><span data-stu-id="8f156-1013">Route</span></span>              | <span data-ttu-id="8f156-1014">Bağlantı ile oluşturulan</span><span class="sxs-lookup"><span data-stu-id="8f156-1014">Link generated with</span></span><br>`Url.Action(new { category = "admin/products" })`&hellip; |
  | ------------------ | --------------------------------------------------------------------- |
  | `/search/{*page}`  | <span data-ttu-id="8f156-1015">`/search/admin%2Fproducts`(ön eğik çizgi kodlanır)</span><span class="sxs-lookup"><span data-stu-id="8f156-1015">`/search/admin%2Fproducts` (the forward slash is encoded)</span></span>             |
  | `/search/{**page}` | `/search/admin/products`                                              |

### <a name="middleware-example"></a><span data-ttu-id="8f156-1016">Middleware örneği</span><span class="sxs-lookup"><span data-stu-id="8f156-1016">Middleware example</span></span>

<span data-ttu-id="8f156-1017">Aşağıdaki örnekte, ara yazılım, <xref:Microsoft.AspNetCore.Routing.LinkGenerator> depo ürünlerini listeleyen bir eylem yöntemine bağlantı oluşturmak için API'yi kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1017">In the following example, a middleware uses the <xref:Microsoft.AspNetCore.Routing.LinkGenerator> API to create link to an action method that lists store products.</span></span> <span data-ttu-id="8f156-1018">Bir sınıfa enjekte ederek bağlantı jeneratörü `GenerateLink` kullanarak ve arama bir uygulama herhangi bir sınıf için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1018">Using the link generator by injecting it into a class and calling `GenerateLink` is available to any class in an app.</span></span>

```csharp
using Microsoft.AspNetCore.Routing;

public class ProductsLinkMiddleware
{
    private readonly LinkGenerator _linkGenerator;

    public ProductsLinkMiddleware(RequestDelegate next, LinkGenerator linkGenerator)
    {
        _linkGenerator = linkGenerator;
    }

    public async Task InvokeAsync(HttpContext httpContext)
    {
        var url = _linkGenerator.GetPathByAction("ListProducts", "Store");

        httpContext.Response.ContentType = "text/plain";

        await httpContext.Response.WriteAsync($"Go to {url} to see our products.");
    }
}
```

### <a name="create-routes"></a><span data-ttu-id="8f156-1019">Yolları oluşturma</span><span class="sxs-lookup"><span data-stu-id="8f156-1019">Create routes</span></span>

<span data-ttu-id="8f156-1020">Çoğu uygulama arayarak <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> veya üzerinde <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>tanımlanan benzer uzantı yöntemlerinden birini arayarak rotalar oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1020">Most apps create routes by calling <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> or one of the similar extension methods defined on <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span></span> <span data-ttu-id="8f156-1021">Uzantı <xref:Microsoft.AspNetCore.Routing.IRouteBuilder> yöntemlerinden herhangi biri <xref:Microsoft.AspNetCore.Routing.Route> bir örnek oluşturur ve rota koleksiyonuna ekler.</span><span class="sxs-lookup"><span data-stu-id="8f156-1021">Any of the <xref:Microsoft.AspNetCore.Routing.IRouteBuilder> extension methods create an instance of <xref:Microsoft.AspNetCore.Routing.Route> and add it to the route collection.</span></span>

<span data-ttu-id="8f156-1022"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*>rota işleyicisi parametrekabul etmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-1022"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> doesn't accept a route handler parameter.</span></span> <span data-ttu-id="8f156-1023"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*>yalnızca <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="8f156-1023"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> only adds routes that are handled by the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span> <span data-ttu-id="8f156-1024">MVC'de yönlendirme hakkında daha fazla <xref:mvc/controllers/routing>bilgi edinmek için bkz.</span><span class="sxs-lookup"><span data-stu-id="8f156-1024">To learn more about routing in MVC, see <xref:mvc/controllers/routing>.</span></span>

<span data-ttu-id="8f156-1025">Aşağıdaki kod örneği, tipik <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> bir ASP.NET Core MVC rota tanımı tarafından kullanılan bir çağrı örneğidir:</span><span class="sxs-lookup"><span data-stu-id="8f156-1025">The following code example is an example of a <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> call used by a typical ASP.NET Core MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="8f156-1026">Bu şablon bir URL yolu yla eşleşir ve rota değerlerini ayıklar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1026">This template matches a URL path and extracts the route values.</span></span> <span data-ttu-id="8f156-1027">Örneğin, yol `/Products/Details/17` aşağıdaki rota değerlerini oluşturur: `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="8f156-1027">For example, the path `/Products/Details/17` generates the following route values: `{ controller = Products, action = Details, id = 17 }`.</span></span>

<span data-ttu-id="8f156-1028">Rota değerleri, URL yolunu n için bölümlere bölerek ve her kesimin rota şablonundaki *rota parametre* adı ile eşleştirilerek belirlenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1028">Route values are determined by splitting the URL path into segments and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="8f156-1029">Rota parametreleri adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1029">Route parameters are named.</span></span> <span data-ttu-id="8f156-1030">Parametre adı ayraçlara `{ ... }`ekleyerek tanımlanan parametreler.</span><span class="sxs-lookup"><span data-stu-id="8f156-1030">The parameters defined by enclosing the parameter name in braces `{ ... }`.</span></span>

<span data-ttu-id="8f156-1031">Önceki şablon da URL yolu `/` eşleşebilir `{ controller = Home, action = Index }`ve değerleri üretmek.</span><span class="sxs-lookup"><span data-stu-id="8f156-1031">The preceding template could also match the URL path `/` and produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="8f156-1032">Bu, ve `{controller}` `{action}` rota parametrelerinin varsayılan `id` değerlere sahip olması ve rota parametresi isteğe bağlı olması nedeniyle oluşur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1032">This occurs because the `{controller}` and `{action}` route parameters have default values and the `id` route parameter is optional.</span></span> <span data-ttu-id="8f156-1033">Eşitler işareti`=`( ) ardından rota parametresi adı parametre için varsayılan bir değer tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1033">An equals sign (`=`) followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="8f156-1034">Rota parametresi adı sonra bir soru işareti (`?`) isteğe bağlı bir parametre tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1034">A question mark (`?`) after the route parameter name defines an optional parameter.</span></span>

<span data-ttu-id="8f156-1035">Varsayılan değeri olan rota parametreleri, rota eşleştiğinde *her zaman* bir rota değeri üretir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1035">Route parameters with a default value *always* produce a route value when the route matches.</span></span> <span data-ttu-id="8f156-1036">İlgili URL yolu kesimi yoksa, isteğe bağlı parametreler rota değeri oluşturmaz.</span><span class="sxs-lookup"><span data-stu-id="8f156-1036">Optional parameters don't produce a route value if there is no corresponding URL path segment.</span></span> <span data-ttu-id="8f156-1037">Rota [şablonu](#route-template-reference) senaryoları ve sözdiziminin ayrıntılı bir açıklaması için Rota şablonu başvuru bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1037">See the [Route template reference](#route-template-reference) section for a thorough description of route template scenarios and syntax.</span></span>

<span data-ttu-id="8f156-1038">Aşağıdaki örnekte, rota parametre `{id:int}` tanımı rota parametresi için bir [rota kısıtlaması](#route-constraint-reference) `id` tanımlar:</span><span class="sxs-lookup"><span data-stu-id="8f156-1038">In the following example, the route parameter definition `{id:int}` defines a [route constraint](#route-constraint-reference) for the `id` route parameter:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="8f156-1039">Bu şablon, gibi `/Products/Details/17` bir `/Products/Details/Apples`URL yolu eşleşir ama değil.</span><span class="sxs-lookup"><span data-stu-id="8f156-1039">This template matches a URL path like `/Products/Details/17` but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="8f156-1040">Rota kısıtlamaları, <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> bunları doğrulamak için rota değerlerini uygular ve inceler.</span><span class="sxs-lookup"><span data-stu-id="8f156-1040">Route constraints implement <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> and inspect route values to verify them.</span></span> <span data-ttu-id="8f156-1041">Bu örnekte, rota `id` değerinin bir tamsayıya dönüştürülebilir olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1041">In this example, the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="8f156-1042">Çerçeve tarafından sağlanan rota kısıtlamalarının açıklaması için [rota kısıtlaması-başvuruya](#route-constraint-reference) bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1042">See [route-constraint-reference](#route-constraint-reference) for an explanation of route constraints provided by the framework.</span></span>

<span data-ttu-id="8f156-1043">' `dataTokens`ve `defaults` <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> . için `constraints`ek kabul değerleri</span><span class="sxs-lookup"><span data-stu-id="8f156-1043">Additional overloads of <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="8f156-1044">Bu parametrelerin tipik kullanımı, anonim tür eşleme rota parametre adlarının özellik adlarının bulunduğu anonim olarak yazılan bir nesneyi geçmektir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1044">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="8f156-1045">Aşağıdaki <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> örnekler eşdeğer yollar oluşturur:</span><span class="sxs-lookup"><span data-stu-id="8f156-1045">The following <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

> [!TIP]
> <span data-ttu-id="8f156-1046">Kısıtlamaları ve varsayılanları tanımlamak için satır satır ekindizi basit yollar için uygun olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1046">The inline syntax for defining constraints and defaults can be convenient for simple routes.</span></span> <span data-ttu-id="8f156-1047">Ancak, satır arasözcü tarafından desteklenmeyen veri belirteçleri gibi senaryolar da vardır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1047">However, there are scenarios, such as data tokens, that aren't supported by inline syntax.</span></span>

<span data-ttu-id="8f156-1048">Aşağıdaki örnekte birkaç ek senaryo gösterilmiş:</span><span class="sxs-lookup"><span data-stu-id="8f156-1048">The following example demonstrates a few additional scenarios:</span></span>

```csharp
routes.MapRoute(
    name: "blog",
    template: "Blog/{**article}",
    defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="8f156-1049">Önceki şablon gibi `/Blog/All-About-Routing/Introduction` bir URL yolu eşleşir `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`ve değerleri ayıklar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1049">The preceding template matches a URL path like `/Blog/All-About-Routing/Introduction` and extracts the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="8f156-1050">Şablonda karşılık `controller` gelen `action` rota parametreleri olmamasına rağmen, varsayılan rota değerleri için ve rota tarafından üretilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1050">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="8f156-1051">Varsayılan değerler rota şablonunda belirtilebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1051">Default values can be specified in the route template.</span></span> <span data-ttu-id="8f156-1052">`article` Rota parametresi, rota parametresi adından önce çift yıldız`**`() görünümüyle *tümünü yakalama* olarak tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1052">The `article` route parameter is defined as a *catch-all* by the appearance of an double asterisk (`**`) before the route parameter name.</span></span> <span data-ttu-id="8f156-1053">Tümyolu yakalama parametreleri URL yolunun geri kalanını yakalar ve boş dizeyle eşleşebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1053">Catch-all route parameters capture the remainder of the URL path and can also match the empty string.</span></span>

<span data-ttu-id="8f156-1054">Aşağıdaki örnek, rota kısıtlamaları ve veri belirteçleri ekler:</span><span class="sxs-lookup"><span data-stu-id="8f156-1054">The following example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="8f156-1055">Önceki şablon gibi `/en-US/Products/5` bir URL yolu eşleşir `{ controller = Products, action = Details, id = 5 }` ve değerleri ve `{ locale = en-US }`veri belirteçleri ayıklar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1055">The preceding template matches a URL path like `/en-US/Products/5` and extracts the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Yerel Windows belirteçleri](routing/_static/tokens.png)

### <a name="route-class-url-generation"></a><span data-ttu-id="8f156-1057">Rota sınıfı URL oluşturma</span><span class="sxs-lookup"><span data-stu-id="8f156-1057">Route class URL generation</span></span>

<span data-ttu-id="8f156-1058">Sınıf, <xref:Microsoft.AspNetCore.Routing.Route> rota şablonuyla bir dizi rota değerini birleştirerek URL oluşturma yı da gerçekleştirebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1058">The <xref:Microsoft.AspNetCore.Routing.Route> class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="8f156-1059">Bu mantıksal olarak URL yolunu eşleştirme nin ters işlemidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1059">This is logically the reverse process of matching the URL path.</span></span>

> [!TIP]
> <span data-ttu-id="8f156-1060">URL oluşturmayı daha iyi anlamak için, hangi URL'yi oluşturmak istediğinizi hayal edin ve ardından bir rota şablonunun bu URL ile nasıl eşleşeceğini düşünün.</span><span class="sxs-lookup"><span data-stu-id="8f156-1060">To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="8f156-1061">Hangi değerler üretilecek?</span><span class="sxs-lookup"><span data-stu-id="8f156-1061">What values would be produced?</span></span> <span data-ttu-id="8f156-1062">Bu, URL oluşturmanın <xref:Microsoft.AspNetCore.Routing.Route> sınıfta nasıl çalıştığının kaba karşılığıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1062">This is the rough equivalent of how URL generation works in the <xref:Microsoft.AspNetCore.Routing.Route> class.</span></span>

<span data-ttu-id="8f156-1063">Aşağıdaki örnekte genel bir ASP.NET Core MVC varsayılan rota kullanır:</span><span class="sxs-lookup"><span data-stu-id="8f156-1063">The following example uses a general ASP.NET Core MVC default route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="8f156-1064">Rota değerleri `{ controller = Products, action = List }`yle URL `/Products/List` oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1064">With the route values `{ controller = Products, action = List }`, the URL `/Products/List` is generated.</span></span> <span data-ttu-id="8f156-1065">Rota değerleri, URL yolunu oluşturmak için ilgili rota parametreleri için ikame edilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1065">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="8f156-1066">İsteğe bağlı bir rota parametresi olduğundan, `id` URL `id`için bir değer olmadan başarıyla oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1066">Since `id` is an optional route parameter, the URL is successfully generated without a value for `id`.</span></span>

<span data-ttu-id="8f156-1067">Rota değerleri `{ controller = Home, action = Index }`yle URL `/` oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1067">With the route values `{ controller = Home, action = Index }`, the URL `/` is generated.</span></span> <span data-ttu-id="8f156-1068">Sağlanan rota değerleri varsayılan değerlerle eşleşir ve varsayılan değerlere karşılık gelen segmentler güvenli bir şekilde atlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1068">The provided route values match the default values, and the segments corresponding to the default values are safely omitted.</span></span>

<span data-ttu-id="8f156-1069">Her iki URL de aşağıdaki rota tanımıyla`/Home/Index` `/`(ve) URL oluşturmak için kullanılan aynı rota değerlerini kullanarak gidiş-dönüş oluşturdu.</span><span class="sxs-lookup"><span data-stu-id="8f156-1069">Both URLs generated round-trip with the following route definition (`/Home/Index` and `/`) produce the same route values that were used to generate the URL.</span></span>

> [!NOTE]
> <span data-ttu-id="8f156-1070">Core MVC'ASP.NET kullanan <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> bir uygulama, doğrudan yönlendirmeye çağırmak yerine URL'ler oluşturmak için kullanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1070">An app using ASP.NET Core MVC should use <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="8f156-1071">URL oluşturma hakkında daha fazla bilgi için [Url oluşturma başvuru](#url-generation-reference) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1071">For more information on URL generation, see the [Url generation reference](#url-generation-reference) section.</span></span>

## <a name="use-routing-middleware"></a><span data-ttu-id="8f156-1072">Yönlendirme Middleware'i kullanma</span><span class="sxs-lookup"><span data-stu-id="8f156-1072">Use Routing Middleware</span></span>

<span data-ttu-id="8f156-1073">Uygulamanın proje dosyasındaki [Microsoft.AspNetCore.App meta paketine](xref:fundamentals/metapackage-app) başvurun.</span><span class="sxs-lookup"><span data-stu-id="8f156-1073">Reference the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) in the app's project file.</span></span>

<span data-ttu-id="8f156-1074">Aşağıdaki durumlarda servis konteynerine `Startup.ConfigureServices`yönlendirme ekleme:</span><span class="sxs-lookup"><span data-stu-id="8f156-1074">Add routing to the service container in `Startup.ConfigureServices`:</span></span>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

<span data-ttu-id="8f156-1075">Rotalar `Startup.Configure` yöntemde yapılandırılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1075">Routes must be configured in the `Startup.Configure` method.</span></span> <span data-ttu-id="8f156-1076">Örnek uygulama aşağıdaki API'leri kullanır:</span><span class="sxs-lookup"><span data-stu-id="8f156-1076">The sample app uses the following APIs:</span></span>

* <xref:Microsoft.AspNetCore.Routing.RouteBuilder>
* <span data-ttu-id="8f156-1077"><xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>&ndash; Yalnızca HTTP GET istekleriyle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1077"><xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> &ndash; Matches only HTTP GET requests.</span></span>
* <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

<span data-ttu-id="8f156-1078">Aşağıdaki tablo, verilen ÜRB'lerle yanıtları gösterir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1078">The following table shows the responses with the given URIs.</span></span>

| <span data-ttu-id="8f156-1079">URI</span><span class="sxs-lookup"><span data-stu-id="8f156-1079">URI</span></span>                    | <span data-ttu-id="8f156-1080">Yanıt</span><span class="sxs-lookup"><span data-stu-id="8f156-1080">Response</span></span>                                          |
| ---------------------- | ------------------------------------------------- |
| `/package/create/3`    | <span data-ttu-id="8f156-1081">Merhaba!</span><span class="sxs-lookup"><span data-stu-id="8f156-1081">Hello!</span></span> <span data-ttu-id="8f156-1082">Rota değerleri: [işlem, oluşturma], [id, 3]</span><span class="sxs-lookup"><span data-stu-id="8f156-1082">Route values: [operation, create], [id, 3]</span></span> |
| `/package/track/-3`    | <span data-ttu-id="8f156-1083">Merhaba!</span><span class="sxs-lookup"><span data-stu-id="8f156-1083">Hello!</span></span> <span data-ttu-id="8f156-1084">Rota değerleri: [işlem, parça], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="8f156-1084">Route values: [operation, track], [id, -3]</span></span> |
| `/package/track/-3/`   | <span data-ttu-id="8f156-1085">Merhaba!</span><span class="sxs-lookup"><span data-stu-id="8f156-1085">Hello!</span></span> <span data-ttu-id="8f156-1086">Rota değerleri: [işlem, parça], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="8f156-1086">Route values: [operation, track], [id, -3]</span></span> |
| `/package/track/`      | <span data-ttu-id="8f156-1087">İstek suya düşüyor, eşleşme yok.</span><span class="sxs-lookup"><span data-stu-id="8f156-1087">The request falls through, no match.</span></span>              |
| `GET /hello/Joe`       | <span data-ttu-id="8f156-1088">Merhaba Joe!</span><span class="sxs-lookup"><span data-stu-id="8f156-1088">Hi, Joe!</span></span>                                          |
| `POST /hello/Joe`      | <span data-ttu-id="8f156-1089">İstek ile düşer, maçlar HTTP GET sadece.</span><span class="sxs-lookup"><span data-stu-id="8f156-1089">The request falls through, matches HTTP GET only.</span></span> |
| `GET /hello/Joe/Smith` | <span data-ttu-id="8f156-1090">İstek suya düşüyor, eşleşme yok.</span><span class="sxs-lookup"><span data-stu-id="8f156-1090">The request falls through, no match.</span></span>              |

<span data-ttu-id="8f156-1091">Çerçeve, rotalar oluşturmak için bir<xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions>dizi uzatma yöntemi sağlar ( ):</span><span class="sxs-lookup"><span data-stu-id="8f156-1091">The framework provides a set of extension methods for creating routes (<xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions>):</span></span>

* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapDelete*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareDelete*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareGet*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewarePost*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewarePut*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareRoute*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareVerb*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapPost*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapPut*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapRoute*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>

<span data-ttu-id="8f156-1092">Yöntemler, `Map[Verb]` yöntem adında http fiiliile yolu sınırlamak için kısıtlamalar kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1092">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="8f156-1093">Örneğin, bkz <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>ve .</span><span class="sxs-lookup"><span data-stu-id="8f156-1093">For example, see <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> and <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="8f156-1094">Rota şablonu başvurusu</span><span class="sxs-lookup"><span data-stu-id="8f156-1094">Route template reference</span></span>

<span data-ttu-id="8f156-1095">Kıvırcık ayraçlar içindeki`{ ... }`belirteçler ( ) rota eşleştiğinde bağlanan *rota parametrelerini* tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1095">Tokens within curly braces (`{ ... }`) define *route parameters* that are bound if the route is matched.</span></span> <span data-ttu-id="8f156-1096">Bir rota segmentinde birden fazla rota parametresi tanımlayabilirsiniz, ancak bunların gerçek bir değerle ayrılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1096">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="8f156-1097">Örneğin, `{controller=Home}{action=Index}` geçerli bir yol değildir, çünkü ile `{controller}` . `{action}`</span><span class="sxs-lookup"><span data-stu-id="8f156-1097">For example, `{controller=Home}{action=Index}` isn't a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="8f156-1098">Bu rota parametrelerinin bir adı olmalıdır ve ek öznitelikler belirtilmiş olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1098">These route parameters must have a name and may have additional attributes specified.</span></span>

<span data-ttu-id="8f156-1099">Rota parametreleri dışındaki gerçek metin `{id}`(örneğin, ) `/` ve yol ayırıcısı URL'deki metyle eşleşmelidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1099">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="8f156-1100">Metin eşleştirme büyük/küçük harf duyarsız ve URL'ler yolunun deşifre gösterimine dayanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1100">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="8f156-1101">Bir literal rota parametresi`{` delimiter `}``{{` (veya) eşleştirmek için , `}}`karakter (veya ) tekrarlayarak delimiter kaçış.</span><span class="sxs-lookup"><span data-stu-id="8f156-1101">To match a literal route parameter delimiter (`{` or `}`), escape the delimiter by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="8f156-1102">İsteğe bağlı dosya uzantısı ile bir dosya adını yakalamaya çalışan URL desenleri ek hususlar vardır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1102">URL patterns that attempt to capture a file name with an optional file extension have additional considerations.</span></span> <span data-ttu-id="8f156-1103">Örneğin, şablonu `files/{filename}.{ext?}`göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="8f156-1103">For example, consider the template `files/{filename}.{ext?}`.</span></span> <span data-ttu-id="8f156-1104">Her ikisi `filename` için `ext` değerler ve var olduğunda, her iki değer de doldurulur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1104">When values for both `filename` and `ext` exist, both values are populated.</span></span> <span data-ttu-id="8f156-1105">URL'de yalnızca `filename` bir değer varsa, rota eşleşir,`.`çünkü son daki dönem ( ) isteğe bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1105">If only a value for `filename` exists in the URL, the route matches because the trailing period (`.`) is  optional.</span></span> <span data-ttu-id="8f156-1106">Aşağıdaki URL'ler bu rotayla eşleşir:</span><span class="sxs-lookup"><span data-stu-id="8f156-1106">The following URLs match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile`

<span data-ttu-id="8f156-1107">Uri'nin geri kalanına`*`bağlamak için rota`**`parametresine bir önek olarak yıldız işareti () veya çift yıldız ( ) kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8f156-1107">You can use an asterisk (`*`) or double asterisk (`**`) as a prefix to a route parameter to bind to the rest of the URI.</span></span> <span data-ttu-id="8f156-1108">Bunlara *tümlerini yakalama* parametreleri denir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1108">These are called a *catch-all* parameters.</span></span> <span data-ttu-id="8f156-1109">Örneğin, `blog/{**slug}` `slug` rota değerine atanan `/blog` uri ile başlayan ve onu izleyen herhangi bir değere sahip herhangi bir URI ile eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1109">For example, `blog/{**slug}` matches any URI that starts with `/blog` and has any value following it, which is assigned to the `slug` route value.</span></span> <span data-ttu-id="8f156-1110">Tümlerini yakalama parametreleri boş dizeyle de eşleşebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1110">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="8f156-1111">Tümlerini yakalama parametresi, yol ayırıcısı (`/`) karakterleri de dahil olmak üzere bir URL oluşturmak için kullanıldığında uygun karakterlerden kaçar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1111">The catch-all parameter escapes the appropriate characters when the route is used to generate a URL, including path separator (`/`) characters.</span></span> <span data-ttu-id="8f156-1112">Örneğin, rota `foo/{*path}` değerleri `{ path = "my/path" }` ile rota `foo/my%2Fpath`oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1112">For example, the route `foo/{*path}` with route values `{ path = "my/path" }` generates `foo/my%2Fpath`.</span></span> <span data-ttu-id="8f156-1113">Kaçan ileri eğik çizgiye dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="8f156-1113">Note the escaped forward slash.</span></span> <span data-ttu-id="8f156-1114">Gidiş-dönüş yol ayırıcı karakterleri için `**` rota parametresi önekini kullanın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1114">To round-trip path separator characters, use the `**` route parameter prefix.</span></span> <span data-ttu-id="8f156-1115">Üreten `foo/{**path}` `{ path = "my/path" }` `foo/my/path`rota.</span><span class="sxs-lookup"><span data-stu-id="8f156-1115">The route `foo/{**path}` with `{ path = "my/path" }` generates `foo/my/path`.</span></span>

<span data-ttu-id="8f156-1116">Rota parametreleri, eşitler işaretiyle ayrılan parametre adı ()`=`ile ayrıldıktan sonra varsayılan değeri belirterek varsayılan *değerlere* sahip olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1116">Route parameters may have *default values* designated by specifying the default value after the parameter name separated by an equals sign (`=`).</span></span> <span data-ttu-id="8f156-1117">Örneğin, `{controller=Home}` varsayılan `Home` değer olarak `controller`tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1117">For example, `{controller=Home}` defines `Home` as the default value for `controller`.</span></span> <span data-ttu-id="8f156-1118">Parametrenin URL'sinde değer yoksa varsayılan değer kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1118">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="8f156-1119">Rota parametreleri, parametre adının sonuna`?`bir soru işareti ( ) ekleyerek `id?`isteğe bağlı hale getirilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1119">Route parameters are made optional by appending a question mark (`?`) to the end of the parameter name, as in `id?`.</span></span> <span data-ttu-id="8f156-1120">İsteğe bağlı değerler ve varsayılan rota parametreleri arasındaki fark, varsayılan&mdash;değeri olan bir rota parametresinin her zaman isteğe bağlı bir parametrenin yalnızca istek URL'si tarafından bir değer sağlandığında bir değere sahip olduğu bir değer üretmesidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1120">The difference between optional values and default route parameters is that a route parameter with a default value always produces a value&mdash;an optional parameter has a value only when a value is provided by the request URL.</span></span>

<span data-ttu-id="8f156-1121">Rota parametrelerinde URL'den bağlanan rota değeriyle eşleşmesi gereken kısıtlamalar olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1121">Route parameters may have constraints that must match the route value bound from the URL.</span></span> <span data-ttu-id="8f156-1122">Rota parametre`:`adı sonra bir iki nokta üst üste ( ) ve kısıtlama adı ekleme bir rota parametresi üzerinde *satır içinde bir kısıtlama* belirtir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1122">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="8f156-1123">Kısıtlama bağımsız değişkenler gerektiriyorsa, kısıtlama adından`(...)`sonra parantez içinde ( ) ekolarak konum.</span><span class="sxs-lookup"><span data-stu-id="8f156-1123">If the constraint requires arguments, they're enclosed in parentheses (`(...)`) after the constraint name.</span></span> <span data-ttu-id="8f156-1124">Birden çok satır içi kısıtlamalar başka bir`:`üst üste ( ) ve kısıtlama adı ekleyerek belirtilebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1124">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span>

<span data-ttu-id="8f156-1125">Kısıtlama adı ve bağımsız değişkenler, URL işlemede kullanılacak bir örnek oluşturmak için <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> hizmete aktarılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1125">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="8f156-1126">Örneğin, rota şablonu `blog/{article:minlength(10)}` bağımsız `minlength` değişkenile `10`bir kısıtlama belirtir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1126">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="8f156-1127">Rota kısıtlamaları ve çerçeve tarafından sağlanan kısıtlamaların listesi hakkında daha fazla bilgi için [Rota kısıtlaması başvuru](#route-constraint-reference) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1127">For more information on route constraints and a list of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

<span data-ttu-id="8f156-1128">Rota parametreleri, bağlantılar oluştururken ve eylemleri ve sayfaları URL'lere eşleştirirken parametre değerini dönüştüren parametre transformatörlerine de sahip olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1128">Route parameters may also have parameter transformers, which transform a parameter's value when generating links and matching actions and pages to URLs.</span></span> <span data-ttu-id="8f156-1129">Kısıtlamalar gibi, parametre transformatörleri de rota parametresi adından`:`sonra bir nokta üst üste ( ) ve transformatör adı eklenerek rota parametresine satır satır eklenebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1129">Like constraints, parameter transformers can be added inline to a route parameter by adding a colon (`:`) and transformer name after the route parameter name.</span></span> <span data-ttu-id="8f156-1130">Örneğin, rota şablonu `blog/{article:slugify}` bir `slugify` transformatör belirtir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1130">For example, the route template `blog/{article:slugify}` specifies a `slugify` transformer.</span></span> <span data-ttu-id="8f156-1131">Parametre transformatörleri hakkında daha fazla bilgi için [Parametre transformatör referans](#parameter-transformer-reference) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1131">For more information on parameter transformers, see the [Parameter transformer reference](#parameter-transformer-reference) section.</span></span>

<span data-ttu-id="8f156-1132">Aşağıdaki tabloörnek rota şablonlarını ve davranışlarını gösterir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1132">The following table demonstrates example route templates and their behavior.</span></span>

| <span data-ttu-id="8f156-1133">Rota Şablonu</span><span class="sxs-lookup"><span data-stu-id="8f156-1133">Route Template</span></span>                           | <span data-ttu-id="8f156-1134">Örnek Eşleşen URI</span><span class="sxs-lookup"><span data-stu-id="8f156-1134">Example Matching URI</span></span>    | <span data-ttu-id="8f156-1135">İstek URI&hellip;</span><span class="sxs-lookup"><span data-stu-id="8f156-1135">The request URI&hellip;</span></span>                                                    |
| ---------------------------------------- | ----------------------- | -------------------------------------------------------------------------- |
| `hello`                                  | `/hello`                | <span data-ttu-id="8f156-1136">Sadece tek yol `/hello`eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1136">Only matches the single path `/hello`.</span></span>                                     |
| `{Page=Home}`                            | `/`                     | <span data-ttu-id="8f156-1137">Maçlar ve `Page` `Home`ayarlar .</span><span class="sxs-lookup"><span data-stu-id="8f156-1137">Matches and sets `Page` to `Home`.</span></span>                                         |
| `{Page=Home}`                            | `/Contact`              | <span data-ttu-id="8f156-1138">Maçlar ve `Page` `Contact`ayarlar .</span><span class="sxs-lookup"><span data-stu-id="8f156-1138">Matches and sets `Page` to `Contact`.</span></span>                                      |
| `{controller}/{action}/{id?}`            | `/Products/List`        | <span data-ttu-id="8f156-1139">`Products` Denetleyici ve `List` eylem haritaları.</span><span class="sxs-lookup"><span data-stu-id="8f156-1139">Maps to the `Products` controller and `List` action.</span></span>                       |
| `{controller}/{action}/{id?}`            | `/Products/Details/123` | <span data-ttu-id="8f156-1140">`Products` Denetleyici ve `Details` eylem haritaları (123`id` olarak ayarlayın).</span><span class="sxs-lookup"><span data-stu-id="8f156-1140">Maps to the `Products` controller and  `Details` action (`id` set to 123).</span></span> |
| `{controller=Home}/{action=Index}/{id?}` | `/`                     | <span data-ttu-id="8f156-1141">`Home` Denetleyici ve `Index` yönteme haritalar (yoksayılır).`id`</span><span class="sxs-lookup"><span data-stu-id="8f156-1141">Maps to the `Home` controller and `Index` method (`id` is ignored).</span></span>        |

<span data-ttu-id="8f156-1142">Şablon kullanmak genellikle yönlendirmeye en basit yaklaşımdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1142">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="8f156-1143">Kısıtlamalar ve varsayılanlar da rota şablonu dışında belirtilebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1143">Constraints and defaults can also be specified outside the route template.</span></span>

> [!TIP]
> <span data-ttu-id="8f156-1144">Yerleşik yönlendirme uygulamalarının <xref:Microsoft.AspNetCore.Routing.Route>istekleri nasıl eşleştirbildiğini görmek için [Günlüğe Kaydetme'yi](xref:fundamentals/logging/index) etkinleştirin.</span><span class="sxs-lookup"><span data-stu-id="8f156-1144">Enable [Logging](xref:fundamentals/logging/index) to see how the built-in routing implementations, such as <xref:Microsoft.AspNetCore.Routing.Route>, match requests.</span></span>

## <a name="reserved-routing-names"></a><span data-ttu-id="8f156-1145">Ayrılmış yönlendirme adları</span><span class="sxs-lookup"><span data-stu-id="8f156-1145">Reserved routing names</span></span>

<span data-ttu-id="8f156-1146">Aşağıdaki anahtar kelimeler ayrılmış adlardır ve rota adları veya parametrelerolarak kullanılamaz:</span><span class="sxs-lookup"><span data-stu-id="8f156-1146">The following keywords are reserved names and can't be used as route names or parameters:</span></span>

* `action`
* `area`
* `controller`
* `handler`
* `page`

## <a name="route-constraint-reference"></a><span data-ttu-id="8f156-1147">Rota kısıtlaması başvurusu</span><span class="sxs-lookup"><span data-stu-id="8f156-1147">Route constraint reference</span></span>

<span data-ttu-id="8f156-1148">Gelen URL'de bir eşleşme oluştuğunda ve URL yolu rota değerlerine belirtildiğinde rota kısıtlamaları yürütülür.</span><span class="sxs-lookup"><span data-stu-id="8f156-1148">Route constraints execute when a match has occurred to the incoming URL and the URL path is tokenized into route values.</span></span> <span data-ttu-id="8f156-1149">Rota kısıtlamaları genellikle rota şablonu aracılığıyla ilişkili rota değerini inceler ve değerin kabul edilebilir olup olmadığı konusunda evet/hayır kararı verir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1149">Route constraints generally inspect the route value associated via the route template and make a yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="8f156-1150">Bazı rota kısıtlamaları, isteğin yönlendirilip yönlendirilemeyeceğini değerlendirmek için rota değerinin dışındaki verileri kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1150">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="8f156-1151">Örneğin, http <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> fiiline dayalı bir isteği kabul edebilir veya reddedebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1151">For example, the <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> can accept or reject a request based on its HTTP verb.</span></span> <span data-ttu-id="8f156-1152">Kısıtlamalar yönlendirme istekleri ve bağlantı oluşturma kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1152">Constraints are used in routing requests and link generation.</span></span>

> [!WARNING]
> <span data-ttu-id="8f156-1153">**Giriş doğrulama**için kısıtlamalar kullanmayın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1153">Don't use constraints for **input validation**.</span></span> <span data-ttu-id="8f156-1154">**Giriş doğrulaması**için kısıtlamalar kullanılıyorsa, geçersiz giriş sonuçları *404 - 400* yerine Bulunamadı yanıt - Uygun bir hata iletisi ile *Hatalı İstek.*</span><span class="sxs-lookup"><span data-stu-id="8f156-1154">If constraints are used for **input validation**, invalid input results in a *404 - Not Found* response instead of a *400 - Bad Request* with an appropriate error message.</span></span> <span data-ttu-id="8f156-1155">Rota kısıtlamaları, belirli bir rotanın girdilerini doğrulamak için değil, benzer yolları **ayrıştırmak** için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1155">Route constraints are used to **disambiguate** similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="8f156-1156">Aşağıdaki tablo, örnek rota kısıtlamaları ve bunların beklenen davranışlarını gösterir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1156">The following table demonstrates example route constraints and their expected behavior.</span></span>

| <span data-ttu-id="8f156-1157">kısıtlama</span><span class="sxs-lookup"><span data-stu-id="8f156-1157">constraint</span></span> | <span data-ttu-id="8f156-1158">Örnek</span><span class="sxs-lookup"><span data-stu-id="8f156-1158">Example</span></span> | <span data-ttu-id="8f156-1159">Örnek Eşleşmeler</span><span class="sxs-lookup"><span data-stu-id="8f156-1159">Example Matches</span></span> | <span data-ttu-id="8f156-1160">Notlar</span><span class="sxs-lookup"><span data-stu-id="8f156-1160">Notes</span></span> |
| ---------- | ------- | --------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="8f156-1161">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="8f156-1161">`123456789`, `-123456789`</span></span> | <span data-ttu-id="8f156-1162">Herhangi bir sonayla eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1162">Matches any integer.</span></span> |
| `bool` | `{active:bool}` | <span data-ttu-id="8f156-1163">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="8f156-1163">`true`, `FALSE`</span></span> | <span data-ttu-id="8f156-1164">Kibrit `true` ler ya da 'yanlış.</span><span class="sxs-lookup"><span data-stu-id="8f156-1164">Matches `true` or \`false.</span></span> <span data-ttu-id="8f156-1165">Duyarlı.</span><span class="sxs-lookup"><span data-stu-id="8f156-1165">Case-insensitive.</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="8f156-1166">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="8f156-1166">`2016-12-31`, `2016-12-31 7:32pm`</span></span> | <span data-ttu-id="8f156-1167">Değişmez kültürdeki geçerli `DateTime` bir değerle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1167">Matches a valid `DateTime` value in the invariant culture.</span></span> <span data-ttu-id="8f156-1168">Önceki uyarıya bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1168">See  preceding warning.</span></span>|
| `decimal` | `{price:decimal}` | <span data-ttu-id="8f156-1169">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="8f156-1169">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="8f156-1170">Değişmez kültürdeki geçerli `decimal` bir değerle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1170">Matches a valid `decimal` value in the invariant culture.</span></span> <span data-ttu-id="8f156-1171">Önceki uyarıya bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1171">See  preceding warning.</span></span>|
| `double` | `{weight:double}` | <span data-ttu-id="8f156-1172">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="8f156-1172">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="8f156-1173">Değişmez kültürdeki geçerli `double` bir değerle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1173">Matches a valid `double` value in the invariant culture.</span></span> <span data-ttu-id="8f156-1174">Önceki uyarıya bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1174">See  preceding warning.</span></span>|
| `float` | `{weight:float}` | <span data-ttu-id="8f156-1175">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="8f156-1175">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="8f156-1176">Değişmez kültürdeki geçerli `float` bir değerle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1176">Matches a valid `float` value in the invariant culture.</span></span> <span data-ttu-id="8f156-1177">Önceki uyarıya bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1177">See  preceding warning.</span></span>|
| `guid` | `{id:guid}` | <span data-ttu-id="8f156-1178">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="8f156-1178">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="8f156-1179">Geçerli `Guid` bir değerle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1179">Matches a valid `Guid` value.</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="8f156-1180">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="8f156-1180">`123456789`, `-123456789`</span></span> | <span data-ttu-id="8f156-1181">Geçerli `long` bir değerle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1181">Matches a valid `long` value.</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="8f156-1182">String en az 4 karakter olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1182">String must be at least 4 characters.</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `MyFile` | <span data-ttu-id="8f156-1183">String en fazla 8 karakter vardır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1183">String has maximum of 8 characters.</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="8f156-1184">String tam olarak 12 karakter uzunluğunda olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1184">String must be exactly 12 characters long.</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="8f156-1185">Dize en az 8 olmalıdır ve en fazla 16 karaktervardır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1185">String must be at least 8 and has maximum of 16 characters.</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="8f156-1186">İntesayı değeri en az 18 olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1186">Integer value must be at least 18.</span></span> |
| `max(value)` | `{age:max(120)}` | `91` | <span data-ttu-id="8f156-1187">Tümsek değeri en fazla 120' dir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1187">Integer value maximum of 120.</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="8f156-1188">İntesayı değeri en az 18 ve en fazla 120 olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1188">Integer value must be at least 18 and maximum of 120.</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="8f156-1189">String bir veya daha fazla alfabetik karakterden `a` - `z`oluşmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1189">String must consist of one or more alphabetical characters `a`-`z`.</span></span>  <span data-ttu-id="8f156-1190">Duyarlı.</span><span class="sxs-lookup"><span data-stu-id="8f156-1190">Case-insensitive.</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="8f156-1191">String normal ifadeyle eşleşmelidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1191">String must match the regular expression.</span></span> <span data-ttu-id="8f156-1192">Normal bir ifade tanımlama yla ilgili ipuçlarına bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1192">See tips about defining a regular expression.</span></span> |
| `required` | `{name:required}` | `Rick` | <span data-ttu-id="8f156-1193">URL oluşturma sırasında parametre olmayan bir değerin mevcut olduğunu zorlamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1193">Used to enforce that a non-parameter value is present during URL generation.</span></span> |

<span data-ttu-id="8f156-1194">Birden çok, kolon-delimited kısıtlamalar tek bir parametre uygulanabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1194">Multiple, colon-delimited constraints can be applied to a single parameter.</span></span> <span data-ttu-id="8f156-1195">Örneğin, aşağıdaki kısıtlama bir parametreyi 1 veya daha büyük bir tamsayı değeriyle sınırlandırMaz:</span><span class="sxs-lookup"><span data-stu-id="8f156-1195">For example, the following constraint restricts a parameter to an integer value of 1 or greater:</span></span>

```csharp
[Route("users/{id:int:min(1)}")]
public User GetUserById(int id) { }
```

> [!WARNING]
> <span data-ttu-id="8f156-1196">URL'yi doğrulayan ve CLR türüne dönüştürülen `int` (örneğin `DateTime`veya) her zaman değişmez kültürü kullanan yol kısıtlamaları.</span><span class="sxs-lookup"><span data-stu-id="8f156-1196">Route constraints that verify the URL and are converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture.</span></span> <span data-ttu-id="8f156-1197">Bu kısıtlamalar, URL'nin yerelleştirilebilir olmadığını varsayar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1197">These constraints assume that the URL is non-localizable.</span></span> <span data-ttu-id="8f156-1198">Çerçeve tarafından sağlanan rota kısıtlamaları, rota değerlerinde depolanan değerleri değiştirmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-1198">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="8f156-1199">URL'den ayrıştırılan tüm rota değerleri dizeleri olarak depolanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1199">All route values parsed from the URL are stored as strings.</span></span> <span data-ttu-id="8f156-1200">Örneğin, `float` kısıtlama rota değerini bir yüzer'e dönüştürmeyi dener, ancak dönüştürülen değer yalnızca bir şamandıraya dönüştürülebileceğini doğrulamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1200">For example, the `float` constraint attempts to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="8f156-1201">Normal ifadeler</span><span class="sxs-lookup"><span data-stu-id="8f156-1201">Regular expressions</span></span>

<span data-ttu-id="8f156-1202">ASP.NET Core çerçevesi `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` düzenli ifade oluşturucuekler.</span><span class="sxs-lookup"><span data-stu-id="8f156-1202">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="8f156-1203">Bu <xref:System.Text.RegularExpressions.RegexOptions> üyelerin tanımı için bkz.</span><span class="sxs-lookup"><span data-stu-id="8f156-1203">See <xref:System.Text.RegularExpressions.RegexOptions> for a description of these members.</span></span>

<span data-ttu-id="8f156-1204">Normal ifadeler, yönlendirme ve C# dili tarafından kullanılanlara benzer sınır dışı layıcılar ve belirteçler kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1204">Regular expressions use delimiters and tokens similar to those used by routing and the C# language.</span></span> <span data-ttu-id="8f156-1205">Normal ifade belirteçleri kaçmış olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1205">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="8f156-1206">Yönlendirmede normal `^\d{3}-\d{2}-\d{4}$` ifadeyi kullanmak için:</span><span class="sxs-lookup"><span data-stu-id="8f156-1206">To use the regular expression `^\d{3}-\d{2}-\d{4}$` in routing:</span></span>

* <span data-ttu-id="8f156-1207">İfade, kaynak kodunda `\` çift eğik çizgi karakterleri olarak `\\` dize sağlanan tek ters çizgi karakterleri olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1207">The expression must have the single backslash `\` characters provided in the string as double backslash `\\` characters in the source code.</span></span>
* <span data-ttu-id="8f156-1208">Dize kaçış `\\` karakteri kaçmak `\` için düzenli ifade bize gerekir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1208">The regular expression must us `\\` in order to escape the `\` string escape character.</span></span>
* <span data-ttu-id="8f156-1209">Normal `\\` [ifade, harfi harfine dize literals](/dotnet/csharp/language-reference/keywords/string)kullanırken gerektirmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-1209">The regular expression doesn't require `\\` when using [verbatim string literals](/dotnet/csharp/language-reference/keywords/string).</span></span>

<span data-ttu-id="8f156-1210">`{`Yönlendirme parametresi delimiter karakterleri kaçmak `}` `[`için `]`, , , , `{{` `}`, `[[` `]]`ifade karakterleri çift , , , .</span><span class="sxs-lookup"><span data-stu-id="8f156-1210">To escape routing parameter delimiter characters `{`, `}`, `[`, `]`, double the characters in the expression `{{`, `}`, `[[`, `]]`.</span></span> <span data-ttu-id="8f156-1211">Aşağıdaki tablo da normal bir ifade yi ve kaçan sürümü gösterir:</span><span class="sxs-lookup"><span data-stu-id="8f156-1211">The following table shows a regular expression and the escaped version:</span></span>

| <span data-ttu-id="8f156-1212">Normal ifade</span><span class="sxs-lookup"><span data-stu-id="8f156-1212">Regular Expression</span></span>    | <span data-ttu-id="8f156-1213">Kaçan Düzenli İfade</span><span class="sxs-lookup"><span data-stu-id="8f156-1213">Escaped Regular Expression</span></span>     |
| --------------------- | ------------------------------ |
| `^\d{3}-\d{2}-\d{4}$` | `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` |
| `^[a-z]{2}$`          | `^[[a-z]]{{2}}$`               |

<span data-ttu-id="8f156-1214">Yönlendirmede kullanılan normal ifadeler genellikle caret `^` karakteriyle başlar ve dizebaşlangıç konumuyla eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1214">Regular expressions used in routing often start with the caret `^` character and match starting position of the string.</span></span> <span data-ttu-id="8f156-1215">İfadeler genellikle dolar işareti `$` karakteri ile sona erer ve dize sonu maç.</span><span class="sxs-lookup"><span data-stu-id="8f156-1215">The expressions often end with the dollar sign `$` character and match end of the string.</span></span> <span data-ttu-id="8f156-1216">Ve `^` `$` karakterler, normal ifadenin tüm rota parametre değeriyle eşleşmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1216">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="8f156-1217">`^` Ve `$` karakterler olmadan, normal ifade genellikle istenmeyen dize içinde herhangi bir alt dize eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1217">Without the `^` and `$` characters, the regular expression match any substring within the string, which is often undesirable.</span></span> <span data-ttu-id="8f156-1218">Aşağıdaki tablo örnekler sağlar ve neden eşleştiklerini veya eşleşmediklerini açıklar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1218">The following table provides examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="8f156-1219">İfadeler</span><span class="sxs-lookup"><span data-stu-id="8f156-1219">Expression</span></span>   | <span data-ttu-id="8f156-1220">Dize</span><span class="sxs-lookup"><span data-stu-id="8f156-1220">String</span></span>    | <span data-ttu-id="8f156-1221">Eşleştirme</span><span class="sxs-lookup"><span data-stu-id="8f156-1221">Match</span></span> | <span data-ttu-id="8f156-1222">Açıklama</span><span class="sxs-lookup"><span data-stu-id="8f156-1222">Comment</span></span>               |
| ------------ | --------- | :---: |  -------------------- |
| `[a-z]{2}`   | <span data-ttu-id="8f156-1223">hello</span><span class="sxs-lookup"><span data-stu-id="8f156-1223">hello</span></span>     | <span data-ttu-id="8f156-1224">Evet</span><span class="sxs-lookup"><span data-stu-id="8f156-1224">Yes</span></span>   | <span data-ttu-id="8f156-1225">Substring eşleşmeleri</span><span class="sxs-lookup"><span data-stu-id="8f156-1225">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="8f156-1226">123abc456</span><span class="sxs-lookup"><span data-stu-id="8f156-1226">123abc456</span></span> | <span data-ttu-id="8f156-1227">Evet</span><span class="sxs-lookup"><span data-stu-id="8f156-1227">Yes</span></span>   | <span data-ttu-id="8f156-1228">Substring eşleşmeleri</span><span class="sxs-lookup"><span data-stu-id="8f156-1228">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="8f156-1229">Mz</span><span class="sxs-lookup"><span data-stu-id="8f156-1229">mz</span></span>        | <span data-ttu-id="8f156-1230">Evet</span><span class="sxs-lookup"><span data-stu-id="8f156-1230">Yes</span></span>   | <span data-ttu-id="8f156-1231">İfadeyle eşleşir</span><span class="sxs-lookup"><span data-stu-id="8f156-1231">Matches expression</span></span>    |
| `[a-z]{2}`   | <span data-ttu-id="8f156-1232">MZ</span><span class="sxs-lookup"><span data-stu-id="8f156-1232">MZ</span></span>        | <span data-ttu-id="8f156-1233">Evet</span><span class="sxs-lookup"><span data-stu-id="8f156-1233">Yes</span></span>   | <span data-ttu-id="8f156-1234">Servis talebine duyarlı değil</span><span class="sxs-lookup"><span data-stu-id="8f156-1234">Not case sensitive</span></span>    |
| `^[a-z]{2}$` | <span data-ttu-id="8f156-1235">hello</span><span class="sxs-lookup"><span data-stu-id="8f156-1235">hello</span></span>     | <span data-ttu-id="8f156-1236">Hayır</span><span class="sxs-lookup"><span data-stu-id="8f156-1236">No</span></span>    | <span data-ttu-id="8f156-1237">`^` Bkz. `$` ve üzeri</span><span class="sxs-lookup"><span data-stu-id="8f156-1237">See `^` and `$` above</span></span> |
| `^[a-z]{2}$` | <span data-ttu-id="8f156-1238">123abc456</span><span class="sxs-lookup"><span data-stu-id="8f156-1238">123abc456</span></span> | <span data-ttu-id="8f156-1239">Hayır</span><span class="sxs-lookup"><span data-stu-id="8f156-1239">No</span></span>    | <span data-ttu-id="8f156-1240">`^` Bkz. `$` ve üzeri</span><span class="sxs-lookup"><span data-stu-id="8f156-1240">See `^` and `$` above</span></span> |

<span data-ttu-id="8f156-1241">Normal ifade sözdizimi hakkında daha fazla bilgi için [bkz.](/dotnet/standard/base-types/regular-expression-language-quick-reference)</span><span class="sxs-lookup"><span data-stu-id="8f156-1241">For more information on regular expression syntax, see [.NET Framework Regular Expressions](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span></span>

<span data-ttu-id="8f156-1242">Bir parametreyi bilinen olası değerler kümesiyle kısıtlamak için normal bir ifade kullanın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1242">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="8f156-1243">Örneğin, `{action:regex(^(list|get|create)$)}` `action` yalnızca rota değeri `list`ile `get`eşleşir . `create`</span><span class="sxs-lookup"><span data-stu-id="8f156-1243">For example, `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="8f156-1244">Kısıtlamalar sözlüğüne aktarılırsa, `^(list|get|create)$` dize eşdeğerdir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1244">If passed into the constraints dictionary, the string `^(list|get|create)$` is equivalent.</span></span> <span data-ttu-id="8f156-1245">Bilinen kısıtlamalardan biriyle eşleşmeyan kısıtlamalar sözlüğünde geçirilen kısıtlamalar (şablon içinde satır içi değil) de normal ifadeler olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1245">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

## <a name="custom-route-constraints"></a><span data-ttu-id="8f156-1246">Özel rota kısıtlamaları</span><span class="sxs-lookup"><span data-stu-id="8f156-1246">Custom route constraints</span></span>

<span data-ttu-id="8f156-1247">Yerleşik rota kısıtlamalarına ek olarak, <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> arabirim uygulanarak özel rota kısıtlamaları oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1247">In addition to the built-in route constraints, custom route constraints can be created by implementing the <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interface.</span></span> <span data-ttu-id="8f156-1248">Arabirim, <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> `Match`kısıtlama memnun ve `true` `false` aksi takdirde döndürür tek bir yöntem içerir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1248">The <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interface contains a single method, `Match`, which returns `true` if the constraint is satisfied and `false` otherwise.</span></span>

<span data-ttu-id="8f156-1249">Özel <xref:Microsoft.AspNetCore.Routing.IRouteConstraint>bir kullanım için, rota kısıtlaması türü uygulamanın hizmet <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> kapsayıcısında uygulamanınkine kaydedilmelidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1249">To use a custom <xref:Microsoft.AspNetCore.Routing.IRouteConstraint>, the route constraint type must be registered with the app's <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> in the app's service container.</span></span> <span data-ttu-id="8f156-1250">A, <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> kısıtlama anahtarlarını bu <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> kısıtlamaları doğrulayan uygulamalara yönlendiren bir sözlüktür.</span><span class="sxs-lookup"><span data-stu-id="8f156-1250">A <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> is a dictionary that maps route constraint keys to <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> implementations that validate those constraints.</span></span> <span data-ttu-id="8f156-1251">Bir uygulama, <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> hizmetlerin bir `Startup.ConfigureServices` parçası olarak [güncellenebilir. Çağrı ekleme](xref:Microsoft.Extensions.DependencyInjection.RoutingServiceCollectionExtensions.AddRouting*) veya <xref:Microsoft.AspNetCore.Routing.RouteOptions> doğrudan . `services.Configure<RouteOptions>`</span><span class="sxs-lookup"><span data-stu-id="8f156-1251">An app's <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> can be updated in `Startup.ConfigureServices` either as part of a [services.AddRouting](xref:Microsoft.Extensions.DependencyInjection.RoutingServiceCollectionExtensions.AddRouting*) call or by configuring <xref:Microsoft.AspNetCore.Routing.RouteOptions> directly with `services.Configure<RouteOptions>`.</span></span> <span data-ttu-id="8f156-1252">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="8f156-1252">For example:</span></span>

```csharp
services.AddRouting(options =>
{
    options.ConstraintMap.Add("customName", typeof(MyCustomConstraint));
});
```

<span data-ttu-id="8f156-1253">Kısıtlama daha sonra, kısıtlama türünü kaydederken belirtilen ad kullanılarak, rotalara olağan şekilde uygulanabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1253">The constraint can then be applied to routes in the usual manner, using the name specified when registering the constraint type.</span></span> <span data-ttu-id="8f156-1254">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="8f156-1254">For example:</span></span>

```csharp
[HttpGet("{id:customName}")]
public ActionResult<string> Get(string id)
```

## <a name="parameter-transformer-reference"></a><span data-ttu-id="8f156-1255">Parametre transformatör referansı</span><span class="sxs-lookup"><span data-stu-id="8f156-1255">Parameter transformer reference</span></span>

<span data-ttu-id="8f156-1256">Parametre transformatörleri:</span><span class="sxs-lookup"><span data-stu-id="8f156-1256">Parameter transformers:</span></span>

* <span data-ttu-id="8f156-1257">Bir <xref:Microsoft.AspNetCore.Routing.Route>bağlantı oluştururken çalıştırın .</span><span class="sxs-lookup"><span data-stu-id="8f156-1257">Execute when generating a link for a <xref:Microsoft.AspNetCore.Routing.Route>.</span></span>
* <span data-ttu-id="8f156-1258">Uygulayın. `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`</span><span class="sxs-lookup"><span data-stu-id="8f156-1258">Implement `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span></span>
* <span data-ttu-id="8f156-1259">'yi kullanarak <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1259">Are configured using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span></span>
* <span data-ttu-id="8f156-1260">Parametrenin rota değerini alın ve yeni bir dize değerine dönüştürün.</span><span class="sxs-lookup"><span data-stu-id="8f156-1260">Take the parameter's route value and transform it to a new string value.</span></span>
* <span data-ttu-id="8f156-1261">Oluşturulan bağlantıda dönüştürülen değeri kullanarak sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1261">Result in using the transformed value in the generated link.</span></span>

<span data-ttu-id="8f156-1262">Örneğin, rota `slugify` deseni `blog\{article:slugify}` özel `Url.Action(new { article = "MyTestArticle" })` bir parametre `blog\my-test-article`transformatörü üretir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1262">For example, a custom `slugify` parameter transformer in route pattern `blog\{article:slugify}` with `Url.Action(new { article = "MyTestArticle" })` generates `blog\my-test-article`.</span></span>

<span data-ttu-id="8f156-1263">Bir rota deseninde bir parametre transformatörü <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> `Startup.ConfigureServices`kullanmak için, ilk olarak şu şekilde yapılandırın:</span><span class="sxs-lookup"><span data-stu-id="8f156-1263">To use a parameter transformer in a route pattern, configure it first using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddRouting(options =>
{
    // Replace the type and the name used to refer to it with your own
    // IOutboundParameterTransformer implementation
    options.ConstraintMap["slugify"] = typeof(SlugifyParameterTransformer);
});
```

<span data-ttu-id="8f156-1264">Parametre transformatörleri, bir uç noktanın çözüldüğü yerde URI'yi dönüştürmek için çerçeve tarafından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1264">Parameter transformers are used by the framework to transform the URI where an endpoint resolves.</span></span> <span data-ttu-id="8f156-1265">Örneğin, Core MVC ASP.NET, `area`bir , , `controller` `action`, ve `page`.</span><span class="sxs-lookup"><span data-stu-id="8f156-1265">For example, ASP.NET Core MVC uses parameter transformers to transform the route value used to match an `area`, `controller`, `action`, and `page`.</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller:slugify=Home}/{action:slugify=Index}/{id?}");
```

<span data-ttu-id="8f156-1266">Önceki rota ile eylem `SubscriptionManagementController.GetAll` URI `/subscription-management/get-all`ile eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1266">With the preceding route, the action `SubscriptionManagementController.GetAll` is matched with the URI `/subscription-management/get-all`.</span></span> <span data-ttu-id="8f156-1267">Parametre transformatörü, bağlantı oluşturmak için kullanılan rota değerlerini değiştirmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-1267">A parameter transformer doesn't change the route values used to generate a link.</span></span> <span data-ttu-id="8f156-1268">Örneğin, `Url.Action("GetAll", "SubscriptionManagement")` `/subscription-management/get-all`çıktılar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1268">For example, `Url.Action("GetAll", "SubscriptionManagement")` outputs `/subscription-management/get-all`.</span></span>

<span data-ttu-id="8f156-1269">ASP.NET Core, oluşturulan rotalara sahip bir parametre transformatörleri kullanmak için API kuralları sağlar:</span><span class="sxs-lookup"><span data-stu-id="8f156-1269">ASP.NET Core provides API conventions for using a parameter transformers with generated routes:</span></span>

* <span data-ttu-id="8f156-1270">ASP.NET Core MVC `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` API kuralına sahiptir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1270">ASP.NET Core MVC has the `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` API convention.</span></span> <span data-ttu-id="8f156-1271">Bu kural, uygulamadaki tüm öznitelik rotalarına belirtilen bir parametre transformatörü uygular.</span><span class="sxs-lookup"><span data-stu-id="8f156-1271">This convention applies a specified parameter transformer to all attribute routes in the app.</span></span> <span data-ttu-id="8f156-1272">Parametre transformatörü, bağlantı yolu belirteçlerini değiştirildikleri gibi dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="8f156-1272">The parameter transformer transforms attribute route tokens as they are replaced.</span></span> <span data-ttu-id="8f156-1273">Daha fazla bilgi için bkz: [Belirteç değiştirmesini özelleştirmek için bir parametre transformatörü kullanın.](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement)</span><span class="sxs-lookup"><span data-stu-id="8f156-1273">For more information, see [Use a parameter transformer to customize token replacement](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span></span>
* <span data-ttu-id="8f156-1274">Razor `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` Pages'in API kuralı vardır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1274">Razor Pages has the `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` API convention.</span></span> <span data-ttu-id="8f156-1275">Bu kural, otomatik olarak keşfedilen tüm Razor Sayfalar için belirtilen bir parametre transformatörü uygular.</span><span class="sxs-lookup"><span data-stu-id="8f156-1275">This convention applies a specified parameter transformer to all automatically discovered Razor Pages.</span></span> <span data-ttu-id="8f156-1276">Parametre transformatörü, Razor Pages yollarının klasör ve dosya adı bölümlerini dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="8f156-1276">The parameter transformer transforms the folder and file name segments of Razor Pages routes.</span></span> <span data-ttu-id="8f156-1277">Daha fazla bilgi için bkz. [Sayfa rotalarını özelleştirmek için bir parametre transformatörü kullanın.](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes)</span><span class="sxs-lookup"><span data-stu-id="8f156-1277">For more information, see [Use a parameter transformer to customize page routes](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span></span>

## <a name="url-generation-reference"></a><span data-ttu-id="8f156-1278">URL oluşturma başvurusu</span><span class="sxs-lookup"><span data-stu-id="8f156-1278">URL generation reference</span></span>

<span data-ttu-id="8f156-1279">Aşağıdaki örnek, rota değerleri sözlüğü verilen bir rotaya bağlantı <xref:Microsoft.AspNetCore.Routing.RouteCollection>nın nasıl oluşturileceğini gösterir ve bir .</span><span class="sxs-lookup"><span data-stu-id="8f156-1279">The following example shows how to generate a link to a route given a dictionary of route values and a <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span></span>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

<span data-ttu-id="8f156-1280">Önceki <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> örneğin sonunda `/package/create/123`oluşturulan.</span><span class="sxs-lookup"><span data-stu-id="8f156-1280">The <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> generated at the end of the preceding sample is `/package/create/123`.</span></span> <span data-ttu-id="8f156-1281">Sözlük, "Paket Rotasını `operation` Takip Et" şablonunun ve `id` rota değerlerini sağlar. `package/{operation}/{id}`</span><span class="sxs-lookup"><span data-stu-id="8f156-1281">The dictionary supplies the `operation` and `id` route values of the "Track Package Route" template, `package/{operation}/{id}`.</span></span> <span data-ttu-id="8f156-1282">Ayrıntılar için, Yönlendirme Aracı [Kullan](#use-routing-middleware) bölümündeki örnek kodu veya [örnek uygulamaya](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples)bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1282">For details, see the sample code in the [Use Routing Middleware](#use-routing-middleware) section or the [sample app](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span></span>

<span data-ttu-id="8f156-1283">Oluşturucuya ikinci parametre ortam değerleri topluluğudur. *ambient values* <xref:Microsoft.AspNetCore.Routing.VirtualPathContext></span><span class="sxs-lookup"><span data-stu-id="8f156-1283">The second parameter to the <xref:Microsoft.AspNetCore.Routing.VirtualPathContext> constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="8f156-1284">Ortam değerleri, geliştiricinin istek bağlamında belirtmesi gereken değer sayısını sınırladıkları için kullanımı uygundur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1284">Ambient values are convenient to use because they limit the number of values a developer must specify within a request context.</span></span> <span data-ttu-id="8f156-1285">Geçerli isteğin geçerli rota değerleri bağlantı oluşturma için ortam değerleri olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1285">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="8f156-1286">Core MVC `About` uygulamasının ASP.NET `HomeController`eyleminde, ortam değerinin `Index` &mdash; `Home` kullanıldığı eyleme bağlantı vermek için denetleyici rota değerini belirtmeniz gerekmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-1286">In an ASP.NET Core MVC app's `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action&mdash;the ambient value of `Home` is used.</span></span>

<span data-ttu-id="8f156-1287">Parametreyle eşleşmeyan ortam değerleri yoksayılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1287">Ambient values that don't match a parameter are ignored.</span></span> <span data-ttu-id="8f156-1288">Ortam değerleri, açıkça sağlanan bir değer ortam değerini geçersiz kıldığında da yoksayılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1288">Ambient values are also ignored when an explicitly provided value overrides the ambient value.</span></span> <span data-ttu-id="8f156-1289">Eşleştirme URL'de soldan sağa gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1289">Matching occurs from left to right in the URL.</span></span>

<span data-ttu-id="8f156-1290">Açıkça sağlanan ancak rotanın bir kesimiyle eşleşmeyan değerler sorgu dizesine eklenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1290">Values explicitly provided but that don't match a segment of the route are added to the query string.</span></span> <span data-ttu-id="8f156-1291">Aşağıdaki tablo, rota şablonu `{controller}/{action}/{id?}`kullanırken sonucu gösterir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1291">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="8f156-1292">Ortam Değerleri</span><span class="sxs-lookup"><span data-stu-id="8f156-1292">Ambient Values</span></span>                     | <span data-ttu-id="8f156-1293">Açık Değerler</span><span class="sxs-lookup"><span data-stu-id="8f156-1293">Explicit Values</span></span>                        | <span data-ttu-id="8f156-1294">Sonuç</span><span class="sxs-lookup"><span data-stu-id="8f156-1294">Result</span></span>                  |
| ---------------------------------- | -------------------------------------- | ----------------------- |
| <span data-ttu-id="8f156-1295">denetleyici = "Ana Sayfa"</span><span class="sxs-lookup"><span data-stu-id="8f156-1295">controller = "Home"</span></span>                | <span data-ttu-id="8f156-1296">action = "Hakkında"</span><span class="sxs-lookup"><span data-stu-id="8f156-1296">action = "About"</span></span>                       | `/Home/About`           |
| <span data-ttu-id="8f156-1297">denetleyici = "Ana Sayfa"</span><span class="sxs-lookup"><span data-stu-id="8f156-1297">controller = "Home"</span></span>                | <span data-ttu-id="8f156-1298">controller = "Order", action = "About"</span><span class="sxs-lookup"><span data-stu-id="8f156-1298">controller = "Order", action = "About"</span></span> | `/Order/About`          |
| <span data-ttu-id="8f156-1299">denetleyici = "Ev", renk = "Kırmızı"</span><span class="sxs-lookup"><span data-stu-id="8f156-1299">controller = "Home", color = "Red"</span></span> | <span data-ttu-id="8f156-1300">action = "Hakkında"</span><span class="sxs-lookup"><span data-stu-id="8f156-1300">action = "About"</span></span>                       | `/Home/About`           |
| <span data-ttu-id="8f156-1301">denetleyici = "Ana Sayfa"</span><span class="sxs-lookup"><span data-stu-id="8f156-1301">controller = "Home"</span></span>                | <span data-ttu-id="8f156-1302">action = "About", color = "Red"</span><span class="sxs-lookup"><span data-stu-id="8f156-1302">action = "About", color = "Red"</span></span>        | `/Home/About?color=Red` |

<span data-ttu-id="8f156-1303">Bir rotanın bir parametreye karşılık gelen varsayılan değeri varsa ve bu değer açıkça sağlanmışsa, varsayılan değerle eşleşmesi gerekir:</span><span class="sxs-lookup"><span data-stu-id="8f156-1303">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
    defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="8f156-1304">Bağlantı oluşturma yalnızca eşleşen değerler sağlandığında ve `controller` `action` sağlandığında bu yol için bir bağlantı oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1304">Link generation only generates a link for this route when the matching values for `controller` and `action` are provided.</span></span>

## <a name="complex-segments"></a><span data-ttu-id="8f156-1305">Karmaşık segmentler</span><span class="sxs-lookup"><span data-stu-id="8f156-1305">Complex segments</span></span>

<span data-ttu-id="8f156-1306">Karmaşık segmentler (örneğin), `[Route("/x{token}y")]`açgözlü olmayan bir şekilde sağdan sola doğru edebi eşleşerek işlenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1306">Complex segments (for example `[Route("/x{token}y")]`) are processed by matching up literals from right to left in a non-greedy way.</span></span> <span data-ttu-id="8f156-1307">Karmaşık kesimlerin nasıl eşleştinle ilgili ayrıntılı bir açıklama için [bu koda](https://github.com/dotnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1307">See [this code](https://github.com/dotnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) for a detailed explanation of how complex segments are matched.</span></span> <span data-ttu-id="8f156-1308">[Kod örneği](https://github.com/dotnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) ASP.NET Core tarafından kullanılmaz, ancak karmaşık kesimlerin iyi bir açıklamasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1308">The [code sample](https://github.com/dotnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) is not used by ASP.NET Core, but it provides a good explanation of complex segments.</span></span>
<!-- While that code is no longer used by ASP.NET Core for complex segment matching, it provides a good match to the current algorithm. The [current code](https://github.com/dotnet/AspNetCore/blob/91514c9af7e0f4c44029b51f05a01c6fe4c96e4c/src/Http/Routing/src/Matching/DfaMatcherBuilder.cs#L227-L244) is too abstracted from matching to be useful for understanding complex segment matching.
-->

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="8f156-1309">Yönlendirme, işleyicileri yönlendirmek ve gelen istekleri göndermek için istek URI'lerinin eşlemelerinden sorumludur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1309">Routing is responsible for mapping request URIs to route handlers and dispatching an incoming requests.</span></span> <span data-ttu-id="8f156-1310">Rotalar uygulamada tanımlanır ve uygulama başladığında yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1310">Routes are defined in the app and configured when the app starts.</span></span> <span data-ttu-id="8f156-1311">Bir rota isteğe bağlı olarak istekte bulunan URL'den değerleri ayıklayabilir ve bu değerler daha sonra istek işleme için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1311">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="8f156-1312">Uygulamadan yapılandırılmış rotaları kullanarak yönlendirme, işleyicileri yönlendirmek için eşlenen URL'ler oluşturabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1312">Using configured routes from the app, routing is able to generate URLs that map to route handlers.</span></span>

<span data-ttu-id="8f156-1313">Core 2.1ASP.NETdeki en son yönlendirme senaryolarını kullanmak için Aşağıdaki lerde MVC `Startup.ConfigureServices`hizmetleri kaydına uyumluluk [sürümünü](xref:mvc/compatibility-version) belirtin:</span><span class="sxs-lookup"><span data-stu-id="8f156-1313">To use the latest routing scenarios in ASP.NET Core 2.1, specify the [compatibility version](xref:mvc/compatibility-version) to the MVC services registration in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddMvc()
    .SetCompatibilityVersion(CompatibilityVersion.Version_2_1);
```

> [!IMPORTANT]
> <span data-ttu-id="8f156-1314">Bu belge, düşük düzeyli ASP.NET Çekirdek yönlendirmeyi kapsar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1314">This document covers low-level ASP.NET Core routing.</span></span> <span data-ttu-id="8f156-1315">ASP.NET Core MVC yönlendirmesi hakkında <xref:mvc/controllers/routing>bilgi için bkz.</span><span class="sxs-lookup"><span data-stu-id="8f156-1315">For information on ASP.NET Core MVC routing, see <xref:mvc/controllers/routing>.</span></span> <span data-ttu-id="8f156-1316">Razor Pages'deki yönlendirme kuralları hakkında daha <xref:razor-pages/razor-pages-conventions>fazla bilgi için bkz.</span><span class="sxs-lookup"><span data-stu-id="8f156-1316">For information on routing conventions in Razor Pages, see <xref:razor-pages/razor-pages-conventions>.</span></span>

<span data-ttu-id="8f156-1317">[Örnek kodu görüntüleme veya indirme](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples) ( nasıl[indirilir](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="8f156-1317">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="8f156-1318">Yönlendirme temelleri</span><span class="sxs-lookup"><span data-stu-id="8f156-1318">Routing basics</span></span>

<span data-ttu-id="8f156-1319">Çoğu uygulama, URL'lerin okunabilir ve anlamlı olması için temel ve açıklayıcı bir yönlendirme şeması seçmelidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1319">Most apps should choose a basic and descriptive routing scheme so that URLs are readable and meaningful.</span></span> <span data-ttu-id="8f156-1320">Varsayılan geleneksel `{controller=Home}/{action=Index}/{id?}`rota:</span><span class="sxs-lookup"><span data-stu-id="8f156-1320">The default conventional route `{controller=Home}/{action=Index}/{id?}`:</span></span>

* <span data-ttu-id="8f156-1321">Temel ve açıklayıcı yönlendirme düzenini destekler.</span><span class="sxs-lookup"><span data-stu-id="8f156-1321">Supports a basic and descriptive routing scheme.</span></span>
* <span data-ttu-id="8f156-1322">UI tabanlı uygulamalar için yararlı bir başlangıç noktasıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1322">Is a useful starting point for UI-based apps.</span></span>

<span data-ttu-id="8f156-1323">Geliştiriciler genellikle özel durumlarda bir uygulamanın yüksek trafik alanlarına ek rotalar ekler (örneğin, blog ve e-ticaret bitiş noktaları) [öznitelik yönlendirme](xref:mvc/controllers/routing#attribute-routing) veya özel geleneksel rotalar kullanarak.</span><span class="sxs-lookup"><span data-stu-id="8f156-1323">Developers commonly add additional terse routes to high-traffic areas of an app in specialized situations (for example, blog and ecommerce endpoints) using [attribute routing](xref:mvc/controllers/routing#attribute-routing) or dedicated conventional routes.</span></span>

<span data-ttu-id="8f156-1324">Web API'leri, uygulamanın işlevselliğini işlemlerin HTTP fiilleri tarafından temsil edildiği bir kaynak kümesi olarak modellemek için öznitelik yönlendirmesini kullanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1324">Web APIs should use attribute routing to model the app's functionality as a set of resources where operations are represented by HTTP verbs.</span></span> <span data-ttu-id="8f156-1325">Bu, aynı mantıksal kaynaktaki birçok işlemin (örneğin GET, POST) aynı URL'yi kullanacağı anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1325">This means that many operations (for example, GET, POST) on the same logical resource will use the same URL.</span></span> <span data-ttu-id="8f156-1326">Öznitelik yönlendirme, bir API'nin genel uç nokta düzenini dikkatle tasarlamak için gereken bir denetim düzeyi sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1326">Attribute routing provides a level of control that's needed to carefully design an API's public endpoint layout.</span></span>

<span data-ttu-id="8f156-1327">Razor Pages uygulamaları, bir uygulamanın *Sayfalar* klasöründe adlandırılmış kaynaklara hizmet etmek için varsayılan geleneksel yönlendirmeyi kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1327">Razor Pages apps use default conventional routing to serve named resources in the *Pages* folder of an app.</span></span> <span data-ttu-id="8f156-1328">Razor Pages yönlendirme davranışını özelleştirmenize olanak tanıyan ek kurallar mevcuttur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1328">Additional conventions are available that allow you to customize Razor Pages routing behavior.</span></span> <span data-ttu-id="8f156-1329">Daha fazla bilgi için <xref:razor-pages/index> ve <xref:razor-pages/razor-pages-conventions> bölümlerine bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1329">For more information, see <xref:razor-pages/index> and <xref:razor-pages/razor-pages-conventions>.</span></span>

<span data-ttu-id="8f156-1330">URL oluşturma desteği, uygulamanın sıkı kodlama URL'leri olmadan geliştirilen uygulamanın birbirine bağlanmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1330">URL generation support allows the app to be developed without hard-coding URLs to link the app together.</span></span> <span data-ttu-id="8f156-1331">Bu destek, temel bir yönlendirme yapılandırmasıyla başlayıp uygulamanın kaynak düzeni belirlendikten sonra rotaların değiştirilmesine olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1331">This support allows for starting with a basic routing configuration and modifying the routes after the app's resource layout is determined.</span></span>

<span data-ttu-id="8f156-1332">Yönlendirme, şu yollarla <xref:Microsoft.AspNetCore.Routing.IRouter> ilgili yollar kullanır:</span><span class="sxs-lookup"><span data-stu-id="8f156-1332">Routing uses routes implementations of <xref:Microsoft.AspNetCore.Routing.IRouter> to:</span></span>

* <span data-ttu-id="8f156-1333">*Rota işleyicilerine*gelen istekleri eşle.</span><span class="sxs-lookup"><span data-stu-id="8f156-1333">Map incoming requests to *route handlers*.</span></span>
* <span data-ttu-id="8f156-1334">Yanıtlarda kullanılan URL'leri oluşturun.</span><span class="sxs-lookup"><span data-stu-id="8f156-1334">Generate the URLs used in responses.</span></span>

<span data-ttu-id="8f156-1335">Varsayılan olarak, bir uygulamanın tek bir rota koleksiyonu vardır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1335">By default, an app has a single collection of routes.</span></span> <span data-ttu-id="8f156-1336">Bir istek geldiğinde, koleksiyondaki yollar koleksiyonda var oldukları sırayla işlenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1336">When a request arrives, the routes in the collection are processed in the order that they exist in the collection.</span></span> <span data-ttu-id="8f156-1337">Çerçeve, koleksiyondaki her rotadaki <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> yöntemi çağırarak gelen istek URL'sini koleksiyondaki bir rotayla eşleştirmeyi dener.</span><span class="sxs-lookup"><span data-stu-id="8f156-1337">The framework attempts to match an incoming request URL to a route in the collection by calling the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each route in the collection.</span></span> <span data-ttu-id="8f156-1338">Yanıt, rota bilgilerine dayalı URL'ler (örneğin, yönlendirme veya bağlantılar için) oluşturmak için yönlendirmeyi kullanabilir ve böylece sabit kodlanmış URL'lerden kaçınarak korunabilirliğe yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1338">A response can use routing to generate URLs (for example, for redirection or links) based on route information and thus avoid hard-coded URLs, which helps maintainability.</span></span>

<span data-ttu-id="8f156-1339">Yönlendirme sistemi aşağıdaki özelliklere sahiptir:</span><span class="sxs-lookup"><span data-stu-id="8f156-1339">The routing system has the following characteristics:</span></span>

* <span data-ttu-id="8f156-1340">Rota şablonu sözdizimi, tokenize rota parametreleri ile yolları tanımlamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1340">Route template syntax is used to define routes with tokenized route parameters.</span></span>
* <span data-ttu-id="8f156-1341">Geleneksel stil ve öznitelik tarzı uç nokta yapılandırması izin verilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1341">Conventional-style and attribute-style endpoint configuration is permitted.</span></span>
* <span data-ttu-id="8f156-1342"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint>URL parametrenin belirli bir bitiş noktası kısıtlaması için geçerli bir değer bulunup içermediğini belirlemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1342"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint> is used to determine whether a URL parameter contains a valid value for a given endpoint constraint.</span></span>
* <span data-ttu-id="8f156-1343">MVC/Razor Pages gibi uygulama modelleri, yönlendirme senaryolarının öngörülebilir bir uygulamasına sahip tüm rotalarını kaydeder.</span><span class="sxs-lookup"><span data-stu-id="8f156-1343">App models, such as MVC/Razor Pages, register all of their routes, which have a predictable implementation of routing scenarios.</span></span>
* <span data-ttu-id="8f156-1344">Yanıt, rota bilgilerine dayalı URL'ler (örneğin, yönlendirme veya bağlantılar için) oluşturmak için yönlendirmeyi kullanabilir ve böylece sabit kodlanmış URL'lerden kaçınarak korunabilirliğe yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1344">A response can use routing to generate URLs (for example, for redirection or links) based on route information and thus avoid hard-coded URLs, which helps maintainability.</span></span>
* <span data-ttu-id="8f156-1345">URL oluşturma, rasgele genişletilebilirliği destekleyen yolları temel alınmaktadır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1345">URL generation is based on routes, which support arbitrary extensibility.</span></span> <span data-ttu-id="8f156-1346"><xref:Microsoft.AspNetCore.Mvc.IUrlHelper>URL'ler oluşturmak için yöntemler sunar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1346"><xref:Microsoft.AspNetCore.Mvc.IUrlHelper> offers methods to build URLs.</span></span>
<!-- fix [middleware](xref:fundamentals/middleware/index) -->
<span data-ttu-id="8f156-1347">Yönlendirme, sınıf tarafından [ara yazılım](xref:fundamentals/middleware/index) ardışık hattına <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> bağlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1347">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> class.</span></span> <span data-ttu-id="8f156-1348">[ASP.NET Core MVC,](xref:mvc/overview) yapılandırmasının bir parçası olarak ara yazılım boru hattına yönlendirme ekler ve MVC ve Razor Pages uygulamalarında yönlendirmeyi işler.</span><span class="sxs-lookup"><span data-stu-id="8f156-1348">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration and handles routing in MVC and Razor Pages apps.</span></span> <span data-ttu-id="8f156-1349">Yönlendirmeyi bağımsız bir bileşen olarak nasıl kullanacağınızı öğrenmek için Yönlendirme [Ara ware'i Kullan](#use-routing-middleware) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1349">To learn how to use routing as a standalone component, see the [Use Routing Middleware](#use-routing-middleware) section.</span></span>

### <a name="url-matching"></a><span data-ttu-id="8f156-1350">URL eşleştirme</span><span class="sxs-lookup"><span data-stu-id="8f156-1350">URL matching</span></span>

<span data-ttu-id="8f156-1351">URL eşleştirme, yönlendirmenin bir *işleyiciye*gelen isteği gönderme işlemidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1351">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="8f156-1352">Bu işlem URL yolundaki verilere dayanır, ancak istekteki verileri dikkate almak için genişletilebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1352">This process is based on data in the URL path but can be extended to consider any data in the request.</span></span> <span data-ttu-id="8f156-1353">İstekleri ayrı işleyicilere gönderme özelliği, bir uygulamanın boyutunu ve karmaşıklığını ölçeklemenin anahtarıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1353">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an app.</span></span>

<span data-ttu-id="8f156-1354">Gelen istekler, <xref:Microsoft.AspNetCore.Builder.RouterMiddleware>her rotadaki <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> yöntemi sırayla çağıran , girin.</span><span class="sxs-lookup"><span data-stu-id="8f156-1354">Incoming requests enter the <xref:Microsoft.AspNetCore.Builder.RouterMiddleware>, which calls the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each route in sequence.</span></span> <span data-ttu-id="8f156-1355">Örnek, <xref:Microsoft.AspNetCore.Routing.IRouter> [RouteContext.Handler'ı](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) null <xref:Microsoft.AspNetCore.Http.RequestDelegate>olmayan bir ' a ayarlayarak isteğin *işlenip işlenmeyeceğini* seçer.</span><span class="sxs-lookup"><span data-stu-id="8f156-1355">The <xref:Microsoft.AspNetCore.Routing.IRouter> instance chooses whether to *handle* the request by setting the [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) to a non-null <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span></span> <span data-ttu-id="8f156-1356">Bir rota istek için bir işleyici ayarlarsa, rota işleme durur ve işleyici isteği işlemek için çağrılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1356">If a route sets a handler for the request, route processing stops, and the handler is invoked to process the request.</span></span> <span data-ttu-id="8f156-1357">İsteği işlemek için rota işleyicisi bulunmazsa, ara yazılım isteği istek ardışık taşındaki bir sonraki ara yazılıma iletir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1357">If no route handler is found to process the request, the middleware hands the request off to the next middleware in the request pipeline.</span></span>

<span data-ttu-id="8f156-1358">Birincil giriş, <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> geçerli istekle ilişkili [RouteContext.HttpContext'tır.](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*)</span><span class="sxs-lookup"><span data-stu-id="8f156-1358">The primary input to <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> is the [RouteContext.HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) associated with the current request.</span></span> <span data-ttu-id="8f156-1359">[RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler) ve [RouteContext.RouteData,](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) bir rota eşleştikten sonra ayarlanan çıktılardır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1359">The [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler) and [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) are outputs set after a route is matched.</span></span>

<span data-ttu-id="8f156-1360">Çağıran <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> bir eşleşme, [RouteContext.RouteData'nın](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) özelliklerini şimdiye kadar gerçekleştirilen istek işlemedayalı uygun değerlere ayarlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1360">A match that calls <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> also sets the properties of the [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) to appropriate values based on the request processing performed thus far.</span></span>

<span data-ttu-id="8f156-1361">[RouteData.Values,](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) rotadan üretilen *rota değerlerinin* sözlüğüdür.</span><span class="sxs-lookup"><span data-stu-id="8f156-1361">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="8f156-1362">Bu değerler genellikle URL'yi belirterek belirlenir ve kullanıcı girişini kabul etmek veya uygulama içinde daha fazla gönderme kararı almak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1362">These values are usually determined by tokenizing the URL and can be used to accept user input or to make further dispatching decisions inside the app.</span></span>

<span data-ttu-id="8f156-1363">[RouteData.DataTokens,](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) eşleşen rotayla ilgili ek verilerin yer alan bir özellik torbasıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1363">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="8f156-1364"><xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*>uygulamanın hangi rotayla eşleştiğine göre karar verebilmeleri için durum verilerinin her rotayla ilişkiye alinmasını desteklemek için sayılmısa.</span><span class="sxs-lookup"><span data-stu-id="8f156-1364"><xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*> are provided to support associating state data with each route so that the app can make decisions based on which route matched.</span></span> <span data-ttu-id="8f156-1365">Bu değerler geliştirici tarafından tanımlanır ve yönlendirme davranışını hiçbir şekilde **etkilemez.**</span><span class="sxs-lookup"><span data-stu-id="8f156-1365">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="8f156-1366">Ayrıca, [RouteData.DataTokens'de](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) saklanan değerler, string'lere dönüştürülebilen [RouteData.Values'in](xref:Microsoft.AspNetCore.Routing.RouteData.Values)aksine her türden olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1366">Additionally, values stashed in [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) can be of any type, in contrast to [RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values), which must be convertible to and from strings.</span></span>

<span data-ttu-id="8f156-1367">[RouteData.Routers,](xref:Microsoft.AspNetCore.Routing.RouteData.Routers) isteğin başarıyla eşleşmesinde yer alan yolların listesidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1367">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers) is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="8f156-1368">Rotalar birbirinin içine iç içe olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1368">Routes can be nested inside of one another.</span></span> <span data-ttu-id="8f156-1369">Özellik, <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> eşleşmeyle sonuçlanan mantıksal rota lar ağacından geçen yolu yansıtır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1369">The <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="8f156-1370">Genellikle, ilk öğe <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> rota koleksiyonudur ve URL oluşturma için kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1370">Generally, the first item in <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> is the route collection and should be used for URL generation.</span></span> <span data-ttu-id="8f156-1371">Son öğe <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> eşleşen rota işleyicisi.</span><span class="sxs-lookup"><span data-stu-id="8f156-1371">The last item in <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> is the route handler that matched.</span></span>

<a name="lg"></a>

### <a name="url-generation"></a><span data-ttu-id="8f156-1372">URL oluşturma</span><span class="sxs-lookup"><span data-stu-id="8f156-1372">URL generation</span></span>

<span data-ttu-id="8f156-1373">URL oluşturma, yönlendirmenin bir rota değerleri kümesine dayalı bir URL yolu oluşturabileceği işlemdir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1373">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="8f156-1374">Bu, rota işleyicileri ile bunlara erişen URL'ler arasında mantıksal bir ayrım yapılmasına olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1374">This allows for a logical separation between route handlers and the URLs that access them.</span></span>

<span data-ttu-id="8f156-1375">URL oluşturma benzer bir yinelemeli işlem izler, ancak kullanıcı veya <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> çerçeve kodu ile rota toplama yöntemine çağıran başlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1375">URL generation follows a similar iterative process, but it starts with user or framework code calling into the <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> method of the route collection.</span></span> <span data-ttu-id="8f156-1376">Null olmayan <xref:Microsoft.AspNetCore.Routing.VirtualPathData> <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> döndürülene kadar her *rotanın* sırayla çağrılan bir yöntemi vardır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1376">Each *route* has its <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> method called in sequence until a non-null <xref:Microsoft.AspNetCore.Routing.VirtualPathData> is returned.</span></span>

<span data-ttu-id="8f156-1377">Başlıca girdiler <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> şunlardır:</span><span class="sxs-lookup"><span data-stu-id="8f156-1377">The primary inputs to <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> are:</span></span>

* [<span data-ttu-id="8f156-1378">VirtualPathContext.httpContext</span><span class="sxs-lookup"><span data-stu-id="8f156-1378">VirtualPathContext.HttpContext</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext)
* [<span data-ttu-id="8f156-1379">VirtualPathContext.Values</span><span class="sxs-lookup"><span data-stu-id="8f156-1379">VirtualPathContext.Values</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values)
* [<span data-ttu-id="8f156-1380">VirtualPathContext.AmbientValues</span><span class="sxs-lookup"><span data-stu-id="8f156-1380">VirtualPathContext.AmbientValues</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues)

<span data-ttu-id="8f156-1381">Rotalar öncelikle tarafından <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values> sağlanan <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues> rota değerlerini kullanır ve bir URL oluşturmanın mümkün olup olmadığına ve hangi değerlerin dahil edeceğine karar verir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1381">Routes primarily use the route values provided by <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values> and <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues> to decide whether it's possible to generate a URL and what values to include.</span></span> <span data-ttu-id="8f156-1382">Geçerli <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues> istek eşleştirilebilir şekilde üretilen rota değerleri kümesidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1382">The <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues> are the set of route values that were produced from matching the current request.</span></span> <span data-ttu-id="8f156-1383">Buna karşılık, <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values> geçerli işlem için istenen URL'nin nasıl üretilmeye cerenolduğunu belirten rota değerleridir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1383">In contrast, <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values> are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="8f156-1384">Bir <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext> rotanın geçerli bağlamla ilişkili hizmetler veya ek veriler alması durumunda sağlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1384">The <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext> is provided in case a route should obtain services or additional data associated with the current context.</span></span>

> [!TIP]
> <span data-ttu-id="8f156-1385">[VirtualPathContext.Values'i](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*)için geçersiz kılmalar kümesi olarak düşünün.</span><span class="sxs-lookup"><span data-stu-id="8f156-1385">Think of [VirtualPathContext.Values](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) as a set of overrides for the [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span></span> <span data-ttu-id="8f156-1386">URL oluşturma, aynı rota veya rota değerlerini kullanan bağlantılar için URL'ler oluşturmak için geçerli istekteki rota değerlerini yeniden kullanmaya çalışır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1386">URL generation attempts to reuse route values from the current request to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="8f156-1387"><xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> Çıkış bir <xref:Microsoft.AspNetCore.Routing.VirtualPathData>.</span><span class="sxs-lookup"><span data-stu-id="8f156-1387">The output of <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> is a <xref:Microsoft.AspNetCore.Routing.VirtualPathData>.</span></span> <span data-ttu-id="8f156-1388"><xref:Microsoft.AspNetCore.Routing.VirtualPathData>bir <xref:Microsoft.AspNetCore.Routing.RouteData>paraleldir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1388"><xref:Microsoft.AspNetCore.Routing.VirtualPathData> is a parallel of <xref:Microsoft.AspNetCore.Routing.RouteData>.</span></span> <span data-ttu-id="8f156-1389"><xref:Microsoft.AspNetCore.Routing.VirtualPathData>çıkış <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> URL'si ve rota tarafından ayarlanılması gereken bazı ek özellikleri içerir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1389"><xref:Microsoft.AspNetCore.Routing.VirtualPathData> contains the <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> for the output URL and some additional properties that should be set by the route.</span></span>

<span data-ttu-id="8f156-1390">[VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) özelliği, rota tarafından üretilen *sanal yolu* içerir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1390">The [VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="8f156-1391">İhtiyaçlarınıza bağlı olarak, yolu daha fazla işlemeniz gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1391">Depending on your needs, you may need to process the path further.</span></span> <span data-ttu-id="8f156-1392">Oluşturulan URL'yi HTML'de işlemek istiyorsanız, uygulamanın temel yolunu hazırlayın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1392">If you want to render the generated URL in HTML, prepend the base path of the app.</span></span>

<span data-ttu-id="8f156-1393">[VirtualPathData.Router,](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) URL'yi başarıyla oluşturan rotaya bir başvurudur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1393">The [VirtualPathData.Router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="8f156-1394">[VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) özellikleri, URL'yi oluşturan rotayla ilgili ek verilerin sözlüğüdür.</span><span class="sxs-lookup"><span data-stu-id="8f156-1394">The [VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="8f156-1395">Bu [RouteData.DataTokens paraleldir.](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*)</span><span class="sxs-lookup"><span data-stu-id="8f156-1395">This is the parallel of [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span></span>

### <a name="create-routes"></a><span data-ttu-id="8f156-1396">Yolları oluşturma</span><span class="sxs-lookup"><span data-stu-id="8f156-1396">Create routes</span></span>

<span data-ttu-id="8f156-1397"><xref:Microsoft.AspNetCore.Routing.Route> Yönlendirme, sınıfı standart uygulama olarak <xref:Microsoft.AspNetCore.Routing.IRouter>sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1397">Routing provides the <xref:Microsoft.AspNetCore.Routing.Route> class as the standard implementation of <xref:Microsoft.AspNetCore.Routing.IRouter>.</span></span> <span data-ttu-id="8f156-1398"><xref:Microsoft.AspNetCore.Routing.Route>çağrıldığında <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> URL yolu ile eşleşecek desenleri tanımlamak için *rota şablonu* sözdizimini kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1398"><xref:Microsoft.AspNetCore.Routing.Route> uses the *route template* syntax to define patterns to match against the URL path when <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> is called.</span></span> <span data-ttu-id="8f156-1399"><xref:Microsoft.AspNetCore.Routing.Route>çağrıldığında <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> bir URL oluşturmak için aynı rota şablonu kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1399"><xref:Microsoft.AspNetCore.Routing.Route> uses the same route template to generate a URL when <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> is called.</span></span>

<span data-ttu-id="8f156-1400">Çoğu uygulama arayarak <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> veya üzerinde <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>tanımlanan benzer uzantı yöntemlerinden birini arayarak rotalar oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1400">Most apps create routes by calling <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> or one of the similar extension methods defined on <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span></span> <span data-ttu-id="8f156-1401">Uzantı <xref:Microsoft.AspNetCore.Routing.IRouteBuilder> yöntemlerinden herhangi biri <xref:Microsoft.AspNetCore.Routing.Route> bir örnek oluşturur ve rota koleksiyonuna ekler.</span><span class="sxs-lookup"><span data-stu-id="8f156-1401">Any of the <xref:Microsoft.AspNetCore.Routing.IRouteBuilder> extension methods create an instance of <xref:Microsoft.AspNetCore.Routing.Route> and add it to the route collection.</span></span>

<span data-ttu-id="8f156-1402"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*>rota işleyicisi parametrekabul etmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-1402"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> doesn't accept a route handler parameter.</span></span> <span data-ttu-id="8f156-1403"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*>yalnızca <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="8f156-1403"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> only adds routes that are handled by the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span> <span data-ttu-id="8f156-1404">Varsayılan işleyici bir `IRouter`' dir ve işleyici isteği işlemeyebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1404">The default handler is an `IRouter`, and the handler might not handle the request.</span></span> <span data-ttu-id="8f156-1405">Örneğin, ASP.NET Core MVC genellikle yalnızca kullanılabilir bir denetleyici ve eylem eşleşen istekleri işleyen varsayılan işleyici olarak yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1405">For example, ASP.NET Core MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="8f156-1406">MVC'de yönlendirme hakkında daha fazla <xref:mvc/controllers/routing>bilgi edinmek için bkz.</span><span class="sxs-lookup"><span data-stu-id="8f156-1406">To learn more about routing in MVC, see <xref:mvc/controllers/routing>.</span></span>

<span data-ttu-id="8f156-1407">Aşağıdaki kod örneği, tipik <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> bir ASP.NET Core MVC rota tanımı tarafından kullanılan bir çağrı örneğidir:</span><span class="sxs-lookup"><span data-stu-id="8f156-1407">The following code example is an example of a <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> call used by a typical ASP.NET Core MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="8f156-1408">Bu şablon bir URL yolu yla eşleşir ve rota değerlerini ayıklar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1408">This template matches a URL path and extracts the route values.</span></span> <span data-ttu-id="8f156-1409">Örneğin, yol `/Products/Details/17` aşağıdaki rota değerlerini oluşturur: `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="8f156-1409">For example, the path `/Products/Details/17` generates the following route values: `{ controller = Products, action = Details, id = 17 }`.</span></span>

<span data-ttu-id="8f156-1410">Rota değerleri, URL yolunu n için bölümlere bölerek ve her kesimin rota şablonundaki *rota parametre* adı ile eşleştirilerek belirlenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1410">Route values are determined by splitting the URL path into segments and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="8f156-1411">Rota parametreleri adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1411">Route parameters are named.</span></span> <span data-ttu-id="8f156-1412">Parametre adı ayraçlara `{ ... }`ekleyerek tanımlanan parametreler.</span><span class="sxs-lookup"><span data-stu-id="8f156-1412">The parameters defined by enclosing the parameter name in braces `{ ... }`.</span></span>

<span data-ttu-id="8f156-1413">Önceki şablon da URL yolu `/` eşleşebilir `{ controller = Home, action = Index }`ve değerleri üretmek.</span><span class="sxs-lookup"><span data-stu-id="8f156-1413">The preceding template could also match the URL path `/` and produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="8f156-1414">Bu, ve `{controller}` `{action}` rota parametrelerinin varsayılan `id` değerlere sahip olması ve rota parametresi isteğe bağlı olması nedeniyle oluşur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1414">This occurs because the `{controller}` and `{action}` route parameters have default values and the `id` route parameter is optional.</span></span> <span data-ttu-id="8f156-1415">Eşitler işareti`=`( ) ardından rota parametresi adı parametre için varsayılan bir değer tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1415">An equals sign (`=`) followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="8f156-1416">Rota parametresi adı sonra bir soru işareti (`?`) isteğe bağlı bir parametre tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1416">A question mark (`?`) after the route parameter name defines an optional parameter.</span></span>

<span data-ttu-id="8f156-1417">Varsayılan değeri olan rota parametreleri, rota eşleştiğinde *her zaman* bir rota değeri üretir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1417">Route parameters with a default value *always* produce a route value when the route matches.</span></span> <span data-ttu-id="8f156-1418">İlgili URL yolu kesimi yoksa, isteğe bağlı parametreler rota değeri oluşturmaz.</span><span class="sxs-lookup"><span data-stu-id="8f156-1418">Optional parameters don't produce a route value if there is no corresponding URL path segment.</span></span> <span data-ttu-id="8f156-1419">Rota [şablonu](#route-template-reference) senaryoları ve sözdiziminin ayrıntılı bir açıklaması için Rota şablonu başvuru bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1419">See the [Route template reference](#route-template-reference) section for a thorough description of route template scenarios and syntax.</span></span>

<span data-ttu-id="8f156-1420">Aşağıdaki örnekte, rota parametre `{id:int}` tanımı rota parametresi için bir [rota kısıtlaması](#route-constraint-reference) `id` tanımlar:</span><span class="sxs-lookup"><span data-stu-id="8f156-1420">In the following example, the route parameter definition `{id:int}` defines a [route constraint](#route-constraint-reference) for the `id` route parameter:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="8f156-1421">Bu şablon, gibi `/Products/Details/17` bir `/Products/Details/Apples`URL yolu eşleşir ama değil.</span><span class="sxs-lookup"><span data-stu-id="8f156-1421">This template matches a URL path like `/Products/Details/17` but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="8f156-1422">Rota kısıtlamaları, <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> bunları doğrulamak için rota değerlerini uygular ve inceler.</span><span class="sxs-lookup"><span data-stu-id="8f156-1422">Route constraints implement <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> and inspect route values to verify them.</span></span> <span data-ttu-id="8f156-1423">Bu örnekte, rota `id` değerinin bir tamsayıya dönüştürülebilir olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1423">In this example, the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="8f156-1424">Çerçeve tarafından sağlanan rota kısıtlamalarının açıklaması için [rota kısıtlaması-başvuruya](#route-constraint-reference) bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1424">See [route-constraint-reference](#route-constraint-reference) for an explanation of route constraints provided by the framework.</span></span>

<span data-ttu-id="8f156-1425">' `dataTokens`ve `defaults` <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> . için `constraints`ek kabul değerleri</span><span class="sxs-lookup"><span data-stu-id="8f156-1425">Additional overloads of <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="8f156-1426">Bu parametrelerin tipik kullanımı, anonim tür eşleme rota parametre adlarının özellik adlarının bulunduğu anonim olarak yazılan bir nesneyi geçmektir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1426">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="8f156-1427">Aşağıdaki <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> örnekler eşdeğer yollar oluşturur:</span><span class="sxs-lookup"><span data-stu-id="8f156-1427">The following <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

> [!TIP]
> <span data-ttu-id="8f156-1428">Kısıtlamaları ve varsayılanları tanımlamak için satır satır ekindizi basit yollar için uygun olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1428">The inline syntax for defining constraints and defaults can be convenient for simple routes.</span></span> <span data-ttu-id="8f156-1429">Ancak, satır arasözcü tarafından desteklenmeyen veri belirteçleri gibi senaryolar da vardır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1429">However, there are scenarios, such as data tokens, that aren't supported by inline syntax.</span></span>

<span data-ttu-id="8f156-1430">Aşağıdaki örnekte birkaç ek senaryo gösterilmiş:</span><span class="sxs-lookup"><span data-stu-id="8f156-1430">The following example demonstrates a few additional scenarios:</span></span>

```csharp
routes.MapRoute(
    name: "blog",
    template: "Blog/{*article}",
    defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="8f156-1431">Önceki şablon gibi `/Blog/All-About-Routing/Introduction` bir URL yolu eşleşir `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`ve değerleri ayıklar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1431">The preceding template matches a URL path like `/Blog/All-About-Routing/Introduction` and extracts the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="8f156-1432">Şablonda karşılık `controller` gelen `action` rota parametreleri olmamasına rağmen, varsayılan rota değerleri için ve rota tarafından üretilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1432">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="8f156-1433">Varsayılan değerler rota şablonunda belirtilebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1433">Default values can be specified in the route template.</span></span> <span data-ttu-id="8f156-1434">`article` Rota parametresi, rota parametresi adından önce yıldız`*`işareti ( ) görünümüyle *tümünü yakalama* olarak tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1434">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk (`*`) before the route parameter name.</span></span> <span data-ttu-id="8f156-1435">Tümyolu yakalama parametreleri URL yolunun geri kalanını yakalar ve boş dizeyle eşleşebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1435">Catch-all route parameters capture the remainder of the URL path and can also match the empty string.</span></span>

<span data-ttu-id="8f156-1436">Aşağıdaki örnek, rota kısıtlamaları ve veri belirteçleri ekler:</span><span class="sxs-lookup"><span data-stu-id="8f156-1436">The following example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="8f156-1437">Önceki şablon gibi `/en-US/Products/5` bir URL yolu eşleşir `{ controller = Products, action = Details, id = 5 }` ve değerleri ve `{ locale = en-US }`veri belirteçleri ayıklar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1437">The preceding template matches a URL path like `/en-US/Products/5` and extracts the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Yerel Windows belirteçleri](routing/_static/tokens.png)

### <a name="route-class-url-generation"></a><span data-ttu-id="8f156-1439">Rota sınıfı URL oluşturma</span><span class="sxs-lookup"><span data-stu-id="8f156-1439">Route class URL generation</span></span>

<span data-ttu-id="8f156-1440">Sınıf, <xref:Microsoft.AspNetCore.Routing.Route> rota şablonuyla bir dizi rota değerini birleştirerek URL oluşturma yı da gerçekleştirebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1440">The <xref:Microsoft.AspNetCore.Routing.Route> class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="8f156-1441">Bu mantıksal olarak URL yolunu eşleştirme nin ters işlemidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1441">This is logically the reverse process of matching the URL path.</span></span>

> [!TIP]
> <span data-ttu-id="8f156-1442">URL oluşturmayı daha iyi anlamak için, hangi URL'yi oluşturmak istediğinizi hayal edin ve ardından bir rota şablonunun bu URL ile nasıl eşleşeceğini düşünün.</span><span class="sxs-lookup"><span data-stu-id="8f156-1442">To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="8f156-1443">Hangi değerler üretilecek?</span><span class="sxs-lookup"><span data-stu-id="8f156-1443">What values would be produced?</span></span> <span data-ttu-id="8f156-1444">Bu, URL oluşturmanın <xref:Microsoft.AspNetCore.Routing.Route> sınıfta nasıl çalıştığının kaba karşılığıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1444">This is the rough equivalent of how URL generation works in the <xref:Microsoft.AspNetCore.Routing.Route> class.</span></span>

<span data-ttu-id="8f156-1445">Aşağıdaki örnekte genel bir ASP.NET Core MVC varsayılan rota kullanır:</span><span class="sxs-lookup"><span data-stu-id="8f156-1445">The following example uses a general ASP.NET Core MVC default route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="8f156-1446">Rota değerleri `{ controller = Products, action = List }`yle URL `/Products/List` oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1446">With the route values `{ controller = Products, action = List }`, the URL `/Products/List` is generated.</span></span> <span data-ttu-id="8f156-1447">Rota değerleri, URL yolunu oluşturmak için ilgili rota parametreleri için ikame edilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1447">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="8f156-1448">İsteğe bağlı bir rota parametresi olduğundan, `id` URL `id`için bir değer olmadan başarıyla oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1448">Since `id` is an optional route parameter, the URL is successfully generated without a value for `id`.</span></span>

<span data-ttu-id="8f156-1449">Rota değerleri `{ controller = Home, action = Index }`yle URL `/` oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1449">With the route values `{ controller = Home, action = Index }`, the URL `/` is generated.</span></span> <span data-ttu-id="8f156-1450">Sağlanan rota değerleri varsayılan değerlerle eşleşir ve varsayılan değerlere karşılık gelen segmentler güvenli bir şekilde atlanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1450">The provided route values match the default values, and the segments corresponding to the default values are safely omitted.</span></span>

<span data-ttu-id="8f156-1451">Her iki URL de aşağıdaki rota tanımıyla`/Home/Index` `/`(ve) URL oluşturmak için kullanılan aynı rota değerlerini kullanarak gidiş-dönüş oluşturdu.</span><span class="sxs-lookup"><span data-stu-id="8f156-1451">Both URLs generated round-trip with the following route definition (`/Home/Index` and `/`) produce the same route values that were used to generate the URL.</span></span>

> [!NOTE]
> <span data-ttu-id="8f156-1452">Core MVC'ASP.NET kullanan <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> bir uygulama, doğrudan yönlendirmeye çağırmak yerine URL'ler oluşturmak için kullanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1452">An app using ASP.NET Core MVC should use <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="8f156-1453">URL oluşturma hakkında daha fazla bilgi için [Url oluşturma başvuru](#url-generation-reference) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1453">For more information on URL generation, see the [Url generation reference](#url-generation-reference) section.</span></span>

## <a name="use-routing-middleware"></a><span data-ttu-id="8f156-1454">Yönlendirme ara yazılımlarını kullanma</span><span class="sxs-lookup"><span data-stu-id="8f156-1454">Use routing middleware</span></span>

<span data-ttu-id="8f156-1455">Uygulamanın proje dosyasındaki [Microsoft.AspNetCore.App meta paketine](xref:fundamentals/metapackage-app) başvurun.</span><span class="sxs-lookup"><span data-stu-id="8f156-1455">Reference the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) in the app's project file.</span></span>

<span data-ttu-id="8f156-1456">Aşağıdaki durumlarda servis konteynerine `Startup.ConfigureServices`yönlendirme ekleme:</span><span class="sxs-lookup"><span data-stu-id="8f156-1456">Add routing to the service container in `Startup.ConfigureServices`:</span></span>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

<span data-ttu-id="8f156-1457">Rotalar `Startup.Configure` yöntemde yapılandırılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1457">Routes must be configured in the `Startup.Configure` method.</span></span> <span data-ttu-id="8f156-1458">Örnek uygulama aşağıdaki API'leri kullanır:</span><span class="sxs-lookup"><span data-stu-id="8f156-1458">The sample app uses the following APIs:</span></span>

* <xref:Microsoft.AspNetCore.Routing.RouteBuilder>
* <span data-ttu-id="8f156-1459"><xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>&ndash; Yalnızca HTTP GET istekleriyle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1459"><xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> &ndash; Matches only HTTP GET requests.</span></span>
* <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

<span data-ttu-id="8f156-1460">Aşağıdaki tablo, verilen ÜRB'lerle yanıtları gösterir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1460">The following table shows the responses with the given URIs.</span></span>

| <span data-ttu-id="8f156-1461">URI</span><span class="sxs-lookup"><span data-stu-id="8f156-1461">URI</span></span>                    | <span data-ttu-id="8f156-1462">Yanıt</span><span class="sxs-lookup"><span data-stu-id="8f156-1462">Response</span></span>                                          |
| ---------------------- | ------------------------------------------------- |
| `/package/create/3`    | <span data-ttu-id="8f156-1463">Merhaba!</span><span class="sxs-lookup"><span data-stu-id="8f156-1463">Hello!</span></span> <span data-ttu-id="8f156-1464">Rota değerleri: [işlem, oluşturma], [id, 3]</span><span class="sxs-lookup"><span data-stu-id="8f156-1464">Route values: [operation, create], [id, 3]</span></span> |
| `/package/track/-3`    | <span data-ttu-id="8f156-1465">Merhaba!</span><span class="sxs-lookup"><span data-stu-id="8f156-1465">Hello!</span></span> <span data-ttu-id="8f156-1466">Rota değerleri: [işlem, parça], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="8f156-1466">Route values: [operation, track], [id, -3]</span></span> |
| `/package/track/-3/`   | <span data-ttu-id="8f156-1467">Merhaba!</span><span class="sxs-lookup"><span data-stu-id="8f156-1467">Hello!</span></span> <span data-ttu-id="8f156-1468">Rota değerleri: [işlem, parça], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="8f156-1468">Route values: [operation, track], [id, -3]</span></span> |
| `/package/track/`      | <span data-ttu-id="8f156-1469">İstek suya düşüyor, eşleşme yok.</span><span class="sxs-lookup"><span data-stu-id="8f156-1469">The request falls through, no match.</span></span>              |
| `GET /hello/Joe`       | <span data-ttu-id="8f156-1470">Merhaba Joe!</span><span class="sxs-lookup"><span data-stu-id="8f156-1470">Hi, Joe!</span></span>                                          |
| `POST /hello/Joe`      | <span data-ttu-id="8f156-1471">İstek ile düşer, maçlar HTTP GET sadece.</span><span class="sxs-lookup"><span data-stu-id="8f156-1471">The request falls through, matches HTTP GET only.</span></span> |
| `GET /hello/Joe/Smith` | <span data-ttu-id="8f156-1472">İstek suya düşüyor, eşleşme yok.</span><span class="sxs-lookup"><span data-stu-id="8f156-1472">The request falls through, no match.</span></span>              |

<span data-ttu-id="8f156-1473">Tek bir rotayı yapılandırıyorsanız, <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> bir `IRouter` örnekte geçeni arayın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1473">If you're configuring a single route, call <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> passing in an `IRouter` instance.</span></span> <span data-ttu-id="8f156-1474">Kullanmanız <xref:Microsoft.AspNetCore.Routing.RouteBuilder>gerekmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-1474">You won't need to use <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span></span>

<span data-ttu-id="8f156-1475">Çerçeve, rotalar oluşturmak için bir<xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions>dizi uzatma yöntemi sağlar ( ):</span><span class="sxs-lookup"><span data-stu-id="8f156-1475">The framework provides a set of extension methods for creating routes (<xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions>):</span></span>

* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapDelete*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareDelete*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareGet*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewarePost*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewarePut*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareRoute*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareVerb*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapPost*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapPut*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapRoute*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>

<span data-ttu-id="8f156-1476">Listelenen yöntemlerden bazıları, <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>örneğin <xref:Microsoft.AspNetCore.Http.RequestDelegate>, bir .</span><span class="sxs-lookup"><span data-stu-id="8f156-1476">Some of listed methods, such as <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>, require a <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span></span> <span data-ttu-id="8f156-1477">Rota <xref:Microsoft.AspNetCore.Http.RequestDelegate> eşleştiğinde *rota işleyicisi* olarak kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1477">The <xref:Microsoft.AspNetCore.Http.RequestDelegate> is used as the *route handler* when the route matches.</span></span> <span data-ttu-id="8f156-1478">Bu ailedeki diğer yöntemler, rota işleyicisi olarak kullanılmak üzere bir ara yazılım ardışık yapılandırmaizine olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1478">Other methods in this family allow configuring a middleware pipeline for use as the route handler.</span></span> <span data-ttu-id="8f156-1479">`Map*` Yöntem, <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapRoute*> <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>".</span><span class="sxs-lookup"><span data-stu-id="8f156-1479">If the `Map*` method doesn't accept a handler, such as <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapRoute*>, it uses the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span>

<span data-ttu-id="8f156-1480">Yöntemler, `Map[Verb]` yöntem adında http fiiliile yolu sınırlamak için kısıtlamalar kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1480">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="8f156-1481">Örneğin, bkz <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>ve .</span><span class="sxs-lookup"><span data-stu-id="8f156-1481">For example, see <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> and <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="8f156-1482">Rota şablonu başvurusu</span><span class="sxs-lookup"><span data-stu-id="8f156-1482">Route template reference</span></span>

<span data-ttu-id="8f156-1483">Kıvırcık ayraçlar içindeki`{ ... }`belirteçler ( ) rota eşleştiğinde bağlanan *rota parametrelerini* tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1483">Tokens within curly braces (`{ ... }`) define *route parameters* that are bound if the route is matched.</span></span> <span data-ttu-id="8f156-1484">Bir rota segmentinde birden fazla rota parametresi tanımlayabilirsiniz, ancak bunların gerçek bir değerle ayrılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1484">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="8f156-1485">Örneğin, `{controller=Home}{action=Index}` geçerli bir yol değildir, çünkü ile `{controller}` . `{action}`</span><span class="sxs-lookup"><span data-stu-id="8f156-1485">For example, `{controller=Home}{action=Index}` isn't a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="8f156-1486">Bu rota parametrelerinin bir adı olmalıdır ve ek öznitelikler belirtilmiş olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1486">These route parameters must have a name and may have additional attributes specified.</span></span>

<span data-ttu-id="8f156-1487">Rota parametreleri dışındaki gerçek metin `{id}`(örneğin, ) `/` ve yol ayırıcısı URL'deki metyle eşleşmelidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1487">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="8f156-1488">Metin eşleştirme büyük/küçük harf duyarsız ve URL'ler yolunun deşifre gösterimine dayanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1488">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="8f156-1489">Bir literal rota parametresi`{` delimiter `}``{{` (veya) eşleştirmek için , `}}`karakter (veya ) tekrarlayarak delimiter kaçış.</span><span class="sxs-lookup"><span data-stu-id="8f156-1489">To match a literal route parameter delimiter (`{` or `}`), escape the delimiter by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="8f156-1490">İsteğe bağlı dosya uzantısı ile bir dosya adını yakalamaya çalışan URL desenleri ek hususlar vardır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1490">URL patterns that attempt to capture a file name with an optional file extension have additional considerations.</span></span> <span data-ttu-id="8f156-1491">Örneğin, şablonu `files/{filename}.{ext?}`göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="8f156-1491">For example, consider the template `files/{filename}.{ext?}`.</span></span> <span data-ttu-id="8f156-1492">Her ikisi `filename` için `ext` değerler ve var olduğunda, her iki değer de doldurulur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1492">When values for both `filename` and `ext` exist, both values are populated.</span></span> <span data-ttu-id="8f156-1493">URL'de yalnızca `filename` bir değer varsa, rota eşleşir,`.`çünkü son daki dönem ( ) isteğe bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1493">If only a value for `filename` exists in the URL, the route matches because the trailing period (`.`) is  optional.</span></span> <span data-ttu-id="8f156-1494">Aşağıdaki URL'ler bu rotayla eşleşir:</span><span class="sxs-lookup"><span data-stu-id="8f156-1494">The following URLs match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile`

<span data-ttu-id="8f156-1495">Uri'nin geri kalanına`*`bağlamak için rota parametresine önek olarak yıldız işaretini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8f156-1495">You can use the asterisk (`*`) as a prefix to a route parameter to bind to the rest of the URI.</span></span> <span data-ttu-id="8f156-1496">Buna *catch-all* parametresi denir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1496">This is called a *catch-all* parameter.</span></span> <span data-ttu-id="8f156-1497">Örneğin, `blog/{*slug}` `slug` rota değerine atanan `/blog` uri ile başlayan ve onu izleyen herhangi bir değere sahip herhangi bir URI ile eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1497">For example, `blog/{*slug}` matches any URI that starts with `/blog` and has any value following it, which is assigned to the `slug` route value.</span></span> <span data-ttu-id="8f156-1498">Tümlerini yakalama parametreleri boş dizeyle de eşleşebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1498">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="8f156-1499">Tümlerini yakalama parametresi, yol ayırıcısı (`/`) karakterleri de dahil olmak üzere bir URL oluşturmak için kullanıldığında uygun karakterlerden kaçar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1499">The catch-all parameter escapes the appropriate characters when the route is used to generate a URL, including path separator (`/`) characters.</span></span> <span data-ttu-id="8f156-1500">Örneğin, rota `foo/{*path}` değerleri `{ path = "my/path" }` ile rota `foo/my%2Fpath`oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1500">For example, the route `foo/{*path}` with route values `{ path = "my/path" }` generates `foo/my%2Fpath`.</span></span> <span data-ttu-id="8f156-1501">Kaçan ileri eğik çizgiye dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="8f156-1501">Note the escaped forward slash.</span></span>

<span data-ttu-id="8f156-1502">Rota parametreleri, eşitler işaretiyle ayrılan parametre adı ()`=`ile ayrıldıktan sonra varsayılan değeri belirterek varsayılan *değerlere* sahip olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1502">Route parameters may have *default values* designated by specifying the default value after the parameter name separated by an equals sign (`=`).</span></span> <span data-ttu-id="8f156-1503">Örneğin, `{controller=Home}` varsayılan `Home` değer olarak `controller`tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1503">For example, `{controller=Home}` defines `Home` as the default value for `controller`.</span></span> <span data-ttu-id="8f156-1504">Parametrenin URL'sinde değer yoksa varsayılan değer kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1504">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="8f156-1505">Rota parametreleri, parametre adının sonuna`?`bir soru işareti ( ) ekleyerek `id?`isteğe bağlı hale getirilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1505">Route parameters are made optional by appending a question mark (`?`) to the end of the parameter name, as in `id?`.</span></span> <span data-ttu-id="8f156-1506">İsteğe bağlı değerler ve varsayılan rota parametreleri arasındaki fark, varsayılan&mdash;değeri olan bir rota parametresinin her zaman isteğe bağlı bir parametrenin yalnızca istek URL'si tarafından bir değer sağlandığında bir değere sahip olduğu bir değer üretmesidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1506">The difference between optional values and default route parameters is that a route parameter with a default value always produces a value&mdash;an optional parameter has a value only when a value is provided by the request URL.</span></span>

<span data-ttu-id="8f156-1507">Rota parametrelerinde URL'den bağlanan rota değeriyle eşleşmesi gereken kısıtlamalar olabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1507">Route parameters may have constraints that must match the route value bound from the URL.</span></span> <span data-ttu-id="8f156-1508">Rota parametre`:`adı sonra bir iki nokta üst üste ( ) ve kısıtlama adı ekleme bir rota parametresi üzerinde *satır içinde bir kısıtlama* belirtir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1508">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="8f156-1509">Kısıtlama bağımsız değişkenler gerektiriyorsa, kısıtlama adından`(...)`sonra parantez içinde ( ) ekolarak konum.</span><span class="sxs-lookup"><span data-stu-id="8f156-1509">If the constraint requires arguments, they're enclosed in parentheses (`(...)`) after the constraint name.</span></span> <span data-ttu-id="8f156-1510">Birden çok satır içi kısıtlamalar başka bir`:`üst üste ( ) ve kısıtlama adı ekleyerek belirtilebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1510">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span>

<span data-ttu-id="8f156-1511">Kısıtlama adı ve bağımsız değişkenler, URL işlemede kullanılacak bir örnek oluşturmak için <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> hizmete aktarılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1511">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="8f156-1512">Örneğin, rota şablonu `blog/{article:minlength(10)}` bağımsız `minlength` değişkenile `10`bir kısıtlama belirtir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1512">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="8f156-1513">Rota kısıtlamaları ve çerçeve tarafından sağlanan kısıtlamaların listesi hakkında daha fazla bilgi için [Rota kısıtlaması başvuru](#route-constraint-reference) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1513">For more information on route constraints and a list of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

<span data-ttu-id="8f156-1514">Aşağıdaki tabloörnek rota şablonlarını ve davranışlarını gösterir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1514">The following table demonstrates example route templates and their behavior.</span></span>

| <span data-ttu-id="8f156-1515">Rota Şablonu</span><span class="sxs-lookup"><span data-stu-id="8f156-1515">Route Template</span></span>                           | <span data-ttu-id="8f156-1516">Örnek Eşleşen URI</span><span class="sxs-lookup"><span data-stu-id="8f156-1516">Example Matching URI</span></span>    | <span data-ttu-id="8f156-1517">İstek URI&hellip;</span><span class="sxs-lookup"><span data-stu-id="8f156-1517">The request URI&hellip;</span></span>                                                    |
| ---------------------------------------- | ----------------------- | -------------------------------------------------------------------------- |
| `hello`                                  | `/hello`                | <span data-ttu-id="8f156-1518">Sadece tek yol `/hello`eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1518">Only matches the single path `/hello`.</span></span>                                     |
| `{Page=Home}`                            | `/`                     | <span data-ttu-id="8f156-1519">Maçlar ve `Page` `Home`ayarlar .</span><span class="sxs-lookup"><span data-stu-id="8f156-1519">Matches and sets `Page` to `Home`.</span></span>                                         |
| `{Page=Home}`                            | `/Contact`              | <span data-ttu-id="8f156-1520">Maçlar ve `Page` `Contact`ayarlar .</span><span class="sxs-lookup"><span data-stu-id="8f156-1520">Matches and sets `Page` to `Contact`.</span></span>                                      |
| `{controller}/{action}/{id?}`            | `/Products/List`        | <span data-ttu-id="8f156-1521">`Products` Denetleyici ve `List` eylem haritaları.</span><span class="sxs-lookup"><span data-stu-id="8f156-1521">Maps to the `Products` controller and `List` action.</span></span>                       |
| `{controller}/{action}/{id?}`            | `/Products/Details/123` | <span data-ttu-id="8f156-1522">`Products` Denetleyici ve `Details` eylem haritaları (123`id` olarak ayarlayın).</span><span class="sxs-lookup"><span data-stu-id="8f156-1522">Maps to the `Products` controller and  `Details` action (`id` set to 123).</span></span> |
| `{controller=Home}/{action=Index}/{id?}` | `/`                     | <span data-ttu-id="8f156-1523">`Home` Denetleyici ve `Index` yönteme haritalar (yoksayılır).`id`</span><span class="sxs-lookup"><span data-stu-id="8f156-1523">Maps to the `Home` controller and `Index` method (`id` is ignored).</span></span>        |

<span data-ttu-id="8f156-1524">Şablon kullanmak genellikle yönlendirmeye en basit yaklaşımdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1524">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="8f156-1525">Kısıtlamalar ve varsayılanlar da rota şablonu dışında belirtilebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1525">Constraints and defaults can also be specified outside the route template.</span></span>

> [!TIP]
> <span data-ttu-id="8f156-1526">Yerleşik yönlendirme uygulamalarının <xref:Microsoft.AspNetCore.Routing.Route>istekleri nasıl eşleştirbildiğini görmek için [Günlüğe Kaydetme'yi](xref:fundamentals/logging/index) etkinleştirin.</span><span class="sxs-lookup"><span data-stu-id="8f156-1526">Enable [Logging](xref:fundamentals/logging/index) to see how the built-in routing implementations, such as <xref:Microsoft.AspNetCore.Routing.Route>, match requests.</span></span>

## <a name="route-constraint-reference"></a><span data-ttu-id="8f156-1527">Rota kısıtlaması başvurusu</span><span class="sxs-lookup"><span data-stu-id="8f156-1527">Route constraint reference</span></span>

<span data-ttu-id="8f156-1528">Gelen URL'de bir eşleşme oluştuğunda ve URL yolu rota değerlerine belirtildiğinde rota kısıtlamaları yürütülür.</span><span class="sxs-lookup"><span data-stu-id="8f156-1528">Route constraints execute when a match has occurred to the incoming URL and the URL path is tokenized into route values.</span></span> <span data-ttu-id="8f156-1529">Rota kısıtlamaları genellikle rota şablonu aracılığıyla ilişkili rota değerini inceler ve değerin kabul edilebilir olup olmadığı konusunda evet/hayır kararı verir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1529">Route constraints generally inspect the route value associated via the route template and make a yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="8f156-1530">Bazı rota kısıtlamaları, isteğin yönlendirilip yönlendirilemeyeceğini değerlendirmek için rota değerinin dışındaki verileri kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1530">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="8f156-1531">Örneğin, http <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> fiiline dayalı bir isteği kabul edebilir veya reddedebilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1531">For example, the <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> can accept or reject a request based on its HTTP verb.</span></span> <span data-ttu-id="8f156-1532">Kısıtlamalar yönlendirme istekleri ve bağlantı oluşturma kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1532">Constraints are used in routing requests and link generation.</span></span>

> [!WARNING]
> <span data-ttu-id="8f156-1533">**Giriş doğrulama**için kısıtlamalar kullanmayın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1533">Don't use constraints for **input validation**.</span></span> <span data-ttu-id="8f156-1534">**Giriş doğrulaması**için kısıtlamalar kullanılıyorsa, geçersiz giriş sonuçları *404 - 400* yerine Bulunamadı yanıt - Uygun bir hata iletisi ile *Hatalı İstek.*</span><span class="sxs-lookup"><span data-stu-id="8f156-1534">If constraints are used for **input validation**, invalid input results in a *404 - Not Found* response instead of a *400 - Bad Request* with an appropriate error message.</span></span> <span data-ttu-id="8f156-1535">Rota kısıtlamaları, belirli bir rotanın girdilerini doğrulamak için değil, benzer yolları **ayrıştırmak** için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1535">Route constraints are used to **disambiguate** similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="8f156-1536">Aşağıdaki tablo, örnek rota kısıtlamaları ve bunların beklenen davranışlarını gösterir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1536">The following table demonstrates example route constraints and their expected behavior.</span></span>

| <span data-ttu-id="8f156-1537">kısıtlama</span><span class="sxs-lookup"><span data-stu-id="8f156-1537">constraint</span></span> | <span data-ttu-id="8f156-1538">Örnek</span><span class="sxs-lookup"><span data-stu-id="8f156-1538">Example</span></span> | <span data-ttu-id="8f156-1539">Örnek Eşleşmeler</span><span class="sxs-lookup"><span data-stu-id="8f156-1539">Example Matches</span></span> | <span data-ttu-id="8f156-1540">Notlar</span><span class="sxs-lookup"><span data-stu-id="8f156-1540">Notes</span></span> |
| ---------- | ------- | --------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="8f156-1541">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="8f156-1541">`123456789`, `-123456789`</span></span> | <span data-ttu-id="8f156-1542">Herhangi bir karşıcıyla eşleşir</span><span class="sxs-lookup"><span data-stu-id="8f156-1542">Matches any integer</span></span> |
| `bool` | `{active:bool}` | <span data-ttu-id="8f156-1543">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="8f156-1543">`true`, `FALSE`</span></span> | <span data-ttu-id="8f156-1544">`true` Kibrit `false` ler veya (büyük/küçük harf duyarsız)</span><span class="sxs-lookup"><span data-stu-id="8f156-1544">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="8f156-1545">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="8f156-1545">`2016-12-31`, `2016-12-31 7:32pm`</span></span> | <span data-ttu-id="8f156-1546">Değişmez kültürdeki geçerli `DateTime` bir değerle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1546">Matches a valid `DateTime` value in the invariant culture.</span></span> <span data-ttu-id="8f156-1547">Önceki uyarıya bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1547">See  preceding warning.</span></span>|
| `decimal` | `{price:decimal}` | <span data-ttu-id="8f156-1548">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="8f156-1548">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="8f156-1549">Değişmez kültürdeki geçerli `decimal` bir değerle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1549">Matches a valid `decimal` value in the invariant culture.</span></span> <span data-ttu-id="8f156-1550">Önceki uyarıya bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1550">See  preceding warning.</span></span>|
| `double` | `{weight:double}` | <span data-ttu-id="8f156-1551">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="8f156-1551">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="8f156-1552">Değişmez kültürdeki geçerli `double` bir değerle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1552">Matches a valid `double` value in the invariant culture.</span></span> <span data-ttu-id="8f156-1553">Önceki uyarıya bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1553">See  preceding warning.</span></span>|
| `float` | `{weight:float}` | <span data-ttu-id="8f156-1554">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="8f156-1554">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="8f156-1555">Değişmez kültürdeki geçerli `float` bir değerle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1555">Matches a valid `float` value in the invariant culture.</span></span> <span data-ttu-id="8f156-1556">Önceki uyarıya bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1556">See  preceding warning.</span></span>|
| `guid` | `{id:guid}` | <span data-ttu-id="8f156-1557">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="8f156-1557">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="8f156-1558">Geçerli `Guid` bir değerle eşleşir</span><span class="sxs-lookup"><span data-stu-id="8f156-1558">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="8f156-1559">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="8f156-1559">`123456789`, `-123456789`</span></span> | <span data-ttu-id="8f156-1560">Geçerli `long` bir değerle eşleşir</span><span class="sxs-lookup"><span data-stu-id="8f156-1560">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="8f156-1561">String en az 4 karakter olmalıdır</span><span class="sxs-lookup"><span data-stu-id="8f156-1561">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="8f156-1562">Dize en fazla 8 karakter olmalıdır</span><span class="sxs-lookup"><span data-stu-id="8f156-1562">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="8f156-1563">String tam olarak 12 karakter uzunluğunda olmalıdır</span><span class="sxs-lookup"><span data-stu-id="8f156-1563">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="8f156-1564">String en az 8 ve en fazla 16 karakter uzunluğunda olmalıdır</span><span class="sxs-lookup"><span data-stu-id="8f156-1564">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="8f156-1565">İntesayı değeri en az 18 olmalıdır</span><span class="sxs-lookup"><span data-stu-id="8f156-1565">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` | `91` | <span data-ttu-id="8f156-1566">Tümsek değeri 120'den fazla olmamalıdır</span><span class="sxs-lookup"><span data-stu-id="8f156-1566">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="8f156-1567">İntesayı değeri en az 18 olmalı, ancak en fazla 120</span><span class="sxs-lookup"><span data-stu-id="8f156-1567">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="8f156-1568">String bir veya daha fazla alfabetik karakterden`a`-`z`(, büyük/küçük harf duyarsız) oluşmalıdır</span><span class="sxs-lookup"><span data-stu-id="8f156-1568">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="8f156-1569">String normal ifadeyle eşleşmelidir (normal ifade tanımlama yla ilgili ipuçlarına bakın)</span><span class="sxs-lookup"><span data-stu-id="8f156-1569">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required` | `{name:required}` | `Rick` | <span data-ttu-id="8f156-1570">URL oluşturma sırasında parametre dışı bir değerin mevcut olduğunu zorlamak için kullanılır</span><span class="sxs-lookup"><span data-stu-id="8f156-1570">Used to enforce that a non-parameter value is present during URL generation</span></span> |

<span data-ttu-id="8f156-1571">Birden çok, kolon-delimited kısıtlamalar tek bir parametre uygulanabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1571">Multiple, colon-delimited constraints can be applied to a single parameter.</span></span> <span data-ttu-id="8f156-1572">Örneğin, aşağıdaki kısıtlama bir parametreyi 1 veya daha büyük bir tamsayı değeriyle sınırlandırMaz:</span><span class="sxs-lookup"><span data-stu-id="8f156-1572">For example, the following constraint restricts a parameter to an integer value of 1 or greater:</span></span>

```csharp
[Route("users/{id:int:min(1)}")]
public User GetUserById(int id) { }
```

> [!WARNING]
> <span data-ttu-id="8f156-1573">URL'yi doğrulayan ve CLR türüne dönüştürülen `int` (örneğin `DateTime`veya) her zaman değişmez kültürü kullanan yol kısıtlamaları.</span><span class="sxs-lookup"><span data-stu-id="8f156-1573">Route constraints that verify the URL and are converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture.</span></span> <span data-ttu-id="8f156-1574">Bu kısıtlamalar, URL'nin yerelleştirilebilir olmadığını varsayar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1574">These constraints assume that the URL is non-localizable.</span></span> <span data-ttu-id="8f156-1575">Çerçeve tarafından sağlanan rota kısıtlamaları, rota değerlerinde depolanan değerleri değiştirmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-1575">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="8f156-1576">URL'den ayrıştırılan tüm rota değerleri dizeleri olarak depolanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1576">All route values parsed from the URL are stored as strings.</span></span> <span data-ttu-id="8f156-1577">Örneğin, `float` kısıtlama rota değerini bir yüzer'e dönüştürmeyi dener, ancak dönüştürülen değer yalnızca bir şamandıraya dönüştürülebileceğini doğrulamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1577">For example, the `float` constraint attempts to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="8f156-1578">Normal ifadeler</span><span class="sxs-lookup"><span data-stu-id="8f156-1578">Regular expressions</span></span>

<span data-ttu-id="8f156-1579">ASP.NET Core çerçevesi `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` düzenli ifade oluşturucuekler.</span><span class="sxs-lookup"><span data-stu-id="8f156-1579">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="8f156-1580">Bu <xref:System.Text.RegularExpressions.RegexOptions> üyelerin tanımı için bkz.</span><span class="sxs-lookup"><span data-stu-id="8f156-1580">See <xref:System.Text.RegularExpressions.RegexOptions> for a description of these members.</span></span>

<span data-ttu-id="8f156-1581">Normal ifadeler, Yönlendirme ve C# dili tarafından kullanılanlara benzer sınır dışı layıcılar ve belirteçler kullanır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1581">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="8f156-1582">Normal ifade belirteçleri kaçmış olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1582">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="8f156-1583">Yönlendirmede normal `^\d{3}-\d{2}-\d{4}$` ifadeyi kullanmak için, ifadenin `\` `\` dize kaçış karakterinden kaçmak için `\\` [(harfi harfine dize literalleri](/dotnet/csharp/language-reference/keywords/string)kullanmadığı sürece) C# kaynak dosyasında (çift eğik çizgi) karakter olarak dizede (çift eğik çizgi) karakter olarak sağlanmış olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1583">To use the regular expression `^\d{3}-\d{2}-\d{4}$` in routing, the expression must have the `\` (single backslash) characters provided in the string as `\\` (double backslash) characters in the C# source file in order to escape the `\` string escape character (unless using [verbatim string literals](/dotnet/csharp/language-reference/keywords/string)).</span></span> <span data-ttu-id="8f156-1584">Yönlendirme parametresi delimiter karakterleri kaçmak`{` `}`için `[` `]`( , , , ,`{{` `}`, `[[` `]]`, , , ifade deki karakterleri iki katına ( , , , , .</span><span class="sxs-lookup"><span data-stu-id="8f156-1584">To escape routing parameter delimiter characters (`{`, `}`, `[`, `]`), double the characters in the expression (`{{`, `}`, `[[`, `]]`).</span></span> <span data-ttu-id="8f156-1585">Aşağıdaki tabloda normal bir ifade ve kaçan sürüm gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1585">The following table shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="8f156-1586">Normal ifade</span><span class="sxs-lookup"><span data-stu-id="8f156-1586">Regular Expression</span></span>    | <span data-ttu-id="8f156-1587">Kaçan Düzenli İfade</span><span class="sxs-lookup"><span data-stu-id="8f156-1587">Escaped Regular Expression</span></span>     |
| --------------------- | ------------------------------ |
| `^\d{3}-\d{2}-\d{4}$` | `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` |
| `^[a-z]{2}$`          | `^[[a-z]]{{2}}$`               |

<span data-ttu-id="8f156-1588">Yönlendirmede kullanılan normal ifadeler genellikle caret (`^`) karakteriyle başlar ve dizebaşlangıç pozisyonuyla eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1588">Regular expressions used in routing often start with the caret (`^`) character and match starting position of the string.</span></span> <span data-ttu-id="8f156-1589">İfadeler genellikle dolar işareti (`$`) karakteri ve dize sonu maç ile sona erer.</span><span class="sxs-lookup"><span data-stu-id="8f156-1589">The expressions often end with the dollar sign (`$`) character and match end of the string.</span></span> <span data-ttu-id="8f156-1590">Ve `^` `$` karakterler, normal ifadenin tüm rota parametre değeriyle eşleşmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1590">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="8f156-1591">`^` Ve `$` karakterler olmadan, normal ifade genellikle istenmeyen dize içinde herhangi bir alt dize eşleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1591">Without the `^` and `$` characters, the regular expression match any substring within the string, which is often undesirable.</span></span> <span data-ttu-id="8f156-1592">Aşağıdaki tablo örnekler sağlar ve neden eşleştiklerini veya eşleşmediklerini açıklar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1592">The following table provides examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="8f156-1593">İfadeler</span><span class="sxs-lookup"><span data-stu-id="8f156-1593">Expression</span></span>   | <span data-ttu-id="8f156-1594">Dize</span><span class="sxs-lookup"><span data-stu-id="8f156-1594">String</span></span>    | <span data-ttu-id="8f156-1595">Eşleştirme</span><span class="sxs-lookup"><span data-stu-id="8f156-1595">Match</span></span> | <span data-ttu-id="8f156-1596">Açıklama</span><span class="sxs-lookup"><span data-stu-id="8f156-1596">Comment</span></span>               |
| ------------ | --------- | :---: |  -------------------- |
| `[a-z]{2}`   | <span data-ttu-id="8f156-1597">hello</span><span class="sxs-lookup"><span data-stu-id="8f156-1597">hello</span></span>     | <span data-ttu-id="8f156-1598">Evet</span><span class="sxs-lookup"><span data-stu-id="8f156-1598">Yes</span></span>   | <span data-ttu-id="8f156-1599">Substring eşleşmeleri</span><span class="sxs-lookup"><span data-stu-id="8f156-1599">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="8f156-1600">123abc456</span><span class="sxs-lookup"><span data-stu-id="8f156-1600">123abc456</span></span> | <span data-ttu-id="8f156-1601">Evet</span><span class="sxs-lookup"><span data-stu-id="8f156-1601">Yes</span></span>   | <span data-ttu-id="8f156-1602">Substring eşleşmeleri</span><span class="sxs-lookup"><span data-stu-id="8f156-1602">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="8f156-1603">Mz</span><span class="sxs-lookup"><span data-stu-id="8f156-1603">mz</span></span>        | <span data-ttu-id="8f156-1604">Evet</span><span class="sxs-lookup"><span data-stu-id="8f156-1604">Yes</span></span>   | <span data-ttu-id="8f156-1605">İfadeyle eşleşir</span><span class="sxs-lookup"><span data-stu-id="8f156-1605">Matches expression</span></span>    |
| `[a-z]{2}`   | <span data-ttu-id="8f156-1606">MZ</span><span class="sxs-lookup"><span data-stu-id="8f156-1606">MZ</span></span>        | <span data-ttu-id="8f156-1607">Evet</span><span class="sxs-lookup"><span data-stu-id="8f156-1607">Yes</span></span>   | <span data-ttu-id="8f156-1608">Servis talebine duyarlı değil</span><span class="sxs-lookup"><span data-stu-id="8f156-1608">Not case sensitive</span></span>    |
| `^[a-z]{2}$` | <span data-ttu-id="8f156-1609">hello</span><span class="sxs-lookup"><span data-stu-id="8f156-1609">hello</span></span>     | <span data-ttu-id="8f156-1610">Hayır</span><span class="sxs-lookup"><span data-stu-id="8f156-1610">No</span></span>    | <span data-ttu-id="8f156-1611">`^` Bkz. `$` ve üzeri</span><span class="sxs-lookup"><span data-stu-id="8f156-1611">See `^` and `$` above</span></span> |
| `^[a-z]{2}$` | <span data-ttu-id="8f156-1612">123abc456</span><span class="sxs-lookup"><span data-stu-id="8f156-1612">123abc456</span></span> | <span data-ttu-id="8f156-1613">Hayır</span><span class="sxs-lookup"><span data-stu-id="8f156-1613">No</span></span>    | <span data-ttu-id="8f156-1614">`^` Bkz. `$` ve üzeri</span><span class="sxs-lookup"><span data-stu-id="8f156-1614">See `^` and `$` above</span></span> |

<span data-ttu-id="8f156-1615">Normal ifade sözdizimi hakkında daha fazla bilgi için [bkz.](/dotnet/standard/base-types/regular-expression-language-quick-reference)</span><span class="sxs-lookup"><span data-stu-id="8f156-1615">For more information on regular expression syntax, see [.NET Framework Regular Expressions](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span></span>

<span data-ttu-id="8f156-1616">Bir parametreyi bilinen olası değerler kümesiyle kısıtlamak için normal bir ifade kullanın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1616">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="8f156-1617">Örneğin, `{action:regex(^(list|get|create)$)}` `action` yalnızca rota değeri `list`ile `get`eşleşir . `create`</span><span class="sxs-lookup"><span data-stu-id="8f156-1617">For example, `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="8f156-1618">Kısıtlamalar sözlüğüne aktarılırsa, `^(list|get|create)$` dize eşdeğerdir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1618">If passed into the constraints dictionary, the string `^(list|get|create)$` is equivalent.</span></span> <span data-ttu-id="8f156-1619">Bilinen kısıtlamalardan biriyle eşleşmeyan kısıtlamalar sözlüğünde geçirilen kısıtlamalar (şablon içinde satır içi değil) de normal ifadeler olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1619">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

## <a name="custom-route-constraints"></a><span data-ttu-id="8f156-1620">Özel Rota Kısıtlamaları</span><span class="sxs-lookup"><span data-stu-id="8f156-1620">Custom Route Constraints</span></span>

<span data-ttu-id="8f156-1621">Yerleşik rota kısıtlamalarına ek olarak, <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> arabirim uygulanarak özel rota kısıtlamaları oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1621">In addition to the built-in route constraints, custom route constraints can be created by implementing the <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interface.</span></span> <span data-ttu-id="8f156-1622">Arabirim, <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> `Match`kısıtlama memnun ve `true` `false` aksi takdirde döndürür tek bir yöntem içerir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1622">The <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interface contains a single method, `Match`, which returns `true` if the constraint is satisfied and `false` otherwise.</span></span>

<span data-ttu-id="8f156-1623">Özel <xref:Microsoft.AspNetCore.Routing.IRouteConstraint>bir kullanım için, rota kısıtlaması türü uygulamanın hizmet <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> kapsayıcısında uygulamanınkine kaydedilmelidir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1623">To use a custom <xref:Microsoft.AspNetCore.Routing.IRouteConstraint>, the route constraint type must be registered with the app's <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> in the app's service container.</span></span> <span data-ttu-id="8f156-1624">A, <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> kısıtlama anahtarlarını bu <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> kısıtlamaları doğrulayan uygulamalara yönlendiren bir sözlüktür.</span><span class="sxs-lookup"><span data-stu-id="8f156-1624">A <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> is a dictionary that maps route constraint keys to <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> implementations that validate those constraints.</span></span> <span data-ttu-id="8f156-1625">Bir uygulama, <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> hizmetlerin bir `Startup.ConfigureServices` parçası olarak [güncellenebilir. Çağrı ekleme](xref:Microsoft.Extensions.DependencyInjection.RoutingServiceCollectionExtensions.AddRouting*) veya <xref:Microsoft.AspNetCore.Routing.RouteOptions> doğrudan . `services.Configure<RouteOptions>`</span><span class="sxs-lookup"><span data-stu-id="8f156-1625">An app's <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> can be updated in `Startup.ConfigureServices` either as part of a [services.AddRouting](xref:Microsoft.Extensions.DependencyInjection.RoutingServiceCollectionExtensions.AddRouting*) call or by configuring <xref:Microsoft.AspNetCore.Routing.RouteOptions> directly with `services.Configure<RouteOptions>`.</span></span> <span data-ttu-id="8f156-1626">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="8f156-1626">For example:</span></span>

```csharp
services.AddRouting(options =>
{
    options.ConstraintMap.Add("customName", typeof(MyCustomConstraint));
});
```

<span data-ttu-id="8f156-1627">Kısıtlama daha sonra, kısıtlama türünü kaydederken belirtilen ad kullanılarak, rotalara olağan şekilde uygulanabilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1627">The constraint can then be applied to routes in the usual manner, using the name specified when registering the constraint type.</span></span> <span data-ttu-id="8f156-1628">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="8f156-1628">For example:</span></span>

```csharp
[HttpGet("{id:customName}")]
public ActionResult<string> Get(string id)
```

## <a name="url-generation-reference"></a><span data-ttu-id="8f156-1629">URL oluşturma başvurusu</span><span class="sxs-lookup"><span data-stu-id="8f156-1629">URL generation reference</span></span>

<span data-ttu-id="8f156-1630">Aşağıdaki örnek, rota değerleri sözlüğü verilen bir rotaya bağlantı <xref:Microsoft.AspNetCore.Routing.RouteCollection>nın nasıl oluşturileceğini gösterir ve bir .</span><span class="sxs-lookup"><span data-stu-id="8f156-1630">The following example shows how to generate a link to a route given a dictionary of route values and a <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span></span>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

<span data-ttu-id="8f156-1631">Önceki <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> örneğin sonunda `/package/create/123`oluşturulan.</span><span class="sxs-lookup"><span data-stu-id="8f156-1631">The <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> generated at the end of the preceding sample is `/package/create/123`.</span></span> <span data-ttu-id="8f156-1632">Sözlük, "Paket Rotasını `operation` Takip Et" şablonunun ve `id` rota değerlerini sağlar. `package/{operation}/{id}`</span><span class="sxs-lookup"><span data-stu-id="8f156-1632">The dictionary supplies the `operation` and `id` route values of the "Track Package Route" template, `package/{operation}/{id}`.</span></span> <span data-ttu-id="8f156-1633">Ayrıntılar için, Yönlendirme Aracı [Kullan](#use-routing-middleware) bölümündeki örnek kodu veya [örnek uygulamaya](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples)bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1633">For details, see the sample code in the [Use Routing Middleware](#use-routing-middleware) section or the [sample app](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span></span>

<span data-ttu-id="8f156-1634">Oluşturucuya ikinci parametre ortam değerleri topluluğudur. *ambient values* <xref:Microsoft.AspNetCore.Routing.VirtualPathContext></span><span class="sxs-lookup"><span data-stu-id="8f156-1634">The second parameter to the <xref:Microsoft.AspNetCore.Routing.VirtualPathContext> constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="8f156-1635">Ortam değerleri, geliştiricinin istek bağlamında belirtmesi gereken değer sayısını sınırladıkları için kullanımı uygundur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1635">Ambient values are convenient to use because they limit the number of values a developer must specify within a request context.</span></span> <span data-ttu-id="8f156-1636">Geçerli isteğin geçerli rota değerleri bağlantı oluşturma için ortam değerleri olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1636">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="8f156-1637">Core MVC `About` uygulamasının ASP.NET `HomeController`eyleminde, ortam değerinin `Index` &mdash; `Home` kullanıldığı eyleme bağlantı vermek için denetleyici rota değerini belirtmeniz gerekmez.</span><span class="sxs-lookup"><span data-stu-id="8f156-1637">In an ASP.NET Core MVC app's `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action&mdash;the ambient value of `Home` is used.</span></span>

<span data-ttu-id="8f156-1638">Parametreyle eşleşmeyan ortam değerleri yoksayılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1638">Ambient values that don't match a parameter are ignored.</span></span> <span data-ttu-id="8f156-1639">Ortam değerleri, açıkça sağlanan bir değer ortam değerini geçersiz kıldığında da yoksayılır.</span><span class="sxs-lookup"><span data-stu-id="8f156-1639">Ambient values are also ignored when an explicitly provided value overrides the ambient value.</span></span> <span data-ttu-id="8f156-1640">Eşleştirme URL'de soldan sağa gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1640">Matching occurs from left to right in the URL.</span></span>

<span data-ttu-id="8f156-1641">Açıkça sağlanan ancak rotanın bir kesimiyle eşleşmeyan değerler sorgu dizesine eklenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1641">Values explicitly provided but that don't match a segment of the route are added to the query string.</span></span> <span data-ttu-id="8f156-1642">Aşağıdaki tablo, rota şablonu `{controller}/{action}/{id?}`kullanırken sonucu gösterir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1642">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="8f156-1643">Ortam Değerleri</span><span class="sxs-lookup"><span data-stu-id="8f156-1643">Ambient Values</span></span>                     | <span data-ttu-id="8f156-1644">Açık Değerler</span><span class="sxs-lookup"><span data-stu-id="8f156-1644">Explicit Values</span></span>                        | <span data-ttu-id="8f156-1645">Sonuç</span><span class="sxs-lookup"><span data-stu-id="8f156-1645">Result</span></span>                  |
| ---------------------------------- | -------------------------------------- | ----------------------- |
| <span data-ttu-id="8f156-1646">denetleyici = "Ana Sayfa"</span><span class="sxs-lookup"><span data-stu-id="8f156-1646">controller = "Home"</span></span>                | <span data-ttu-id="8f156-1647">action = "Hakkında"</span><span class="sxs-lookup"><span data-stu-id="8f156-1647">action = "About"</span></span>                       | `/Home/About`           |
| <span data-ttu-id="8f156-1648">denetleyici = "Ana Sayfa"</span><span class="sxs-lookup"><span data-stu-id="8f156-1648">controller = "Home"</span></span>                | <span data-ttu-id="8f156-1649">controller = "Order", action = "About"</span><span class="sxs-lookup"><span data-stu-id="8f156-1649">controller = "Order", action = "About"</span></span> | `/Order/About`          |
| <span data-ttu-id="8f156-1650">denetleyici = "Ev", renk = "Kırmızı"</span><span class="sxs-lookup"><span data-stu-id="8f156-1650">controller = "Home", color = "Red"</span></span> | <span data-ttu-id="8f156-1651">action = "Hakkında"</span><span class="sxs-lookup"><span data-stu-id="8f156-1651">action = "About"</span></span>                       | `/Home/About`           |
| <span data-ttu-id="8f156-1652">denetleyici = "Ana Sayfa"</span><span class="sxs-lookup"><span data-stu-id="8f156-1652">controller = "Home"</span></span>                | <span data-ttu-id="8f156-1653">action = "About", color = "Red"</span><span class="sxs-lookup"><span data-stu-id="8f156-1653">action = "About", color = "Red"</span></span>        | `/Home/About?color=Red` |

<span data-ttu-id="8f156-1654">Bir rotanın bir parametreye karşılık gelen varsayılan değeri varsa ve bu değer açıkça sağlanmışsa, varsayılan değerle eşleşmesi gerekir:</span><span class="sxs-lookup"><span data-stu-id="8f156-1654">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
    defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="8f156-1655">Bağlantı oluşturma yalnızca eşleşen değerler sağlandığında ve `controller` `action` sağlandığında bu yol için bir bağlantı oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8f156-1655">Link generation only generates a link for this route when the matching values for `controller` and `action` are provided.</span></span>

## <a name="complex-segments"></a><span data-ttu-id="8f156-1656">Karmaşık segmentler</span><span class="sxs-lookup"><span data-stu-id="8f156-1656">Complex segments</span></span>

<span data-ttu-id="8f156-1657">Karmaşık segmentler (örneğin), `[Route("/x{token}y")]`açgözlü olmayan bir şekilde sağdan sola doğru edebi eşleşerek işlenir.</span><span class="sxs-lookup"><span data-stu-id="8f156-1657">Complex segments (for example `[Route("/x{token}y")]`) are processed by matching up literals from right to left in a non-greedy way.</span></span> <span data-ttu-id="8f156-1658">Karmaşık kesimlerin nasıl eşleştinle ilgili ayrıntılı bir açıklama için [bu koda](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) bakın.</span><span class="sxs-lookup"><span data-stu-id="8f156-1658">See [this code](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) for a detailed explanation of how complex segments are matched.</span></span> <span data-ttu-id="8f156-1659">[Kod örneği](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) ASP.NET Core tarafından kullanılmaz, ancak karmaşık kesimlerin iyi bir açıklamasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="8f156-1659">The [code sample](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) is not used by ASP.NET Core, but it provides a good explanation of complex segments.</span></span>

::: moniker-end
