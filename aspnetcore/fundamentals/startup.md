---
title: "Uygulama başlangıç ASP.NET Çekirdeği"
author: ardalis
description: "Hizmetler ve uygulamanın isteği ardışık düzeni ASP.NET Core başlangıç sınıfında nasıl yapılandırır bulur."
keywords: "ASP.NET Core, başlatma, yapılandırma yöntemi, ConfigureServices yöntemi"
ms.author: tdykstra
manager: wpickett
ms.date: 02/29/2017
ms.topic: article
ms.technology: aspnet
ms.prod: asp.net-core
uid: fundamentals/startup
ms.openlocfilehash: 83b2647df8beec1feae33400224dacf9823be9b4
ms.sourcegitcommit: 8f42ab93402c1b8044815e1e48d0bb84c81f8b59
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/29/2017
---
# <a name="application-startup-in-aspnet-core"></a><span data-ttu-id="0df06-104">Uygulama başlangıç ASP.NET Çekirdeği</span><span class="sxs-lookup"><span data-stu-id="0df06-104">Application Startup in ASP.NET Core</span></span>

<span data-ttu-id="0df06-105">Tarafından [Steve Smith](https://ardalis.com/) ve [zel Dykstra](https://github.com/tdykstra/)</span><span class="sxs-lookup"><span data-stu-id="0df06-105">By [Steve Smith](https://ardalis.com/) and [Tom Dykstra](https://github.com/tdykstra/)</span></span>

<span data-ttu-id="0df06-106">`Startup` Sınıfı, hizmetleri ve uygulamanın istek ardışık düzenini yapılandırır.</span><span class="sxs-lookup"><span data-stu-id="0df06-106">The `Startup` class configures services and the application's request pipeline.</span></span>

## <a name="the-startup-class"></a><span data-ttu-id="0df06-107">Başlangıç sınıfı</span><span class="sxs-lookup"><span data-stu-id="0df06-107">The Startup class</span></span>

<span data-ttu-id="0df06-108">ASP.NET Core uygulamaları gerektiren bir `Startup` adlı sınıfı `Startup` kural tarafından.</span><span class="sxs-lookup"><span data-stu-id="0df06-108">ASP.NET Core apps require a `Startup` class, which is named `Startup` by convention.</span></span> <span data-ttu-id="0df06-109">Başlangıç sınıfı adı belirtmeyin `Main` programın [WebHostBuilderExtensions](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.webhostbuilderextensions) [ `UseStartup<TStartup>` ](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.webhostbuilderextensions#Microsoft_AspNetCore_Hosting_WebHostBuilderExtensions_UseStartup__1_Microsoft_AspNetCore_Hosting_IWebHostBuilder_) yöntemi.</span><span class="sxs-lookup"><span data-stu-id="0df06-109">You specify the startup class name in the `Main` program's [WebHostBuilderExtensions](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.webhostbuilderextensions) [`UseStartup<TStartup>`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.webhostbuilderextensions#Microsoft_AspNetCore_Hosting_WebHostBuilderExtensions_UseStartup__1_Microsoft_AspNetCore_Hosting_IWebHostBuilder_) method.</span></span> <span data-ttu-id="0df06-110">Bkz: [barındırma](xref:fundamentals/hosting) hakkında daha fazla bilgi için `WebHostBuilder`, çalıştığı önce `Startup`.</span><span class="sxs-lookup"><span data-stu-id="0df06-110">See [Hosting](xref:fundamentals/hosting) to learn more about `WebHostBuilder`, which runs before `Startup`.</span></span>

<span data-ttu-id="0df06-111">Ayrı tanımlayabilirsiniz `Startup` farklı ortamları ve uygun bir seçilecektir çalışma zamanında için sınıflar.</span><span class="sxs-lookup"><span data-stu-id="0df06-111">You can define separate `Startup` classes for different environments, and the appropriate one will be selected at runtime.</span></span> <span data-ttu-id="0df06-112">Belirtirseniz `startupAssembly` içinde [WebHost yapılandırma](https://docs.microsoft.com/aspnet/core/fundamentals/hosting?tabs=aspnetcore2x#configuring-a-host) veya barındırma seçenekleri, bu başlangıç Derleme yüklenemedi ve arama bir `Startup` veya `Startup[Environment]` türü.</span><span class="sxs-lookup"><span data-stu-id="0df06-112">If you specify `startupAssembly` in the [WebHost configuration](https://docs.microsoft.com/aspnet/core/fundamentals/hosting?tabs=aspnetcore2x#configuring-a-host) or options, hosting will load that startup assembly and search for a `Startup` or `Startup[Environment]` type.</span></span> <span data-ttu-id="0df06-113">Geçerli ortamı öncelik verilmesini, ad soneki eşleşmeleri, dolayısıyla uygulama çalıştırma sınıfı *geliştirme* ortamı ve her ikisi de içerir bir `Startup` ve `StartupDevelopment` sınıfı, `StartupDevelopment` sınıfı olacaktır kullanılır.</span><span class="sxs-lookup"><span data-stu-id="0df06-113">The class whose name suffix matches the current environment will be prioritized, so if the app is run in the *Development* environment, and includes both a `Startup` and a `StartupDevelopment` class, the `StartupDevelopment` class will be used.</span></span> <span data-ttu-id="0df06-114">Bkz: [FindStartupType](https://github.com/aspnet/Hosting/blob/rel/1.1.0/src/Microsoft.AspNetCore.Hosting/Internal/StartupLoader.cs) içinde `StartupLoader` ve [birden çok ortamlarıyla çalışma](environments.md#startup-conventions).</span><span class="sxs-lookup"><span data-stu-id="0df06-114">See [FindStartupType](https://github.com/aspnet/Hosting/blob/rel/1.1.0/src/Microsoft.AspNetCore.Hosting/Internal/StartupLoader.cs) in `StartupLoader` and [Working with multiple environments](environments.md#startup-conventions).</span></span>

<span data-ttu-id="0df06-115">Alternatif olarak, bir sabit tanımlayabilirsiniz `Startup` çağırarak ortam bağımsız olarak kullanılacak sınıfı `UseStartup<TStartup>`.</span><span class="sxs-lookup"><span data-stu-id="0df06-115">Alternatively, you can define a fixed `Startup` class that will be used regardless of the environment by calling `UseStartup<TStartup>`.</span></span> <span data-ttu-id="0df06-116">Bu önerilen yaklaşımdır.</span><span class="sxs-lookup"><span data-stu-id="0df06-116">This is the recommended approach.</span></span>

<span data-ttu-id="0df06-117">`Startup` Sınıfı oluşturucusu aracılığıyla sağlanan bağımlılıklar kabul edebileceği [bağımlılık ekleme](xref:fundamentals/dependency-injection).</span><span class="sxs-lookup"><span data-stu-id="0df06-117">The `Startup` class constructor can accept dependencies that are provided through [dependency injection](xref:fundamentals/dependency-injection).</span></span> <span data-ttu-id="0df06-118">Ortak bir yaklaşım kullanmaktır `IHostingEnvironment` ayarlamak için [yapılandırma](xref:fundamentals/configuration/index) kaynakları.</span><span class="sxs-lookup"><span data-stu-id="0df06-118">A common approach is to use `IHostingEnvironment` to set up [configuration](xref:fundamentals/configuration/index) sources.</span></span>

<span data-ttu-id="0df06-119">`Startup` Sınıfı içermelidir bir `Configure` yöntemi ve istenirse bir `ConfigureServices` her ikisi de denir uygulama başladığında yöntemi.</span><span class="sxs-lookup"><span data-stu-id="0df06-119">The `Startup` class must include a `Configure` method and can optionally include a `ConfigureServices` method, both of which are called when the application starts.</span></span> <span data-ttu-id="0df06-120">Sınıf da içerebilir [ortama özgü sürümleri bu yöntemlerin](xref:fundamentals/environments#startup-conventions).</span><span class="sxs-lookup"><span data-stu-id="0df06-120">The class can also include [environment-specific versions of these methods](xref:fundamentals/environments#startup-conventions).</span></span> <span data-ttu-id="0df06-121">`ConfigureServices`, varsa, önce çağrılır `Configure`.</span><span class="sxs-lookup"><span data-stu-id="0df06-121">`ConfigureServices`, if present, is called before `Configure`.</span></span>

<span data-ttu-id="0df06-122">Hakkında bilgi edinin [uygulama başlatma sırasında özel durum işleme](xref:fundamentals/error-handling#startup-exception-handling).</span><span class="sxs-lookup"><span data-stu-id="0df06-122">Learn about [handling exceptions during application startup](xref:fundamentals/error-handling#startup-exception-handling).</span></span>

## <a name="the-configureservices-method"></a><span data-ttu-id="0df06-123">ConfigureServices yöntemi</span><span class="sxs-lookup"><span data-stu-id="0df06-123">The ConfigureServices method</span></span>

<span data-ttu-id="0df06-124">[ConfigureServices](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.startupbase#Microsoft_AspNetCore_Hosting_StartupBase_ConfigureServices_Microsoft_Extensions_DependencyInjection_IServiceCollection_) yöntemdir isteğe bağlıdır; ancak kullandıysanız, önce çağrılır `Configure` web ana bilgisayarı tarafından yöntemi.</span><span class="sxs-lookup"><span data-stu-id="0df06-124">The [ConfigureServices](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.startupbase#Microsoft_AspNetCore_Hosting_StartupBase_ConfigureServices_Microsoft_Extensions_DependencyInjection_IServiceCollection_) method is optional; but if used, it's called before the `Configure` method by the web host.</span></span> <span data-ttu-id="0df06-125">Web ana bilgisayarı önce bazı hizmetler yapılandırabilirsiniz ``Startup`` yöntemleri çağrılmadan (bkz [barındırma](xref:fundamentals/hosting)).</span><span class="sxs-lookup"><span data-stu-id="0df06-125">The web host may configure some services before ``Startup`` methods are called (see [hosting](xref:fundamentals/hosting)).</span></span> <span data-ttu-id="0df06-126">Kural tarafından [yapılandırma seçenekleri](xref:fundamentals/configuration/index) Bu yöntemde ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="0df06-126">By convention, [Configuration options](xref:fundamentals/configuration/index) are set in this method.</span></span>

<span data-ttu-id="0df06-127">Önemli kurulum gerektiren özellikleri vardır `Add[Service]` genişletme yöntemleri [IServiceCollection](https://docs.microsoft.com/aspnet/core/api/microsoft.extensions.dependencyinjection.iservicecollection).</span><span class="sxs-lookup"><span data-stu-id="0df06-127">For features that require substantial setup there are `Add[Service]` extension methods on [IServiceCollection](https://docs.microsoft.com/aspnet/core/api/microsoft.extensions.dependencyinjection.iservicecollection).</span></span> <span data-ttu-id="0df06-128">Bu örnekte varsayılan web sitesi şablondan Entity Framework, kimlik ve MVC hizmetleri kullanmak üzere uygulamayı yapılandırır:</span><span class="sxs-lookup"><span data-stu-id="0df06-128">This example from the default web site template configures the app to use services for Entity Framework, Identity, and MVC:</span></span>

[!code-csharp[Main](../common/samples/WebApplication1/Startup.cs?highlight=4,7,11&start=40&end=55)]

<span data-ttu-id="0df06-129">Hizmetler için hizmet kapsayıcı ekleme kullanılabilir hale getirir bunları aracılığıyla uygulamanızı içinde [bağımlılık ekleme](xref:fundamentals/dependency-injection).</span><span class="sxs-lookup"><span data-stu-id="0df06-129">Adding services to the services container makes them available within your application via [dependency injection](xref:fundamentals/dependency-injection).</span></span>

## <a name="services-available-in-startup"></a><span data-ttu-id="0df06-130">Başlangıç kullanılabilir hizmetler</span><span class="sxs-lookup"><span data-stu-id="0df06-130">Services Available in Startup</span></span>

<span data-ttu-id="0df06-131">ASP.NET Core bağımlılık ekleme uygulamanın başlatma sırasında hizmetleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="0df06-131">ASP.NET Core dependency injection provides services during an application's startup.</span></span> <span data-ttu-id="0df06-132">Üzerinde bir parametresi olarak uygun arabirimi ekleyerek bu hizmetleri isteyebilir, `Startup` sınıfının Oluşturucusu veya kendi `Configure` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="0df06-132">You can request these services by including the appropriate interface as a parameter on your `Startup` class's constructor or its `Configure` method.</span></span> <span data-ttu-id="0df06-133">`ConfigureServices` Yöntemi yalnızca geçen bir `IServiceCollection` parametre (ancak ek parametreler gerekli olmayacak şekilde bu koleksiyondan alınması tüm kayıtlı hizmet olabilir).</span><span class="sxs-lookup"><span data-stu-id="0df06-133">The `ConfigureServices` method only takes an `IServiceCollection` parameter (but any registered service can be retrieved from this collection, so additional parameters are not necessary).</span></span>

<span data-ttu-id="0df06-134">Genellikle tarafından istenen Hizmetleri bazıları aşağıda verilmiştir `Startup` yöntemleri:</span><span class="sxs-lookup"><span data-stu-id="0df06-134">Below are some of the services typically requested by `Startup` methods:</span></span>

* <span data-ttu-id="0df06-135">Oluşturucuda: `IHostingEnvironment`,`ILogger<Startup>`</span><span class="sxs-lookup"><span data-stu-id="0df06-135">In the constructor:  `IHostingEnvironment`, `ILogger<Startup>`</span></span>
* <span data-ttu-id="0df06-136">İçinde `ConfigureServices`:`IServiceCollection`</span><span class="sxs-lookup"><span data-stu-id="0df06-136">In `ConfigureServices`:  `IServiceCollection`</span></span>
* <span data-ttu-id="0df06-137">İçinde `Configure`: `IApplicationBuilder`, `IHostingEnvironment`,`ILoggerFactory`</span><span class="sxs-lookup"><span data-stu-id="0df06-137">In `Configure`:  `IApplicationBuilder`, `IHostingEnvironment`, `ILoggerFactory`</span></span>

<span data-ttu-id="0df06-138">Tarafından eklenen tüm hizmetleri ``WebHostBuilder`` ``ConfigureServices`` yöntemi istenen tarafından ``Startup`` sınıfı oluşturucusu veya kendi ``Configure`` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="0df06-138">Any services added by the ``WebHostBuilder`` ``ConfigureServices`` method may be requested by the ``Startup`` class constructor or its ``Configure`` method.</span></span> <span data-ttu-id="0df06-139">Kullanım `WebHostBuilder` sırasında tüm hizmetleri sağlamak için gereken `Startup` yöntemleri.</span><span class="sxs-lookup"><span data-stu-id="0df06-139">Use `WebHostBuilder` to provide any services you need during `Startup` methods.</span></span>

## <a name="the-configure-method"></a><span data-ttu-id="0df06-140">Yapılandırma yöntemi</span><span class="sxs-lookup"><span data-stu-id="0df06-140">The Configure method</span></span>

<span data-ttu-id="0df06-141">`Configure` Yöntemi, nasıl ASP.NET uygulaması HTTP isteklerine yanıt vereceğini belirtmek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="0df06-141">The `Configure` method is used to specify how the ASP.NET application will respond to HTTP requests.</span></span> <span data-ttu-id="0df06-142">İstek ardışık düzenini ekleyerek yapılandırılmış [ara yazılımı](middleware.md) bileşenleri için bir `IApplicationBuilder` bağımlılık ekleme tarafından sağlanan örneği.</span><span class="sxs-lookup"><span data-stu-id="0df06-142">The request pipeline is configured by adding [middleware](middleware.md) components to an `IApplicationBuilder` instance that is provided by dependency injection.</span></span>

<span data-ttu-id="0df06-143">Varsayılan web sitesi şablondan aşağıdaki örnekte, birkaç uzantı yöntemleri desteğiyle ardışık düzenini yapılandırmak için kullanılan [BrowserLink](http://vswebessentials.com/features/browserlink), hata sayfaları, statik dosyalar, ASP.NET MVC ve kimlik.</span><span class="sxs-lookup"><span data-stu-id="0df06-143">In the following example from the default web site template, several extension methods are used to configure the pipeline with support for [BrowserLink](http://vswebessentials.com/features/browserlink), error pages, static files, ASP.NET MVC, and Identity.</span></span>

[!code-csharp[Main](../common/samples/WebApplication1/Startup.cs?highlight=8,9,10,14,17,19,21&start=58&end=84)]

<span data-ttu-id="0df06-144">Her `Use` genişletme yöntemi ekler bir [ara yazılım](xref:fundamentals/middleware) istek ardışık düzenini bileşeni.</span><span class="sxs-lookup"><span data-stu-id="0df06-144">Each `Use` extension method adds a [middleware](xref:fundamentals/middleware) component to the request pipeline.</span></span> <span data-ttu-id="0df06-145">Örneğin, `UseMvc` genişletme yöntemi ekler [yönlendirme](routing.md) Ara istek ardışık düzenine ve yapılandırır [MVC](xref:mvc/overview) varsayılan işleyici olarak.</span><span class="sxs-lookup"><span data-stu-id="0df06-145">For instance, the `UseMvc` extension method adds the [routing](routing.md) middleware to the request pipeline and configures [MVC](xref:mvc/overview) as the default handler.</span></span>

<span data-ttu-id="0df06-146">Nasıl kullanılacağı hakkında daha fazla bilgi için `IApplicationBuilder`, bkz: [Ara](xref:fundamentals/middleware).</span><span class="sxs-lookup"><span data-stu-id="0df06-146">For more information about how to use `IApplicationBuilder`, see [Middleware](xref:fundamentals/middleware).</span></span>

<span data-ttu-id="0df06-147">Ek hizmetler, ister `IHostingEnvironment` ve `ILoggerFactory` yöntem imzası da belirtilebilir bu hizmetleri; bu durumda olacaktır [eklenen](dependency-injection.md) kullanılabilir olmaları durumunda.</span><span class="sxs-lookup"><span data-stu-id="0df06-147">Additional services, like `IHostingEnvironment` and `ILoggerFactory` may also be specified in the method signature, in which case these services will be [injected](dependency-injection.md) if they are available.</span></span> 

## <a name="additional-resources"></a><span data-ttu-id="0df06-148">Ek Kaynaklar</span><span class="sxs-lookup"><span data-stu-id="0df06-148">Additional Resources</span></span>

* [<span data-ttu-id="0df06-149">Birden çok ortamı ile çalışma</span><span class="sxs-lookup"><span data-stu-id="0df06-149">Working with Multiple Environments</span></span>](xref:fundamentals/environments)
* [<span data-ttu-id="0df06-150">Ara yazılım</span><span class="sxs-lookup"><span data-stu-id="0df06-150">Middleware</span></span>](xref:fundamentals/middleware)
* [<span data-ttu-id="0df06-151">Günlüğe kaydetme</span><span class="sxs-lookup"><span data-stu-id="0df06-151">Logging</span></span>](xref:fundamentals/logging/index)
* [<span data-ttu-id="0df06-152">Yapılandırma</span><span class="sxs-lookup"><span data-stu-id="0df06-152">Configuration</span></span>](xref:fundamentals/configuration/index)
